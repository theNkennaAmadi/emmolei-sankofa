var uv=Object.defineProperty;var dv=(r,e,t)=>e in r?uv(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Un=(r,e,t)=>(dv(r,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function hv(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function gh(r,e,t){return e&&hv(r.prototype,e),r}function xs(){return(xs=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}).apply(this,arguments)}function Xc(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}function Jm(r){return(Jm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(r)}function _h(r,e){return(_h=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(r,e)}function Qm(r,e,t){return(Qm=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(n,s,a){var o=[null];o.push.apply(o,s);var l=new(Function.bind.apply(n,o));return a&&_h(l,a.prototype),l}).apply(null,arguments)}function eg(r){var e=typeof Map=="function"?new Map:void 0;return(eg=function(t){if(t===null||Function.toString.call(t).indexOf("[native code]")===-1)return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return Qm(t,arguments,Jm(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_h(n,t)})(r)}function ga(r,e){try{var t=r()}catch(n){return e(n)}return t&&t.then?t.then(void 0,e):t}typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var Cr,fv="2.9.7",pv=function(){};(function(r){r[r.off=0]="off",r[r.error=1]="error",r[r.warning=2]="warning",r[r.info=3]="info",r[r.debug=4]="debug"})(Cr||(Cr={}));var uf=Cr.off,bs=function(){function r(t){this.t=t}r.getLevel=function(){return uf},r.setLevel=function(t){return uf=Cr[t]};var e=r.prototype;return e.error=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];this.i(console.error,Cr.error,n)},e.warn=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];this.i(console.warn,Cr.warning,n)},e.info=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];this.i(console.info,Cr.info,n)},e.debug=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];this.i(console.log,Cr.debug,n)},e.i=function(t,n,s){n<=r.getLevel()&&t.apply(console,["["+this.t+"] "].concat(s))},r}(),ds=xh,mv=ng,gv=vh,_v=ig,vv=rg,tg="/",yv=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function vh(r,e){for(var t,n=[],s=0,a=0,o="",l=e&&e.delimiter||tg,u=e&&e.whitelist||void 0,h=!1;(t=yv.exec(r))!==null;){var f=t[0],c=t[1],d=t.index;if(o+=r.slice(a,d),a=d+f.length,c)o+=c[1],h=!0;else{var p="",g=t[2],v=t[3],_=t[4],m=t[5];if(!h&&o.length){var y=o.length-1,x=o[y];(!u||u.indexOf(x)>-1)&&(p=x,o=o.slice(0,y))}o&&(n.push(o),o="",h=!1);var b=v||_,T=p||l;n.push({name:g||s++,prefix:p,delimiter:T,optional:m==="?"||m==="*",repeat:m==="+"||m==="*",pattern:b?xv(b):"[^"+Qi(T===l?T:T+l)+"]+?"})}}return(o||a<r.length)&&n.push(o+r.substr(a)),n}function ng(r,e){return function(t,n){var s=r.exec(t);if(!s)return!1;for(var a=s[0],o=s.index,l={},u=n&&n.decode||decodeURIComponent,h=1;h<s.length;h++)if(s[h]!==void 0){var f=e[h-1];l[f.name]=f.repeat?s[h].split(f.delimiter).map(function(c){return u(c,f)}):u(s[h],f)}return{path:a,index:o,params:l}}}function ig(r,e){for(var t=new Array(r.length),n=0;n<r.length;n++)typeof r[n]=="object"&&(t[n]=new RegExp("^(?:"+r[n].pattern+")$",yh(e)));return function(s,a){for(var o="",l=a&&a.encode||encodeURIComponent,u=!a||a.validate!==!1,h=0;h<r.length;h++){var f=r[h];if(typeof f!="string"){var c,d=s?s[f.name]:void 0;if(Array.isArray(d)){if(!f.repeat)throw new TypeError('Expected "'+f.name+'" to not repeat, but got array');if(d.length===0){if(f.optional)continue;throw new TypeError('Expected "'+f.name+'" to not be empty')}for(var p=0;p<d.length;p++){if(c=l(d[p],f),u&&!t[h].test(c))throw new TypeError('Expected all "'+f.name+'" to match "'+f.pattern+'"');o+=(p===0?f.prefix:f.delimiter)+c}}else if(typeof d!="string"&&typeof d!="number"&&typeof d!="boolean"){if(!f.optional)throw new TypeError('Expected "'+f.name+'" to be '+(f.repeat?"an array":"a string"))}else{if(c=l(String(d),f),u&&!t[h].test(c))throw new TypeError('Expected "'+f.name+'" to match "'+f.pattern+'", but got "'+c+'"');o+=f.prefix+c}}else o+=f}return o}}function Qi(r){return r.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function xv(r){return r.replace(/([=!:$/()])/g,"\\$1")}function yh(r){return r&&r.sensitive?"":"i"}function rg(r,e,t){for(var n=(t=t||{}).strict,s=t.start!==!1,a=t.end!==!1,o=t.delimiter||tg,l=[].concat(t.endsWith||[]).map(Qi).concat("$").join("|"),u=s?"^":"",h=0;h<r.length;h++){var f=r[h];if(typeof f=="string")u+=Qi(f);else{var c=f.repeat?"(?:"+f.pattern+")(?:"+Qi(f.delimiter)+"(?:"+f.pattern+"))*":f.pattern;e&&e.push(f),u+=f.optional?f.prefix?"(?:"+Qi(f.prefix)+"("+c+"))?":"("+c+")?":Qi(f.prefix)+"("+c+")"}}if(a)n||(u+="(?:"+Qi(o)+")?"),u+=l==="$"?"$":"(?="+l+")";else{var d=r[r.length-1],p=typeof d=="string"?d[d.length-1]===o:d===void 0;n||(u+="(?:"+Qi(o)+"(?="+l+"))?"),p||(u+="(?="+Qi(o)+"|"+l+")")}return new RegExp(u,yh(t))}function xh(r,e,t){return r instanceof RegExp?function(n,s){if(!s)return n;var a=n.source.match(/\((?!\?)/g);if(a)for(var o=0;o<a.length;o++)s.push({name:o,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return n}(r,e):Array.isArray(r)?function(n,s,a){for(var o=[],l=0;l<n.length;l++)o.push(xh(n[l],s,a).source);return new RegExp("(?:"+o.join("|")+")",yh(a))}(r,e,t):function(n,s,a){return rg(vh(n,a),s,a)}(r,e,t)}ds.match=function(r,e){var t=[];return ng(xh(r,t,e),t)},ds.regexpToFunction=mv,ds.parse=gv,ds.compile=function(r,e){return ig(vh(r,e),e)},ds.tokensToFunction=_v,ds.tokensToRegExp=vv;var Vi={container:"container",history:"history",namespace:"namespace",prefix:"data-barba",prevent:"prevent",wrapper:"wrapper"},Ss=new(function(){function r(){this.o=Vi,this.u=new DOMParser}var e=r.prototype;return e.toString=function(t){return t.outerHTML},e.toDocument=function(t){return this.u.parseFromString(t,"text/html")},e.toElement=function(t){var n=document.createElement("div");return n.innerHTML=t,n},e.getHtml=function(t){return t===void 0&&(t=document),this.toString(t.documentElement)},e.getWrapper=function(t){return t===void 0&&(t=document),t.querySelector("["+this.o.prefix+'="'+this.o.wrapper+'"]')},e.getContainer=function(t){return t===void 0&&(t=document),t.querySelector("["+this.o.prefix+'="'+this.o.container+'"]')},e.removeContainer=function(t){document.body.contains(t)&&t.parentNode.removeChild(t)},e.addContainer=function(t,n){var s=this.getContainer();s?this.s(t,s):n.appendChild(t)},e.getNamespace=function(t){t===void 0&&(t=document);var n=t.querySelector("["+this.o.prefix+"-"+this.o.namespace+"]");return n?n.getAttribute(this.o.prefix+"-"+this.o.namespace):null},e.getHref=function(t){if(t.tagName&&t.tagName.toLowerCase()==="a"){if(typeof t.href=="string")return t.href;var n=t.getAttribute("href")||t.getAttribute("xlink:href");if(n)return this.resolveUrl(n.baseVal||n)}return null},e.resolveUrl=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var a=n.length;if(a===0)throw new Error("resolveUrl requires at least one argument; got none.");var o=document.createElement("base");if(o.href=arguments[0],a===1)return o.href;var l=document.getElementsByTagName("head")[0];l.insertBefore(o,l.firstChild);for(var u,h=document.createElement("a"),f=1;f<a;f++)h.href=arguments[f],o.href=u=h.href;return l.removeChild(o),u},e.s=function(t,n){n.parentNode.insertBefore(t,n.nextSibling)},r}()),sg=new(function(){function r(){this.h=[],this.v=-1}var e=r.prototype;return e.init=function(t,n){this.l="barba";var s={ns:n,scroll:{x:window.scrollX,y:window.scrollY},url:t};this.h.push(s),this.v=0;var a={from:this.l,index:0,states:[].concat(this.h)};window.history&&window.history.replaceState(a,"",t)},e.change=function(t,n,s){if(s&&s.state){var a=s.state,o=a.index;n=this.m(this.v-o),this.replace(a.states),this.v=o}else this.add(t,n);return n},e.add=function(t,n){var s=this.size,a=this.p(n),o={ns:"tmp",scroll:{x:window.scrollX,y:window.scrollY},url:t};this.h.push(o),this.v=s;var l={from:this.l,index:s,states:[].concat(this.h)};switch(a){case"push":window.history&&window.history.pushState(l,"",t);break;case"replace":window.history&&window.history.replaceState(l,"",t)}},e.update=function(t,n){var s=n||this.v,a=xs({},this.get(s),{},t);this.set(s,a)},e.remove=function(t){t?this.h.splice(t,1):this.h.pop(),this.v--},e.clear=function(){this.h=[],this.v=-1},e.replace=function(t){this.h=t},e.get=function(t){return this.h[t]},e.set=function(t,n){return this.h[t]=n},e.p=function(t){var n="push",s=t,a=Vi.prefix+"-"+Vi.history;return s.hasAttribute&&s.hasAttribute(a)&&(n=s.getAttribute(a)),n},e.m=function(t){return Math.abs(t)>1?t>0?"forward":"back":t===0?"popstate":t>0?"back":"forward"},gh(r,[{key:"current",get:function(){return this.h[this.v]}},{key:"state",get:function(){return this.h[this.h.length-1]}},{key:"previous",get:function(){return this.v<1?null:this.h[this.v-1]}},{key:"size",get:function(){return this.h.length}}]),r}()),bc=function(r,e){try{var t=function(){if(!e.next.html)return Promise.resolve(r).then(function(n){var s=e.next;if(n){var a=Ss.toElement(n);s.namespace=Ss.getNamespace(a),s.container=Ss.getContainer(a),s.html=n,sg.update({ns:s.namespace});var o=Ss.toDocument(n);document.title=o.title}})}();return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(n){return Promise.reject(n)}},ag=ds,bv={__proto__:null,update:bc,nextTick:function(){return new Promise(function(r){window.requestAnimationFrame(r)})},pathToRegexp:ag},og=function(){return window.location.origin},Vo=function(r){return r===void 0&&(r=window.location.href),Sc(r).port},Sc=function(r){var e,t=r.match(/:\d+/);if(t===null)/^http/.test(r)&&(e=80),/^https/.test(r)&&(e=443);else{var n=t[0].substring(1);e=parseInt(n,10)}var s,a=r.replace(og(),""),o={},l=a.indexOf("#");l>=0&&(s=a.slice(l+1),a=a.slice(0,l));var u=a.indexOf("?");return u>=0&&(o=lg(a.slice(u+1)),a=a.slice(0,u)),{hash:s,path:a,port:e,query:o}},lg=function(r){return r.split("&").reduce(function(e,t){var n=t.split("=");return e[n[0]]=n[1],e},{})},bd=function(r){return r===void 0&&(r=window.location.href),r.replace(/(\/#.*|\/|#.*)$/,"")},Sv={__proto__:null,getHref:function(){return window.location.href},getOrigin:og,getPort:Vo,getPath:function(r){return r===void 0&&(r=window.location.href),Sc(r).path},parse:Sc,parseQuery:lg,clean:bd};function wv(r,e,t){return e===void 0&&(e=2e3),new Promise(function(n,s){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE){if(a.status===200)n(a.responseText);else if(a.status){var o={status:a.status,statusText:a.statusText};t(r,o),s(o)}}},a.ontimeout=function(){var o=new Error("Timeout error ["+e+"]");t(r,o),s(o)},a.onerror=function(){var o=new Error("Fetch error");t(r,o),s(o)},a.open("GET",r),a.timeout=e,a.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),a.setRequestHeader("x-barba","yes"),a.send()})}var Ev=function(r){return!!r&&(typeof r=="object"||typeof r=="function")&&typeof r.then=="function"};function xa(r,e){return e===void 0&&(e={}),function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var a=!1,o=new Promise(function(l,u){e.async=function(){return a=!0,function(f,c){f?u(f):l(c)}};var h=r.apply(e,n);a||(Ev(h)?h.then(l,u):l(h))});return o}}var Ar=new(function(r){function e(){var n;return(n=r.call(this)||this).logger=new bs("@barba/core"),n.all=["ready","page","reset","currentAdded","currentRemoved","nextAdded","nextRemoved","beforeOnce","once","afterOnce","before","beforeLeave","leave","afterLeave","beforeEnter","enter","afterEnter","after"],n.registered=new Map,n.init(),n}Xc(e,r);var t=e.prototype;return t.init=function(){var n=this;this.registered.clear(),this.all.forEach(function(s){n[s]||(n[s]=function(a,o){n.registered.has(s)||n.registered.set(s,new Set),n.registered.get(s).add({ctx:o||{},fn:a})})})},t.do=function(n){for(var s=this,a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];if(this.registered.has(n)){var u=Promise.resolve();return this.registered.get(n).forEach(function(h){u=u.then(function(){return xa(h.fn,h.ctx).apply(void 0,o)})}),u.catch(function(h){s.logger.debug("Hook error ["+n+"]"),s.logger.error(h)})}return Promise.resolve()},t.clear=function(){var n=this;this.all.forEach(function(s){delete n[s]}),this.init()},t.help=function(){this.logger.info("Available hooks: "+this.all.join(","));var n=[];this.registered.forEach(function(s,a){return n.push(a)}),this.logger.info("Registered hooks: "+n.join(","))},e}(pv)),cg=function(){function r(e){if(this.P=[],typeof e=="boolean")this.g=e;else{var t=Array.isArray(e)?e:[e];this.P=t.map(function(n){return ag(n)})}}return r.prototype.checkHref=function(e){if(typeof this.g=="boolean")return this.g;var t=Sc(e).path;return this.P.some(function(n){return n.exec(t)!==null})},r}(),Tv=function(r){function e(n){var s;return(s=r.call(this,n)||this).k=new Map,s}Xc(e,r);var t=e.prototype;return t.set=function(n,s,a){return this.k.set(n,{action:a,request:s}),{action:a,request:s}},t.get=function(n){return this.k.get(n)},t.getRequest=function(n){return this.k.get(n).request},t.getAction=function(n){return this.k.get(n).action},t.has=function(n){return!this.checkHref(n)&&this.k.has(n)},t.delete=function(n){return this.k.delete(n)},t.update=function(n,s){var a=xs({},this.k.get(n),{},s);return this.k.set(n,a),a},e}(cg),Mv=function(){return!window.history.pushState},Av=function(r){return!r.el||!r.href},Cv=function(r){var e=r.event;return e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey},Dv=function(r){var e=r.el;return e.hasAttribute("target")&&e.target==="_blank"},Pv=function(r){var e=r.el;return e.protocol!==void 0&&window.location.protocol!==e.protocol||e.hostname!==void 0&&window.location.hostname!==e.hostname},Rv=function(r){var e=r.el;return e.port!==void 0&&Vo()!==Vo(e.href)},Lv=function(r){var e=r.el;return e.getAttribute&&typeof e.getAttribute("download")=="string"},Iv=function(r){return r.el.hasAttribute(Vi.prefix+"-"+Vi.prevent)},Fv=function(r){return!!r.el.closest("["+Vi.prefix+"-"+Vi.prevent+'="all"]')},Ov=function(r){var e=r.href;return bd(e)===bd()&&Vo(e)===Vo()},Nv=function(r){function e(n){var s;return(s=r.call(this,n)||this).suite=[],s.tests=new Map,s.init(),s}Xc(e,r);var t=e.prototype;return t.init=function(){this.add("pushState",Mv),this.add("exists",Av),this.add("newTab",Cv),this.add("blank",Dv),this.add("corsDomain",Pv),this.add("corsPort",Rv),this.add("download",Lv),this.add("preventSelf",Iv),this.add("preventAll",Fv),this.add("sameUrl",Ov,!1)},t.add=function(n,s,a){a===void 0&&(a=!0),this.tests.set(n,s),a&&this.suite.push(n)},t.run=function(n,s,a,o){return this.tests.get(n)({el:s,event:a,href:o})},t.checkLink=function(n,s,a){var o=this;return this.suite.some(function(l){return o.run(l,n,s,a)})},e}(cg),du=function(r){function e(t,n){var s;n===void 0&&(n="Barba error");for(var a=arguments.length,o=new Array(a>2?a-2:0),l=2;l<a;l++)o[l-2]=arguments[l];return(s=r.call.apply(r,[this].concat(o))||this).error=t,s.label=n,Error.captureStackTrace&&Error.captureStackTrace(function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(s),e),s.name="BarbaError",s}return Xc(e,r),e}(eg(Error)),Uv=function(){function r(t){t===void 0&&(t=[]),this.logger=new bs("@barba/core"),this.all=[],this.page=[],this.once=[],this.A=[{name:"namespace",type:"strings"},{name:"custom",type:"function"}],t&&(this.all=this.all.concat(t)),this.update()}var e=r.prototype;return e.add=function(t,n){switch(t){case"rule":this.A.splice(n.position||0,0,n.value);break;case"transition":default:this.all.push(n)}this.update()},e.resolve=function(t,n){var s=this;n===void 0&&(n={});var a=n.once?this.once:this.page;a=a.filter(n.self?function(d){return d.name&&d.name==="self"}:function(d){return!d.name||d.name!=="self"});var o=new Map,l=a.find(function(d){var p=!0,g={};return!(!n.self||d.name!=="self")||(s.A.reverse().forEach(function(v){p&&(p=s.R(d,v,t,g),d.from&&d.to&&(p=s.R(d,v,t,g,"from")&&s.R(d,v,t,g,"to")),d.from&&!d.to&&(p=s.R(d,v,t,g,"from")),!d.from&&d.to&&(p=s.R(d,v,t,g,"to")))}),o.set(d,g),p)}),u=o.get(l),h=[];if(h.push(n.once?"once":"page"),n.self&&h.push("self"),u){var f,c=[l];Object.keys(u).length>0&&c.push(u),(f=this.logger).info.apply(f,["Transition found ["+h.join(",")+"]"].concat(c))}else this.logger.info("No transition found ["+h.join(",")+"]");return l},e.update=function(){var t=this;this.all=this.all.map(function(n){return t.T(n)}).sort(function(n,s){return n.priority-s.priority}).reverse().map(function(n){return delete n.priority,n}),this.page=this.all.filter(function(n){return n.leave!==void 0||n.enter!==void 0}),this.once=this.all.filter(function(n){return n.once!==void 0})},e.R=function(t,n,s,a,o){var l=!0,u=!1,h=t,f=n.name,c=f,d=f,p=f,g=o?h[o]:h,v=o==="to"?s.next:s.current;if(o?g&&g[f]:g[f]){switch(n.type){case"strings":default:var _=Array.isArray(g[c])?g[c]:[g[c]];v[c]&&_.indexOf(v[c])!==-1&&(u=!0),_.indexOf(v[c])===-1&&(l=!1);break;case"object":var m=Array.isArray(g[d])?g[d]:[g[d]];v[d]?(v[d].name&&m.indexOf(v[d].name)!==-1&&(u=!0),m.indexOf(v[d].name)===-1&&(l=!1)):l=!1;break;case"function":g[p](s)?u=!0:l=!1}u&&(o?(a[o]=a[o]||{},a[o][f]=h[o][f]):a[f]=h[f])}return l},e.O=function(t,n,s){var a=0;return(t[n]||t.from&&t.from[n]||t.to&&t.to[n])&&(a+=Math.pow(10,s),t.from&&t.from[n]&&(a+=1),t.to&&t.to[n]&&(a+=2)),a},e.T=function(t){var n=this;t.priority=0;var s=0;return this.A.forEach(function(a,o){s+=n.O(t,a.name,o+1)}),t.priority=s,t},r}(),kv=function(){function r(t){t===void 0&&(t=[]),this.logger=new bs("@barba/core"),this.S=!1,this.store=new Uv(t)}var e=r.prototype;return e.get=function(t,n){return this.store.resolve(t,n)},e.doOnce=function(t){var n=t.data,s=t.transition;try{var a=function(){o.S=!1},o=this,l=s||{};o.S=!0;var u=ga(function(){return Promise.resolve(o.j("beforeOnce",n,l)).then(function(){return Promise.resolve(o.once(n,l)).then(function(){return Promise.resolve(o.j("afterOnce",n,l)).then(function(){})})})},function(h){o.S=!1,o.logger.debug("Transition error [before/after/once]"),o.logger.error(h)});return Promise.resolve(u&&u.then?u.then(a):a())}catch(h){return Promise.reject(h)}},e.doPage=function(t){var n=t.data,s=t.transition,a=t.page,o=t.wrapper;try{var l=function(p){if(u)return p;h.S=!1},u=!1,h=this,f=s||{},c=f.sync===!0||!1;h.S=!0;var d=ga(function(){function p(){return Promise.resolve(h.j("before",n,f)).then(function(){var v=!1;function _(y){return v?y:Promise.resolve(h.remove(n)).then(function(){return Promise.resolve(h.j("after",n,f)).then(function(){})})}var m=function(){if(c)return ga(function(){return Promise.resolve(h.add(n,o)).then(function(){return Promise.resolve(h.j("beforeLeave",n,f)).then(function(){return Promise.resolve(h.j("beforeEnter",n,f)).then(function(){return Promise.resolve(Promise.all([h.leave(n,f),h.enter(n,f)])).then(function(){return Promise.resolve(h.j("afterLeave",n,f)).then(function(){return Promise.resolve(h.j("afterEnter",n,f)).then(function(){})})})})})})},function(T){if(h.M(T))throw new du(T,"Transition error [sync]")});var y=function(T){return v?T:ga(function(){var E=function(){if(x!==!1)return Promise.resolve(h.add(n,o)).then(function(){return Promise.resolve(h.j("beforeEnter",n,f)).then(function(){return Promise.resolve(h.enter(n,f,x)).then(function(){return Promise.resolve(h.j("afterEnter",n,f)).then(function(){})})})})}();if(E&&E.then)return E.then(function(){})},function(E){if(h.M(E))throw new du(E,"Transition error [before/after/enter]")})},x=!1,b=ga(function(){return Promise.resolve(h.j("beforeLeave",n,f)).then(function(){return Promise.resolve(Promise.all([h.leave(n,f),bc(a,n)]).then(function(T){return T[0]})).then(function(T){return x=T,Promise.resolve(h.j("afterLeave",n,f)).then(function(){})})})},function(T){if(h.M(T))throw new du(T,"Transition error [before/after/leave]")});return b&&b.then?b.then(y):y(b)}();return m&&m.then?m.then(_):_(m)})}var g=function(){if(c)return Promise.resolve(bc(a,n)).then(function(){})}();return g&&g.then?g.then(p):p()},function(p){throw h.S=!1,p.name&&p.name==="BarbaError"?(h.logger.debug(p.label),h.logger.error(p.error),p):(h.logger.debug("Transition error [page]"),h.logger.error(p),p)});return Promise.resolve(d&&d.then?d.then(l):l(d))}catch(p){return Promise.reject(p)}},e.once=function(t,n){try{return Promise.resolve(Ar.do("once",t,n)).then(function(){return n.once?xa(n.once,n)(t):Promise.resolve()})}catch(s){return Promise.reject(s)}},e.leave=function(t,n){try{return Promise.resolve(Ar.do("leave",t,n)).then(function(){return n.leave?xa(n.leave,n)(t):Promise.resolve()})}catch(s){return Promise.reject(s)}},e.enter=function(t,n,s){try{return Promise.resolve(Ar.do("enter",t,n)).then(function(){return n.enter?xa(n.enter,n)(t,s):Promise.resolve()})}catch(a){return Promise.reject(a)}},e.add=function(t,n){try{return Ss.addContainer(t.next.container,n),Ar.do("nextAdded",t),Promise.resolve()}catch(s){return Promise.reject(s)}},e.remove=function(t){try{return Ss.removeContainer(t.current.container),Ar.do("currentRemoved",t),Promise.resolve()}catch(n){return Promise.reject(n)}},e.M=function(t){return t.message?!/Timeout error|Fetch error/.test(t.message):!t.status},e.j=function(t,n,s){try{return Promise.resolve(Ar.do(t,n,s)).then(function(){return s[t]?xa(s[t],s)(n):Promise.resolve()})}catch(a){return Promise.reject(a)}},gh(r,[{key:"isRunning",get:function(){return this.S},set:function(t){this.S=t}},{key:"hasOnce",get:function(){return this.store.once.length>0}},{key:"hasSelf",get:function(){return this.store.all.some(function(t){return t.name==="self"})}},{key:"shouldWait",get:function(){return this.store.all.some(function(t){return t.to&&!t.to.route||t.sync})}}]),r}(),Bv=function(){function r(e){var t=this;this.names=["beforeLeave","afterLeave","beforeEnter","afterEnter"],this.byNamespace=new Map,e.length!==0&&(e.forEach(function(n){t.byNamespace.set(n.namespace,n)}),this.names.forEach(function(n){Ar[n](t.L(n))}))}return r.prototype.L=function(e){var t=this;return function(n){var s=e.match(/enter/i)?n.next:n.current,a=t.byNamespace.get(s.namespace);return a&&a[e]?xa(a[e],a)(n):Promise.resolve()}},r}();Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(r){var e=this;do{if(e.matches(r))return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1);return null});var zv={container:null,html:"",namespace:"",url:{hash:"",href:"",path:"",port:null,query:{}}},qc=new(function(){function r(){this.version=fv,this.schemaPage=zv,this.Logger=bs,this.logger=new bs("@barba/core"),this.plugins=[],this.hooks=Ar,this.dom=Ss,this.helpers=bv,this.history=sg,this.request=wv,this.url=Sv}var e=r.prototype;return e.use=function(t,n){var s=this.plugins;s.indexOf(t)>-1?this.logger.warn("Plugin ["+t.name+"] already installed."):typeof t.install=="function"?(t.install(this,n),s.push(t)):this.logger.warn("Plugin ["+t.name+'] has no "install" method.')},e.init=function(t){var n=t===void 0?{}:t,s=n.transitions,a=s===void 0?[]:s,o=n.views,l=o===void 0?[]:o,u=n.schema,h=u===void 0?Vi:u,f=n.requestError,c=n.timeout,d=c===void 0?2e3:c,p=n.cacheIgnore,g=p!==void 0&&p,v=n.prefetchIgnore,_=v!==void 0&&v,m=n.preventRunning,y=m!==void 0&&m,x=n.prevent,b=x===void 0?null:x,T=n.debug,E=n.logLevel;if(bs.setLevel((T!==void 0&&T)===!0?"debug":E===void 0?"off":E),this.logger.info(this.version),Object.keys(h).forEach(function(S){Vi[S]&&(Vi[S]=h[S])}),this.$=f,this.timeout=d,this.cacheIgnore=g,this.prefetchIgnore=_,this.preventRunning=y,this._=this.dom.getWrapper(),!this._)throw new Error("[@barba/core] No Barba wrapper found");this._.setAttribute("aria-live","polite"),this.q();var M=this.data.current;if(!M.container)throw new Error("[@barba/core] No Barba container found");if(this.cache=new Tv(g),this.prevent=new Nv(_),this.transitions=new kv(a),this.views=new Bv(l),b!==null){if(typeof b!="function")throw new Error("[@barba/core] Prevent should be a function");this.prevent.add("preventCustom",b)}this.history.init(M.url.href,M.namespace),this.B=this.B.bind(this),this.U=this.U.bind(this),this.D=this.D.bind(this),this.F(),this.plugins.forEach(function(S){return S.init()});var A=this.data;A.trigger="barba",A.next=A.current,A.current=xs({},this.schemaPage),this.hooks.do("ready",A),this.once(A),this.q()},e.destroy=function(){this.q(),this.H(),this.history.clear(),this.hooks.clear(),this.plugins=[]},e.force=function(t){window.location.assign(t)},e.go=function(t,n,s){var a;if(n===void 0&&(n="barba"),this.transitions.isRunning)this.force(t);else if(!(a=n==="popstate"?this.history.current&&this.url.getPath(this.history.current.url)===this.url.getPath(t):this.prevent.run("sameUrl",null,null,t))||this.transitions.hasSelf)return n=this.history.change(t,n,s),s&&(s.stopPropagation(),s.preventDefault()),this.page(t,n,a)},e.once=function(t){try{var n=this;return Promise.resolve(n.hooks.do("beforeEnter",t)).then(function(){function s(){return Promise.resolve(n.hooks.do("afterEnter",t)).then(function(){})}var a=function(){if(n.transitions.hasOnce){var o=n.transitions.get(t,{once:!0});return Promise.resolve(n.transitions.doOnce({transition:o,data:t})).then(function(){})}}();return a&&a.then?a.then(s):s()})}catch(s){return Promise.reject(s)}},e.page=function(t,n,s){try{var a=function(){var h=o.data;return Promise.resolve(o.hooks.do("page",h)).then(function(){var f=ga(function(){var c=o.transitions.get(h,{once:!1,self:s});return Promise.resolve(o.transitions.doPage({data:h,page:l,transition:c,wrapper:o._})).then(function(){o.q()})},function(){bs.getLevel()===0&&o.force(h.current.url.href)});if(f&&f.then)return f.then(function(){})})},o=this;o.data.next.url=xs({href:t},o.url.parse(t)),o.data.trigger=n;var l=o.cache.has(t)?o.cache.update(t,{action:"click"}).request:o.cache.set(t,o.request(t,o.timeout,o.onRequestError.bind(o,n)),"click").request,u=function(){if(o.transitions.shouldWait)return Promise.resolve(bc(l,o.data)).then(function(){})}();return Promise.resolve(u&&u.then?u.then(a):a())}catch(h){return Promise.reject(h)}},e.onRequestError=function(t){this.transitions.isRunning=!1;for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];var o=s[0],l=s[1],u=this.cache.getAction(o);return this.cache.delete(o),!(this.$&&this.$(t,u,o,l)===!1||(u==="click"&&this.force(o),1))},e.prefetch=function(t){var n=this;this.cache.has(t)||this.cache.set(t,this.request(t,this.timeout,this.onRequestError.bind(this,"barba")).catch(function(s){n.logger.error(s)}),"prefetch")},e.F=function(){this.prefetchIgnore!==!0&&(document.addEventListener("mouseover",this.B),document.addEventListener("touchstart",this.B)),document.addEventListener("click",this.U),window.addEventListener("popstate",this.D)},e.H=function(){this.prefetchIgnore!==!0&&(document.removeEventListener("mouseover",this.B),document.removeEventListener("touchstart",this.B)),document.removeEventListener("click",this.U),window.removeEventListener("popstate",this.D)},e.B=function(t){var n=this,s=this.I(t);if(s){var a=this.dom.getHref(s);this.prevent.checkHref(a)||this.cache.has(a)||this.cache.set(a,this.request(a,this.timeout,this.onRequestError.bind(this,s)).catch(function(o){n.logger.error(o)}),"enter")}},e.U=function(t){var n=this.I(t);if(n)return this.transitions.isRunning&&this.preventRunning?(t.preventDefault(),void t.stopPropagation()):void this.go(this.dom.getHref(n),n,t)},e.D=function(t){this.go(this.url.getHref(),"popstate",t)},e.I=function(t){for(var n=t.target;n&&!this.dom.getHref(n);)n=n.parentNode;if(n&&!this.prevent.checkLink(n,t,this.dom.getHref(n)))return n},e.q=function(){var t=this.url.getHref(),n={container:this.dom.getContainer(),html:this.dom.getHtml(),namespace:this.dom.getNamespace(),url:xs({href:t},this.url.parse(t))};this.C={current:n,next:xs({},this.schemaPage),trigger:void 0},this.hooks.do("reset",this.data)},gh(r,[{key:"data",get:function(){return this.C}},{key:"wrapper",get:function(){return this._}}]),r}());function tr(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ug(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var si={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Na={duration:.5,overwrite:!1,delay:0},bh,wn,Nt,mi=1e8,Dt=1/mi,Sd=Math.PI*2,Hv=Sd/4,Vv=0,dg=Math.sqrt,Gv=Math.cos,Wv=Math.sin,hn=function(e){return typeof e=="string"},zt=function(e){return typeof e=="function"},fr=function(e){return typeof e=="number"},Sh=function(e){return typeof e>"u"},Xi=function(e){return typeof e=="object"},Vn=function(e){return e!==!1},wh=function(){return typeof window<"u"},xl=function(e){return zt(e)||hn(e)},hg=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},En=Array.isArray,wd=/(?:-?\.?\d|\.)+/gi,fg=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,ba=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,hu=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,pg=/[+-]=-?[.\d]+/,mg=/[^,'"\[\]\s]+/gi,$v=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,kt,Ri,Ed,Eh,oi={},wc={},gg,_g=function(e){return(wc=zs(e,oi))&&qn},Th=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Go=function(e,t){return!t&&console.warn(e)},vg=function(e,t){return e&&(oi[e]=t)&&wc&&(wc[e]=t)||oi},Wo=function(){return 0},Xv={suppressEvents:!0,isStart:!0,kill:!1},ac={suppressEvents:!0,kill:!1},qv={suppressEvents:!0},Mh={},zr=[],Td={},yg,Jn={},fu={},df=30,oc=[],Ah="",Ch=function(e){var t=e[0],n,s;if(Xi(t)||zt(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(s=oc.length;s--&&!oc[s].targetTest(t););n=oc[s]}for(s=e.length;s--;)e[s]&&(e[s]._gsap||(e[s]._gsap=new Gg(e[s],n)))||e.splice(s,1);return e},Ps=function(e){return e._gsap||Ch(gi(e))[0]._gsap},xg=function(e,t,n){return(n=e[t])&&zt(n)?e[t]():Sh(n)&&e.getAttribute&&e.getAttribute(t)||n},Gn=function(e,t){return(e=e.split(",")).forEach(t)||e},Xt=function(e){return Math.round(e*1e5)/1e5||0},dn=function(e){return Math.round(e*1e7)/1e7||0},Ma=function(e,t){var n=t.charAt(0),s=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+s:n==="-"?e-s:n==="*"?e*s:e/s},Yv=function(e,t){for(var n=t.length,s=0;e.indexOf(t[s])<0&&++s<n;);return s<n},Ec=function(){var e=zr.length,t=zr.slice(0),n,s;for(Td={},zr.length=0,n=0;n<e;n++)s=t[n],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},bg=function(e,t,n,s){zr.length&&!wn&&Ec(),e.render(t,n,wn&&t<0&&(e._initted||e._startAt)),zr.length&&!wn&&Ec()},Sg=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(mg).length<2?t:hn(e)?e.trim():e},wg=function(e){return e},yi=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},jv=function(e){return function(t,n){for(var s in n)s in t||s==="duration"&&e||s==="ease"||(t[s]=n[s])}},zs=function(e,t){for(var n in t)e[n]=t[n];return e},hf=function r(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=Xi(t[n])?r(e[n]||(e[n]={}),t[n]):t[n]);return e},Tc=function(e,t){var n={},s;for(s in e)s in t||(n[s]=e[s]);return n},Mo=function(e){var t=e.parent||kt,n=e.keyframes?jv(En(e.keyframes)):yi;if(Vn(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},Kv=function(e,t){for(var n=e.length,s=n===t.length;s&&n--&&e[n]===t[n];);return n<0},Eg=function(e,t,n,s,a){var o=e[s],l;if(a)for(l=t[a];o&&o[a]>l;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[s]=t,t._prev=o,t.parent=t._dp=e,t},Yc=function(e,t,n,s){n===void 0&&(n="_first"),s===void 0&&(s="_last");var a=t._prev,o=t._next;a?a._next=o:e[n]===t&&(e[n]=o),o?o._prev=a:e[s]===t&&(e[s]=a),t._next=t._prev=t.parent=null},Xr=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Rs=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},Zv=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Md=function(e,t,n,s){return e._startAt&&(wn?e._startAt.revert(ac):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,s))},Jv=function r(e){return!e||e._ts&&r(e.parent)},ff=function(e){return e._repeat?Ua(e._tTime,e=e.duration()+e._rDelay)*e:0},Ua=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},Mc=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},jc=function(e){return e._end=dn(e._start+(e._tDur/Math.abs(e._ts||e._rts||Dt)||0))},Kc=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=dn(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),jc(e),n._dirty||Rs(n,e)),e},Tg=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=Mc(e.rawTime(),t),(!t._dur||ol(0,t.totalDuration(),n)-t._tTime>Dt)&&t.render(n,!0)),Rs(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-Dt}},Fi=function(e,t,n,s){return t.parent&&Xr(t),t._start=dn((fr(n)?n:n||e!==kt?ui(e,n,t):e._time)+t._delay),t._end=dn(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Eg(e,t,"_first","_last",e._sort?"_start":0),Ad(t)||(e._recent=t),s||Tg(e,t),e._ts<0&&Kc(e,e._tTime),e},Mg=function(e,t){return(oi.ScrollTrigger||Th("scrollTrigger",t))&&oi.ScrollTrigger.create(t,e)},Ag=function(e,t,n,s,a){if(Ph(e,t,a),!e._initted)return 1;if(!n&&e._pt&&!wn&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&yg!==ei.frame)return zr.push(e),e._lazy=[a,s],1},Qv=function r(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||r(t))},Ad=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},ey=function(e,t,n,s){var a=e.ratio,o=t<0||!t&&(!e._start&&Qv(e)&&!(!e._initted&&Ad(e))||(e._ts<0||e._dp._ts<0)&&!Ad(e))?0:1,l=e._rDelay,u=0,h,f,c;if(l&&e._repeat&&(u=ol(0,e._tDur,t),f=Ua(u,l),e._yoyo&&f&1&&(o=1-o),f!==Ua(e._tTime,l)&&(a=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==a||wn||s||e._zTime===Dt||!t&&e._zTime){if(!e._initted&&Ag(e,t,s,n,u))return;for(c=e._zTime,e._zTime=t||(n?Dt:0),n||(n=t&&!c),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=u,h=e._pt;h;)h.r(o,h.d),h=h._next;t<0&&Md(e,t,n,!0),e._onUpdate&&!n&&ii(e,"onUpdate"),u&&e._repeat&&!n&&e.parent&&ii(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Xr(e,1),!n&&!wn&&(ii(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},ty=function(e,t,n){var s;if(n>t)for(s=e._first;s&&s._start<=n;){if(s.data==="isPause"&&s._start>t)return s;s=s._next}else for(s=e._last;s&&s._start>=n;){if(s.data==="isPause"&&s._start<t)return s;s=s._prev}},ka=function(e,t,n,s){var a=e._repeat,o=dn(t)||0,l=e._tTime/e._tDur;return l&&!s&&(e._time*=o/e._dur),e._dur=o,e._tDur=a?a<0?1e10:dn(o*(a+1)+e._rDelay*a):o,l>0&&!s&&Kc(e,e._tTime=e._tDur*l),e.parent&&jc(e),n||Rs(e.parent,e),e},pf=function(e){return e instanceof Ln?Rs(e):ka(e,e._dur)},ny={_start:0,endTime:Wo,totalDuration:Wo},ui=function r(e,t,n){var s=e.labels,a=e._recent||ny,o=e.duration()>=mi?a.endTime(!1):e._dur,l,u,h;return hn(t)&&(isNaN(t)||t in s)?(u=t.charAt(0),h=t.substr(-1)==="%",l=t.indexOf("="),u==="<"||u===">"?(l>=0&&(t=t.replace(/=/,"")),(u==="<"?a._start:a.endTime(a._repeat>=0))+(parseFloat(t.substr(1))||0)*(h?(l<0?a:n).totalDuration()/100:1)):l<0?(t in s||(s[t]=o),s[t]):(u=parseFloat(t.charAt(l-1)+t.substr(l+1)),h&&n&&(u=u/100*(En(n)?n[0]:n).totalDuration()),l>1?r(e,t.substr(0,l-1),n)+u:o+u)):t==null?o:+t},Ao=function(e,t,n){var s=fr(t[1]),a=(s?2:1)+(e<2?0:1),o=t[a],l,u;if(s&&(o.duration=t[1]),o.parent=n,e){for(l=o,u=n;u&&!("immediateRender"in l);)l=u.vars.defaults||{},u=Vn(u.vars.inherit)&&u.parent;o.immediateRender=Vn(l.immediateRender),e<2?o.runBackwards=1:o.startAt=t[a-1]}return new Kt(t[0],o,t[a+1])},Jr=function(e,t){return e||e===0?t(e):t},ol=function(e,t,n){return n<e?e:n>t?t:n},Sn=function(e,t){return!hn(e)||!(t=$v.exec(e))?"":t[1]},iy=function(e,t,n){return Jr(n,function(s){return ol(e,t,s)})},Cd=[].slice,Cg=function(e,t){return e&&Xi(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Xi(e[0]))&&!e.nodeType&&e!==Ri},ry=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(s){var a;return hn(s)&&!t||Cg(s,1)?(a=n).push.apply(a,gi(s)):n.push(s)})||n},gi=function(e,t,n){return Nt&&!t&&Nt.selector?Nt.selector(e):hn(e)&&!n&&(Ed||!Ba())?Cd.call((t||Eh).querySelectorAll(e),0):En(e)?ry(e,n):Cg(e)?Cd.call(e,0):e?[e]:[]},Dd=function(e){return e=gi(e)[0]||Go("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return gi(t,n.querySelectorAll?n:n===e?Go("Invalid scope")||Eh.createElement("div"):e)}},Dg=function(e){return e.sort(function(){return .5-Math.random()})},Pg=function(e){if(zt(e))return e;var t=Xi(e)?e:{each:e},n=Ls(t.ease),s=t.from||0,a=parseFloat(t.base)||0,o={},l=s>0&&s<1,u=isNaN(s)||l,h=t.axis,f=s,c=s;return hn(s)?f=c={center:.5,edges:.5,end:1}[s]||0:!l&&u&&(f=s[0],c=s[1]),function(d,p,g){var v=(g||t).length,_=o[v],m,y,x,b,T,E,M,A,S;if(!_){if(S=t.grid==="auto"?0:(t.grid||[1,mi])[1],!S){for(M=-mi;M<(M=g[S++].getBoundingClientRect().left)&&S<v;);S<v&&S--}for(_=o[v]=[],m=u?Math.min(S,v)*f-.5:s%S,y=S===mi?0:u?v*c/S-.5:s/S|0,M=0,A=mi,E=0;E<v;E++)x=E%S-m,b=y-(E/S|0),_[E]=T=h?Math.abs(h==="y"?b:x):dg(x*x+b*b),T>M&&(M=T),T<A&&(A=T);s==="random"&&Dg(_),_.max=M-A,_.min=A,_.v=v=(parseFloat(t.amount)||parseFloat(t.each)*(S>v?v-1:h?h==="y"?v/S:S:Math.max(S,v/S))||0)*(s==="edges"?-1:1),_.b=v<0?a-v:a,_.u=Sn(t.amount||t.each)||0,n=n&&v<0?zg(n):n}return v=(_[d]-_.min)/_.max||0,dn(_.b+(n?n(v):v)*_.v)+_.u}},Pd=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var s=dn(Math.round(parseFloat(n)/e)*e*t);return(s-s%1)/t+(fr(n)?0:Sn(n))}},Rg=function(e,t){var n=En(e),s,a;return!n&&Xi(e)&&(s=n=e.radius||mi,e.values?(e=gi(e.values),(a=!fr(e[0]))&&(s*=s)):e=Pd(e.increment)),Jr(t,n?zt(e)?function(o){return a=e(o),Math.abs(a-o)<=s?a:o}:function(o){for(var l=parseFloat(a?o.x:o),u=parseFloat(a?o.y:0),h=mi,f=0,c=e.length,d,p;c--;)a?(d=e[c].x-l,p=e[c].y-u,d=d*d+p*p):d=Math.abs(e[c]-l),d<h&&(h=d,f=c);return f=!s||h<=s?e[f]:o,a||f===o||fr(o)?f:f+Sn(o)}:Pd(e))},Lg=function(e,t,n,s){return Jr(En(e)?!t:n===!0?!!(n=0):!s,function(){return En(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(s=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*s)/s})},sy=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(s){return t.reduce(function(a,o){return o(a)},s)}},ay=function(e,t){return function(n){return e(parseFloat(n))+(t||Sn(n))}},oy=function(e,t,n){return Fg(e,t,0,1,n)},Ig=function(e,t,n){return Jr(n,function(s){return e[~~t(s)]})},ly=function r(e,t,n){var s=t-e;return En(e)?Ig(e,r(0,e.length),t):Jr(n,function(a){return(s+(a-e)%s)%s+e})},cy=function r(e,t,n){var s=t-e,a=s*2;return En(e)?Ig(e,r(0,e.length-1),t):Jr(n,function(o){return o=(a+(o-e)%a)%a||0,e+(o>s?a-o:o)})},$o=function(e){for(var t=0,n="",s,a,o,l;~(s=e.indexOf("random(",t));)o=e.indexOf(")",s),l=e.charAt(s+7)==="[",a=e.substr(s+7,o-s-7).match(l?mg:wd),n+=e.substr(t,s-t)+Lg(l?a:+a[0],l?0:+a[1],+a[2]||1e-5),t=o+1;return n+e.substr(t,e.length-t)},Fg=function(e,t,n,s,a){var o=t-e,l=s-n;return Jr(a,function(u){return n+((u-e)/o*l||0)})},uy=function r(e,t,n,s){var a=isNaN(e+t)?0:function(p){return(1-p)*e+p*t};if(!a){var o=hn(e),l={},u,h,f,c,d;if(n===!0&&(s=1)&&(n=null),o)e={p:e},t={p:t};else if(En(e)&&!En(t)){for(f=[],c=e.length,d=c-2,h=1;h<c;h++)f.push(r(e[h-1],e[h]));c--,a=function(g){g*=c;var v=Math.min(d,~~g);return f[v](g-v)},n=t}else s||(e=zs(En(e)?[]:{},e));if(!f){for(u in t)Dh.call(l,e,u,"get",t[u]);a=function(g){return Ih(g,l)||(o?e.p:e)}}}return Jr(n,a)},mf=function(e,t,n){var s=e.labels,a=mi,o,l,u;for(o in s)l=s[o]-t,l<0==!!n&&l&&a>(l=Math.abs(l))&&(u=o,a=l);return u},ii=function(e,t,n){var s=e.vars,a=s[t],o=Nt,l=e._ctx,u,h,f;if(a)return u=s[t+"Params"],h=s.callbackScope||e,n&&zr.length&&Ec(),l&&(Nt=l),f=u?a.apply(h,u):a.call(h),Nt=o,f},fo=function(e){return Xr(e),e.scrollTrigger&&e.scrollTrigger.kill(!!wn),e.progress()<1&&ii(e,"onInterrupt"),e},Sa,Og=[],Ng=function(e){if(e)if(e=!e.name&&e.default||e,wh()||e.headless){var t=e.name,n=zt(e),s=t&&!n&&e.init?function(){this._props=[]}:e,a={init:Wo,render:Ih,add:Dh,kill:My,modifier:Ty,rawVars:0},o={targetTest:0,get:0,getSetter:Lh,aliases:{},register:0};if(Ba(),e!==s){if(Jn[t])return;yi(s,yi(Tc(e,a),o)),zs(s.prototype,zs(a,Tc(e,o))),Jn[s.prop=t]=s,e.targetTest&&(oc.push(s),Mh[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}vg(t,s),e.register&&e.register(qn,s,Wn)}else Og.push(e)},At=255,po={aqua:[0,At,At],lime:[0,At,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,At],navy:[0,0,128],white:[At,At,At],olive:[128,128,0],yellow:[At,At,0],orange:[At,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[At,0,0],pink:[At,192,203],cyan:[0,At,At],transparent:[At,At,At,0]},pu=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*At+.5|0},Ug=function(e,t,n){var s=e?fr(e)?[e>>16,e>>8&At,e&At]:0:po.black,a,o,l,u,h,f,c,d,p,g;if(!s){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),po[e])s=po[e];else if(e.charAt(0)==="#"){if(e.length<6&&(a=e.charAt(1),o=e.charAt(2),l=e.charAt(3),e="#"+a+a+o+o+l+l+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return s=parseInt(e.substr(1,6),16),[s>>16,s>>8&At,s&At,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),s=[e>>16,e>>8&At,e&At]}else if(e.substr(0,3)==="hsl"){if(s=g=e.match(wd),!t)u=+s[0]%360/360,h=+s[1]/100,f=+s[2]/100,o=f<=.5?f*(h+1):f+h-f*h,a=f*2-o,s.length>3&&(s[3]*=1),s[0]=pu(u+1/3,a,o),s[1]=pu(u,a,o),s[2]=pu(u-1/3,a,o);else if(~e.indexOf("="))return s=e.match(fg),n&&s.length<4&&(s[3]=1),s}else s=e.match(wd)||po.transparent;s=s.map(Number)}return t&&!g&&(a=s[0]/At,o=s[1]/At,l=s[2]/At,c=Math.max(a,o,l),d=Math.min(a,o,l),f=(c+d)/2,c===d?u=h=0:(p=c-d,h=f>.5?p/(2-c-d):p/(c+d),u=c===a?(o-l)/p+(o<l?6:0):c===o?(l-a)/p+2:(a-o)/p+4,u*=60),s[0]=~~(u+.5),s[1]=~~(h*100+.5),s[2]=~~(f*100+.5)),n&&s.length<4&&(s[3]=1),s},kg=function(e){var t=[],n=[],s=-1;return e.split(Hr).forEach(function(a){var o=a.match(ba)||[];t.push.apply(t,o),n.push(s+=o.length+1)}),t.c=n,t},gf=function(e,t,n){var s="",a=(e+s).match(Hr),o=t?"hsla(":"rgba(",l=0,u,h,f,c;if(!a)return e;if(a=a.map(function(d){return(d=Ug(d,t,1))&&o+(t?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),n&&(f=kg(e),u=n.c,u.join(s)!==f.c.join(s)))for(h=e.replace(Hr,"1").split(ba),c=h.length-1;l<c;l++)s+=h[l]+(~u.indexOf(l)?a.shift()||o+"0,0,0,0)":(f.length?f:a.length?a:n).shift());if(!h)for(h=e.split(Hr),c=h.length-1;l<c;l++)s+=h[l]+a[l];return s+h[c]},Hr=function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in po)r+="|"+e+"\\b";return new RegExp(r+")","gi")}(),dy=/hsl[a]?\(/,Bg=function(e){var t=e.join(" "),n;if(Hr.lastIndex=0,Hr.test(t))return n=dy.test(t),e[1]=gf(e[1],n),e[0]=gf(e[0],n,kg(e[1])),!0},Xo,ei=function(){var r=Date.now,e=500,t=33,n=r(),s=n,a=1e3/240,o=a,l=[],u,h,f,c,d,p,g=function v(_){var m=r()-s,y=_===!0,x,b,T,E;if((m>e||m<0)&&(n+=m-t),s+=m,T=s-n,x=T-o,(x>0||y)&&(E=++c.frame,d=T-c.time*1e3,c.time=T=T/1e3,o+=x+(x>=a?4:a-x),b=1),y||(u=h(v)),b)for(p=0;p<l.length;p++)l[p](T,d,E,_)};return c={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(_){return d/(1e3/(_||60))},wake:function(){gg&&(!Ed&&wh()&&(Ri=Ed=window,Eh=Ri.document||{},oi.gsap=qn,(Ri.gsapVersions||(Ri.gsapVersions=[])).push(qn.version),_g(wc||Ri.GreenSockGlobals||!Ri.gsap&&Ri||{}),Og.forEach(Ng)),f=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&c.sleep(),h=f||function(_){return setTimeout(_,o-c.time*1e3+1|0)},Xo=1,g(2))},sleep:function(){(f?cancelAnimationFrame:clearTimeout)(u),Xo=0,h=Wo},lagSmoothing:function(_,m){e=_||1/0,t=Math.min(m||33,e)},fps:function(_){a=1e3/(_||240),o=c.time*1e3+a},add:function(_,m,y){var x=m?function(b,T,E,M){_(b,T,E,M),c.remove(x)}:_;return c.remove(_),l[y?"unshift":"push"](x),Ba(),x},remove:function(_,m){~(m=l.indexOf(_))&&l.splice(m,1)&&p>=m&&p--},_listeners:l},c}(),Ba=function(){return!Xo&&ei.wake()},ut={},hy=/^[\d.\-M][\d.\-,\s]/,fy=/["']/g,py=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),s=n[0],a=1,o=n.length,l,u,h;a<o;a++)u=n[a],l=a!==o-1?u.lastIndexOf(","):u.length,h=u.substr(0,l),t[s]=isNaN(h)?h.replace(fy,"").trim():+h,s=u.substr(l+1).trim();return t},my=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),s=e.indexOf("(",t);return e.substring(t,~s&&s<n?e.indexOf(")",n+1):n)},gy=function(e){var t=(e+"").split("("),n=ut[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[py(t[1])]:my(e).split(",").map(Sg)):ut._CE&&hy.test(e)?ut._CE("",e):n},zg=function(e){return function(t){return 1-e(1-t)}},Hg=function r(e,t){for(var n=e._first,s;n;)n instanceof Ln?r(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?r(n.timeline,t):(s=n._ease,n._ease=n._yEase,n._yEase=s,n._yoyo=t)),n=n._next},Ls=function(e,t){return e&&(zt(e)?e:ut[e]||gy(e))||t},qs=function(e,t,n,s){n===void 0&&(n=function(u){return 1-t(1-u)}),s===void 0&&(s=function(u){return u<.5?t(u*2)/2:1-t((1-u)*2)/2});var a={easeIn:t,easeOut:n,easeInOut:s},o;return Gn(e,function(l){ut[l]=oi[l]=a,ut[o=l.toLowerCase()]=n;for(var u in a)ut[o+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=ut[l+"."+u]=a[u]}),a},Vg=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},mu=function r(e,t,n){var s=t>=1?t:1,a=(n||(e?.3:.45))/(t<1?t:1),o=a/Sd*(Math.asin(1/s)||0),l=function(f){return f===1?1:s*Math.pow(2,-10*f)*Wv((f-o)*a)+1},u=e==="out"?l:e==="in"?function(h){return 1-l(1-h)}:Vg(l);return a=Sd/a,u.config=function(h,f){return r(e,h,f)},u},gu=function r(e,t){t===void 0&&(t=1.70158);var n=function(o){return o?--o*o*((t+1)*o+t)+1:0},s=e==="out"?n:e==="in"?function(a){return 1-n(1-a)}:Vg(n);return s.config=function(a){return r(e,a)},s};Gn("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,e){var t=e<5?e+1:e;qs(r+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});ut.Linear.easeNone=ut.none=ut.Linear.easeIn;qs("Elastic",mu("in"),mu("out"),mu());(function(r,e){var t=1/e,n=2*t,s=2.5*t,a=function(l){return l<t?r*l*l:l<n?r*Math.pow(l-1.5/e,2)+.75:l<s?r*(l-=2.25/e)*l+.9375:r*Math.pow(l-2.625/e,2)+.984375};qs("Bounce",function(o){return 1-a(1-o)},a)})(7.5625,2.75);qs("Expo",function(r){return r?Math.pow(2,10*(r-1)):0});qs("Circ",function(r){return-(dg(1-r*r)-1)});qs("Sine",function(r){return r===1?1:-Gv(r*Hv)+1});qs("Back",gu("in"),gu("out"),gu());ut.SteppedEase=ut.steps=oi.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,s=e+(t?0:1),a=t?1:0,o=1-Dt;return function(l){return((s*ol(0,o,l)|0)+a)*n}}};Na.ease=ut["quad.out"];Gn("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return Ah+=r+","+r+"Params,"});var Gg=function(e,t){this.id=Vv++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:xg,this.set=t?t.getSetter:Lh},qo=function(){function r(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,ka(this,+t.duration,1,1),this.data=t.data,Nt&&(this._ctx=Nt,Nt.data.push(this)),Xo||ei.wake()}var e=r.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,ka(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,s){if(Ba(),!arguments.length)return this._tTime;var a=this._dp;if(a&&a.smoothChildTiming&&this._ts){for(Kc(this,n),!a._dp||a.parent||Tg(a,this);a&&a.parent;)a.parent._time!==a._start+(a._ts>=0?a._tTime/a._ts:(a.totalDuration()-a._tTime)/-a._ts)&&a.totalTime(a._tTime,!0),a=a.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&Fi(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===Dt||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),bg(this,n,s)),this},e.time=function(n,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+ff(this))%(this._dur+this._rDelay)||(n?this._dur:0),s):this._time},e.totalProgress=function(n,s){return arguments.length?this.totalTime(this.totalDuration()*n,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(n,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+ff(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,s){var a=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*a,s):this._repeat?Ua(this._tTime,a)+1:1},e.timeScale=function(n,s){if(!arguments.length)return this._rts===-Dt?0:this._rts;if(this._rts===n)return this;var a=this.parent&&this._ts?Mc(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Dt?0:this._rts,this.totalTime(ol(-Math.abs(this._delay),this._tDur,a),s!==!1),jc(this),Zv(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Ba(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Dt&&(this._tTime-=Dt)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&Fi(s,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(Vn(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var s=this.parent||this._dp;return s?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Mc(s.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=qv);var s=wn;return wn=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),wn=s,this},e.globalTime=function(n){for(var s=this,a=arguments.length?n:s.rawTime();s;)a=s._start+a/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(n):a},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,pf(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var s=this._time;return this._rDelay=n,pf(this),s?this.time(s):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,s){return this.totalTime(ui(this,n),Vn(s))},e.restart=function(n,s){return this.play().totalTime(n?-this._delay:0,Vn(s))},e.play=function(n,s){return n!=null&&this.seek(n,s),this.reversed(!1).paused(!1)},e.reverse=function(n,s){return n!=null&&this.seek(n||this.totalDuration(),s),this.reversed(!0).paused(!1)},e.pause=function(n,s){return n!=null&&this.seek(n,s),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Dt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Dt,this},e.isActive=function(){var n=this.parent||this._dp,s=this._start,a;return!!(!n||this._ts&&this._initted&&n.isActive()&&(a=n.rawTime(!0))>=s&&a<this.endTime(!0)-Dt)},e.eventCallback=function(n,s,a){var o=this.vars;return arguments.length>1?(s?(o[n]=s,a&&(o[n+"Params"]=a),n==="onUpdate"&&(this._onUpdate=s)):delete o[n],this):o[n]},e.then=function(n){var s=this;return new Promise(function(a){var o=zt(n)?n:wg,l=function(){var h=s.then;s.then=null,zt(o)&&(o=o(s))&&(o.then||o===s)&&(s.then=h),a(o),s.then=h};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?l():s._prom=l})},e.kill=function(){fo(this)},r}();yi(qo.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Dt,_prom:0,_ps:!1,_rts:1});var Ln=function(r){ug(e,r);function e(n,s){var a;return n===void 0&&(n={}),a=r.call(this,n)||this,a.labels={},a.smoothChildTiming=!!n.smoothChildTiming,a.autoRemoveChildren=!!n.autoRemoveChildren,a._sort=Vn(n.sortChildren),kt&&Fi(n.parent||kt,tr(a),s),n.reversed&&a.reverse(),n.paused&&a.paused(!0),n.scrollTrigger&&Mg(tr(a),n.scrollTrigger),a}var t=e.prototype;return t.to=function(s,a,o){return Ao(0,arguments,this),this},t.from=function(s,a,o){return Ao(1,arguments,this),this},t.fromTo=function(s,a,o,l){return Ao(2,arguments,this),this},t.set=function(s,a,o){return a.duration=0,a.parent=this,Mo(a).repeatDelay||(a.repeat=0),a.immediateRender=!!a.immediateRender,new Kt(s,a,ui(this,o),1),this},t.call=function(s,a,o){return Fi(this,Kt.delayedCall(0,s,a),o)},t.staggerTo=function(s,a,o,l,u,h,f){return o.duration=a,o.stagger=o.stagger||l,o.onComplete=h,o.onCompleteParams=f,o.parent=this,new Kt(s,o,ui(this,u)),this},t.staggerFrom=function(s,a,o,l,u,h,f){return o.runBackwards=1,Mo(o).immediateRender=Vn(o.immediateRender),this.staggerTo(s,a,o,l,u,h,f)},t.staggerFromTo=function(s,a,o,l,u,h,f,c){return l.startAt=o,Mo(l).immediateRender=Vn(l.immediateRender),this.staggerTo(s,a,l,u,h,f,c)},t.render=function(s,a,o){var l=this._time,u=this._dirty?this.totalDuration():this._tDur,h=this._dur,f=s<=0?0:dn(s),c=this._zTime<0!=s<0&&(this._initted||!h),d,p,g,v,_,m,y,x,b,T,E,M;if(this!==kt&&f>u&&s>=0&&(f=u),f!==this._tTime||o||c){if(l!==this._time&&h&&(f+=this._time-l,s+=this._time-l),d=f,b=this._start,x=this._ts,m=!x,c&&(h||(l=this._zTime),(s||!a)&&(this._zTime=s)),this._repeat){if(E=this._yoyo,_=h+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(_*100+s,a,o);if(d=dn(f%_),f===u?(v=this._repeat,d=h):(v=~~(f/_),v&&v===f/_&&(d=h,v--),d>h&&(d=h)),T=Ua(this._tTime,_),!l&&this._tTime&&T!==v&&this._tTime-T*_-this._dur<=0&&(T=v),E&&v&1&&(d=h-d,M=1),v!==T&&!this._lock){var A=E&&T&1,S=A===(E&&v&1);if(v<T&&(A=!A),l=A?0:f%h?h:f,this._lock=1,this.render(l||(M?0:dn(v*_)),a,!h)._lock=0,this._tTime=f,!a&&this.parent&&ii(this,"onRepeat"),this.vars.repeatRefresh&&!M&&(this.invalidate()._lock=1),l&&l!==this._time||m!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,u=this._tDur,S&&(this._lock=2,l=A?h:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!M&&this.invalidate()),this._lock=0,!this._ts&&!m)return this;Hg(this,M)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(y=ty(this,dn(l),dn(d)),y&&(f-=d-(d=y._start))),this._tTime=f,this._time=d,this._act=!x,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,l=0),!l&&d&&!a&&!v&&(ii(this,"onStart"),this._tTime!==f))return this;if(d>=l&&s>=0)for(p=this._first;p;){if(g=p._next,(p._act||d>=p._start)&&p._ts&&y!==p){if(p.parent!==this)return this.render(s,a,o);if(p.render(p._ts>0?(d-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(d-p._start)*p._ts,a,o),d!==this._time||!this._ts&&!m){y=0,g&&(f+=this._zTime=-Dt);break}}p=g}else{p=this._last;for(var w=s<0?s:d;p;){if(g=p._prev,(p._act||w<=p._end)&&p._ts&&y!==p){if(p.parent!==this)return this.render(s,a,o);if(p.render(p._ts>0?(w-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(w-p._start)*p._ts,a,o||wn&&(p._initted||p._startAt)),d!==this._time||!this._ts&&!m){y=0,g&&(f+=this._zTime=w?-Dt:Dt);break}}p=g}}if(y&&!a&&(this.pause(),y.render(d>=l?0:-Dt)._zTime=d>=l?1:-1,this._ts))return this._start=b,jc(this),this.render(s,a,o);this._onUpdate&&!a&&ii(this,"onUpdate",!0),(f===u&&this._tTime>=this.totalDuration()||!f&&l)&&(b===this._start||Math.abs(x)!==Math.abs(this._ts))&&(this._lock||((s||!h)&&(f===u&&this._ts>0||!f&&this._ts<0)&&Xr(this,1),!a&&!(s<0&&!l)&&(f||l||!u)&&(ii(this,f===u&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(f<u&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(s,a){var o=this;if(fr(a)||(a=ui(this,a,s)),!(s instanceof qo)){if(En(s))return s.forEach(function(l){return o.add(l,a)}),this;if(hn(s))return this.addLabel(s,a);if(zt(s))s=Kt.delayedCall(0,s);else return this}return this!==s?Fi(this,s,a):this},t.getChildren=function(s,a,o,l){s===void 0&&(s=!0),a===void 0&&(a=!0),o===void 0&&(o=!0),l===void 0&&(l=-mi);for(var u=[],h=this._first;h;)h._start>=l&&(h instanceof Kt?a&&u.push(h):(o&&u.push(h),s&&u.push.apply(u,h.getChildren(!0,a,o)))),h=h._next;return u},t.getById=function(s){for(var a=this.getChildren(1,1,1),o=a.length;o--;)if(a[o].vars.id===s)return a[o]},t.remove=function(s){return hn(s)?this.removeLabel(s):zt(s)?this.killTweensOf(s):(Yc(this,s),s===this._recent&&(this._recent=this._last),Rs(this))},t.totalTime=function(s,a){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=dn(ei.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),r.prototype.totalTime.call(this,s,a),this._forcing=0,this):this._tTime},t.addLabel=function(s,a){return this.labels[s]=ui(this,a),this},t.removeLabel=function(s){return delete this.labels[s],this},t.addPause=function(s,a,o){var l=Kt.delayedCall(0,a||Wo,o);return l.data="isPause",this._hasPause=1,Fi(this,l,ui(this,s))},t.removePause=function(s){var a=this._first;for(s=ui(this,s);a;)a._start===s&&a.data==="isPause"&&Xr(a),a=a._next},t.killTweensOf=function(s,a,o){for(var l=this.getTweensOf(s,o),u=l.length;u--;)Rr!==l[u]&&l[u].kill(s,a);return this},t.getTweensOf=function(s,a){for(var o=[],l=gi(s),u=this._first,h=fr(a),f;u;)u instanceof Kt?Yv(u._targets,l)&&(h?(!Rr||u._initted&&u._ts)&&u.globalTime(0)<=a&&u.globalTime(u.totalDuration())>a:!a||u.isActive())&&o.push(u):(f=u.getTweensOf(l,a)).length&&o.push.apply(o,f),u=u._next;return o},t.tweenTo=function(s,a){a=a||{};var o=this,l=ui(o,s),u=a,h=u.startAt,f=u.onStart,c=u.onStartParams,d=u.immediateRender,p,g=Kt.to(o,yi({ease:a.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:a.duration||Math.abs((l-(h&&"time"in h?h.time:o._time))/o.timeScale())||Dt,onStart:function(){if(o.pause(),!p){var _=a.duration||Math.abs((l-(h&&"time"in h?h.time:o._time))/o.timeScale());g._dur!==_&&ka(g,_,0,1).render(g._time,!0,!0),p=1}f&&f.apply(g,c||[])}},a));return d?g.render(0):g},t.tweenFromTo=function(s,a,o){return this.tweenTo(a,yi({startAt:{time:ui(this,s)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(s){return s===void 0&&(s=this._time),mf(this,ui(this,s))},t.previousLabel=function(s){return s===void 0&&(s=this._time),mf(this,ui(this,s),1)},t.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+Dt)},t.shiftChildren=function(s,a,o){o===void 0&&(o=0);for(var l=this._first,u=this.labels,h;l;)l._start>=o&&(l._start+=s,l._end+=s),l=l._next;if(a)for(h in u)u[h]>=o&&(u[h]+=s);return Rs(this)},t.invalidate=function(s){var a=this._first;for(this._lock=0;a;)a.invalidate(s),a=a._next;return r.prototype.invalidate.call(this,s)},t.clear=function(s){s===void 0&&(s=!0);for(var a=this._first,o;a;)o=a._next,this.remove(a),a=o;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),Rs(this)},t.totalDuration=function(s){var a=0,o=this,l=o._last,u=mi,h,f,c;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-s:s));if(o._dirty){for(c=o.parent;l;)h=l._prev,l._dirty&&l.totalDuration(),f=l._start,f>u&&o._sort&&l._ts&&!o._lock?(o._lock=1,Fi(o,l,f-l._delay,1)._lock=0):u=f,f<0&&l._ts&&(a-=f,(!c&&!o._dp||c&&c.smoothChildTiming)&&(o._start+=f/o._ts,o._time-=f,o._tTime-=f),o.shiftChildren(-f,!1,-1/0),u=0),l._end>a&&l._ts&&(a=l._end),l=h;ka(o,o===kt&&o._time>a?o._time:a,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(s){if(kt._ts&&(bg(kt,Mc(s,kt)),yg=ei.frame),ei.frame>=df){df+=si.autoSleep||120;var a=kt._first;if((!a||!a._ts)&&si.autoSleep&&ei._listeners.length<2){for(;a&&!a._ts;)a=a._next;a||ei.sleep()}}},e}(qo);yi(Ln.prototype,{_lock:0,_hasPause:0,_forcing:0});var _y=function(e,t,n,s,a,o,l){var u=new Wn(this._pt,e,t,0,1,jg,null,a),h=0,f=0,c,d,p,g,v,_,m,y;for(u.b=n,u.e=s,n+="",s+="",(m=~s.indexOf("random("))&&(s=$o(s)),o&&(y=[n,s],o(y,e,t),n=y[0],s=y[1]),d=n.match(hu)||[];c=hu.exec(s);)g=c[0],v=s.substring(h,c.index),p?p=(p+1)%5:v.substr(-5)==="rgba("&&(p=1),g!==d[f++]&&(_=parseFloat(d[f-1])||0,u._pt={_next:u._pt,p:v||f===1?v:",",s:_,c:g.charAt(1)==="="?Ma(_,g)-_:parseFloat(g)-_,m:p&&p<4?Math.round:0},h=hu.lastIndex);return u.c=h<s.length?s.substring(h,s.length):"",u.fp=l,(pg.test(s)||m)&&(u.e=0),this._pt=u,u},Dh=function(e,t,n,s,a,o,l,u,h,f){zt(s)&&(s=s(a||0,e,o));var c=e[t],d=n!=="get"?n:zt(c)?h?e[t.indexOf("set")||!zt(e["get"+t.substr(3)])?t:"get"+t.substr(3)](h):e[t]():c,p=zt(c)?h?Sy:qg:Rh,g;if(hn(s)&&(~s.indexOf("random(")&&(s=$o(s)),s.charAt(1)==="="&&(g=Ma(d,s)+(Sn(d)||0),(g||g===0)&&(s=g))),!f||d!==s||Rd)return!isNaN(d*s)&&s!==""?(g=new Wn(this._pt,e,t,+d||0,s-(d||0),typeof c=="boolean"?Ey:Yg,0,p),h&&(g.fp=h),l&&g.modifier(l,this,e),this._pt=g):(!c&&!(t in e)&&Th(t,s),_y.call(this,e,t,d,s,p,u||si.stringFilter,h))},vy=function(e,t,n,s,a){if(zt(e)&&(e=Co(e,a,t,n,s)),!Xi(e)||e.style&&e.nodeType||En(e)||hg(e))return hn(e)?Co(e,a,t,n,s):e;var o={},l;for(l in e)o[l]=Co(e[l],a,t,n,s);return o},Wg=function(e,t,n,s,a,o){var l,u,h,f;if(Jn[e]&&(l=new Jn[e]).init(a,l.rawVars?t[e]:vy(t[e],s,a,o,n),n,s,o)!==!1&&(n._pt=u=new Wn(n._pt,a,e,0,1,l.render,l,0,l.priority),n!==Sa))for(h=n._ptLookup[n._targets.indexOf(a)],f=l._props.length;f--;)h[l._props[f]]=u;return l},Rr,Rd,Ph=function r(e,t,n){var s=e.vars,a=s.ease,o=s.startAt,l=s.immediateRender,u=s.lazy,h=s.onUpdate,f=s.runBackwards,c=s.yoyoEase,d=s.keyframes,p=s.autoRevert,g=e._dur,v=e._startAt,_=e._targets,m=e.parent,y=m&&m.data==="nested"?m.vars.targets:_,x=e._overwrite==="auto"&&!bh,b=e.timeline,T,E,M,A,S,w,C,D,R,F,k,z,O;if(b&&(!d||!a)&&(a="none"),e._ease=Ls(a,Na.ease),e._yEase=c?zg(Ls(c===!0?a:c,Na.ease)):0,c&&e._yoyo&&!e._repeat&&(c=e._yEase,e._yEase=e._ease,e._ease=c),e._from=!b&&!!s.runBackwards,!b||d&&!s.stagger){if(D=_[0]?Ps(_[0]).harness:0,z=D&&s[D.prop],T=Tc(s,Mh),v&&(v._zTime<0&&v.progress(1),t<0&&f&&l&&!p?v.render(-1,!0):v.revert(f&&g?ac:Xv),v._lazy=0),o){if(Xr(e._startAt=Kt.set(_,yi({data:"isStart",overwrite:!1,parent:m,immediateRender:!0,lazy:!v&&Vn(u),startAt:null,delay:0,onUpdate:h&&function(){return ii(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(wn||!l&&!p)&&e._startAt.revert(ac),l&&g&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(f&&g&&!v){if(t&&(l=!1),M=yi({overwrite:!1,data:"isFromStart",lazy:l&&!v&&Vn(u),immediateRender:l,stagger:0,parent:m},T),z&&(M[D.prop]=z),Xr(e._startAt=Kt.set(_,M)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(wn?e._startAt.revert(ac):e._startAt.render(-1,!0)),e._zTime=t,!l)r(e._startAt,Dt,Dt);else if(!t)return}for(e._pt=e._ptCache=0,u=g&&Vn(u)||u&&!g,E=0;E<_.length;E++){if(S=_[E],C=S._gsap||Ch(_)[E]._gsap,e._ptLookup[E]=F={},Td[C.id]&&zr.length&&Ec(),k=y===_?E:y.indexOf(S),D&&(R=new D).init(S,z||T,e,k,y)!==!1&&(e._pt=A=new Wn(e._pt,S,R.name,0,1,R.render,R,0,R.priority),R._props.forEach(function(I){F[I]=A}),R.priority&&(w=1)),!D||z)for(M in T)Jn[M]&&(R=Wg(M,T,e,k,S,y))?R.priority&&(w=1):F[M]=A=Dh.call(e,S,M,"get",T[M],k,y,0,s.stringFilter);e._op&&e._op[E]&&e.kill(S,e._op[E]),x&&e._pt&&(Rr=e,kt.killTweensOf(S,F,e.globalTime(t)),O=!e.parent,Rr=0),e._pt&&u&&(Td[C.id]=1)}w&&Kg(e),e._onInit&&e._onInit(e)}e._onUpdate=h,e._initted=(!e._op||e._pt)&&!O,d&&t<=0&&b.render(mi,!0,!0)},yy=function(e,t,n,s,a,o,l,u){var h=(e._pt&&e._ptCache||(e._ptCache={}))[t],f,c,d,p;if(!h)for(h=e._ptCache[t]=[],d=e._ptLookup,p=e._targets.length;p--;){if(f=d[p][t],f&&f.d&&f.d._pt)for(f=f.d._pt;f&&f.p!==t&&f.fp!==t;)f=f._next;if(!f)return Rd=1,e.vars[t]="+=0",Ph(e,l),Rd=0,u?Go(t+" not eligible for reset"):1;h.push(f)}for(p=h.length;p--;)c=h[p],f=c._pt||c,f.s=(s||s===0)&&!a?s:f.s+(s||0)+o*f.c,f.c=n-f.s,c.e&&(c.e=Xt(n)+Sn(c.e)),c.b&&(c.b=f.s+Sn(c.b))},xy=function(e,t){var n=e[0]?Ps(e[0]).harness:0,s=n&&n.aliases,a,o,l,u;if(!s)return t;a=zs({},t);for(o in s)if(o in a)for(u=s[o].split(","),l=u.length;l--;)a[u[l]]=a[o];return a},by=function(e,t,n,s){var a=t.ease||s||"power1.inOut",o,l;if(En(t))l=n[e]||(n[e]=[]),t.forEach(function(u,h){return l.push({t:h/(t.length-1)*100,v:u,e:a})});else for(o in t)l=n[o]||(n[o]=[]),o==="ease"||l.push({t:parseFloat(e),v:t[o],e:a})},Co=function(e,t,n,s,a){return zt(e)?e.call(t,n,s,a):hn(e)&&~e.indexOf("random(")?$o(e):e},$g=Ah+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Xg={};Gn($g+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return Xg[r]=1});var Kt=function(r){ug(e,r);function e(n,s,a,o){var l;typeof s=="number"&&(a.duration=s,s=a,a=null),l=r.call(this,o?s:Mo(s))||this;var u=l.vars,h=u.duration,f=u.delay,c=u.immediateRender,d=u.stagger,p=u.overwrite,g=u.keyframes,v=u.defaults,_=u.scrollTrigger,m=u.yoyoEase,y=s.parent||kt,x=(En(n)||hg(n)?fr(n[0]):"length"in s)?[n]:gi(n),b,T,E,M,A,S,w,C;if(l._targets=x.length?Ch(x):Go("GSAP target "+n+" not found. https://gsap.com",!si.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=p,g||d||xl(h)||xl(f)){if(s=l.vars,b=l.timeline=new Ln({data:"nested",defaults:v||{},targets:y&&y.data==="nested"?y.vars.targets:x}),b.kill(),b.parent=b._dp=tr(l),b._start=0,d||xl(h)||xl(f)){if(M=x.length,w=d&&Pg(d),Xi(d))for(A in d)~$g.indexOf(A)&&(C||(C={}),C[A]=d[A]);for(T=0;T<M;T++)E=Tc(s,Xg),E.stagger=0,m&&(E.yoyoEase=m),C&&zs(E,C),S=x[T],E.duration=+Co(h,tr(l),T,S,x),E.delay=(+Co(f,tr(l),T,S,x)||0)-l._delay,!d&&M===1&&E.delay&&(l._delay=f=E.delay,l._start+=f,E.delay=0),b.to(S,E,w?w(T,S,x):0),b._ease=ut.none;b.duration()?h=f=0:l.timeline=0}else if(g){Mo(yi(b.vars.defaults,{ease:"none"})),b._ease=Ls(g.ease||s.ease||"none");var D=0,R,F,k;if(En(g))g.forEach(function(z){return b.to(x,z,">")}),b.duration();else{E={};for(A in g)A==="ease"||A==="easeEach"||by(A,g[A],E,g.easeEach);for(A in E)for(R=E[A].sort(function(z,O){return z.t-O.t}),D=0,T=0;T<R.length;T++)F=R[T],k={ease:F.e,duration:(F.t-(T?R[T-1].t:0))/100*h},k[A]=F.v,b.to(x,k,D),D+=k.duration;b.duration()<h&&b.to({},{duration:h-b.duration()})}}h||l.duration(h=b.duration())}else l.timeline=0;return p===!0&&!bh&&(Rr=tr(l),kt.killTweensOf(x),Rr=0),Fi(y,tr(l),a),s.reversed&&l.reverse(),s.paused&&l.paused(!0),(c||!h&&!g&&l._start===dn(y._time)&&Vn(c)&&Jv(tr(l))&&y.data!=="nested")&&(l._tTime=-Dt,l.render(Math.max(0,-f)||0)),_&&Mg(tr(l),_),l}var t=e.prototype;return t.render=function(s,a,o){var l=this._time,u=this._tDur,h=this._dur,f=s<0,c=s>u-Dt&&!f?u:s<Dt?0:s,d,p,g,v,_,m,y,x,b;if(!h)ey(this,s,a,o);else if(c!==this._tTime||!s||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==f){if(d=c,x=this.timeline,this._repeat){if(v=h+this._rDelay,this._repeat<-1&&f)return this.totalTime(v*100+s,a,o);if(d=dn(c%v),c===u?(g=this._repeat,d=h):(g=~~(c/v),g&&g===dn(c/v)&&(d=h,g--),d>h&&(d=h)),m=this._yoyo&&g&1,m&&(b=this._yEase,d=h-d),_=Ua(this._tTime,v),d===l&&!o&&this._initted&&g===_)return this._tTime=c,this;g!==_&&(x&&this._yEase&&Hg(x,m),this.vars.repeatRefresh&&!m&&!this._lock&&this._time!==v&&this._initted&&(this._lock=o=1,this.render(dn(v*g),!0).invalidate()._lock=0))}if(!this._initted){if(Ag(this,f?s:d,o,a,c))return this._tTime=0,this;if(l!==this._time&&!(o&&this.vars.repeatRefresh&&g!==_))return this;if(h!==this._dur)return this.render(s,a,o)}if(this._tTime=c,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=y=(b||this._ease)(d/h),this._from&&(this.ratio=y=1-y),d&&!l&&!a&&!g&&(ii(this,"onStart"),this._tTime!==c))return this;for(p=this._pt;p;)p.r(y,p.d),p=p._next;x&&x.render(s<0?s:x._dur*x._ease(d/this._dur),a,o)||this._startAt&&(this._zTime=s),this._onUpdate&&!a&&(f&&Md(this,s,a,o),ii(this,"onUpdate")),this._repeat&&g!==_&&this.vars.onRepeat&&!a&&this.parent&&ii(this,"onRepeat"),(c===this._tDur||!c)&&this._tTime===c&&(f&&!this._onUpdate&&Md(this,s,!0,!0),(s||!h)&&(c===this._tDur&&this._ts>0||!c&&this._ts<0)&&Xr(this,1),!a&&!(f&&!l)&&(c||l||m)&&(ii(this,c===u?"onComplete":"onReverseComplete",!0),this._prom&&!(c<u&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),r.prototype.invalidate.call(this,s)},t.resetTo=function(s,a,o,l,u){Xo||ei.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),f;return this._initted||Ph(this,h),f=this._ease(h/this._dur),yy(this,s,a,o,l,f,h,u)?this.resetTo(s,a,o,l,1):(Kc(this,0),this.parent||Eg(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(s,a){if(a===void 0&&(a="all"),!s&&(!a||a==="all"))return this._lazy=this._pt=0,this.parent?fo(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(s,a,Rr&&Rr.vars.overwrite!==!0)._first||fo(this),this.parent&&o!==this.timeline.totalDuration()&&ka(this,this._dur*this.timeline._tDur/o,0,1),this}var l=this._targets,u=s?gi(s):l,h=this._ptLookup,f=this._pt,c,d,p,g,v,_,m;if((!a||a==="all")&&Kv(l,u))return a==="all"&&(this._pt=0),fo(this);for(c=this._op=this._op||[],a!=="all"&&(hn(a)&&(v={},Gn(a,function(y){return v[y]=1}),a=v),a=xy(l,a)),m=l.length;m--;)if(~u.indexOf(l[m])){d=h[m],a==="all"?(c[m]=a,g=d,p={}):(p=c[m]=c[m]||{},g=a);for(v in g)_=d&&d[v],_&&((!("kill"in _.d)||_.d.kill(v)===!0)&&Yc(this,_,"_pt"),delete d[v]),p!=="all"&&(p[v]=1)}return this._initted&&!this._pt&&f&&fo(this),this},e.to=function(s,a){return new e(s,a,arguments[2])},e.from=function(s,a){return Ao(1,arguments)},e.delayedCall=function(s,a,o,l){return new e(a,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:a,onReverseComplete:a,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:l})},e.fromTo=function(s,a,o){return Ao(2,arguments)},e.set=function(s,a){return a.duration=0,a.repeatDelay||(a.repeat=0),new e(s,a)},e.killTweensOf=function(s,a,o){return kt.killTweensOf(s,a,o)},e}(qo);yi(Kt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Gn("staggerTo,staggerFrom,staggerFromTo",function(r){Kt[r]=function(){var e=new Ln,t=Cd.call(arguments,0);return t.splice(r==="staggerFromTo"?5:4,0,0),e[r].apply(e,t)}});var Rh=function(e,t,n){return e[t]=n},qg=function(e,t,n){return e[t](n)},Sy=function(e,t,n,s){return e[t](s.fp,n)},wy=function(e,t,n){return e.setAttribute(t,n)},Lh=function(e,t){return zt(e[t])?qg:Sh(e[t])&&e.setAttribute?wy:Rh},Yg=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},Ey=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},jg=function(e,t){var n=t._pt,s="";if(!e&&t.b)s=t.b;else if(e===1&&t.e)s=t.e;else{for(;n;)s=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+s,n=n._next;s+=t.c}t.set(t.t,t.p,s,t)},Ih=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},Ty=function(e,t,n,s){for(var a=this._pt,o;a;)o=a._next,a.p===s&&a.modifier(e,t,n),a=o},My=function(e){for(var t=this._pt,n,s;t;)s=t._next,t.p===e&&!t.op||t.op===e?Yc(this,t,"_pt"):t.dep||(n=1),t=s;return!n},Ay=function(e,t,n,s){s.mSet(e,t,s.m.call(s.tween,n,s.mt),s)},Kg=function(e){for(var t=e._pt,n,s,a,o;t;){for(n=t._next,s=a;s&&s.pr>t.pr;)s=s._next;(t._prev=s?s._prev:o)?t._prev._next=t:a=t,(t._next=s)?s._prev=t:o=t,t=n}e._pt=a},Wn=function(){function r(t,n,s,a,o,l,u,h,f){this.t=n,this.s=a,this.c=o,this.p=s,this.r=l||Yg,this.d=u||this,this.set=h||Rh,this.pr=f||0,this._next=t,t&&(t._prev=this)}var e=r.prototype;return e.modifier=function(n,s,a){this.mSet=this.mSet||this.set,this.set=Ay,this.m=n,this.mt=a,this.tween=s},r}();Gn(Ah+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return Mh[r]=1});oi.TweenMax=oi.TweenLite=Kt;oi.TimelineLite=oi.TimelineMax=Ln;kt=new Ln({sortChildren:!1,defaults:Na,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});si.stringFilter=Bg;var Is=[],lc={},Cy=[],_f=0,Dy=0,_u=function(e){return(lc[e]||Cy).map(function(t){return t()})},Ld=function(){var e=Date.now(),t=[];e-_f>2&&(_u("matchMediaInit"),Is.forEach(function(n){var s=n.queries,a=n.conditions,o,l,u,h;for(l in s)o=Ri.matchMedia(s[l]).matches,o&&(u=1),o!==a[l]&&(a[l]=o,h=1);h&&(n.revert(),u&&t.push(n))}),_u("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(s){return n.add(null,s)})}),_f=e,_u("matchMedia"))},Zg=function(){function r(t,n){this.selector=n&&Dd(n),this.data=[],this._r=[],this.isReverted=!1,this.id=Dy++,t&&this.add(t)}var e=r.prototype;return e.add=function(n,s,a){zt(n)&&(a=s,s=n,n=zt);var o=this,l=function(){var h=Nt,f=o.selector,c;return h&&h!==o&&h.data.push(o),a&&(o.selector=Dd(a)),Nt=o,c=s.apply(o,arguments),zt(c)&&o._r.push(c),Nt=h,o.selector=f,o.isReverted=!1,c};return o.last=l,n===zt?l(o,function(u){return o.add(null,u)}):n?o[n]=l:l},e.ignore=function(n){var s=Nt;Nt=null,n(this),Nt=s},e.getTweens=function(){var n=[];return this.data.forEach(function(s){return s instanceof r?n.push.apply(n,s.getTweens()):s instanceof Kt&&!(s.parent&&s.parent.data==="nested")&&n.push(s)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,s){var a=this;if(n?function(){for(var l=a.getTweens(),u=a.data.length,h;u--;)h=a.data[u],h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(f){return l.splice(l.indexOf(f),1)}));for(l.map(function(f){return{g:f._dur||f._delay||f._sat&&!f._sat.vars.immediateRender?f.globalTime(0):-1/0,t:f}}).sort(function(f,c){return c.g-f.g||-1/0}).forEach(function(f){return f.t.revert(n)}),u=a.data.length;u--;)h=a.data[u],h instanceof Ln?h.data!=="nested"&&(h.scrollTrigger&&h.scrollTrigger.revert(),h.kill()):!(h instanceof Kt)&&h.revert&&h.revert(n);a._r.forEach(function(f){return f(n,a)}),a.isReverted=!0}():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),s)for(var o=Is.length;o--;)Is[o].id===this.id&&Is.splice(o,1)},e.revert=function(n){this.kill(n||{})},r}(),Py=function(){function r(t){this.contexts=[],this.scope=t,Nt&&Nt.data.push(this)}var e=r.prototype;return e.add=function(n,s,a){Xi(n)||(n={matches:n});var o=new Zg(0,a||this.scope),l=o.conditions={},u,h,f;Nt&&!o.selector&&(o.selector=Nt.selector),this.contexts.push(o),s=o.add("onMatch",s),o.queries=n;for(h in n)h==="all"?f=1:(u=Ri.matchMedia(n[h]),u&&(Is.indexOf(o)<0&&Is.push(o),(l[h]=u.matches)&&(f=1),u.addListener?u.addListener(Ld):u.addEventListener("change",Ld)));return f&&s(o,function(c){return o.add(null,c)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(s){return s.kill(n,!0)})},r}(),Ac={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(s){return Ng(s)})},timeline:function(e){return new Ln(e)},getTweensOf:function(e,t){return kt.getTweensOf(e,t)},getProperty:function(e,t,n,s){hn(e)&&(e=gi(e)[0]);var a=Ps(e||{}).get,o=n?wg:Sg;return n==="native"&&(n=""),e&&(t?o((Jn[t]&&Jn[t].get||a)(e,t,n,s)):function(l,u,h){return o((Jn[l]&&Jn[l].get||a)(e,l,u,h))})},quickSetter:function(e,t,n){if(e=gi(e),e.length>1){var s=e.map(function(f){return qn.quickSetter(f,t,n)}),a=s.length;return function(f){for(var c=a;c--;)s[c](f)}}e=e[0]||{};var o=Jn[t],l=Ps(e),u=l.harness&&(l.harness.aliases||{})[t]||t,h=o?function(f){var c=new o;Sa._pt=0,c.init(e,n?f+n:f,Sa,0,[e]),c.render(1,c),Sa._pt&&Ih(1,Sa)}:l.set(e,u);return o?h:function(f){return h(e,u,n?f+n:f,l,1)}},quickTo:function(e,t,n){var s,a=qn.to(e,zs((s={},s[t]="+=0.1",s.paused=!0,s),n||{})),o=function(u,h,f){return a.resetTo(t,u,h,f)};return o.tween=a,o},isTweening:function(e){return kt.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Ls(e.ease,Na.ease)),hf(Na,e||{})},config:function(e){return hf(si,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,s=e.plugins,a=e.defaults,o=e.extendTimeline;(s||"").split(",").forEach(function(l){return l&&!Jn[l]&&!oi[l]&&Go(t+" effect requires "+l+" plugin.")}),fu[t]=function(l,u,h){return n(gi(l),yi(u||{},a),h)},o&&(Ln.prototype[t]=function(l,u,h){return this.add(fu[t](l,Xi(u)?u:(h=u)&&{},this),h)})},registerEase:function(e,t){ut[e]=Ls(t)},parseEase:function(e,t){return arguments.length?Ls(e,t):ut},getById:function(e){return kt.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new Ln(e),s,a;for(n.smoothChildTiming=Vn(e.smoothChildTiming),kt.remove(n),n._dp=0,n._time=n._tTime=kt._time,s=kt._first;s;)a=s._next,(t||!(!s._dur&&s instanceof Kt&&s.vars.onComplete===s._targets[0]))&&Fi(n,s,s._start-s._delay),s=a;return Fi(kt,n,0),n},context:function(e,t){return e?new Zg(e,t):Nt},matchMedia:function(e){return new Py(e)},matchMediaRefresh:function(){return Is.forEach(function(e){var t=e.conditions,n,s;for(s in t)t[s]&&(t[s]=!1,n=1);n&&e.revert()})||Ld()},addEventListener:function(e,t){var n=lc[e]||(lc[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=lc[e],s=n&&n.indexOf(t);s>=0&&n.splice(s,1)},utils:{wrap:ly,wrapYoyo:cy,distribute:Pg,random:Lg,snap:Rg,normalize:oy,getUnit:Sn,clamp:iy,splitColor:Ug,toArray:gi,selector:Dd,mapRange:Fg,pipe:sy,unitize:ay,interpolate:uy,shuffle:Dg},install:_g,effects:fu,ticker:ei,updateRoot:Ln.updateRoot,plugins:Jn,globalTimeline:kt,core:{PropTween:Wn,globals:vg,Tween:Kt,Timeline:Ln,Animation:qo,getCache:Ps,_removeLinkedListItem:Yc,reverting:function(){return wn},context:function(e){return e&&Nt&&(Nt.data.push(e),e._ctx=Nt),Nt},suppressOverwrites:function(e){return bh=e}}};Gn("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return Ac[r]=Kt[r]});ei.add(Ln.updateRoot);Sa=Ac.to({},{duration:0});var Ry=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},Ly=function(e,t){var n=e._targets,s,a,o;for(s in t)for(a=n.length;a--;)o=e._ptLookup[a][s],o&&(o=o.d)&&(o._pt&&(o=Ry(o,s)),o&&o.modifier&&o.modifier(t[s],e,n[a],s))},vu=function(e,t){return{name:e,rawVars:1,init:function(s,a,o){o._onInit=function(l){var u,h;if(hn(a)&&(u={},Gn(a,function(f){return u[f]=1}),a=u),t){u={};for(h in a)u[h]=t(a[h]);a=u}Ly(l,a)}}}},qn=Ac.registerPlugin({name:"attr",init:function(e,t,n,s,a){var o,l,u;this.tween=n;for(o in t)u=e.getAttribute(o)||"",l=this.add(e,"setAttribute",(u||0)+"",t[o],s,a,0,0,o),l.op=o,l.b=u,this._props.push(o)},render:function(e,t){for(var n=t._pt;n;)wn?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},vu("roundProps",Pd),vu("modifiers"),vu("snap",Rg))||Ac;Kt.version=Ln.version=qn.version="3.12.5";gg=1;wh()&&Ba();ut.Power0;ut.Power1;ut.Power2;ut.Power3;ut.Power4;ut.Linear;ut.Quad;ut.Cubic;ut.Quart;ut.Quint;ut.Strong;ut.Elastic;ut.Back;ut.SteppedEase;ut.Bounce;ut.Sine;ut.Expo;ut.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var vf,Lr,Aa,Fh,ws,yf,Oh,Iy=function(){return typeof window<"u"},pr={},hs=180/Math.PI,Ca=Math.PI/180,Ks=Math.atan2,xf=1e8,Nh=/([A-Z])/g,Fy=/(left|right|width|margin|padding|x)/i,Oy=/[\s,\(]\S/,ki={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Id=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Ny=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Uy=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},ky=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},Jg=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Qg=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},By=function(e,t,n){return e.style[t]=n},zy=function(e,t,n){return e.style.setProperty(t,n)},Hy=function(e,t,n){return e._gsap[t]=n},Vy=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},Gy=function(e,t,n,s,a){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(a,o)},Wy=function(e,t,n,s,a){var o=e._gsap;o[t]=n,o.renderTransform(a,o)},Bt="transform",$n=Bt+"Origin",$y=function r(e,t){var n=this,s=this.target,a=s.style,o=s._gsap;if(e in pr&&a){if(this.tfm=this.tfm||{},e!=="transform")e=ki[e]||e,~e.indexOf(",")?e.split(",").forEach(function(l){return n.tfm[l]=ir(s,l)}):this.tfm[e]=o.x?o[e]:ir(s,e),e===$n&&(this.tfm.zOrigin=o.zOrigin);else return ki.transform.split(",").forEach(function(l){return r.call(n,l,t)});if(this.props.indexOf(Bt)>=0)return;o.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push($n,t,"")),e=Bt}(a||t)&&this.props.push(e,t,a[e])},e_=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Xy=function(){var e=this.props,t=this.target,n=t.style,s=t._gsap,a,o;for(a=0;a<e.length;a+=3)e[a+1]?t[e[a]]=e[a+2]:e[a+2]?n[e[a]]=e[a+2]:n.removeProperty(e[a].substr(0,2)==="--"?e[a]:e[a].replace(Nh,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)s[o]=this.tfm[o];s.svg&&(s.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),a=Oh(),(!a||!a.isStart)&&!n[Bt]&&(e_(n),s.zOrigin&&n[$n]&&(n[$n]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},t_=function(e,t){var n={target:e,props:[],revert:Xy,save:$y};return e._gsap||qn.core.getCache(e),t&&t.split(",").forEach(function(s){return n.save(s)}),n},n_,Fd=function(e,t){var n=Lr.createElementNS?Lr.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Lr.createElement(e);return n&&n.style?n:Lr.createElement(e)},Gi=function r(e,t,n){var s=getComputedStyle(e);return s[t]||s.getPropertyValue(t.replace(Nh,"-$1").toLowerCase())||s.getPropertyValue(t)||!n&&r(e,za(t)||t,1)||""},bf="O,Moz,ms,Ms,Webkit".split(","),za=function(e,t,n){var s=t||ws,a=s.style,o=5;if(e in a&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(bf[o]+e in a););return o<0?null:(o===3?"ms":o>=0?bf[o]:"")+e},Od=function(){Iy()&&window.document&&(vf=window,Lr=vf.document,Aa=Lr.documentElement,ws=Fd("div")||{style:{}},Fd("div"),Bt=za(Bt),$n=Bt+"Origin",ws.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",n_=!!za("perspective"),Oh=qn.core.reverting,Fh=1)},yu=function r(e){var t=Fd("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,s=this.nextSibling,a=this.style.cssText,o;if(Aa.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=r}catch{}else this._gsapBBox&&(o=this._gsapBBox());return n&&(s?n.insertBefore(this,s):n.appendChild(this)),Aa.removeChild(t),this.style.cssText=a,o},Sf=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},i_=function(e){var t;try{t=e.getBBox()}catch{t=yu.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===yu||(t=yu.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+Sf(e,["x","cx","x1"])||0,y:+Sf(e,["y","cy","y1"])||0,width:0,height:0}:t},r_=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&i_(e))},Hs=function(e,t){if(t){var n=e.style,s;t in pr&&t!==$n&&(t=Bt),n.removeProperty?(s=t.substr(0,2),(s==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(s==="--"?t:t.replace(Nh,"-$1").toLowerCase())):n.removeAttribute(t)}},Ir=function(e,t,n,s,a,o){var l=new Wn(e._pt,t,n,0,1,o?Qg:Jg);return e._pt=l,l.b=s,l.e=a,e._props.push(n),l},wf={deg:1,rad:1,turn:1},qy={grid:1,flex:1},qr=function r(e,t,n,s){var a=parseFloat(n)||0,o=(n+"").trim().substr((a+"").length)||"px",l=ws.style,u=Fy.test(t),h=e.tagName.toLowerCase()==="svg",f=(h?"client":"offset")+(u?"Width":"Height"),c=100,d=s==="px",p=s==="%",g,v,_,m;if(s===o||!a||wf[s]||wf[o])return a;if(o!=="px"&&!d&&(a=r(e,t,n,"px")),m=e.getCTM&&r_(e),(p||o==="%")&&(pr[t]||~t.indexOf("adius")))return g=m?e.getBBox()[u?"width":"height"]:e[f],Xt(p?a/g*c:a/100*g);if(l[u?"width":"height"]=c+(d?o:s),v=~t.indexOf("adius")||s==="em"&&e.appendChild&&!h?e:e.parentNode,m&&(v=(e.ownerSVGElement||{}).parentNode),(!v||v===Lr||!v.appendChild)&&(v=Lr.body),_=v._gsap,_&&p&&_.width&&u&&_.time===ei.time&&!_.uncache)return Xt(a/_.width*c);if(p&&(t==="height"||t==="width")){var y=e.style[t];e.style[t]=c+s,g=e[f],y?e.style[t]=y:Hs(e,t)}else(p||o==="%")&&!qy[Gi(v,"display")]&&(l.position=Gi(e,"position")),v===e&&(l.position="static"),v.appendChild(ws),g=ws[f],v.removeChild(ws),l.position="absolute";return u&&p&&(_=Ps(v),_.time=ei.time,_.width=v[f]),Xt(d?g*a/c:g&&a?c/g*a:0)},ir=function(e,t,n,s){var a;return Fh||Od(),t in ki&&t!=="transform"&&(t=ki[t],~t.indexOf(",")&&(t=t.split(",")[0])),pr[t]&&t!=="transform"?(a=jo(e,s),a=t!=="transformOrigin"?a[t]:a.svg?a.origin:Dc(Gi(e,$n))+" "+a.zOrigin+"px"):(a=e.style[t],(!a||a==="auto"||s||~(a+"").indexOf("calc("))&&(a=Cc[t]&&Cc[t](e,t,n)||Gi(e,t)||xg(e,t)||(t==="opacity"?1:0))),n&&!~(a+"").trim().indexOf(" ")?qr(e,t,a,n)+n:a},Yy=function(e,t,n,s){if(!n||n==="none"){var a=za(t,e,1),o=a&&Gi(e,a,1);o&&o!==n?(t=a,n=o):t==="borderColor"&&(n=Gi(e,"borderTopColor"))}var l=new Wn(this._pt,e.style,t,0,1,jg),u=0,h=0,f,c,d,p,g,v,_,m,y,x,b,T;if(l.b=n,l.e=s,n+="",s+="",s==="auto"&&(v=e.style[t],e.style[t]=s,s=Gi(e,t)||s,v?e.style[t]=v:Hs(e,t)),f=[n,s],Bg(f),n=f[0],s=f[1],d=n.match(ba)||[],T=s.match(ba)||[],T.length){for(;c=ba.exec(s);)_=c[0],y=s.substring(u,c.index),g?g=(g+1)%5:(y.substr(-5)==="rgba("||y.substr(-5)==="hsla(")&&(g=1),_!==(v=d[h++]||"")&&(p=parseFloat(v)||0,b=v.substr((p+"").length),_.charAt(1)==="="&&(_=Ma(p,_)+b),m=parseFloat(_),x=_.substr((m+"").length),u=ba.lastIndex-x.length,x||(x=x||si.units[t]||b,u===s.length&&(s+=x,l.e+=x)),b!==x&&(p=qr(e,t,v,x)||0),l._pt={_next:l._pt,p:y||h===1?y:",",s:p,c:m-p,m:g&&g<4||t==="zIndex"?Math.round:0});l.c=u<s.length?s.substring(u,s.length):""}else l.r=t==="display"&&s==="none"?Qg:Jg;return pg.test(s)&&(l.e=0),this._pt=l,l},Ef={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},jy=function(e){var t=e.split(" "),n=t[0],s=t[1]||"50%";return(n==="top"||n==="bottom"||s==="left"||s==="right")&&(e=n,n=s,s=e),t[0]=Ef[n]||n,t[1]=Ef[s]||s,t.join(" ")},Ky=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,s=n.style,a=t.u,o=n._gsap,l,u,h;if(a==="all"||a===!0)s.cssText="",u=1;else for(a=a.split(","),h=a.length;--h>-1;)l=a[h],pr[l]&&(u=1,l=l==="transformOrigin"?$n:Bt),Hs(n,l);u&&(Hs(n,Bt),o&&(o.svg&&n.removeAttribute("transform"),jo(n,1),o.uncache=1,e_(s)))}},Cc={clearProps:function(e,t,n,s,a){if(a.data!=="isFromStart"){var o=e._pt=new Wn(e._pt,t,n,0,0,Ky);return o.u=s,o.pr=-10,o.tween=a,e._props.push(n),1}}},Yo=[1,0,0,1,0,0],s_={},a_=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Tf=function(e){var t=Gi(e,Bt);return a_(t)?Yo:t.substr(7).match(fg).map(Xt)},Uh=function(e,t){var n=e._gsap||Ps(e),s=e.style,a=Tf(e),o,l,u,h;return n.svg&&e.getAttribute("transform")?(u=e.transform.baseVal.consolidate().matrix,a=[u.a,u.b,u.c,u.d,u.e,u.f],a.join(",")==="1,0,0,1,0,0"?Yo:a):(a===Yo&&!e.offsetParent&&e!==Aa&&!n.svg&&(u=s.display,s.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(h=1,l=e.nextElementSibling,Aa.appendChild(e)),a=Tf(e),u?s.display=u:Hs(e,"display"),h&&(l?o.insertBefore(e,l):o?o.appendChild(e):Aa.removeChild(e))),t&&a.length>6?[a[0],a[1],a[4],a[5],a[12],a[13]]:a)},Nd=function(e,t,n,s,a,o){var l=e._gsap,u=a||Uh(e,!0),h=l.xOrigin||0,f=l.yOrigin||0,c=l.xOffset||0,d=l.yOffset||0,p=u[0],g=u[1],v=u[2],_=u[3],m=u[4],y=u[5],x=t.split(" "),b=parseFloat(x[0])||0,T=parseFloat(x[1])||0,E,M,A,S;n?u!==Yo&&(M=p*_-g*v)&&(A=b*(_/M)+T*(-v/M)+(v*y-_*m)/M,S=b*(-g/M)+T*(p/M)-(p*y-g*m)/M,b=A,T=S):(E=i_(e),b=E.x+(~x[0].indexOf("%")?b/100*E.width:b),T=E.y+(~(x[1]||x[0]).indexOf("%")?T/100*E.height:T)),s||s!==!1&&l.smooth?(m=b-h,y=T-f,l.xOffset=c+(m*p+y*v)-m,l.yOffset=d+(m*g+y*_)-y):l.xOffset=l.yOffset=0,l.xOrigin=b,l.yOrigin=T,l.smooth=!!s,l.origin=t,l.originIsAbsolute=!!n,e.style[$n]="0px 0px",o&&(Ir(o,l,"xOrigin",h,b),Ir(o,l,"yOrigin",f,T),Ir(o,l,"xOffset",c,l.xOffset),Ir(o,l,"yOffset",d,l.yOffset)),e.setAttribute("data-svg-origin",b+" "+T)},jo=function(e,t){var n=e._gsap||new Gg(e);if("x"in n&&!t&&!n.uncache)return n;var s=e.style,a=n.scaleX<0,o="px",l="deg",u=getComputedStyle(e),h=Gi(e,$n)||"0",f,c,d,p,g,v,_,m,y,x,b,T,E,M,A,S,w,C,D,R,F,k,z,O,I,j,N,q,ne,W,H,G;return f=c=d=v=_=m=y=x=b=0,p=g=1,n.svg=!!(e.getCTM&&r_(e)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(s[Bt]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[Bt]!=="none"?u[Bt]:"")),s.scale=s.rotate=s.translate="none"),M=Uh(e,n.svg),n.svg&&(n.uncache?(I=e.getBBox(),h=n.xOrigin-I.x+"px "+(n.yOrigin-I.y)+"px",O=""):O=!t&&e.getAttribute("data-svg-origin"),Nd(e,O||h,!!O||n.originIsAbsolute,n.smooth!==!1,M)),T=n.xOrigin||0,E=n.yOrigin||0,M!==Yo&&(C=M[0],D=M[1],R=M[2],F=M[3],f=k=M[4],c=z=M[5],M.length===6?(p=Math.sqrt(C*C+D*D),g=Math.sqrt(F*F+R*R),v=C||D?Ks(D,C)*hs:0,y=R||F?Ks(R,F)*hs+v:0,y&&(g*=Math.abs(Math.cos(y*Ca))),n.svg&&(f-=T-(T*C+E*R),c-=E-(T*D+E*F))):(G=M[6],W=M[7],N=M[8],q=M[9],ne=M[10],H=M[11],f=M[12],c=M[13],d=M[14],A=Ks(G,ne),_=A*hs,A&&(S=Math.cos(-A),w=Math.sin(-A),O=k*S+N*w,I=z*S+q*w,j=G*S+ne*w,N=k*-w+N*S,q=z*-w+q*S,ne=G*-w+ne*S,H=W*-w+H*S,k=O,z=I,G=j),A=Ks(-R,ne),m=A*hs,A&&(S=Math.cos(-A),w=Math.sin(-A),O=C*S-N*w,I=D*S-q*w,j=R*S-ne*w,H=F*w+H*S,C=O,D=I,R=j),A=Ks(D,C),v=A*hs,A&&(S=Math.cos(A),w=Math.sin(A),O=C*S+D*w,I=k*S+z*w,D=D*S-C*w,z=z*S-k*w,C=O,k=I),_&&Math.abs(_)+Math.abs(v)>359.9&&(_=v=0,m=180-m),p=Xt(Math.sqrt(C*C+D*D+R*R)),g=Xt(Math.sqrt(z*z+G*G)),A=Ks(k,z),y=Math.abs(A)>2e-4?A*hs:0,b=H?1/(H<0?-H:H):0),n.svg&&(O=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!a_(Gi(e,Bt)),O&&e.setAttribute("transform",O))),Math.abs(y)>90&&Math.abs(y)<270&&(a?(p*=-1,y+=v<=0?180:-180,v+=v<=0?180:-180):(g*=-1,y+=y<=0?180:-180)),t=t||n.uncache,n.x=f-((n.xPercent=f&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-f)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+o,n.y=c-((n.yPercent=c&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-c)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+o,n.z=d+o,n.scaleX=Xt(p),n.scaleY=Xt(g),n.rotation=Xt(v)+l,n.rotationX=Xt(_)+l,n.rotationY=Xt(m)+l,n.skewX=y+l,n.skewY=x+l,n.transformPerspective=b+o,(n.zOrigin=parseFloat(h.split(" ")[2])||!t&&n.zOrigin||0)&&(s[$n]=Dc(h)),n.xOffset=n.yOffset=0,n.force3D=si.force3D,n.renderTransform=n.svg?Jy:n_?o_:Zy,n.uncache=0,n},Dc=function(e){return(e=e.split(" "))[0]+" "+e[1]},xu=function(e,t,n){var s=Sn(t);return Xt(parseFloat(t)+parseFloat(qr(e,"x",n+"px",s)))+s},Zy=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,o_(e,t)},ts="0deg",eo="0px",ns=") ",o_=function(e,t){var n=t||this,s=n.xPercent,a=n.yPercent,o=n.x,l=n.y,u=n.z,h=n.rotation,f=n.rotationY,c=n.rotationX,d=n.skewX,p=n.skewY,g=n.scaleX,v=n.scaleY,_=n.transformPerspective,m=n.force3D,y=n.target,x=n.zOrigin,b="",T=m==="auto"&&e&&e!==1||m===!0;if(x&&(c!==ts||f!==ts)){var E=parseFloat(f)*Ca,M=Math.sin(E),A=Math.cos(E),S;E=parseFloat(c)*Ca,S=Math.cos(E),o=xu(y,o,M*S*-x),l=xu(y,l,-Math.sin(E)*-x),u=xu(y,u,A*S*-x+x)}_!==eo&&(b+="perspective("+_+ns),(s||a)&&(b+="translate("+s+"%, "+a+"%) "),(T||o!==eo||l!==eo||u!==eo)&&(b+=u!==eo||T?"translate3d("+o+", "+l+", "+u+") ":"translate("+o+", "+l+ns),h!==ts&&(b+="rotate("+h+ns),f!==ts&&(b+="rotateY("+f+ns),c!==ts&&(b+="rotateX("+c+ns),(d!==ts||p!==ts)&&(b+="skew("+d+", "+p+ns),(g!==1||v!==1)&&(b+="scale("+g+", "+v+ns),y.style[Bt]=b||"translate(0, 0)"},Jy=function(e,t){var n=t||this,s=n.xPercent,a=n.yPercent,o=n.x,l=n.y,u=n.rotation,h=n.skewX,f=n.skewY,c=n.scaleX,d=n.scaleY,p=n.target,g=n.xOrigin,v=n.yOrigin,_=n.xOffset,m=n.yOffset,y=n.forceCSS,x=parseFloat(o),b=parseFloat(l),T,E,M,A,S;u=parseFloat(u),h=parseFloat(h),f=parseFloat(f),f&&(f=parseFloat(f),h+=f,u+=f),u||h?(u*=Ca,h*=Ca,T=Math.cos(u)*c,E=Math.sin(u)*c,M=Math.sin(u-h)*-d,A=Math.cos(u-h)*d,h&&(f*=Ca,S=Math.tan(h-f),S=Math.sqrt(1+S*S),M*=S,A*=S,f&&(S=Math.tan(f),S=Math.sqrt(1+S*S),T*=S,E*=S)),T=Xt(T),E=Xt(E),M=Xt(M),A=Xt(A)):(T=c,A=d,E=M=0),(x&&!~(o+"").indexOf("px")||b&&!~(l+"").indexOf("px"))&&(x=qr(p,"x",o,"px"),b=qr(p,"y",l,"px")),(g||v||_||m)&&(x=Xt(x+g-(g*T+v*M)+_),b=Xt(b+v-(g*E+v*A)+m)),(s||a)&&(S=p.getBBox(),x=Xt(x+s/100*S.width),b=Xt(b+a/100*S.height)),S="matrix("+T+","+E+","+M+","+A+","+x+","+b+")",p.setAttribute("transform",S),y&&(p.style[Bt]=S)},Qy=function(e,t,n,s,a){var o=360,l=hn(a),u=parseFloat(a)*(l&&~a.indexOf("rad")?hs:1),h=u-s,f=s+h+"deg",c,d;return l&&(c=a.split("_")[1],c==="short"&&(h%=o,h!==h%(o/2)&&(h+=h<0?o:-o)),c==="cw"&&h<0?h=(h+o*xf)%o-~~(h/o)*o:c==="ccw"&&h>0&&(h=(h-o*xf)%o-~~(h/o)*o)),e._pt=d=new Wn(e._pt,t,n,s,h,Ny),d.e=f,d.u="deg",e._props.push(n),d},Mf=function(e,t){for(var n in t)e[n]=t[n];return e},ex=function(e,t,n){var s=Mf({},n._gsap),a="perspective,force3D,transformOrigin,svgOrigin",o=n.style,l,u,h,f,c,d,p,g;s.svg?(h=n.getAttribute("transform"),n.setAttribute("transform",""),o[Bt]=t,l=jo(n,1),Hs(n,Bt),n.setAttribute("transform",h)):(h=getComputedStyle(n)[Bt],o[Bt]=t,l=jo(n,1),o[Bt]=h);for(u in pr)h=s[u],f=l[u],h!==f&&a.indexOf(u)<0&&(p=Sn(h),g=Sn(f),c=p!==g?qr(n,u,h,g):parseFloat(h),d=parseFloat(f),e._pt=new Wn(e._pt,l,u,c,d-c,Id),e._pt.u=g||0,e._props.push(u));Mf(l,s)};Gn("padding,margin,Width,Radius",function(r,e){var t="Top",n="Right",s="Bottom",a="Left",o=(e<3?[t,n,s,a]:[t+a,t+n,s+n,s+a]).map(function(l){return e<2?r+l:"border"+l+r});Cc[e>1?"border"+r:r]=function(l,u,h,f,c){var d,p;if(arguments.length<4)return d=o.map(function(g){return ir(l,g,h)}),p=d.join(" "),p.split(d[0]).length===5?d[0]:p;d=(f+"").split(" "),p={},o.forEach(function(g,v){return p[g]=d[v]=d[v]||d[(v-1)/2|0]}),l.init(u,p,c)}});var l_={name:"css",register:Od,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,s,a){var o=this._props,l=e.style,u=n.vars.startAt,h,f,c,d,p,g,v,_,m,y,x,b,T,E,M,A;Fh||Od(),this.styles=this.styles||t_(e),A=this.styles.props,this.tween=n;for(v in t)if(v!=="autoRound"&&(f=t[v],!(Jn[v]&&Wg(v,t,n,s,e,a)))){if(p=typeof f,g=Cc[v],p==="function"&&(f=f.call(n,s,e,a),p=typeof f),p==="string"&&~f.indexOf("random(")&&(f=$o(f)),g)g(this,e,v,f,n)&&(M=1);else if(v.substr(0,2)==="--")h=(getComputedStyle(e).getPropertyValue(v)+"").trim(),f+="",Hr.lastIndex=0,Hr.test(h)||(_=Sn(h),m=Sn(f)),m?_!==m&&(h=qr(e,v,h,m)+m):_&&(f+=_),this.add(l,"setProperty",h,f,s,a,0,0,v),o.push(v),A.push(v,0,l[v]);else if(p!=="undefined"){if(u&&v in u?(h=typeof u[v]=="function"?u[v].call(n,s,e,a):u[v],hn(h)&&~h.indexOf("random(")&&(h=$o(h)),Sn(h+"")||h==="auto"||(h+=si.units[v]||Sn(ir(e,v))||""),(h+"").charAt(1)==="="&&(h=ir(e,v))):h=ir(e,v),d=parseFloat(h),y=p==="string"&&f.charAt(1)==="="&&f.substr(0,2),y&&(f=f.substr(2)),c=parseFloat(f),v in ki&&(v==="autoAlpha"&&(d===1&&ir(e,"visibility")==="hidden"&&c&&(d=0),A.push("visibility",0,l.visibility),Ir(this,l,"visibility",d?"inherit":"hidden",c?"inherit":"hidden",!c)),v!=="scale"&&v!=="transform"&&(v=ki[v],~v.indexOf(",")&&(v=v.split(",")[0]))),x=v in pr,x){if(this.styles.save(v),b||(T=e._gsap,T.renderTransform&&!t.parseTransform||jo(e,t.parseTransform),E=t.smoothOrigin!==!1&&T.smooth,b=this._pt=new Wn(this._pt,l,Bt,0,1,T.renderTransform,T,0,-1),b.dep=1),v==="scale")this._pt=new Wn(this._pt,T,"scaleY",T.scaleY,(y?Ma(T.scaleY,y+c):c)-T.scaleY||0,Id),this._pt.u=0,o.push("scaleY",v),v+="X";else if(v==="transformOrigin"){A.push($n,0,l[$n]),f=jy(f),T.svg?Nd(e,f,0,E,0,this):(m=parseFloat(f.split(" ")[2])||0,m!==T.zOrigin&&Ir(this,T,"zOrigin",T.zOrigin,m),Ir(this,l,v,Dc(h),Dc(f)));continue}else if(v==="svgOrigin"){Nd(e,f,1,E,0,this);continue}else if(v in s_){Qy(this,T,v,d,y?Ma(d,y+f):f);continue}else if(v==="smoothOrigin"){Ir(this,T,"smooth",T.smooth,f);continue}else if(v==="force3D"){T[v]=f;continue}else if(v==="transform"){ex(this,f,e);continue}}else v in l||(v=za(v)||v);if(x||(c||c===0)&&(d||d===0)&&!Oy.test(f)&&v in l)_=(h+"").substr((d+"").length),c||(c=0),m=Sn(f)||(v in si.units?si.units[v]:_),_!==m&&(d=qr(e,v,h,m)),this._pt=new Wn(this._pt,x?T:l,v,d,(y?Ma(d,y+c):c)-d,!x&&(m==="px"||v==="zIndex")&&t.autoRound!==!1?ky:Id),this._pt.u=m||0,_!==m&&m!=="%"&&(this._pt.b=h,this._pt.r=Uy);else if(v in l)Yy.call(this,e,v,h,y?y+f:f);else if(v in e)this.add(e,v,h||e[v],y?y+f:f,s,a);else if(v!=="parseTransform"){Th(v,f);continue}x||(v in l?A.push(v,0,l[v]):A.push(v,1,h||e[v])),o.push(v)}}M&&Kg(this)},render:function(e,t){if(t.tween._time||!Oh())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:ir,aliases:ki,getSetter:function(e,t,n){var s=ki[t];return s&&s.indexOf(",")<0&&(t=s),t in pr&&t!==$n&&(e._gsap.x||ir(e,"x"))?n&&yf===n?t==="scale"?Vy:Hy:(yf=n||{})&&(t==="scale"?Gy:Wy):e.style&&!Sh(e.style[t])?By:~t.indexOf("-")?zy:Lh(e,t)},core:{_removeProperty:Hs,_getMatrix:Uh}};qn.utils.checkPrefix=za;qn.core.getStyleSaver=t_;(function(r,e,t,n){var s=Gn(r+","+e+","+t,function(a){pr[a]=1});Gn(e,function(a){si.units[a]="deg",s_[a]=1}),ki[s[13]]=r+","+e,Gn(n,function(a){var o=a.split(":");ki[o[1]]=s[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Gn("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){si.units[r]="px"});qn.registerPlugin(l_);var we=qn.registerPlugin(l_)||qn;we.core.Tween;/*!
 * strings: 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var tx=/(?:^\s+|\s+$)/g,nx=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function kh(r){var e=r.nodeType,t="";if(e===1||e===9||e===11){if(typeof r.textContent=="string")return r.textContent;for(r=r.firstChild;r;r=r.nextSibling)t+=kh(r)}else if(e===3||e===4)return r.nodeValue;return t}function Di(r,e,t,n){if(r+="",t&&(r=r.trim?r.trim():r.replace(tx,"")),e&&e!=="")return r.replace(/>/g,"&gt;").replace(/</g,"&lt;").split(e);for(var s=[],a=r.length,o=0,l,u;o<a;o++)u=r.charAt(o),(u.charCodeAt(0)>=55296&&u.charCodeAt(0)<=56319||r.charCodeAt(o+1)>=65024&&r.charCodeAt(o+1)<=65039)&&(l=((r.substr(o,12).split(nx)||[])[1]||"").length||2,u=r.substr(o,l),s.emoji=1,o+=l-1),s.push(u===">"?"&gt;":u==="<"?"&lt;":n&&u===" "&&(r.charAt(o-1)===" "||r.charAt(o+1)===" ")?"&nbsp;":u);return s}/*!
 * ScrambleTextPlugin 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var cc=function(){function r(t){this.chars=Di(t),this.sets=[],this.length=50;for(var n=0;n<20;n++)this.sets[n]=Cf(80,this.chars)}var e=r.prototype;return e.grow=function(n){for(var s=0;s<20;s++)this.sets[s]+=Cf(n-this.length,this.chars);this.length=n},r}(),Es,c_,u_=function(){return Es||typeof window<"u"&&(Es=window.gsap)&&Es.registerPlugin&&Es},ix=1,Af=/\s+/g,Cf=function(e,t){for(var n=t.length,s="";--e>-1;)s+=t[~~(Math.random()*n)];return s},Ud="ABCDEFGHIJKLMNOPQRSTUVWXYZ",Df=Ud.toLowerCase(),rx={upperCase:new cc(Ud),lowerCase:new cc(Df),upperAndLowerCase:new cc(Ud+Df)},Pf=function(){c_=Es=u_()},ll={version:"3.12.5",name:"scrambleText",register:function(e,t,n){Es=e,Pf()},init:function(e,t,n,s,a){if(c_||Pf(),this.prop="innerHTML"in e?"innerHTML":"textContent"in e?"textContent":0,!!this.prop){this.target=e,typeof t!="object"&&(t={text:t});var o=t.text||t.value||"",l=t.trim!==!1,u=this,h,f,c,d;return u.delimiter=h=t.delimiter||"",u.original=Di(kh(e).replace(Af," ").split("&nbsp;").join(""),h,l),(o==="{original}"||o===!0||o==null)&&(o=u.original.join(h)),u.text=Di((o||"").replace(Af," "),h,l),u.hasClass=!!(t.newClass||t.oldClass),u.newClass=t.newClass,u.oldClass=t.oldClass,d=h==="",u.textHasEmoji=d&&!!u.text.emoji,u.charsHaveEmoji=!!t.chars&&!!Di(t.chars).emoji,u.length=d?u.original.length:u.original.join(h).length,u.lengthDif=(d?u.text.length:u.text.join(h).length)-u.length,u.fillChar=t.fillChar||t.chars&&~t.chars.indexOf(" ")?"&nbsp;":"",u.charSet=c=rx[t.chars||"upperCase"]||new cc(t.chars),u.speed=.05/(t.speed||1),u.prevScrambleTime=0,u.setIndex=Math.random()*20|0,f=u.length+Math.max(u.lengthDif,0),f>c.length&&c.grow(f),u.chars=c.sets[u.setIndex],u.revealDelay=t.revealDelay||0,u.tweenLength=t.tweenLength!==!1,u.tween=n,u.rightToLeft=!!t.rightToLeft,u._props.push("scrambleText","text"),ix}},render:function(e,t){var n=t.target,s=t.prop,a=t.text,o=t.delimiter,l=t.tween,u=t.prevScrambleTime,h=t.revealDelay,f=t.setIndex,c=t.chars,d=t.charSet,p=t.length,g=t.textHasEmoji,v=t.charsHaveEmoji,_=t.lengthDif,m=t.tweenLength,y=t.oldClass,x=t.newClass,b=t.rightToLeft,T=t.fillChar,E=t.speed,M=t.original,A=t.hasClass,S=a.length,w=l._time,C=w-u,D,R,F,k,z,O,I,j,N,q,ne;h&&(l._from&&(w=l._dur-w),e=w===0?0:w<h?1e-6:w===l._dur?1:l._ease((w-h)/(l._dur-h))),e<0?e=0:e>1&&(e=1),b&&(e=1-e),D=~~(e*S+.5),e?((C>E||C<-E)&&(t.setIndex=f=(f+(Math.random()*19|0))%20,t.chars=d.sets[f],t.prevScrambleTime+=C),k=c):k=M.join(o),ne=l._from?e:1-e,q=p+(m?l._from?ne*ne*ne:1-ne*ne*ne:1)*_,b?e===1&&(l._from||l.data==="isFromStart")?(F="",k=M.join(o)):(I=a.slice(D).join(o),v?F=Di(k).slice(0,q-(g?Di(I):I).length+.5|0).join(""):F=k.substr(0,q-(g?Di(I):I).length+.5|0),k=I):(F=a.slice(0,D).join(o),R=(g?Di(F):F).length,v?k=Di(k).slice(R,q+.5|0).join(""):k=k.substr(R,q-R+.5|0)),A?(j=b?y:x,N=b?x:y,z=j&&D!==0,O=N&&D!==S,I=(z?"<span class='"+j+"'>":"")+F+(z?"</span>":"")+(O?"<span class='"+N+"'>":"")+o+k+(O?"</span>":"")):I=F+o+k,n[s]=T==="&nbsp;"&&~I.indexOf("  ")?I.split("  ").join("&nbsp;&nbsp;"):I}};ll.emojiSafeSplit=Di;ll.getText=kh;u_()&&Es.registerPlugin(ll);function sx(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function ax(r,e,t){return e&&sx(r.prototype,e),r}/*!
 * Observer 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var fn,uc,ti,Fr,Or,Da,d_,fs,Do,h_,ar,wi,f_,p_=function(){return fn||typeof window<"u"&&(fn=window.gsap)&&fn.registerPlugin&&fn},m_=1,wa=[],ot=[],Wi=[],Po=Date.now,kd=function(e,t){return t},ox=function(){var e=Do.core,t=e.bridge||{},n=e._scrollers,s=e._proxies;n.push.apply(n,ot),s.push.apply(s,Wi),ot=n,Wi=s,kd=function(o,l){return t[o](l)}},Vr=function(e,t){return~Wi.indexOf(e)&&Wi[Wi.indexOf(e)+1][t]},Ro=function(e){return!!~h_.indexOf(e)},Mn=function(e,t,n,s,a){return e.addEventListener(t,n,{passive:s!==!1,capture:!!a})},Tn=function(e,t,n,s){return e.removeEventListener(t,n,!!s)},bl="scrollLeft",Sl="scrollTop",Bd=function(){return ar&&ar.isPressed||ot.cache++},Pc=function(e,t){var n=function s(a){if(a||a===0){m_&&(ti.history.scrollRestoration="manual");var o=ar&&ar.isPressed;a=s.v=Math.round(a)||(ar&&ar.iOS?1:0),e(a),s.cacheID=ot.cache,o&&kd("ss",a)}else(t||ot.cache!==s.cacheID||kd("ref"))&&(s.cacheID=ot.cache,s.v=e());return s.v+s.offset};return n.offset=0,e&&n},In={s:bl,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Pc(function(r){return arguments.length?ti.scrollTo(r,tn.sc()):ti.pageXOffset||Fr[bl]||Or[bl]||Da[bl]||0})},tn={s:Sl,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:In,sc:Pc(function(r){return arguments.length?ti.scrollTo(In.sc(),r):ti.pageYOffset||Fr[Sl]||Or[Sl]||Da[Sl]||0})},Bn=function(e,t){return(t&&t._ctx&&t._ctx.selector||fn.utils.toArray)(e)[0]||(typeof e=="string"&&fn.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},Yr=function(e,t){var n=t.s,s=t.sc;Ro(e)&&(e=Fr.scrollingElement||Or);var a=ot.indexOf(e),o=s===tn.sc?1:2;!~a&&(a=ot.push(e)-1),ot[a+o]||Mn(e,"scroll",Bd);var l=ot[a+o],u=l||(ot[a+o]=Pc(Vr(e,n),!0)||(Ro(e)?s:Pc(function(h){return arguments.length?e[n]=h:e[n]})));return u.target=e,l||(u.smooth=fn.getProperty(e,"scrollBehavior")==="smooth"),u},zd=function(e,t,n){var s=e,a=e,o=Po(),l=o,u=t||50,h=Math.max(500,u*3),f=function(g,v){var _=Po();v||_-o>u?(a=s,s=g,l=o,o=_):n?s+=g:s=a+(g-a)/(_-l)*(o-l)},c=function(){a=s=n?0:s,l=o=0},d=function(g){var v=l,_=a,m=Po();return(g||g===0)&&g!==s&&f(g),o===l||m-l>h?0:(s+(n?_:-_))/((n?m:o)-v)*1e3};return{update:f,reset:c,getVelocity:d}},to=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},Rf=function(e){var t=Math.max.apply(Math,e),n=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(n)?t:n},g_=function(){Do=fn.core.globals().ScrollTrigger,Do&&Do.core&&ox()},__=function(e){return fn=e||p_(),!uc&&fn&&typeof document<"u"&&document.body&&(ti=window,Fr=document,Or=Fr.documentElement,Da=Fr.body,h_=[ti,Fr,Or,Da],fn.utils.clamp,f_=fn.core.context||function(){},fs="onpointerenter"in Da?"pointer":"mouse",d_=qt.isTouch=ti.matchMedia&&ti.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in ti||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,wi=qt.eventTypes=("ontouchstart"in Or?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in Or?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return m_=0},500),g_(),uc=1),uc};In.op=tn;ot.cache=0;var qt=function(){function r(t){this.init(t)}var e=r.prototype;return e.init=function(n){uc||__(fn)||console.warn("Please gsap.registerPlugin(Observer)"),Do||g_();var s=n.tolerance,a=n.dragMinimum,o=n.type,l=n.target,u=n.lineHeight,h=n.debounce,f=n.preventDefault,c=n.onStop,d=n.onStopDelay,p=n.ignore,g=n.wheelSpeed,v=n.event,_=n.onDragStart,m=n.onDragEnd,y=n.onDrag,x=n.onPress,b=n.onRelease,T=n.onRight,E=n.onLeft,M=n.onUp,A=n.onDown,S=n.onChangeX,w=n.onChangeY,C=n.onChange,D=n.onToggleX,R=n.onToggleY,F=n.onHover,k=n.onHoverEnd,z=n.onMove,O=n.ignoreCheck,I=n.isNormalizer,j=n.onGestureStart,N=n.onGestureEnd,q=n.onWheel,ne=n.onEnable,W=n.onDisable,H=n.onClick,G=n.scrollSpeed,ee=n.capture,te=n.allowClicks,pe=n.lockAxis,me=n.onLockAxis;this.target=l=Bn(l)||Or,this.vars=n,p&&(p=fn.utils.toArray(p)),s=s||1e-9,a=a||0,g=g||1,G=G||1,o=o||"wheel,touch,pointer",h=h!==!1,u||(u=parseFloat(ti.getComputedStyle(Da).lineHeight)||22);var _e,V,ke,Ee,Xe,Ae,He,K=this,Ne=0,dt=0,B=n.passive||!f,P=Yr(l,In),Q=Yr(l,tn),oe=P(),le=Q(),ae=~o.indexOf("touch")&&!~o.indexOf("pointer")&&wi[0]==="pointerdown",Fe=Ro(l),de=l.ownerDocument||Fr,ve=[0,0,0],We=[0,0,0],he=0,Le=function(){return he=Po()},Be=function(Oe,rt){return(K.event=Oe)&&p&&~p.indexOf(Oe.target)||rt&&ae&&Oe.pointerType!=="touch"||O&&O(Oe,rt)},qe=function(){K._vx.reset(),K._vy.reset(),V.pause(),c&&c(K)},ye=function(){var Oe=K.deltaX=Rf(ve),rt=K.deltaY=Rf(We),xe=Math.abs(Oe)>=s,Je=Math.abs(rt)>=s;C&&(xe||Je)&&C(K,Oe,rt,ve,We),xe&&(T&&K.deltaX>0&&T(K),E&&K.deltaX<0&&E(K),S&&S(K),D&&K.deltaX<0!=Ne<0&&D(K),Ne=K.deltaX,ve[0]=ve[1]=ve[2]=0),Je&&(A&&K.deltaY>0&&A(K),M&&K.deltaY<0&&M(K),w&&w(K),R&&K.deltaY<0!=dt<0&&R(K),dt=K.deltaY,We[0]=We[1]=We[2]=0),(Ee||ke)&&(z&&z(K),ke&&(y(K),ke=!1),Ee=!1),Ae&&!(Ae=!1)&&me&&me(K),Xe&&(q(K),Xe=!1),_e=0},Ze=function(Oe,rt,xe){ve[xe]+=Oe,We[xe]+=rt,K._vx.update(Oe),K._vy.update(rt),h?_e||(_e=requestAnimationFrame(ye)):ye()},Qe=function(Oe,rt){pe&&!He&&(K.axis=He=Math.abs(Oe)>Math.abs(rt)?"x":"y",Ae=!0),He!=="y"&&(ve[2]+=Oe,K._vx.update(Oe,!0)),He!=="x"&&(We[2]+=rt,K._vy.update(rt,!0)),h?_e||(_e=requestAnimationFrame(ye)):ye()},_t=function(Oe){if(!Be(Oe,1)){Oe=to(Oe,f);var rt=Oe.clientX,xe=Oe.clientY,Je=rt-K.x,Ve=xe-K.y,je=K.isDragging;K.x=rt,K.y=xe,(je||Math.abs(K.startX-rt)>=a||Math.abs(K.startY-xe)>=a)&&(y&&(ke=!0),je||(K.isDragging=!0),Qe(Je,Ve),je||_&&_(K))}},$=K.onPress=function(Ge){Be(Ge,1)||Ge&&Ge.button||(K.axis=He=null,V.pause(),K.isPressed=!0,Ge=to(Ge),Ne=dt=0,K.startX=K.x=Ge.clientX,K.startY=K.y=Ge.clientY,K._vx.reset(),K._vy.reset(),Mn(I?l:de,wi[1],_t,B,!0),K.deltaX=K.deltaY=0,x&&x(K))},ce=K.onRelease=function(Ge){if(!Be(Ge,1)){Tn(I?l:de,wi[1],_t,!0);var Oe=!isNaN(K.y-K.startY),rt=K.isDragging,xe=rt&&(Math.abs(K.x-K.startX)>3||Math.abs(K.y-K.startY)>3),Je=to(Ge);!xe&&Oe&&(K._vx.reset(),K._vy.reset(),f&&te&&fn.delayedCall(.08,function(){if(Po()-he>300&&!Ge.defaultPrevented){if(Ge.target.click)Ge.target.click();else if(de.createEvent){var Ve=de.createEvent("MouseEvents");Ve.initMouseEvent("click",!0,!0,ti,1,Je.screenX,Je.screenY,Je.clientX,Je.clientY,!1,!1,!1,!1,0,null),Ge.target.dispatchEvent(Ve)}}})),K.isDragging=K.isGesturing=K.isPressed=!1,c&&rt&&!I&&V.restart(!0),m&&rt&&m(K),b&&b(K,xe)}},re=function(Oe){return Oe.touches&&Oe.touches.length>1&&(K.isGesturing=!0)&&j(Oe,K.isDragging)},se=function(){return(K.isGesturing=!1)||N(K)},fe=function(Oe){if(!Be(Oe)){var rt=P(),xe=Q();Ze((rt-oe)*G,(xe-le)*G,1),oe=rt,le=xe,c&&V.restart(!0)}},ze=function(Oe){if(!Be(Oe)){Oe=to(Oe,f),q&&(Xe=!0);var rt=(Oe.deltaMode===1?u:Oe.deltaMode===2?ti.innerHeight:1)*g;Ze(Oe.deltaX*rt,Oe.deltaY*rt,0),c&&!I&&V.restart(!0)}},it=function(Oe){if(!Be(Oe)){var rt=Oe.clientX,xe=Oe.clientY,Je=rt-K.x,Ve=xe-K.y;K.x=rt,K.y=xe,Ee=!0,c&&V.restart(!0),(Je||Ve)&&Qe(Je,Ve)}},bt=function(Oe){K.event=Oe,F(K)},St=function(Oe){K.event=Oe,k(K)},ht=function(Oe){return Be(Oe)||to(Oe,f)&&H(K)};V=K._dc=fn.delayedCall(d||.25,qe).pause(),K.deltaX=K.deltaY=0,K._vx=zd(0,50,!0),K._vy=zd(0,50,!0),K.scrollX=P,K.scrollY=Q,K.isDragging=K.isGesturing=K.isPressed=!1,f_(this),K.enable=function(Ge){return K.isEnabled||(Mn(Fe?de:l,"scroll",Bd),o.indexOf("scroll")>=0&&Mn(Fe?de:l,"scroll",fe,B,ee),o.indexOf("wheel")>=0&&Mn(l,"wheel",ze,B,ee),(o.indexOf("touch")>=0&&d_||o.indexOf("pointer")>=0)&&(Mn(l,wi[0],$,B,ee),Mn(de,wi[2],ce),Mn(de,wi[3],ce),te&&Mn(l,"click",Le,!0,!0),H&&Mn(l,"click",ht),j&&Mn(de,"gesturestart",re),N&&Mn(de,"gestureend",se),F&&Mn(l,fs+"enter",bt),k&&Mn(l,fs+"leave",St),z&&Mn(l,fs+"move",it)),K.isEnabled=!0,Ge&&Ge.type&&$(Ge),ne&&ne(K)),K},K.disable=function(){K.isEnabled&&(wa.filter(function(Ge){return Ge!==K&&Ro(Ge.target)}).length||Tn(Fe?de:l,"scroll",Bd),K.isPressed&&(K._vx.reset(),K._vy.reset(),Tn(I?l:de,wi[1],_t,!0)),Tn(Fe?de:l,"scroll",fe,ee),Tn(l,"wheel",ze,ee),Tn(l,wi[0],$,ee),Tn(de,wi[2],ce),Tn(de,wi[3],ce),Tn(l,"click",Le,!0),Tn(l,"click",ht),Tn(de,"gesturestart",re),Tn(de,"gestureend",se),Tn(l,fs+"enter",bt),Tn(l,fs+"leave",St),Tn(l,fs+"move",it),K.isEnabled=K.isPressed=K.isDragging=!1,W&&W(K))},K.kill=K.revert=function(){K.disable();var Ge=wa.indexOf(K);Ge>=0&&wa.splice(Ge,1),ar===K&&(ar=0)},wa.push(K),I&&Ro(l)&&(ar=K),K.enable(v)},ax(r,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),r}();qt.version="3.12.5";qt.create=function(r){return new qt(r)};qt.register=__;qt.getAll=function(){return wa.slice()};qt.getById=function(r){return wa.filter(function(e){return e.vars.id===r})[0]};p_()&&fn.registerPlugin(qt);/*!
 * ScrollTrigger 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var De,_a,ct,Ut,Mi,Lt,v_,Rc,Ko,Lo,mo,wl,xn,Zc,Hd,Dn,Lf,If,va,y_,bu,x_,Cn,Vd,b_,S_,Tr,Gd,Bh,Pa,zh,Lc,Wd,Su,El=1,bn=Date.now,wu=bn(),vi=0,go=0,Ff=function(e,t,n){var s=Zn(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return n["_"+t+"Clamp"]=s,s?e.substr(6,e.length-7):e},Of=function(e,t){return t&&(!Zn(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},lx=function r(){return go&&requestAnimationFrame(r)},Nf=function(){return Zc=1},Uf=function(){return Zc=0},Li=function(e){return e},_o=function(e){return Math.round(e*1e5)/1e5||0},w_=function(){return typeof window<"u"},E_=function(){return De||w_()&&(De=window.gsap)&&De.registerPlugin&&De},Vs=function(e){return!!~v_.indexOf(e)},T_=function(e){return(e==="Height"?zh:ct["inner"+e])||Mi["client"+e]||Lt["client"+e]},M_=function(e){return Vr(e,"getBoundingClientRect")||(Vs(e)?function(){return mc.width=ct.innerWidth,mc.height=zh,mc}:function(){return rr(e)})},cx=function(e,t,n){var s=n.d,a=n.d2,o=n.a;return(o=Vr(e,"getBoundingClientRect"))?function(){return o()[s]}:function(){return(t?T_(a):e["client"+a])||0}},ux=function(e,t){return!t||~Wi.indexOf(e)?M_(e):function(){return mc}},Bi=function(e,t){var n=t.s,s=t.d2,a=t.d,o=t.a;return Math.max(0,(n="scroll"+s)&&(o=Vr(e,n))?o()-M_(e)()[a]:Vs(e)?(Mi[n]||Lt[n])-T_(s):e[n]-e["offset"+s])},Tl=function(e,t){for(var n=0;n<va.length;n+=3)(!t||~t.indexOf(va[n+1]))&&e(va[n],va[n+1],va[n+2])},Zn=function(e){return typeof e=="string"},Fn=function(e){return typeof e=="function"},vo=function(e){return typeof e=="number"},ps=function(e){return typeof e=="object"},no=function(e,t,n){return e&&e.progress(t?0:1)&&n&&e.pause()},Eu=function(e,t){if(e.enabled){var n=e._ctx?e._ctx.add(function(){return t(e)}):t(e);n&&n.totalTime&&(e.callbackAnimation=n)}},Zs=Math.abs,A_="left",C_="top",Hh="right",Vh="bottom",Fs="width",Os="height",Io="Right",Fo="Left",Oo="Top",No="Bottom",jt="padding",di="margin",Ha="Width",Gh="Height",en="px",hi=function(e){return ct.getComputedStyle(e)},dx=function(e){var t=hi(e).position;e.style.position=t==="absolute"||t==="fixed"?t:"relative"},kf=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},rr=function(e,t){var n=t&&hi(e)[Hd]!=="matrix(1, 0, 0, 1, 0, 0)"&&De.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),s=e.getBoundingClientRect();return n&&n.progress(0).kill(),s},Ic=function(e,t){var n=t.d2;return e["offset"+n]||e["client"+n]||0},D_=function(e){var t=[],n=e.labels,s=e.duration(),a;for(a in n)t.push(n[a]/s);return t},hx=function(e){return function(t){return De.utils.snap(D_(e),t)}},Wh=function(e){var t=De.utils.snap(e),n=Array.isArray(e)&&e.slice(0).sort(function(s,a){return s-a});return n?function(s,a,o){o===void 0&&(o=.001);var l;if(!a)return t(s);if(a>0){for(s-=o,l=0;l<n.length;l++)if(n[l]>=s)return n[l];return n[l-1]}else for(l=n.length,s+=o;l--;)if(n[l]<=s)return n[l];return n[0]}:function(s,a,o){o===void 0&&(o=.001);var l=t(s);return!a||Math.abs(l-s)<o||l-s<0==a<0?l:t(a<0?s-e:s+e)}},fx=function(e){return function(t,n){return Wh(D_(e))(t,n.direction)}},Ml=function(e,t,n,s){return n.split(",").forEach(function(a){return e(t,a,s)})},ln=function(e,t,n,s,a){return e.addEventListener(t,n,{passive:!s,capture:!!a})},on=function(e,t,n,s){return e.removeEventListener(t,n,!!s)},Al=function(e,t,n){n=n&&n.wheelHandler,n&&(e(t,"wheel",n),e(t,"touchmove",n))},Bf={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Cl={toggleActions:"play",anticipatePin:0},Fc={top:0,left:0,center:.5,bottom:1,right:1},dc=function(e,t){if(Zn(e)){var n=e.indexOf("="),s=~n?+(e.charAt(n-1)+1)*parseFloat(e.substr(n+1)):0;~n&&(e.indexOf("%")>n&&(s*=t/100),e=e.substr(0,n-1)),e=s+(e in Fc?Fc[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},Dl=function(e,t,n,s,a,o,l,u){var h=a.startColor,f=a.endColor,c=a.fontSize,d=a.indent,p=a.fontWeight,g=Ut.createElement("div"),v=Vs(n)||Vr(n,"pinType")==="fixed",_=e.indexOf("scroller")!==-1,m=v?Lt:n,y=e.indexOf("start")!==-1,x=y?h:f,b="border-color:"+x+";font-size:"+c+";color:"+x+";font-weight:"+p+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return b+="position:"+((_||u)&&v?"fixed;":"absolute;"),(_||u||!v)&&(b+=(s===tn?Hh:Vh)+":"+(o+parseFloat(d))+"px;"),l&&(b+="box-sizing:border-box;text-align:left;width:"+l.offsetWidth+"px;"),g._isStart=y,g.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),g.style.cssText=b,g.innerText=t||t===0?e+"-"+t:e,m.children[0]?m.insertBefore(g,m.children[0]):m.appendChild(g),g._offset=g["offset"+s.op.d2],hc(g,0,s,y),g},hc=function(e,t,n,s){var a={display:"block"},o=n[s?"os2":"p2"],l=n[s?"p2":"os2"];e._isFlipped=s,a[n.a+"Percent"]=s?-100:0,a[n.a]=s?"1px":0,a["border"+o+Ha]=1,a["border"+l+Ha]=0,a[n.p]=t+"px",De.set(e,a)},st=[],$d={},Zo,zf=function(){return bn()-vi>34&&(Zo||(Zo=requestAnimationFrame(ur)))},Js=function(){(!Cn||!Cn.isPressed||Cn.startX>Lt.clientWidth)&&(ot.cache++,Cn?Zo||(Zo=requestAnimationFrame(ur)):ur(),vi||Ws("scrollStart"),vi=bn())},Tu=function(){S_=ct.innerWidth,b_=ct.innerHeight},yo=function(){ot.cache++,!xn&&!x_&&!Ut.fullscreenElement&&!Ut.webkitFullscreenElement&&(!Vd||S_!==ct.innerWidth||Math.abs(ct.innerHeight-b_)>ct.innerHeight*.25)&&Rc.restart(!0)},Gs={},px=[],P_=function r(){return on($e,"scrollEnd",r)||Ts(!0)},Ws=function(e){return Gs[e]&&Gs[e].map(function(t){return t()})||px},Kn=[],R_=function(e){for(var t=0;t<Kn.length;t+=5)(!e||Kn[t+4]&&Kn[t+4].query===e)&&(Kn[t].style.cssText=Kn[t+1],Kn[t].getBBox&&Kn[t].setAttribute("transform",Kn[t+2]||""),Kn[t+3].uncache=1)},$h=function(e,t){var n;for(Dn=0;Dn<st.length;Dn++)n=st[Dn],n&&(!t||n._ctx===t)&&(e?n.kill(1):n.revert(!0,!0));Lc=!0,t&&R_(t),t||Ws("revert")},L_=function(e,t){ot.cache++,(t||!Pn)&&ot.forEach(function(n){return Fn(n)&&n.cacheID++&&(n.rec=0)}),Zn(e)&&(ct.history.scrollRestoration=Bh=e)},Pn,Ns=0,Hf,mx=function(){if(Hf!==Ns){var e=Hf=Ns;requestAnimationFrame(function(){return e===Ns&&Ts(!0)})}},I_=function(){Lt.appendChild(Pa),zh=!Cn&&Pa.offsetHeight||ct.innerHeight,Lt.removeChild(Pa)},Vf=function(e){return Ko(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},Ts=function(e,t){if(vi&&!e&&!Lc){ln($e,"scrollEnd",P_);return}I_(),Pn=$e.isRefreshing=!0,ot.forEach(function(s){return Fn(s)&&++s.cacheID&&(s.rec=s())});var n=Ws("refreshInit");y_&&$e.sort(),t||$h(),ot.forEach(function(s){Fn(s)&&(s.smooth&&(s.target.style.scrollBehavior="auto"),s(0))}),st.slice(0).forEach(function(s){return s.refresh()}),Lc=!1,st.forEach(function(s){if(s._subPinOffset&&s.pin){var a=s.vars.horizontal?"offsetWidth":"offsetHeight",o=s.pin[a];s.revert(!0,1),s.adjustPinSpacing(s.pin[a]-o),s.refresh()}}),Wd=1,Vf(!0),st.forEach(function(s){var a=Bi(s.scroller,s._dir),o=s.vars.end==="max"||s._endClamp&&s.end>a,l=s._startClamp&&s.start>=a;(o||l)&&s.setPositions(l?a-1:s.start,o?Math.max(l?a:s.start+1,a):s.end,!0)}),Vf(!1),Wd=0,n.forEach(function(s){return s&&s.render&&s.render(-1)}),ot.forEach(function(s){Fn(s)&&(s.smooth&&requestAnimationFrame(function(){return s.target.style.scrollBehavior="smooth"}),s.rec&&s(s.rec))}),L_(Bh,1),Rc.pause(),Ns++,Pn=2,ur(2),st.forEach(function(s){return Fn(s.vars.onRefresh)&&s.vars.onRefresh(s)}),Pn=$e.isRefreshing=!1,Ws("refresh")},Xd=0,fc=1,Uo,ur=function(e){if(e===2||!Pn&&!Lc){$e.isUpdating=!0,Uo&&Uo.update(0);var t=st.length,n=bn(),s=n-wu>=50,a=t&&st[0].scroll();if(fc=Xd>a?-1:1,Pn||(Xd=a),s&&(vi&&!Zc&&n-vi>200&&(vi=0,Ws("scrollEnd")),mo=wu,wu=n),fc<0){for(Dn=t;Dn-- >0;)st[Dn]&&st[Dn].update(0,s);fc=1}else for(Dn=0;Dn<t;Dn++)st[Dn]&&st[Dn].update(0,s);$e.isUpdating=!1}Zo=0},qd=[A_,C_,Vh,Hh,di+No,di+Io,di+Oo,di+Fo,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],pc=qd.concat([Fs,Os,"boxSizing","max"+Ha,"max"+Gh,"position",di,jt,jt+Oo,jt+Io,jt+No,jt+Fo]),gx=function(e,t,n){Ra(n);var s=e._gsap;if(s.spacerIsNative)Ra(s.spacerState);else if(e._gsap.swappedIn){var a=t.parentNode;a&&(a.insertBefore(e,t),a.removeChild(t))}e._gsap.swappedIn=!1},Mu=function(e,t,n,s){if(!e._gsap.swappedIn){for(var a=qd.length,o=t.style,l=e.style,u;a--;)u=qd[a],o[u]=n[u];o.position=n.position==="absolute"?"absolute":"relative",n.display==="inline"&&(o.display="inline-block"),l[Vh]=l[Hh]="auto",o.flexBasis=n.flexBasis||"auto",o.overflow="visible",o.boxSizing="border-box",o[Fs]=Ic(e,In)+en,o[Os]=Ic(e,tn)+en,o[jt]=l[di]=l[C_]=l[A_]="0",Ra(s),l[Fs]=l["max"+Ha]=n[Fs],l[Os]=l["max"+Gh]=n[Os],l[jt]=n[jt],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},_x=/([A-Z])/g,Ra=function(e){if(e){var t=e.t.style,n=e.length,s=0,a,o;for((e.t._gsap||De.core.getCache(e.t)).uncache=1;s<n;s+=2)o=e[s+1],a=e[s],o?t[a]=o:t[a]&&t.removeProperty(a.replace(_x,"-$1").toLowerCase())}},Pl=function(e){for(var t=pc.length,n=e.style,s=[],a=0;a<t;a++)s.push(pc[a],n[pc[a]]);return s.t=e,s},vx=function(e,t,n){for(var s=[],a=e.length,o=n?8:0,l;o<a;o+=2)l=e[o],s.push(l,l in t?t[l]:e[o+1]);return s.t=e.t,s},mc={left:0,top:0},Gf=function(e,t,n,s,a,o,l,u,h,f,c,d,p,g){Fn(e)&&(e=e(u)),Zn(e)&&e.substr(0,3)==="max"&&(e=d+(e.charAt(4)==="="?dc("0"+e.substr(3),n):0));var v=p?p.time():0,_,m,y;if(p&&p.seek(0),isNaN(e)||(e=+e),vo(e))p&&(e=De.utils.mapRange(p.scrollTrigger.start,p.scrollTrigger.end,0,d,e)),l&&hc(l,n,s,!0);else{Fn(t)&&(t=t(u));var x=(e||"0").split(" "),b,T,E,M;y=Bn(t,u)||Lt,b=rr(y)||{},(!b||!b.left&&!b.top)&&hi(y).display==="none"&&(M=y.style.display,y.style.display="block",b=rr(y),M?y.style.display=M:y.style.removeProperty("display")),T=dc(x[0],b[s.d]),E=dc(x[1]||"0",n),e=b[s.p]-h[s.p]-f+T+a-E,l&&hc(l,E,s,n-E<20||l._isStart&&E>20),n-=n-E}if(g&&(u[g]=e||-.001,e<0&&(e=0)),o){var A=e+n,S=o._isStart;_="scroll"+s.d2,hc(o,A,s,S&&A>20||!S&&(c?Math.max(Lt[_],Mi[_]):o.parentNode[_])<=A+1),c&&(h=rr(l),c&&(o.style[s.op.p]=h[s.op.p]-s.op.m-o._offset+en))}return p&&y&&(_=rr(y),p.seek(d),m=rr(y),p._caScrollDist=_[s.p]-m[s.p],e=e/p._caScrollDist*d),p&&p.seek(v),p?e:Math.round(e)},yx=/(webkit|moz|length|cssText|inset)/i,Wf=function(e,t,n,s){if(e.parentNode!==t){var a=e.style,o,l;if(t===Lt){e._stOrig=a.cssText,l=hi(e);for(o in l)!+o&&!yx.test(o)&&l[o]&&typeof a[o]=="string"&&o!=="0"&&(a[o]=l[o]);a.top=n,a.left=s}else a.cssText=e._stOrig;De.core.getCache(e).uncache=1,t.appendChild(e)}},F_=function(e,t,n){var s=t,a=s;return function(o){var l=Math.round(e());return l!==s&&l!==a&&Math.abs(l-s)>3&&Math.abs(l-a)>3&&(o=l,n&&n()),a=s,s=o,o}},Rl=function(e,t,n){var s={};s[t.p]="+="+n,De.set(e,s)},$f=function(e,t){var n=Yr(e,t),s="_scroll"+t.p2,a=function o(l,u,h,f,c){var d=o.tween,p=u.onComplete,g={};h=h||n();var v=F_(n,h,function(){d.kill(),o.tween=0});return c=f&&c||0,f=f||l-h,d&&d.kill(),u[s]=l,u.inherit=!1,u.modifiers=g,g[s]=function(){return v(h+f*d.ratio+c*d.ratio*d.ratio)},u.onUpdate=function(){ot.cache++,o.tween&&ur()},u.onComplete=function(){o.tween=0,p&&p.call(d)},d=o.tween=De.to(e,u),d};return e[s]=n,n.wheelHandler=function(){return a.tween&&a.tween.kill()&&(a.tween=0)},ln(e,"wheel",n.wheelHandler),$e.isTouch&&ln(e,"touchmove",n.wheelHandler),a},$e=function(){function r(t,n){_a||r.register(De)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),Gd(this),this.init(t,n)}var e=r.prototype;return e.init=function(n,s){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!go){this.update=this.refresh=this.kill=Li;return}n=kf(Zn(n)||vo(n)||n.nodeType?{trigger:n}:n,Cl);var a=n,o=a.onUpdate,l=a.toggleClass,u=a.id,h=a.onToggle,f=a.onRefresh,c=a.scrub,d=a.trigger,p=a.pin,g=a.pinSpacing,v=a.invalidateOnRefresh,_=a.anticipatePin,m=a.onScrubComplete,y=a.onSnapComplete,x=a.once,b=a.snap,T=a.pinReparent,E=a.pinSpacer,M=a.containerAnimation,A=a.fastScrollEnd,S=a.preventOverlaps,w=n.horizontal||n.containerAnimation&&n.horizontal!==!1?In:tn,C=!c&&c!==0,D=Bn(n.scroller||ct),R=De.core.getCache(D),F=Vs(D),k=("pinType"in n?n.pinType:Vr(D,"pinType")||F&&"fixed")==="fixed",z=[n.onEnter,n.onLeave,n.onEnterBack,n.onLeaveBack],O=C&&n.toggleActions.split(" "),I="markers"in n?n.markers:Cl.markers,j=F?0:parseFloat(hi(D)["border"+w.p2+Ha])||0,N=this,q=n.onRefreshInit&&function(){return n.onRefreshInit(N)},ne=cx(D,F,w),W=ux(D,F),H=0,G=0,ee=0,te=Yr(D,w),pe,me,_e,V,ke,Ee,Xe,Ae,He,K,Ne,dt,B,P,Q,oe,le,ae,Fe,de,ve,We,he,Le,Be,qe,ye,Ze,Qe,_t,$,ce,re,se,fe,ze,it,bt,St;if(N._startClamp=N._endClamp=!1,N._dir=w,_*=45,N.scroller=D,N.scroll=M?M.time.bind(M):te,V=te(),N.vars=n,s=s||n.animation,"refreshPriority"in n&&(y_=1,n.refreshPriority===-9999&&(Uo=N)),R.tweenScroll=R.tweenScroll||{top:$f(D,tn),left:$f(D,In)},N.tweenTo=pe=R.tweenScroll[w.p],N.scrubDuration=function(xe){re=vo(xe)&&xe,re?ce?ce.duration(xe):ce=De.to(s,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:re,paused:!0,onComplete:function(){return m&&m(N)}}):(ce&&ce.progress(1).kill(),ce=0)},s&&(s.vars.lazy=!1,s._initted&&!N.isReverted||s.vars.immediateRender!==!1&&n.immediateRender!==!1&&s.duration()&&s.render(0,!0,!0),N.animation=s.pause(),s.scrollTrigger=N,N.scrubDuration(c),_t=0,u||(u=s.vars.id)),b&&((!ps(b)||b.push)&&(b={snapTo:b}),"scrollBehavior"in Lt.style&&De.set(F?[Lt,Mi]:D,{scrollBehavior:"auto"}),ot.forEach(function(xe){return Fn(xe)&&xe.target===(F?Ut.scrollingElement||Mi:D)&&(xe.smooth=!1)}),_e=Fn(b.snapTo)?b.snapTo:b.snapTo==="labels"?hx(s):b.snapTo==="labelsDirectional"?fx(s):b.directional!==!1?function(xe,Je){return Wh(b.snapTo)(xe,bn()-G<500?0:Je.direction)}:De.utils.snap(b.snapTo),se=b.duration||{min:.1,max:2},se=ps(se)?Lo(se.min,se.max):Lo(se,se),fe=De.delayedCall(b.delay||re/2||.1,function(){var xe=te(),Je=bn()-G<500,Ve=pe.tween;if((Je||Math.abs(N.getVelocity())<10)&&!Ve&&!Zc&&H!==xe){var je=(xe-Ee)/P,Vt=s&&!C?s.totalProgress():je,et=Je?0:(Vt-$)/(bn()-mo)*1e3||0,It=De.utils.clamp(-je,1-je,Zs(et/2)*et/.185),Jt=je+(b.inertia===!1?0:It),Ft,Ct,yt=b,L=yt.onStart,X=yt.onInterrupt,Z=yt.onComplete;if(Ft=_e(Jt,N),vo(Ft)||(Ft=Jt),Ct=Math.round(Ee+Ft*P),xe<=Xe&&xe>=Ee&&Ct!==xe){if(Ve&&!Ve._initted&&Ve.data<=Zs(Ct-xe))return;b.inertia===!1&&(It=Ft-je),pe(Ct,{duration:se(Zs(Math.max(Zs(Jt-Vt),Zs(Ft-Vt))*.185/et/.05||0)),ease:b.ease||"power3",data:Zs(Ct-xe),onInterrupt:function(){return fe.restart(!0)&&X&&X(N)},onComplete:function(){N.update(),H=te(),s&&(ce?ce.resetTo("totalProgress",Ft,s._tTime/s._tDur):s.progress(Ft)),_t=$=s&&!C?s.totalProgress():N.progress,y&&y(N),Z&&Z(N)}},xe,It*P,Ct-xe-It*P),L&&L(N,pe.tween)}}else N.isActive&&H!==xe&&fe.restart(!0)}).pause()),u&&($d[u]=N),d=N.trigger=Bn(d||p!==!0&&p),St=d&&d._gsap&&d._gsap.stRevert,St&&(St=St(N)),p=p===!0?d:Bn(p),Zn(l)&&(l={targets:d,className:l}),p&&(g===!1||g===di||(g=!g&&p.parentNode&&p.parentNode.style&&hi(p.parentNode).display==="flex"?!1:jt),N.pin=p,me=De.core.getCache(p),me.spacer?Q=me.pinState:(E&&(E=Bn(E),E&&!E.nodeType&&(E=E.current||E.nativeElement),me.spacerIsNative=!!E,E&&(me.spacerState=Pl(E))),me.spacer=ae=E||Ut.createElement("div"),ae.classList.add("pin-spacer"),u&&ae.classList.add("pin-spacer-"+u),me.pinState=Q=Pl(p)),n.force3D!==!1&&De.set(p,{force3D:!0}),N.spacer=ae=me.spacer,Qe=hi(p),Le=Qe[g+w.os2],de=De.getProperty(p),ve=De.quickSetter(p,w.a,en),Mu(p,ae,Qe),le=Pl(p)),I){dt=ps(I)?kf(I,Bf):Bf,K=Dl("scroller-start",u,D,w,dt,0),Ne=Dl("scroller-end",u,D,w,dt,0,K),Fe=K["offset"+w.op.d2];var ht=Bn(Vr(D,"content")||D);Ae=this.markerStart=Dl("start",u,ht,w,dt,Fe,0,M),He=this.markerEnd=Dl("end",u,ht,w,dt,Fe,0,M),M&&(bt=De.quickSetter([Ae,He],w.a,en)),!k&&!(Wi.length&&Vr(D,"fixedMarkers")===!0)&&(dx(F?Lt:D),De.set([K,Ne],{force3D:!0}),qe=De.quickSetter(K,w.a,en),Ze=De.quickSetter(Ne,w.a,en))}if(M){var Ge=M.vars.onUpdate,Oe=M.vars.onUpdateParams;M.eventCallback("onUpdate",function(){N.update(0,0,1),Ge&&Ge.apply(M,Oe||[])})}if(N.previous=function(){return st[st.indexOf(N)-1]},N.next=function(){return st[st.indexOf(N)+1]},N.revert=function(xe,Je){if(!Je)return N.kill(!0);var Ve=xe!==!1||!N.enabled,je=xn;Ve!==N.isReverted&&(Ve&&(ze=Math.max(te(),N.scroll.rec||0),ee=N.progress,it=s&&s.progress()),Ae&&[Ae,He,K,Ne].forEach(function(Vt){return Vt.style.display=Ve?"none":"block"}),Ve&&(xn=N,N.update(Ve)),p&&(!T||!N.isActive)&&(Ve?gx(p,ae,Q):Mu(p,ae,hi(p),Be)),Ve||N.update(Ve),xn=je,N.isReverted=Ve)},N.refresh=function(xe,Je,Ve,je){if(!((xn||!N.enabled)&&!Je)){if(p&&xe&&vi){ln(r,"scrollEnd",P_);return}!Pn&&q&&q(N),xn=N,pe.tween&&!Ve&&(pe.tween.kill(),pe.tween=0),ce&&ce.pause(),v&&s&&s.revert({kill:!1}).invalidate(),N.isReverted||N.revert(!0,!0),N._subPinOffset=!1;var Vt=ne(),et=W(),It=M?M.duration():Bi(D,w),Jt=P<=.01,Ft=0,Ct=je||0,yt=ps(Ve)?Ve.end:n.end,L=n.endTrigger||d,X=ps(Ve)?Ve.start:n.start||(n.start===0||!d?0:p?"0 0":"0 100%"),Z=N.pinnedContainer=n.pinnedContainer&&Bn(n.pinnedContainer,N),J=d&&Math.max(0,st.indexOf(N))||0,Y=J,ue,ge,Me,Re,Pe,Ce,Ie,ft,Pt,wt,Ot,lt,Ue;for(I&&ps(Ve)&&(lt=De.getProperty(K,w.p),Ue=De.getProperty(Ne,w.p));Y--;)Ce=st[Y],Ce.end||Ce.refresh(0,1)||(xn=N),Ie=Ce.pin,Ie&&(Ie===d||Ie===p||Ie===Z)&&!Ce.isReverted&&(wt||(wt=[]),wt.unshift(Ce),Ce.revert(!0,!0)),Ce!==st[Y]&&(J--,Y--);for(Fn(X)&&(X=X(N)),X=Ff(X,"start",N),Ee=Gf(X,d,Vt,w,te(),Ae,K,N,et,j,k,It,M,N._startClamp&&"_startClamp")||(p?-.001:0),Fn(yt)&&(yt=yt(N)),Zn(yt)&&!yt.indexOf("+=")&&(~yt.indexOf(" ")?yt=(Zn(X)?X.split(" ")[0]:"")+yt:(Ft=dc(yt.substr(2),Vt),yt=Zn(X)?X:(M?De.utils.mapRange(0,M.duration(),M.scrollTrigger.start,M.scrollTrigger.end,Ee):Ee)+Ft,L=d)),yt=Ff(yt,"end",N),Xe=Math.max(Ee,Gf(yt||(L?"100% 0":It),L,Vt,w,te()+Ft,He,Ne,N,et,j,k,It,M,N._endClamp&&"_endClamp"))||-.001,Ft=0,Y=J;Y--;)Ce=st[Y],Ie=Ce.pin,Ie&&Ce.start-Ce._pinPush<=Ee&&!M&&Ce.end>0&&(ue=Ce.end-(N._startClamp?Math.max(0,Ce.start):Ce.start),(Ie===d&&Ce.start-Ce._pinPush<Ee||Ie===Z)&&isNaN(X)&&(Ft+=ue*(1-Ce.progress)),Ie===p&&(Ct+=ue));if(Ee+=Ft,Xe+=Ft,N._startClamp&&(N._startClamp+=Ft),N._endClamp&&!Pn&&(N._endClamp=Xe||-.001,Xe=Math.min(Xe,Bi(D,w))),P=Xe-Ee||(Ee-=.01)&&.001,Jt&&(ee=De.utils.clamp(0,1,De.utils.normalize(Ee,Xe,ze))),N._pinPush=Ct,Ae&&Ft&&(ue={},ue[w.a]="+="+Ft,Z&&(ue[w.p]="-="+te()),De.set([Ae,He],ue)),p&&!(Wd&&N.end>=Bi(D,w)))ue=hi(p),Re=w===tn,Me=te(),We=parseFloat(de(w.a))+Ct,!It&&Xe>1&&(Ot=(F?Ut.scrollingElement||Mi:D).style,Ot={style:Ot,value:Ot["overflow"+w.a.toUpperCase()]},F&&hi(Lt)["overflow"+w.a.toUpperCase()]!=="scroll"&&(Ot.style["overflow"+w.a.toUpperCase()]="scroll")),Mu(p,ae,ue),le=Pl(p),ge=rr(p,!0),ft=k&&Yr(D,Re?In:tn)(),g?(Be=[g+w.os2,P+Ct+en],Be.t=ae,Y=g===jt?Ic(p,w)+P+Ct:0,Y&&(Be.push(w.d,Y+en),ae.style.flexBasis!=="auto"&&(ae.style.flexBasis=Y+en)),Ra(Be),Z&&st.forEach(function(Gt){Gt.pin===Z&&Gt.vars.pinSpacing!==!1&&(Gt._subPinOffset=!0)}),k&&te(ze)):(Y=Ic(p,w),Y&&ae.style.flexBasis!=="auto"&&(ae.style.flexBasis=Y+en)),k&&(Pe={top:ge.top+(Re?Me-Ee:ft)+en,left:ge.left+(Re?ft:Me-Ee)+en,boxSizing:"border-box",position:"fixed"},Pe[Fs]=Pe["max"+Ha]=Math.ceil(ge.width)+en,Pe[Os]=Pe["max"+Gh]=Math.ceil(ge.height)+en,Pe[di]=Pe[di+Oo]=Pe[di+Io]=Pe[di+No]=Pe[di+Fo]="0",Pe[jt]=ue[jt],Pe[jt+Oo]=ue[jt+Oo],Pe[jt+Io]=ue[jt+Io],Pe[jt+No]=ue[jt+No],Pe[jt+Fo]=ue[jt+Fo],oe=vx(Q,Pe,T),Pn&&te(0)),s?(Pt=s._initted,bu(1),s.render(s.duration(),!0,!0),he=de(w.a)-We+P+Ct,ye=Math.abs(P-he)>1,k&&ye&&oe.splice(oe.length-2,2),s.render(0,!0,!0),Pt||s.invalidate(!0),s.parent||s.totalTime(s.totalTime()),bu(0)):he=P,Ot&&(Ot.value?Ot.style["overflow"+w.a.toUpperCase()]=Ot.value:Ot.style.removeProperty("overflow-"+w.a));else if(d&&te()&&!M)for(ge=d.parentNode;ge&&ge!==Lt;)ge._pinOffset&&(Ee-=ge._pinOffset,Xe-=ge._pinOffset),ge=ge.parentNode;wt&&wt.forEach(function(Gt){return Gt.revert(!1,!0)}),N.start=Ee,N.end=Xe,V=ke=Pn?ze:te(),!M&&!Pn&&(V<ze&&te(ze),N.scroll.rec=0),N.revert(!1,!0),G=bn(),fe&&(H=-1,fe.restart(!0)),xn=0,s&&C&&(s._initted||it)&&s.progress()!==it&&s.progress(it||0,!0).render(s.time(),!0,!0),(Jt||ee!==N.progress||M||v)&&(s&&!C&&s.totalProgress(M&&Ee<-.001&&!ee?De.utils.normalize(Ee,Xe,0):ee,!0),N.progress=Jt||(V-Ee)/P===ee?0:ee),p&&g&&(ae._pinOffset=Math.round(N.progress*he)),ce&&ce.invalidate(),isNaN(lt)||(lt-=De.getProperty(K,w.p),Ue-=De.getProperty(Ne,w.p),Rl(K,w,lt),Rl(Ae,w,lt-(je||0)),Rl(Ne,w,Ue),Rl(He,w,Ue-(je||0))),Jt&&!Pn&&N.update(),f&&!Pn&&!B&&(B=!0,f(N),B=!1)}},N.getVelocity=function(){return(te()-ke)/(bn()-mo)*1e3||0},N.endAnimation=function(){no(N.callbackAnimation),s&&(ce?ce.progress(1):s.paused()?C||no(s,N.direction<0,1):no(s,s.reversed()))},N.labelToScroll=function(xe){return s&&s.labels&&(Ee||N.refresh()||Ee)+s.labels[xe]/s.duration()*P||0},N.getTrailing=function(xe){var Je=st.indexOf(N),Ve=N.direction>0?st.slice(0,Je).reverse():st.slice(Je+1);return(Zn(xe)?Ve.filter(function(je){return je.vars.preventOverlaps===xe}):Ve).filter(function(je){return N.direction>0?je.end<=Ee:je.start>=Xe})},N.update=function(xe,Je,Ve){if(!(M&&!Ve&&!xe)){var je=Pn===!0?ze:N.scroll(),Vt=xe?0:(je-Ee)/P,et=Vt<0?0:Vt>1?1:Vt||0,It=N.progress,Jt,Ft,Ct,yt,L,X,Z,J;if(Je&&(ke=V,V=M?te():je,b&&($=_t,_t=s&&!C?s.totalProgress():et)),_&&p&&!xn&&!El&&vi&&(!et&&Ee<je+(je-ke)/(bn()-mo)*_?et=1e-4:et===1&&Xe>je+(je-ke)/(bn()-mo)*_&&(et=.9999)),et!==It&&N.enabled){if(Jt=N.isActive=!!et&&et<1,Ft=!!It&&It<1,X=Jt!==Ft,L=X||!!et!=!!It,N.direction=et>It?1:-1,N.progress=et,L&&!xn&&(Ct=et&&!It?0:et===1?1:It===1?2:3,C&&(yt=!X&&O[Ct+1]!=="none"&&O[Ct+1]||O[Ct],J=s&&(yt==="complete"||yt==="reset"||yt in s))),S&&(X||J)&&(J||c||!s)&&(Fn(S)?S(N):N.getTrailing(S).forEach(function(Me){return Me.endAnimation()})),C||(ce&&!xn&&!El?(ce._dp._time-ce._start!==ce._time&&ce.render(ce._dp._time-ce._start),ce.resetTo?ce.resetTo("totalProgress",et,s._tTime/s._tDur):(ce.vars.totalProgress=et,ce.invalidate().restart())):s&&s.totalProgress(et,!!(xn&&(G||xe)))),p){if(xe&&g&&(ae.style[g+w.os2]=Le),!k)ve(_o(We+he*et));else if(L){if(Z=!xe&&et>It&&Xe+1>je&&je+1>=Bi(D,w),T)if(!xe&&(Jt||Z)){var Y=rr(p,!0),ue=je-Ee;Wf(p,Lt,Y.top+(w===tn?ue:0)+en,Y.left+(w===tn?0:ue)+en)}else Wf(p,ae);Ra(Jt||Z?oe:le),ye&&et<1&&Jt||ve(We+(et===1&&!Z?he:0))}}b&&!pe.tween&&!xn&&!El&&fe.restart(!0),l&&(X||x&&et&&(et<1||!Su))&&Ko(l.targets).forEach(function(Me){return Me.classList[Jt||x?"add":"remove"](l.className)}),o&&!C&&!xe&&o(N),L&&!xn?(C&&(J&&(yt==="complete"?s.pause().totalProgress(1):yt==="reset"?s.restart(!0).pause():yt==="restart"?s.restart(!0):s[yt]()),o&&o(N)),(X||!Su)&&(h&&X&&Eu(N,h),z[Ct]&&Eu(N,z[Ct]),x&&(et===1?N.kill(!1,1):z[Ct]=0),X||(Ct=et===1?1:3,z[Ct]&&Eu(N,z[Ct]))),A&&!Jt&&Math.abs(N.getVelocity())>(vo(A)?A:2500)&&(no(N.callbackAnimation),ce?ce.progress(1):no(s,yt==="reverse"?1:!et,1))):C&&o&&!xn&&o(N)}if(Ze){var ge=M?je/M.duration()*(M._caScrollDist||0):je;qe(ge+(K._isFlipped?1:0)),Ze(ge)}bt&&bt(-je/M.duration()*(M._caScrollDist||0))}},N.enable=function(xe,Je){N.enabled||(N.enabled=!0,ln(D,"resize",yo),F||ln(D,"scroll",Js),q&&ln(r,"refreshInit",q),xe!==!1&&(N.progress=ee=0,V=ke=H=te()),Je!==!1&&N.refresh())},N.getTween=function(xe){return xe&&pe?pe.tween:ce},N.setPositions=function(xe,Je,Ve,je){if(M){var Vt=M.scrollTrigger,et=M.duration(),It=Vt.end-Vt.start;xe=Vt.start+It*xe/et,Je=Vt.start+It*Je/et}N.refresh(!1,!1,{start:Of(xe,Ve&&!!N._startClamp),end:Of(Je,Ve&&!!N._endClamp)},je),N.update()},N.adjustPinSpacing=function(xe){if(Be&&xe){var Je=Be.indexOf(w.d)+1;Be[Je]=parseFloat(Be[Je])+xe+en,Be[1]=parseFloat(Be[1])+xe+en,Ra(Be)}},N.disable=function(xe,Je){if(N.enabled&&(xe!==!1&&N.revert(!0,!0),N.enabled=N.isActive=!1,Je||ce&&ce.pause(),ze=0,me&&(me.uncache=1),q&&on(r,"refreshInit",q),fe&&(fe.pause(),pe.tween&&pe.tween.kill()&&(pe.tween=0)),!F)){for(var Ve=st.length;Ve--;)if(st[Ve].scroller===D&&st[Ve]!==N)return;on(D,"resize",yo),F||on(D,"scroll",Js)}},N.kill=function(xe,Je){N.disable(xe,Je),ce&&!Je&&ce.kill(),u&&delete $d[u];var Ve=st.indexOf(N);Ve>=0&&st.splice(Ve,1),Ve===Dn&&fc>0&&Dn--,Ve=0,st.forEach(function(je){return je.scroller===N.scroller&&(Ve=1)}),Ve||Pn||(N.scroll.rec=0),s&&(s.scrollTrigger=null,xe&&s.revert({kill:!1}),Je||s.kill()),Ae&&[Ae,He,K,Ne].forEach(function(je){return je.parentNode&&je.parentNode.removeChild(je)}),Uo===N&&(Uo=0),p&&(me&&(me.uncache=1),Ve=0,st.forEach(function(je){return je.pin===p&&Ve++}),Ve||(me.spacer=0)),n.onKill&&n.onKill(N)},st.push(N),N.enable(!1,!1),St&&St(N),s&&s.add&&!P){var rt=N.update;N.update=function(){N.update=rt,Ee||Xe||N.refresh()},De.delayedCall(.01,N.update),P=.01,Ee=Xe=0}else N.refresh();p&&mx()},r.register=function(n){return _a||(De=n||E_(),w_()&&window.document&&r.enable(),_a=go),_a},r.defaults=function(n){if(n)for(var s in n)Cl[s]=n[s];return Cl},r.disable=function(n,s){go=0,st.forEach(function(o){return o[s?"kill":"disable"](n)}),on(ct,"wheel",Js),on(Ut,"scroll",Js),clearInterval(wl),on(Ut,"touchcancel",Li),on(Lt,"touchstart",Li),Ml(on,Ut,"pointerdown,touchstart,mousedown",Nf),Ml(on,Ut,"pointerup,touchend,mouseup",Uf),Rc.kill(),Tl(on);for(var a=0;a<ot.length;a+=3)Al(on,ot[a],ot[a+1]),Al(on,ot[a],ot[a+2])},r.enable=function(){if(ct=window,Ut=document,Mi=Ut.documentElement,Lt=Ut.body,De&&(Ko=De.utils.toArray,Lo=De.utils.clamp,Gd=De.core.context||Li,bu=De.core.suppressOverwrites||Li,Bh=ct.history.scrollRestoration||"auto",Xd=ct.pageYOffset,De.core.globals("ScrollTrigger",r),Lt)){go=1,Pa=document.createElement("div"),Pa.style.height="100vh",Pa.style.position="absolute",I_(),lx(),qt.register(De),r.isTouch=qt.isTouch,Tr=qt.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),Vd=qt.isTouch===1,ln(ct,"wheel",Js),v_=[ct,Ut,Mi,Lt],De.matchMedia?(r.matchMedia=function(u){var h=De.matchMedia(),f;for(f in u)h.add(f,u[f]);return h},De.addEventListener("matchMediaInit",function(){return $h()}),De.addEventListener("matchMediaRevert",function(){return R_()}),De.addEventListener("matchMedia",function(){Ts(0,1),Ws("matchMedia")}),De.matchMedia("(orientation: portrait)",function(){return Tu(),Tu})):console.warn("Requires GSAP 3.11.0 or later"),Tu(),ln(Ut,"scroll",Js);var n=Lt.style,s=n.borderTopStyle,a=De.core.Animation.prototype,o,l;for(a.revert||Object.defineProperty(a,"revert",{value:function(){return this.time(-.01,!0)}}),n.borderTopStyle="solid",o=rr(Lt),tn.m=Math.round(o.top+tn.sc())||0,In.m=Math.round(o.left+In.sc())||0,s?n.borderTopStyle=s:n.removeProperty("border-top-style"),wl=setInterval(zf,250),De.delayedCall(.5,function(){return El=0}),ln(Ut,"touchcancel",Li),ln(Lt,"touchstart",Li),Ml(ln,Ut,"pointerdown,touchstart,mousedown",Nf),Ml(ln,Ut,"pointerup,touchend,mouseup",Uf),Hd=De.utils.checkPrefix("transform"),pc.push(Hd),_a=bn(),Rc=De.delayedCall(.2,Ts).pause(),va=[Ut,"visibilitychange",function(){var u=ct.innerWidth,h=ct.innerHeight;Ut.hidden?(Lf=u,If=h):(Lf!==u||If!==h)&&yo()},Ut,"DOMContentLoaded",Ts,ct,"load",Ts,ct,"resize",yo],Tl(ln),st.forEach(function(u){return u.enable(0,1)}),l=0;l<ot.length;l+=3)Al(on,ot[l],ot[l+1]),Al(on,ot[l],ot[l+2])}},r.config=function(n){"limitCallbacks"in n&&(Su=!!n.limitCallbacks);var s=n.syncInterval;s&&clearInterval(wl)||(wl=s)&&setInterval(zf,s),"ignoreMobileResize"in n&&(Vd=r.isTouch===1&&n.ignoreMobileResize),"autoRefreshEvents"in n&&(Tl(on)||Tl(ln,n.autoRefreshEvents||"none"),x_=(n.autoRefreshEvents+"").indexOf("resize")===-1)},r.scrollerProxy=function(n,s){var a=Bn(n),o=ot.indexOf(a),l=Vs(a);~o&&ot.splice(o,l?6:2),s&&(l?Wi.unshift(ct,s,Lt,s,Mi,s):Wi.unshift(a,s))},r.clearMatchMedia=function(n){st.forEach(function(s){return s._ctx&&s._ctx.query===n&&s._ctx.kill(!0,!0)})},r.isInViewport=function(n,s,a){var o=(Zn(n)?Bn(n):n).getBoundingClientRect(),l=o[a?Fs:Os]*s||0;return a?o.right-l>0&&o.left+l<ct.innerWidth:o.bottom-l>0&&o.top+l<ct.innerHeight},r.positionInViewport=function(n,s,a){Zn(n)&&(n=Bn(n));var o=n.getBoundingClientRect(),l=o[a?Fs:Os],u=s==null?l/2:s in Fc?Fc[s]*l:~s.indexOf("%")?parseFloat(s)*l/100:parseFloat(s)||0;return a?(o.left+u)/ct.innerWidth:(o.top+u)/ct.innerHeight},r.killAll=function(n){if(st.slice(0).forEach(function(a){return a.vars.id!=="ScrollSmoother"&&a.kill()}),n!==!0){var s=Gs.killAll||[];Gs={},s.forEach(function(a){return a()})}},r}();$e.version="3.12.5";$e.saveStyles=function(r){return r?Ko(r).forEach(function(e){if(e&&e.style){var t=Kn.indexOf(e);t>=0&&Kn.splice(t,5),Kn.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),De.core.getCache(e),Gd())}}):Kn};$e.revert=function(r,e){return $h(!r,e)};$e.create=function(r,e){return new $e(r,e)};$e.refresh=function(r){return r?yo():(_a||$e.register())&&Ts(!0)};$e.update=function(r){return++ot.cache&&ur(r===!0?2:0)};$e.clearScrollMemory=L_;$e.maxScroll=function(r,e){return Bi(r,e?In:tn)};$e.getScrollFunc=function(r,e){return Yr(Bn(r),e?In:tn)};$e.getById=function(r){return $d[r]};$e.getAll=function(){return st.filter(function(r){return r.vars.id!=="ScrollSmoother"})};$e.isScrolling=function(){return!!vi};$e.snapDirectional=Wh;$e.addEventListener=function(r,e){var t=Gs[r]||(Gs[r]=[]);~t.indexOf(e)||t.push(e)};$e.removeEventListener=function(r,e){var t=Gs[r],n=t&&t.indexOf(e);n>=0&&t.splice(n,1)};$e.batch=function(r,e){var t=[],n={},s=e.interval||.016,a=e.batchMax||1e9,o=function(h,f){var c=[],d=[],p=De.delayedCall(s,function(){f(c,d),c=[],d=[]}).pause();return function(g){c.length||p.restart(!0),c.push(g.trigger),d.push(g),a<=c.length&&p.progress(1)}},l;for(l in e)n[l]=l.substr(0,2)==="on"&&Fn(e[l])&&l!=="onRefreshInit"?o(l,e[l]):e[l];return Fn(a)&&(a=a(),ln($e,"refresh",function(){return a=e.batchMax()})),Ko(r).forEach(function(u){var h={};for(l in n)h[l]=n[l];h.trigger=u,t.push($e.create(h))}),t};var Xf=function(e,t,n,s){return t>s?e(s):t<0&&e(0),n>s?(s-t)/(n-t):n<0?t/(t-n):1},Au=function r(e,t){t===!0?e.style.removeProperty("touch-action"):e.style.touchAction=t===!0?"auto":t?"pan-"+t+(qt.isTouch?" pinch-zoom":""):"none",e===Mi&&r(Lt,t)},Ll={auto:1,scroll:1},xx=function(e){var t=e.event,n=e.target,s=e.axis,a=(t.changedTouches?t.changedTouches[0]:t).target,o=a._gsap||De.core.getCache(a),l=bn(),u;if(!o._isScrollT||l-o._isScrollT>2e3){for(;a&&a!==Lt&&(a.scrollHeight<=a.clientHeight&&a.scrollWidth<=a.clientWidth||!(Ll[(u=hi(a)).overflowY]||Ll[u.overflowX]));)a=a.parentNode;o._isScroll=a&&a!==n&&!Vs(a)&&(Ll[(u=hi(a)).overflowY]||Ll[u.overflowX]),o._isScrollT=l}(o._isScroll||s==="x")&&(t.stopPropagation(),t._gsapAllow=!0)},O_=function(e,t,n,s){return qt.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:s=s&&xx,onPress:s,onDrag:s,onScroll:s,onEnable:function(){return n&&ln(Ut,qt.eventTypes[0],Yf,!1,!0)},onDisable:function(){return on(Ut,qt.eventTypes[0],Yf,!0)}})},bx=/(input|label|select|textarea)/i,qf,Yf=function(e){var t=bx.test(e.target.tagName);(t||qf)&&(e._gsapAllow=!0,qf=t)},Sx=function(e){ps(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t=e,n=t.normalizeScrollX,s=t.momentum,a=t.allowNestedScroll,o=t.onRelease,l,u,h=Bn(e.target)||Mi,f=De.core.globals().ScrollSmoother,c=f&&f.get(),d=Tr&&(e.content&&Bn(e.content)||c&&e.content!==!1&&!c.smooth()&&c.content()),p=Yr(h,tn),g=Yr(h,In),v=1,_=(qt.isTouch&&ct.visualViewport?ct.visualViewport.scale*ct.visualViewport.width:ct.outerWidth)/ct.innerWidth,m=0,y=Fn(s)?function(){return s(l)}:function(){return s||2.8},x,b,T=O_(h,e.type,!0,a),E=function(){return b=!1},M=Li,A=Li,S=function(){u=Bi(h,tn),A=Lo(Tr?1:0,u),n&&(M=Lo(0,Bi(h,In))),x=Ns},w=function(){d._gsap.y=_o(parseFloat(d._gsap.y)+p.offset)+"px",d.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(d._gsap.y)+", 0, 1)",p.offset=p.cacheID=0},C=function(){if(b){requestAnimationFrame(E);var I=_o(l.deltaY/2),j=A(p.v-I);if(d&&j!==p.v+p.offset){p.offset=j-p.v;var N=_o((parseFloat(d&&d._gsap.y)||0)-p.offset);d.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+N+", 0, 1)",d._gsap.y=N+"px",p.cacheID=ot.cache,ur()}return!0}p.offset&&w(),b=!0},D,R,F,k,z=function(){S(),D.isActive()&&D.vars.scrollY>u&&(p()>u?D.progress(1)&&p(u):D.resetTo("scrollY",u))};return d&&De.set(d,{y:"+=0"}),e.ignoreCheck=function(O){return Tr&&O.type==="touchmove"&&C()||v>1.05&&O.type!=="touchstart"||l.isGesturing||O.touches&&O.touches.length>1},e.onPress=function(){b=!1;var O=v;v=_o((ct.visualViewport&&ct.visualViewport.scale||1)/_),D.pause(),O!==v&&Au(h,v>1.01?!0:n?!1:"x"),R=g(),F=p(),S(),x=Ns},e.onRelease=e.onGestureStart=function(O,I){if(p.offset&&w(),!I)k.restart(!0);else{ot.cache++;var j=y(),N,q;n&&(N=g(),q=N+j*.05*-O.velocityX/.227,j*=Xf(g,N,q,Bi(h,In)),D.vars.scrollX=M(q)),N=p(),q=N+j*.05*-O.velocityY/.227,j*=Xf(p,N,q,Bi(h,tn)),D.vars.scrollY=A(q),D.invalidate().duration(j).play(.01),(Tr&&D.vars.scrollY>=u||N>=u-1)&&De.to({},{onUpdate:z,duration:j})}o&&o(O)},e.onWheel=function(){D._ts&&D.pause(),bn()-m>1e3&&(x=0,m=bn())},e.onChange=function(O,I,j,N,q){if(Ns!==x&&S(),I&&n&&g(M(N[2]===I?R+(O.startX-O.x):g()+I-N[1])),j){p.offset&&w();var ne=q[2]===j,W=ne?F+O.startY-O.y:p()+j-q[1],H=A(W);ne&&W!==H&&(F+=H-W),p(H)}(j||I)&&ur()},e.onEnable=function(){Au(h,n?!1:"x"),$e.addEventListener("refresh",z),ln(ct,"resize",z),p.smooth&&(p.target.style.scrollBehavior="auto",p.smooth=g.smooth=!1),T.enable()},e.onDisable=function(){Au(h,!0),on(ct,"resize",z),$e.removeEventListener("refresh",z),T.kill()},e.lockAxis=e.lockAxis!==!1,l=new qt(e),l.iOS=Tr,Tr&&!p()&&p(1),Tr&&De.ticker.add(Li),k=l._dc,D=De.to(l,{ease:"power4",paused:!0,inherit:!1,scrollX:n?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:F_(p,p(),function(){return D.pause()})},onUpdate:ur,onComplete:k.vars.onComplete}),l};$e.sort=function(r){return st.sort(r||function(e,t){return(e.vars.refreshPriority||0)*-1e6+e.start-(t.start+(t.vars.refreshPriority||0)*-1e6)})};$e.observe=function(r){return new qt(r)};$e.normalizeScroll=function(r){if(typeof r>"u")return Cn;if(r===!0&&Cn)return Cn.enable();if(r===!1){Cn&&Cn.kill(),Cn=r;return}var e=r instanceof qt?r:Sx(r);return Cn&&Cn.target===e.target&&Cn.kill(),Vs(e.target)&&(Cn=e),e};$e.core={_getVelocityProp:zd,_inputObserver:O_,_scrollers:ot,_proxies:Wi,bridge:{ss:function(){vi||Ws("scrollStart"),vi=bn()},ref:function(){return xn}}};E_()&&De.registerPlugin($e);if(!nr)var nr={map:function(r,e){var t={};return e?r.map(function(n,s){return t.index=s,e.call(t,n)}):r.slice()},naturalOrder:function(r,e){return r<e?-1:r>e?1:0},sum:function(r,e){var t={};return r.reduce(e?function(n,s,a){return t.index=a,n+e.call(t,s)}:function(n,s){return n+s},0)},max:function(r,e){return Math.max.apply(null,e?nr.map(r,e):r)}};var wx=function(){var r=5,e=8-r,t=1e3;function n(u,h,f){return(u<<2*r)+(h<<r)+f}function s(u){var h=[],f=!1;function c(){h.sort(u),f=!0}return{push:function(d){h.push(d),f=!1},peek:function(d){return f||c(),d===void 0&&(d=h.length-1),h[d]},pop:function(){return f||c(),h.pop()},size:function(){return h.length},map:function(d){return h.map(d)},debug:function(){return f||c(),h}}}function a(u,h,f,c,d,p,g){var v=this;v.r1=u,v.r2=h,v.g1=f,v.g2=c,v.b1=d,v.b2=p,v.histo=g}function o(){this.vboxes=new s(function(u,h){return nr.naturalOrder(u.vbox.count()*u.vbox.volume(),h.vbox.count()*h.vbox.volume())})}function l(u,h){if(h.count()){var f=h.r2-h.r1+1,c=h.g2-h.g1+1,d=nr.max([f,c,h.b2-h.b1+1]);if(h.count()==1)return[h.copy()];var p,g,v,_,m=0,y=[],x=[];if(d==f)for(p=h.r1;p<=h.r2;p++){for(_=0,g=h.g1;g<=h.g2;g++)for(v=h.b1;v<=h.b2;v++)_+=u[n(p,g,v)]||0;y[p]=m+=_}else if(d==c)for(p=h.g1;p<=h.g2;p++){for(_=0,g=h.r1;g<=h.r2;g++)for(v=h.b1;v<=h.b2;v++)_+=u[n(g,p,v)]||0;y[p]=m+=_}else for(p=h.b1;p<=h.b2;p++){for(_=0,g=h.r1;g<=h.r2;g++)for(v=h.g1;v<=h.g2;v++)_+=u[n(g,v,p)]||0;y[p]=m+=_}return y.forEach(function(b,T){x[T]=m-b}),function(b){var T,E,M,A,S,w=b+"1",C=b+"2",D=0;for(p=h[w];p<=h[C];p++)if(y[p]>m/2){for(M=h.copy(),A=h.copy(),S=(T=p-h[w])<=(E=h[C]-p)?Math.min(h[C]-1,~~(p+E/2)):Math.max(h[w],~~(p-1-T/2));!y[S];)S++;for(D=x[S];!D&&y[S-1];)D=x[--S];return M[C]=S,A[w]=M[C]+1,[M,A]}}(d==f?"r":d==c?"g":"b")}}return a.prototype={volume:function(u){var h=this;return h._volume&&!u||(h._volume=(h.r2-h.r1+1)*(h.g2-h.g1+1)*(h.b2-h.b1+1)),h._volume},count:function(u){var h=this,f=h.histo;if(!h._count_set||u){var c,d,p,g=0;for(c=h.r1;c<=h.r2;c++)for(d=h.g1;d<=h.g2;d++)for(p=h.b1;p<=h.b2;p++)g+=f[n(c,d,p)]||0;h._count=g,h._count_set=!0}return h._count},copy:function(){var u=this;return new a(u.r1,u.r2,u.g1,u.g2,u.b1,u.b2,u.histo)},avg:function(u){var h=this,f=h.histo;if(!h._avg||u){var c,d,p,g,v=0,_=1<<8-r,m=0,y=0,x=0;for(d=h.r1;d<=h.r2;d++)for(p=h.g1;p<=h.g2;p++)for(g=h.b1;g<=h.b2;g++)v+=c=f[n(d,p,g)]||0,m+=c*(d+.5)*_,y+=c*(p+.5)*_,x+=c*(g+.5)*_;h._avg=v?[~~(m/v),~~(y/v),~~(x/v)]:[~~(_*(h.r1+h.r2+1)/2),~~(_*(h.g1+h.g2+1)/2),~~(_*(h.b1+h.b2+1)/2)]}return h._avg},contains:function(u){var h=this,f=u[0]>>e;return gval=u[1]>>e,bval=u[2]>>e,f>=h.r1&&f<=h.r2&&gval>=h.g1&&gval<=h.g2&&bval>=h.b1&&bval<=h.b2}},o.prototype={push:function(u){this.vboxes.push({vbox:u,color:u.avg()})},palette:function(){return this.vboxes.map(function(u){return u.color})},size:function(){return this.vboxes.size()},map:function(u){for(var h=this.vboxes,f=0;f<h.size();f++)if(h.peek(f).vbox.contains(u))return h.peek(f).color;return this.nearest(u)},nearest:function(u){for(var h,f,c,d=this.vboxes,p=0;p<d.size();p++)((f=Math.sqrt(Math.pow(u[0]-d.peek(p).color[0],2)+Math.pow(u[1]-d.peek(p).color[1],2)+Math.pow(u[2]-d.peek(p).color[2],2)))<h||h===void 0)&&(h=f,c=d.peek(p).color);return c},forcebw:function(){var u=this.vboxes;u.sort(function(d,p){return nr.naturalOrder(nr.sum(d.color),nr.sum(p.color))});var h=u[0].color;h[0]<5&&h[1]<5&&h[2]<5&&(u[0].color=[0,0,0]);var f=u.length-1,c=u[f].color;c[0]>251&&c[1]>251&&c[2]>251&&(u[f].color=[255,255,255])}},{quantize:function(u,h){if(!u.length||h<2||h>256)return!1;var f=function(_){var m,y=new Array(1<<3*r);return _.forEach(function(x){m=n(x[0]>>e,x[1]>>e,x[2]>>e),y[m]=(y[m]||0)+1}),y}(u);f.forEach(function(){});var c=function(_,m){var y,x,b,T=1e6,E=0,M=1e6,A=0,S=1e6,w=0;return _.forEach(function(C){(y=C[0]>>e)<T?T=y:y>E&&(E=y),(x=C[1]>>e)<M?M=x:x>A&&(A=x),(b=C[2]>>e)<S?S=b:b>w&&(w=b)}),new a(T,E,M,A,S,w,m)}(u,f),d=new s(function(_,m){return nr.naturalOrder(_.count(),m.count())});function p(_,m){for(var y,x=_.size(),b=0;b<t;){if(x>=m||b++>t)return;if((y=_.pop()).count()){var T=l(f,y),E=T[0],M=T[1];if(!E)return;_.push(E),M&&(_.push(M),x++)}else _.push(y),b++}}d.push(c),p(d,.75*h);for(var g=new s(function(_,m){return nr.naturalOrder(_.count()*_.volume(),m.count()*m.volume())});d.size();)g.push(d.pop());p(g,h);for(var v=new o;g.size();)v.push(g.pop());return v}}}().quantize,N_=function(r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=r.naturalWidth,this.height=this.canvas.height=r.naturalHeight,this.context.drawImage(r,0,0,this.width,this.height)};N_.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var _s=function(){};_s.prototype.getColor=function(r,e){return e===void 0&&(e=10),this.getPalette(r,5,e)[0]},_s.prototype.getPalette=function(r,e,t){var n=function(l){var u=l.colorCount,h=l.quality;if(u!==void 0&&Number.isInteger(u)){if(u===1)throw new Error("colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()");u=Math.max(u,2),u=Math.min(u,20)}else u=10;return(h===void 0||!Number.isInteger(h)||h<1)&&(h=10),{colorCount:u,quality:h}}({colorCount:e,quality:t}),s=new N_(r),a=function(l,u,h){for(var f,c,d,p,g,v=l,_=[],m=0;m<u;m+=h)c=v[0+(f=4*m)],d=v[f+1],p=v[f+2],((g=v[f+3])===void 0||g>=125)&&(c>250&&d>250&&p>250||_.push([c,d,p]));return _}(s.getImageData().data,s.width*s.height,n.quality),o=wx(a,n.colorCount);return o?o.palette():null},_s.prototype.getColorFromUrl=function(r,e,t){var n=this,s=document.createElement("img");s.addEventListener("load",function(){var a=n.getPalette(s,5,t);e(a[0],r)}),s.src=r},_s.prototype.getImageData=function(r,e){var t=new XMLHttpRequest;t.open("GET",r,!0),t.responseType="arraybuffer",t.onload=function(){if(this.status==200){var n=new Uint8Array(this.response);i=n.length;for(var s=new Array(i),a=0;a<n.length;a++)s[a]=String.fromCharCode(n[a]);var o=s.join(""),l=window.btoa(o);e("data:image/png;base64,"+l)}},t.send()},_s.prototype.getColorAsync=function(r,e,t){var n=this;this.getImageData(r,function(s){var a=document.createElement("img");a.addEventListener("load",function(){var o=n.getPalette(a,5,t);e(o[0],this)}),a.src=s})};var ya=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ex(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var U_={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(ya,function(){var t=document,n=t.createTextNode.bind(t);function s(W,H,G){W.style.setProperty(H,G)}function a(W,H){return W.appendChild(H)}function o(W,H,G,ee){var te=t.createElement("span");return H&&(te.className=H),G&&(!ee&&te.setAttribute("data-"+H,G),te.textContent=G),W&&a(W,te)||te}function l(W,H){return W.getAttribute("data-"+H)}function u(W,H){return!W||W.length==0?[]:W.nodeName?[W]:[].slice.call(W[0].nodeName?W:(H||t).querySelectorAll(W))}function h(W){for(var H=[];W--;)H[W]=[];return H}function f(W,H){W&&W.some(H)}function c(W){return function(H){return W[H]}}function d(W,H,G){var ee="--"+H,te=ee+"-index";f(G,function(pe,me){Array.isArray(pe)?f(pe,function(_e){s(_e,te,me)}):s(pe,te,me)}),s(W,ee+"-total",G.length)}var p={};function g(W,H,G){var ee=G.indexOf(W);if(ee==-1)G.unshift(W),f(p[W].depends,function(pe){g(pe,W,G)});else{var te=G.indexOf(H);G.splice(ee,1),G.splice(te,0,W)}return G}function v(W,H,G,ee){return{by:W,depends:H,key:G,split:ee}}function _(W){return g(W,0,[]).map(c(p))}function m(W){p[W.by]=W}function y(W,H,G,ee,te){W.normalize();var pe=[],me=document.createDocumentFragment();ee&&pe.push(W.previousSibling);var _e=[];return u(W.childNodes).some(function(V){if(V.tagName&&!V.hasChildNodes()){_e.push(V);return}if(V.childNodes&&V.childNodes.length){_e.push(V),pe.push.apply(pe,y(V,H,G,ee,te));return}var ke=V.wholeText||"",Ee=ke.trim();Ee.length&&(ke[0]===" "&&_e.push(n(" ")),f(Ee.split(G),function(Xe,Ae){Ae&&te&&_e.push(o(me,"whitespace"," ",te));var He=o(me,H,Xe);pe.push(He),_e.push(He)}),ke[ke.length-1]===" "&&_e.push(n(" ")))}),f(_e,function(V){a(me,V)}),W.innerHTML="",a(W,me),pe}var x=0;function b(W,H){for(var G in H)W[G]=H[G];return W}var T="words",E=v(T,x,"word",function(W){return y(W,"word",/\s+/,0,1)}),M="chars",A=v(M,[T],"char",function(W,H,G){var ee=[];return f(G[T],function(te,pe){ee.push.apply(ee,y(te,"char","",H.whitespace&&pe))}),ee});function S(W){W=W||{};var H=W.key;return u(W.target||"[data-splitting]").map(function(G){var ee=G["🍌"];if(!W.force&&ee)return ee;ee=G["🍌"]={el:G};var te=_(W.by||l(G,"splitting")||M),pe=b({},W);return f(te,function(me){if(me.split){var _e=me.by,V=(H?"-"+H:"")+me.key,ke=me.split(G,pe,ee);V&&d(G,V,ke),ee[_e]=ke,G.classList.add(_e)}}),G.classList.add("splitting"),ee})}function w(W){W=W||{};var H=W.target=o();return H.innerHTML=W.content,S(W),H.outerHTML}S.html=w,S.add=m;function C(W,H,G){var ee=u(H.matching||W.children,W),te={};return f(ee,function(pe){var me=Math.round(pe[G]);(te[me]||(te[me]=[])).push(pe)}),Object.keys(te).map(Number).sort(D).map(c(te))}function D(W,H){return W-H}var R=v("lines",[T],"line",function(W,H,G){return C(W,{matching:G[T]},"offsetTop")}),F=v("items",x,"item",function(W,H){return u(H.matching||W.children,W)}),k=v("rows",x,"row",function(W,H){return C(W,H,"offsetTop")}),z=v("cols",x,"col",function(W,H){return C(W,H,"offsetLeft")}),O=v("grid",["rows","cols"]),I="layout",j=v(I,x,x,function(W,H){var G=H.rows=+(H.rows||l(W,"rows")||1),ee=H.columns=+(H.columns||l(W,"columns")||1);if(H.image=H.image||l(W,"image")||W.currentSrc||W.src,H.image){var te=u("img",W)[0];H.image=te&&(te.currentSrc||te.src)}H.image&&s(W,"background-image","url("+H.image+")");for(var pe=G*ee,me=[],_e=o(x,"cell-grid");pe--;){var V=o(_e,"cell");o(V,"cell-inner"),me.push(V)}return a(W,_e),me}),N=v("cellRows",[I],"row",function(W,H,G){var ee=H.rows,te=h(ee);return f(G[I],function(pe,me,_e){te[Math.floor(me/(_e.length/ee))].push(pe)}),te}),q=v("cellColumns",[I],"col",function(W,H,G){var ee=H.columns,te=h(ee);return f(G[I],function(pe,me){te[me%ee].push(pe)}),te}),ne=v("cells",["cellRows","cellColumns"],"cell",function(W,H,G){return G[I]});return m(E),m(A),m(R),m(F),m(k),m(z),m(O),m(j),m(N),m(q),m(ne),S})})(U_);var Tx=U_.exports;const Xh=Ex(Tx);we.registerPlugin($e);$e.clearScrollMemory();$e.refresh();class k_{constructor(e){this.container=e,this.nameContainerTop=this.container.querySelector(".name-container-top"),this.nameContainerBottom=this.container.querySelector(".name-container-bottom"),this.nameT1=this.nameContainerTop.querySelector(".name-block:nth-child(1)"),this.nameT2=this.nameContainerTop.querySelector(".name-block:nth-child(2)"),this.nameB1=this.nameContainerBottom.querySelector(".name-block:nth-child(1)"),this.nameB2=this.nameContainerBottom.querySelector(".name-block:nth-child(2)"),this.workImages=[...this.container.querySelectorAll(".h-img")],this.colorThief=new _s,this.footer=e.querySelector(".footer"),this.hero=e.querySelector("#homeHero"),this.homeWorks=e.querySelector("#homeWorks"),this.homeAbout=e.querySelector("#homeAbout"),this.homeBody=e,this.questionMark=e.querySelector(".question-mark"),this.preloaderContent=e.querySelector(".preloader-content"),this.nameContainer=e.querySelector(".name-container"),$e.refresh(),this.init()}init(){this.initSplitting(),this.initScrollAnimation(),this.getColors(),we.set(".preloader-wrapper",{display:"none"}),we.to(".loader-img",{scale:1,clipPath:"circle(80% at 50% 50%)",ease:"expo.out",duration:2})}initSplitting(){const e=[...this.container.querySelectorAll("[split-text]")],t=Xh({target:e,by:"lines"});this.wordsC=this.container.querySelectorAll(".word"),this.wordsC.forEach(n=>{let s=document.createElement("span");s.classList.add("char-wrap"),n.parentNode.insertBefore(s,n),s.appendChild(n)}),this.chars=t.map(n=>n.chars)}getTextColor(e,t,n){return(e*299+t*587+n*114)/1e3>128?"black":"white"}getColors(){this.workImages.forEach(e=>{e.crossOrigin="Anonymous",new Promise(t=>{e.complete?t(this.colorThief.getColor(e)):e.addEventListener("load",()=>{t(this.colorThief.getColor(e))})}).then(t=>{const n=this.getTextColor(t[0],t[1],t[2]),s=e.closest(".home-music-link");we.set(s,{backgroundColor:`rgb(${t[0]}, ${t[1]}, ${t[2]})`}),we.set(s,{color:n})})})}initScrollAnimation(){this.nameT1.style.opacity="1",this.nameT2.style.opacity="0",this.nameB1.style.opacity="1",this.nameB2.style.opacity="0",$e.create({trigger:this.hero,start:"top top",endTrigger:this.footer,end:"bottom bottom",pin:!0,scrub:!0,pinSpacing:!1,markers:!1,invalidateOnRefresh:!0});let e=we.timeline();e.to([".hero-p .word",".hero-details-wrapper h2"],{yPercent:120}),e.to(".loading-visual",{scale:0},"<");let t=we.timeline({paused:!0});t.to(this.questionMark,{opacity:1}),t.fromTo(this.homeBody,{color:"#0B8457"},{color:"#efe5cf"},"<"),$e.create({trigger:this.homeWorks,start:"top bottom",end:"top 35%",scrub:!0,invalidateOnRefresh:!0,animation:e,onLeaveBack:()=>{we.to(this.nameContainer,{filter:"none"})},onEnter:()=>{we.to(this.nameContainer,{filter:"url(#threshold) blur(0.6px)"})},onEnterBack:()=>{we.to(this.nameContainer,{filter:"url(#threshold) blur(0.6px)"}),we.to(this.questionMark,{opacity:1}),t.reverse()},onLeave:()=>{we.to(this.nameContainer,{filter:"none"}),t.play()},onUpdate:s=>{const a=s.progress,o=Math.min(a,1);we.set(this.nameT1,{opacity:1-o}),we.set(this.nameT2,{opacity:o}),we.set(this.nameT1,{filter:`blur(${Math.min(8/(1-o)-8,100)}px)`}),we.set(this.nameT2,{filter:`blur(${Math.min(8/o-8,100)}px)`}),we.set(this.nameB1,{opacity:1-o}),we.set(this.nameB2,{opacity:o}),we.set(this.nameB1,{filter:`blur(${Math.min(8/(1-o)-8,100)}px)`}),we.set(this.nameB2,{filter:`blur(${Math.min(8/o-8,100)}px)`})}});let n=we.timeline({paused:!0});n.to(this.questionMark,{scale:1,fontSize:"35vw"}).fromTo(["main","header"],{color:"inherit"},{color:"#0B8457"},"<").to(this.preloaderContent,{opacity:0},"<"),$e.create({trigger:this.homeAbout,start:"top bottom",end:"top top",markers:!1,scrub:!0,invalidateOnRefresh:!0,animation:n})}}we.registerPlugin(ll);let Mx=class{constructor(e){Un(this,"tlAnimateDots",we.timeline());Un(this,"tlReavealVisual",we.timeline({defaults:{duration:1}}));this.container=e,this.loaderWrapper=document.querySelector(".preloader-wrapper"),this.loadingDots=[...this.loaderWrapper.querySelectorAll(".loading-visual")],this.loadingTextWrapper=this.loaderWrapper.querySelector(".loading-text-wrapper"),this.init()}init(){we.set(["html","body"],{overflow:"hidden"}),this.animateDots()}animateDots(){this.tlAnimateDots.to(this.loadingTextWrapper.querySelector("*"),{opacity:.5,duration:.6,yoyo:!0,repeat:-1},""),this.tlAnimateDots.to(this.loadingDots,{scale:1,borderRadius:"0%",duration:1,ease:"expo.inOut",stagger:{amount:2,from:"end"},delay:.5},"<"),this.tlAnimateDots.to(".loading-text",{duration:1,scrambleText:{text:"CLICK TO ENTER",chars:"O",speed:1},onComplete:()=>{this.addEventListeners()}})}addEventListeners(){this.loaderWrapper.addEventListener("click",()=>{this.tlReavealVisual.to(this.loadingDots[2],{height:()=>window.innerWidth>478?"23.6rem":"24.5rem",width:"18rem",aspectRatio:1,scaleX:1,ease:"expo.out"}),this.tlReavealVisual.from(".loading-visual-wrapper.home",{height:"100%",ease:"expo.out"}),this.tlReavealVisual.to([this.loadingDots[0],this.loadingDots[1],this.loadingDots[3],this.loadingDots[4]],{height:"0%"},"<"),this.tlReavealVisual.to(this.loaderWrapper,{backgroundColor:"transparent",color:"black"},"<"),this.tlReavealVisual.to(this.loadingTextWrapper,{opacity:0,duration:.3},"<"),this.tlReavealVisual.set(this.loaderWrapper,{display:"none"},">"),this.tlReavealVisual.fromTo(".loader-img",{scale:1.6,clipPath:"circle(0% at 50% 50%)"},{scale:1,clipPath:"circle(80% at 50% 50%)",ease:"expo.out",duration:2},">0.2"),setTimeout(()=>{document.body.classList.remove("stop-scroll"),we.set(this.container,{position:"relative",height:"auto"}),we.set(["html","body"],{overflow:"auto"}),new k_(document.querySelector('[data-barba-namespace="home"]'))},2e3)})}};function Te(r,e,t){return(e=Cx(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ax(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Cx(r){var e=Ax(r,"string");return typeof e=="symbol"?e:String(e)}function Dx(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function jf(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Px(r,e,t){return e&&jf(r.prototype,e),t&&jf(r,t),r}function Rx(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Kf(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function Zf(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Kf(Object(t),!0).forEach(function(n){Rx(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Kf(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Jf={addCSS:!0,thumbWidth:15,watch:!0};function Lx(r,e){return(function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(r,e)}function Ix(r,e){if(r&&e){var t=new Event(e,{bubbles:!0});r.dispatchEvent(t)}}var cl=function(r){return r!=null?r.constructor:null},qh=function(r,e){return!!(r&&e&&r instanceof e)},B_=function(r){return r==null},z_=function(r){return cl(r)===Object},Fx=function(r){return cl(r)===Number&&!Number.isNaN(r)},H_=function(r){return cl(r)===String},Ox=function(r){return cl(r)===Boolean},Nx=function(r){return cl(r)===Function},V_=function(r){return Array.isArray(r)},G_=function(r){return qh(r,NodeList)},Ux=function(r){return qh(r,Element)},kx=function(r){return qh(r,Event)},Bx=function(r){return B_(r)||(H_(r)||V_(r)||G_(r))&&!r.length||z_(r)&&!Object.keys(r).length},_n={nullOrUndefined:B_,object:z_,number:Fx,string:H_,boolean:Ox,function:Nx,array:V_,nodeList:G_,element:Ux,event:kx,empty:Bx};function zx(r){var e="".concat(r).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}function Hx(r,e){if(1>e){var t=zx(e);return parseFloat(r.toFixed(t))}return Math.round(r/e)*e}var Vx=function(){function r(e,t){Dx(this,r),_n.element(e)?this.element=e:_n.string(e)&&(this.element=document.querySelector(e)),_n.element(this.element)&&_n.empty(this.element.rangeTouch)&&(this.config=Zf({},Jf,{},t),this.init())}return Px(r,[{key:"init",value:function(){r.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){r.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,n=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(s){t.element[n](s,function(a){return t.set(a)},!1)})}},{key:"get",value:function(e){if(!r.enabled||!_n.event(e))return null;var t,n=e.target,s=e.changedTouches[0],a=parseFloat(n.getAttribute("min"))||0,o=parseFloat(n.getAttribute("max"))||100,l=parseFloat(n.getAttribute("step"))||1,u=n.getBoundingClientRect(),h=100/u.width*(this.config.thumbWidth/2)/100;return 0>(t=100/u.width*(s.clientX-u.left))?t=0:100<t&&(t=100),50>t?t-=(100-2*t)*h:50<t&&(t+=2*(t-50)*h),a+Hx(t/100*(o-a),l)}},{key:"set",value:function(e){r.enabled&&_n.event(e)&&!e.target.disabled&&(e.preventDefault(),e.target.value=this.get(e),Ix(e.target,e.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},n=null;if(_n.empty(e)||_n.string(e)?n=Array.from(document.querySelectorAll(_n.string(e)?e:'input[type="range"]')):_n.element(e)?n=[e]:_n.nodeList(e)?n=Array.from(e):_n.array(e)&&(n=e.filter(_n.element)),_n.empty(n))return null;var s=Zf({},Jf,{},t);if(_n.string(e)&&s.watch){var a=new MutationObserver(function(o){Array.from(o).forEach(function(l){Array.from(l.addedNodes).forEach(function(u){_n.element(u)&&Lx(u,e)&&new r(u,s)})})});a.observe(document.body,{childList:!0,subtree:!0})}return n.map(function(o){return new r(o,t)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),r}();const ul=r=>r!=null?r.constructor:null,mr=(r,e)=>!!(r&&e&&r instanceof e),Yh=r=>r==null,W_=r=>ul(r)===Object,Gx=r=>ul(r)===Number&&!Number.isNaN(r),Jc=r=>ul(r)===String,Wx=r=>ul(r)===Boolean,$_=r=>typeof r=="function",X_=r=>Array.isArray(r),$x=r=>mr(r,WeakMap),q_=r=>mr(r,NodeList),Xx=r=>ul(r)===Text,qx=r=>mr(r,Event),Yx=r=>mr(r,KeyboardEvent),jx=r=>mr(r,window.TextTrackCue)||mr(r,window.VTTCue),Kx=r=>mr(r,TextTrack)||!Yh(r)&&Jc(r.kind),Zx=r=>mr(r,Promise)&&$_(r.then),Jx=r=>r!==null&&typeof r=="object"&&r.nodeType===1&&typeof r.style=="object"&&typeof r.ownerDocument=="object",Y_=r=>Yh(r)||(Jc(r)||X_(r)||q_(r))&&!r.length||W_(r)&&!Object.keys(r).length,Qx=r=>{if(mr(r,window.URL))return!0;if(!Jc(r))return!1;let e=r;r.startsWith("http://")&&r.startsWith("https://")||(e=`http://${r}`);try{return!Y_(new URL(e).hostname)}catch{return!1}};var U={nullOrUndefined:Yh,object:W_,number:Gx,string:Jc,boolean:Wx,function:$_,array:X_,weakMap:$x,nodeList:q_,element:Jx,textNode:Xx,event:qx,keyboardEvent:Yx,cue:jx,track:Kx,promise:Zx,url:Qx,empty:Y_};const Yd=(()=>{const r=document.createElement("span"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},t=Object.keys(e).find(n=>r.style[n]!==void 0);return!!U.string(t)&&e[t]})();function j_(r,e){setTimeout(()=>{try{r.hidden=!0,r.offsetHeight,r.hidden=!1}catch{}},e)}const eb=!!window.document.documentMode,tb=/Edge/g.test(navigator.userAgent),nb="WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),ib=/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,rb=navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,sb=/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1;var un={isIE:eb,isEdge:tb,isWebKit:nb,isIPhone:ib,isIPadOS:rb,isIos:sb};function ab(r){return JSON.parse(JSON.stringify(r))}function K_(r,e){return e.split(".").reduce((t,n)=>t&&t[n],r)}function Wt(r={},...e){if(!e.length)return r;const t=e.shift();return U.object(t)?(Object.keys(t).forEach(n=>{U.object(t[n])?(Object.keys(r).includes(n)||Object.assign(r,{[n]:{}}),Wt(r[n],t[n])):Object.assign(r,{[n]:t[n]})}),Wt(r,...e)):r}function Z_(r,e){const t=r.length?r:[r];Array.from(t).reverse().forEach((n,s)=>{const a=s>0?e.cloneNode(!0):e,o=n.parentNode,l=n.nextSibling;a.appendChild(n),l?o.insertBefore(a,l):o.appendChild(a)})}function jd(r,e){U.element(r)&&!U.empty(e)&&Object.entries(e).filter(([,t])=>!U.nullOrUndefined(t)).forEach(([t,n])=>r.setAttribute(t,n))}function Ye(r,e,t){const n=document.createElement(r);return U.object(e)&&jd(n,e),U.string(t)&&(n.innerText=t),n}function ob(r,e){U.element(r)&&U.element(e)&&e.parentNode.insertBefore(r,e.nextSibling)}function Qf(r,e,t,n){U.element(e)&&e.appendChild(Ye(r,t,n))}function or(r){U.nodeList(r)||U.array(r)?Array.from(r).forEach(or):U.element(r)&&U.element(r.parentNode)&&r.parentNode.removeChild(r)}function gc(r){if(!U.element(r))return;let{length:e}=r.childNodes;for(;e>0;)r.removeChild(r.lastChild),e-=1}function Oc(r,e){return U.element(e)&&U.element(e.parentNode)&&U.element(r)?(e.parentNode.replaceChild(r,e),r):null}function Pi(r,e){if(!U.string(r)||U.empty(r))return{};const t={},n=Wt({},e);return r.split(",").forEach(s=>{const a=s.trim(),o=a.replace(".",""),l=a.replace(/[[\]]/g,"").split("="),[u]=l,h=l.length>1?l[1].replace(/["']/g,""):"";switch(a.charAt(0)){case".":U.string(n.class)?t.class=`${n.class} ${o}`:t.class=o;break;case"#":t.id=a.replace("#","");break;case"[":t[u]=h}}),Wt(n,t)}function is(r,e){if(!U.element(r))return;let t=e;U.boolean(t)||(t=!r.hidden),r.hidden=t}function vt(r,e,t){if(U.nodeList(r))return Array.from(r).map(n=>vt(n,e,t));if(U.element(r)){let n="toggle";return t!==void 0&&(n=t?"add":"remove"),r.classList[n](e),r.classList.contains(e)}return!1}function Nc(r,e){return U.element(r)&&r.classList.contains(e)}function Ms(r,e){const{prototype:t}=Element;return(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(r,e)}function lb(r,e){const{prototype:t}=Element;return(t.closest||function(){let n=this;do{if(Ms.matches(n,e))return n;n=n.parentElement||n.parentNode}while(n!==null&&n.nodeType===1);return null}).call(r,e)}function Jo(r){return this.elements.container.querySelectorAll(r)}function Qt(r){return this.elements.container.querySelector(r)}function Cu(r=null,e=!1){U.element(r)&&r.focus({preventScroll:!0,focusVisible:e})}const ep={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},$t={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(r,e){const t=$t[r]||e!=="html5";return{api:t,ui:t&&$t.rangeInput}},pip:!(un.isIPhone||!U.function(Ye("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||Ye("video").disablePictureInPicture)),airplay:U.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(r){if(U.empty(r))return!1;const[e]=r.split("/");let t=r;if(!this.isHTML5||e!==this.type)return!1;Object.keys(ep).includes(t)&&(t+=`; codecs="${ep[r]}"`);try{return!!(t&&this.media.canPlayType(t).replace(/no/,""))}catch{return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const r=document.createElement("input");return r.type="range",r.type==="range"})(),touch:"ontouchstart"in document.documentElement,transitions:Yd!==!1,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},cb=(()=>{let r=!1;try{const e=Object.defineProperty({},"passive",{get:()=>(r=!0,null)});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return r})();function Qo(r,e,t,n=!1,s=!0,a=!1){if(!r||!("addEventListener"in r)||U.empty(e)||!U.function(t))return;const o=e.split(" ");let l=a;cb&&(l={passive:s,capture:a}),o.forEach(u=>{this&&this.eventListeners&&n&&this.eventListeners.push({element:r,type:u,callback:t,options:l}),r[n?"addEventListener":"removeEventListener"](u,t,l)})}function pt(r,e="",t,n=!0,s=!1){Qo.call(this,r,e,t,!0,n,s)}function Qc(r,e="",t,n=!0,s=!1){Qo.call(this,r,e,t,!1,n,s)}function jh(r,e="",t,n=!0,s=!1){const a=(...o)=>{Qc(r,e,a,n,s),t.apply(this,o)};Qo.call(this,r,e,a,!0,n,s)}function Ke(r,e="",t=!1,n={}){if(!U.element(r)||U.empty(e))return;const s=new CustomEvent(e,{bubbles:t,detail:{...n,plyr:this}});r.dispatchEvent(s)}function ub(){this&&this.eventListeners&&(this.eventListeners.forEach(r=>{const{element:e,type:t,callback:n,options:s}=r;e.removeEventListener(t,n,s)}),this.eventListeners=[])}function db(){return new Promise(r=>this.ready?setTimeout(r,0):pt.call(this,this.elements.container,"ready",r)).then(()=>{})}function Oi(r){U.promise(r)&&r.then(null,()=>{})}function Kd(r){return U.array(r)?r.filter((e,t)=>r.indexOf(e)===t):r}function J_(r,e){return U.array(r)&&r.length?r.reduce((t,n)=>Math.abs(n-e)<Math.abs(t-e)?n:t):null}function Q_(r){return!(!window||!window.CSS)&&window.CSS.supports(r)}const tp=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((r,[e,t])=>({...r,[e/t]:[e,t]}),{});function e0(r){return U.array(r)||U.string(r)&&r.includes(":")?(U.array(r)?r:r.split(":")).map(Number).every(U.number):!1}function Uc(r){if(!U.array(r)||!r.every(U.number))return null;const[e,t]=r,n=(a,o)=>o===0?a:n(o,a%o),s=n(e,t);return[e/s,t/s]}function Kh(r){const e=n=>e0(n)?n.split(":").map(Number):null;let t=e(r);if(t===null&&(t=e(this.config.ratio)),t===null&&!U.empty(this.embed)&&U.array(this.embed.ratio)&&({ratio:t}=this.embed),t===null&&this.isHTML5){const{videoWidth:n,videoHeight:s}=this.media;t=[n,s]}return Uc(t)}function Va(r){if(!this.isVideo)return{};const{wrapper:e}=this.elements,t=Kh.call(this,r);if(!U.array(t))return{};const[n,s]=Uc(t),a=100/n*s;if(Q_(`aspect-ratio: ${n}/${s}`)?e.style.aspectRatio=`${n}/${s}`:e.style.paddingBottom=`${a}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const o=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),l=(o-a)/(o/50);this.fullscreen.active?e.style.paddingBottom=null:this.media.style.transform=`translateY(-${l}%)`}else this.isHTML5&&e.classList.add(this.config.classNames.videoFixedRatio);return{padding:a,ratio:t}}function t0(r,e,t=.05){const n=r/e,s=J_(Object.keys(tp),n);return Math.abs(s-n)<=t?tp[s]:[r,e]}function hb(){return[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)]}const Nr={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(r=>{const e=r.getAttribute("type");return!!U.empty(e)||$t.mime.call(this,e)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:Nr.getSources.call(this).map(r=>Number(r.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;const r=this;r.options.speed=r.config.speed.options,U.empty(this.config.ratio)||Va.call(r),Object.defineProperty(r.media,"quality",{get(){const e=Nr.getSources.call(r).find(t=>t.getAttribute("src")===r.source);return e&&Number(e.getAttribute("size"))},set(e){if(r.quality!==e){if(r.config.quality.forced&&U.function(r.config.quality.onChange))r.config.quality.onChange(e);else{const t=Nr.getSources.call(r).find(u=>Number(u.getAttribute("size"))===e);if(!t)return;const{currentTime:n,paused:s,preload:a,readyState:o,playbackRate:l}=r.media;r.media.src=t.getAttribute("src"),(a!=="none"||o)&&(r.once("loadedmetadata",()=>{r.speed=l,r.currentTime=n,s||Oi(r.play())}),r.media.load())}Ke.call(r,r.media,"qualitychange",!1,{quality:e})}}})},cancelRequests(){this.isHTML5&&(or(Nr.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function fb(r){return`${r}-${Math.floor(1e4*Math.random())}`}function Zd(r,...e){return U.empty(r)?r:r.toString().replace(/{(\d+)}/g,(t,n)=>e[n].toString())}function pb(r,e){return r===0||e===0||Number.isNaN(r)||Number.isNaN(e)?0:(r/e*100).toFixed(2)}const ko=(r="",e="",t="")=>r.replace(new RegExp(e.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),t.toString()),n0=(r="")=>r.toString().replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());function mb(r=""){let e=r.toString();return e=ko(e,"-"," "),e=ko(e,"_"," "),e=n0(e),ko(e," ","")}function gb(r=""){let e=r.toString();return e=mb(e),e.charAt(0).toLowerCase()+e.slice(1)}function _b(r){const e=document.createDocumentFragment(),t=document.createElement("div");return e.appendChild(t),t.innerHTML=r,e.firstChild.innerText}function vb(r){const e=document.createElement("div");return e.appendChild(r),e.innerHTML}const np={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},cn={get(r="",e={}){if(U.empty(r)||U.empty(e))return"";let t=K_(e.i18n,r);if(U.empty(t))return Object.keys(np).includes(r)?np[r]:"";const n={"{seektime}":e.seekTime,"{title}":e.title};return Object.entries(n).forEach(([s,a])=>{t=ko(t,s,a)}),t}};class el{constructor(e){Te(this,"get",t=>{if(!el.supported||!this.enabled)return null;const n=window.localStorage.getItem(this.key);if(U.empty(n))return null;const s=JSON.parse(n);return U.string(t)&&t.length?s[t]:s}),Te(this,"set",t=>{if(!el.supported||!this.enabled||!U.object(t))return;let n=this.get();U.empty(n)&&(n={}),Wt(n,t);try{window.localStorage.setItem(this.key,JSON.stringify(n))}catch{}}),this.enabled=e.config.storage.enabled,this.key=e.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch{return!1}}}function dl(r,e="text"){return new Promise((t,n)=>{try{const s=new XMLHttpRequest;if(!("withCredentials"in s))return;s.addEventListener("load",()=>{if(e==="text")try{t(JSON.parse(s.responseText))}catch{t(s.responseText)}else t(s.response)}),s.addEventListener("error",()=>{throw new Error(s.status)}),s.open("GET",r,!0),s.responseType=e,s.send()}catch(s){n(s)}})}function i0(r,e){if(!U.string(r))return;const t="cache",n=U.string(e);let s=!1;const a=()=>document.getElementById(e)!==null,o=(l,u)=>{l.innerHTML=u,n&&a()||document.body.insertAdjacentElement("afterbegin",l)};if(!n||!a()){const l=el.supported,u=document.createElement("div");if(u.setAttribute("hidden",""),n&&u.setAttribute("id",e),l){const h=window.localStorage.getItem(`${t}-${e}`);if(s=h!==null,s){const f=JSON.parse(h);o(u,f.content)}}dl(r).then(h=>{if(!U.empty(h)){if(l)try{window.localStorage.setItem(`${t}-${e}`,JSON.stringify({content:h}))}catch{}o(u,h)}}).catch(()=>{})}}const r0=r=>Math.trunc(r/60/60%60,10),yb=r=>Math.trunc(r/60%60,10),xb=r=>Math.trunc(r%60,10);function eu(r=0,e=!1,t=!1){if(!U.number(r))return eu(void 0,e,t);const n=l=>`0${l}`.slice(-2);let s=r0(r);const a=yb(r),o=xb(r);return s=e||s>0?`${s}:`:"",`${t&&r>0?"-":""}${s}${n(a)}:${n(o)}`}const be={getIconUrl(){const r=new URL(this.config.iconUrl,window.location),e=window.location.host?window.location.host:window.top.location.host,t=r.host!==e||un.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:t}},findElements(){try{return this.elements.controls=Qt.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:Jo.call(this,this.config.selectors.buttons.play),pause:Qt.call(this,this.config.selectors.buttons.pause),restart:Qt.call(this,this.config.selectors.buttons.restart),rewind:Qt.call(this,this.config.selectors.buttons.rewind),fastForward:Qt.call(this,this.config.selectors.buttons.fastForward),mute:Qt.call(this,this.config.selectors.buttons.mute),pip:Qt.call(this,this.config.selectors.buttons.pip),airplay:Qt.call(this,this.config.selectors.buttons.airplay),settings:Qt.call(this,this.config.selectors.buttons.settings),captions:Qt.call(this,this.config.selectors.buttons.captions),fullscreen:Qt.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=Qt.call(this,this.config.selectors.progress),this.elements.inputs={seek:Qt.call(this,this.config.selectors.inputs.seek),volume:Qt.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:Qt.call(this,this.config.selectors.display.buffer),currentTime:Qt.call(this,this.config.selectors.display.currentTime),duration:Qt.call(this,this.config.selectors.display.duration)},U.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(r){return this.debug.warn("It looks like there is a problem with your custom controls HTML",r),this.toggleNativeControls(!0),!1}},createIcon(r,e){const t="http://www.w3.org/2000/svg",n=be.getIconUrl.call(this),s=`${n.cors?"":n.url}#${this.config.iconPrefix}`,a=document.createElementNS(t,"svg");jd(a,Wt(e,{"aria-hidden":"true",focusable:"false"}));const o=document.createElementNS(t,"use"),l=`${s}-${r}`;return"href"in o&&o.setAttributeNS("http://www.w3.org/1999/xlink","href",l),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l),a.appendChild(o),a},createLabel(r,e={}){const t=cn.get(r,this.config);return Ye("span",{...e,class:[e.class,this.config.classNames.hidden].filter(Boolean).join(" ")},t)},createBadge(r){if(U.empty(r))return null;const e=Ye("span",{class:this.config.classNames.menu.value});return e.appendChild(Ye("span",{class:this.config.classNames.menu.badge},r)),e},createButton(r,e){const t=Wt({},e);let n=gb(r);const s={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(o=>{Object.keys(t).includes(o)&&(s[o]=t[o],delete t[o])}),s.element!=="button"||Object.keys(t).includes("type")||(t.type="button"),Object.keys(t).includes("class")?t.class.split(" ").some(o=>o===this.config.classNames.control)||Wt(t,{class:`${t.class} ${this.config.classNames.control}`}):t.class=this.config.classNames.control,r){case"play":s.toggle=!0,s.label="play",s.labelPressed="pause",s.icon="play",s.iconPressed="pause";break;case"mute":s.toggle=!0,s.label="mute",s.labelPressed="unmute",s.icon="volume",s.iconPressed="muted";break;case"captions":s.toggle=!0,s.label="enableCaptions",s.labelPressed="disableCaptions",s.icon="captions-off",s.iconPressed="captions-on";break;case"fullscreen":s.toggle=!0,s.label="enterFullscreen",s.labelPressed="exitFullscreen",s.icon="enter-fullscreen",s.iconPressed="exit-fullscreen";break;case"play-large":t.class+=` ${this.config.classNames.control}--overlaid`,n="play",s.label="play",s.icon="play";break;default:U.empty(s.label)&&(s.label=n),U.empty(s.icon)&&(s.icon=r)}const a=Ye(s.element);return s.toggle?(a.appendChild(be.createIcon.call(this,s.iconPressed,{class:"icon--pressed"})),a.appendChild(be.createIcon.call(this,s.icon,{class:"icon--not-pressed"})),a.appendChild(be.createLabel.call(this,s.labelPressed,{class:"label--pressed"})),a.appendChild(be.createLabel.call(this,s.label,{class:"label--not-pressed"}))):(a.appendChild(be.createIcon.call(this,s.icon)),a.appendChild(be.createLabel.call(this,s.label))),Wt(t,Pi(this.config.selectors.buttons[n],t)),jd(a,t),n==="play"?(U.array(this.elements.buttons[n])||(this.elements.buttons[n]=[]),this.elements.buttons[n].push(a)):this.elements.buttons[n]=a,a},createRange(r,e){const t=Ye("input",Wt(Pi(this.config.selectors.inputs[r]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":cn.get(r,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},e));return this.elements.inputs[r]=t,be.updateRangeFill.call(this,t),Vx.setup(t),t},createProgress(r,e){const t=Ye("progress",Wt(Pi(this.config.selectors.display[r]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},e));if(r!=="volume"){t.appendChild(Ye("span",null,"0"));const n={played:"played",buffer:"buffered"}[r],s=n?cn.get(n,this.config):"";t.innerText=`% ${s.toLowerCase()}`}return this.elements.display[r]=t,t},createTime(r,e){const t=Pi(this.config.selectors.display[r],e),n=Ye("div",Wt(t,{class:`${t.class?t.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":cn.get(r,this.config),role:"timer"}),"00:00");return this.elements.display[r]=n,n},bindMenuItemShortcuts(r,e){pt.call(this,r,"keydown keyup",t=>{if(![" ","ArrowUp","ArrowDown","ArrowRight"].includes(t.key)||(t.preventDefault(),t.stopPropagation(),t.type==="keydown"))return;const n=Ms(r,'[role="menuitemradio"]');if(!n&&[" ","ArrowRight"].includes(t.key))be.showMenuPanel.call(this,e,!0);else{let s;t.key!==" "&&(t.key==="ArrowDown"||n&&t.key==="ArrowRight"?(s=r.nextElementSibling,U.element(s)||(s=r.parentNode.firstElementChild)):(s=r.previousElementSibling,U.element(s)||(s=r.parentNode.lastElementChild)),Cu.call(this,s,!0))}},!1),pt.call(this,r,"keyup",t=>{t.key==="Return"&&be.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:r,list:e,type:t,title:n,badge:s=null,checked:a=!1}){const o=Pi(this.config.selectors.inputs[t]),l=Ye("button",Wt(o,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${o.class?o.class:""}`.trim(),"aria-checked":a,value:r})),u=Ye("span");u.innerHTML=n,U.element(s)&&u.appendChild(s),l.appendChild(u),Object.defineProperty(l,"checked",{enumerable:!0,get:()=>l.getAttribute("aria-checked")==="true",set(h){h&&Array.from(l.parentNode.children).filter(f=>Ms(f,'[role="menuitemradio"]')).forEach(f=>f.setAttribute("aria-checked","false")),l.setAttribute("aria-checked",h?"true":"false")}}),this.listeners.bind(l,"click keyup",h=>{if(!U.keyboardEvent(h)||h.key===" "){switch(h.preventDefault(),h.stopPropagation(),l.checked=!0,t){case"language":this.currentTrack=Number(r);break;case"quality":this.quality=r;break;case"speed":this.speed=parseFloat(r)}be.showMenuPanel.call(this,"home",U.keyboardEvent(h))}},t,!1),be.bindMenuItemShortcuts.call(this,l,t),e.appendChild(l)},formatTime(r=0,e=!1){return U.number(r)?eu(r,r0(this.duration)>0,e):r},updateTimeDisplay(r=null,e=0,t=!1){U.element(r)&&U.number(e)&&(r.innerText=be.formatTime(e,t))},updateVolume(){this.supported.ui&&(U.element(this.elements.inputs.volume)&&be.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),U.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||this.volume===0))},setRange(r,e=0){U.element(r)&&(r.value=e,be.updateRangeFill.call(this,r))},updateProgress(r){if(!this.supported.ui||!U.event(r))return;let e=0;const t=(n,s)=>{const a=U.number(s)?s:0,o=U.element(n)?n:this.elements.display.buffer;if(U.element(o)){o.value=a;const l=o.getElementsByTagName("span")[0];U.element(l)&&(l.childNodes[0].nodeValue=a)}};if(r)switch(r.type){case"timeupdate":case"seeking":case"seeked":e=pb(this.currentTime,this.duration),r.type==="timeupdate"&&be.setRange.call(this,this.elements.inputs.seek,e);break;case"playing":case"progress":t(this.elements.display.buffer,100*this.buffered)}},updateRangeFill(r){const e=U.event(r)?r.target:r;if(U.element(e)&&e.getAttribute("type")==="range"){if(Ms(e,this.config.selectors.inputs.seek)){e.setAttribute("aria-valuenow",this.currentTime);const t=be.formatTime(this.currentTime),n=be.formatTime(this.duration),s=cn.get("seekLabel",this.config);e.setAttribute("aria-valuetext",s.replace("{currentTime}",t).replace("{duration}",n))}else if(Ms(e,this.config.selectors.inputs.volume)){const t=100*e.value;e.setAttribute("aria-valuenow",t),e.setAttribute("aria-valuetext",`${t.toFixed(1)}%`)}else e.setAttribute("aria-valuenow",e.value);(un.isWebKit||un.isIPadOS)&&e.style.setProperty("--value",e.value/e.max*100+"%")}},updateSeekTooltip(r){var e,t;if(!this.config.tooltips.seek||!U.element(this.elements.inputs.seek)||!U.element(this.elements.display.seekTooltip)||this.duration===0)return;const n=this.elements.display.seekTooltip,s=`${this.config.classNames.tooltip}--visible`,a=f=>vt(n,s,f);if(this.touch)return void a(!1);let o=0;const l=this.elements.progress.getBoundingClientRect();if(U.event(r))o=100/l.width*(r.pageX-l.left);else{if(!Nc(n,s))return;o=parseFloat(n.style.left,10)}o<0?o=0:o>100&&(o=100);const u=this.duration/100*o;n.innerText=be.formatTime(u);const h=(e=this.config.markers)===null||e===void 0||(t=e.points)===null||t===void 0?void 0:t.find(({time:f})=>f===Math.round(u));h&&n.insertAdjacentHTML("afterbegin",`${h.label}<br>`),n.style.left=`${o}%`,U.event(r)&&["mouseenter","mouseleave"].includes(r.type)&&a(r.type==="mouseenter")},timeUpdate(r){const e=!U.element(this.elements.display.duration)&&this.config.invertTime;be.updateTimeDisplay.call(this,this.elements.display.currentTime,e?this.duration-this.currentTime:this.currentTime,e),r&&r.type==="timeupdate"&&this.media.seeking||be.updateProgress.call(this,r)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return is(this.elements.display.currentTime,!0),void is(this.elements.progress,!0);U.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const r=U.element(this.elements.display.duration);!r&&this.config.displayDuration&&this.paused&&be.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),r&&be.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&be.setMarkers.call(this),be.updateSeekTooltip.call(this)},toggleMenuButton(r,e){is(this.elements.settings.buttons[r],!e)},updateSetting(r,e,t){const n=this.elements.settings.panels[r];let s=null,a=e;if(r==="captions")s=this.currentTrack;else{if(s=U.empty(t)?this[r]:t,U.empty(s)&&(s=this.config[r].default),!U.empty(this.options[r])&&!this.options[r].includes(s))return void this.debug.warn(`Unsupported value of '${s}' for ${r}`);if(!this.config[r].options.includes(s))return void this.debug.warn(`Disabled value of '${s}' for ${r}`)}if(U.element(a)||(a=n&&n.querySelector('[role="menu"]')),!U.element(a))return;this.elements.settings.buttons[r].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=be.getLabel.call(this,r,s);const o=a&&a.querySelector(`[value="${s}"]`);U.element(o)&&(o.checked=!0)},getLabel(r,e){switch(r){case"speed":return e===1?cn.get("normal",this.config):`${e}&times;`;case"quality":if(U.number(e)){const t=cn.get(`qualityLabel.${e}`,this.config);return t.length?t:`${e}p`}return n0(e);case"captions":return mt.getLabel.call(this);default:return null}},setQualityMenu(r){if(!U.element(this.elements.settings.panels.quality))return;const e="quality",t=this.elements.settings.panels.quality.querySelector('[role="menu"]');U.array(r)&&(this.options.quality=Kd(r).filter(a=>this.config.quality.options.includes(a)));const n=!U.empty(this.options.quality)&&this.options.quality.length>1;if(be.toggleMenuButton.call(this,e,n),gc(t),be.checkMenu.call(this),!n)return;const s=a=>{const o=cn.get(`qualityBadge.${a}`,this.config);return o.length?be.createBadge.call(this,o):null};this.options.quality.sort((a,o)=>{const l=this.config.quality.options;return l.indexOf(a)>l.indexOf(o)?1:-1}).forEach(a=>{be.createMenuItem.call(this,{value:a,list:t,type:e,title:be.getLabel.call(this,"quality",a),badge:s(a)})}),be.updateSetting.call(this,e,t)},setCaptionsMenu(){if(!U.element(this.elements.settings.panels.captions))return;const r="captions",e=this.elements.settings.panels.captions.querySelector('[role="menu"]'),t=mt.getTracks.call(this),n=!!t.length;if(be.toggleMenuButton.call(this,r,n),gc(e),be.checkMenu.call(this),!n)return;const s=t.map((a,o)=>({value:o,checked:this.captions.toggled&&this.currentTrack===o,title:mt.getLabel.call(this,a),badge:a.language&&be.createBadge.call(this,a.language.toUpperCase()),list:e,type:"language"}));s.unshift({value:-1,checked:!this.captions.toggled,title:cn.get("disabled",this.config),list:e,type:"language"}),s.forEach(be.createMenuItem.bind(this)),be.updateSetting.call(this,r,e)},setSpeedMenu(){if(!U.element(this.elements.settings.panels.speed))return;const r="speed",e=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(n=>n>=this.minimumSpeed&&n<=this.maximumSpeed);const t=!U.empty(this.options.speed)&&this.options.speed.length>1;be.toggleMenuButton.call(this,r,t),gc(e),be.checkMenu.call(this),t&&(this.options.speed.forEach(n=>{be.createMenuItem.call(this,{value:n,list:e,type:r,title:be.getLabel.call(this,"speed",n)})}),be.updateSetting.call(this,r,e))},checkMenu(){const{buttons:r}=this.elements.settings,e=!U.empty(r)&&Object.values(r).some(t=>!t.hidden);is(this.elements.settings.menu,!e)},focusFirstMenuItem(r,e=!1){if(this.elements.settings.popup.hidden)return;let t=r;U.element(t)||(t=Object.values(this.elements.settings.panels).find(s=>!s.hidden));const n=t.querySelector('[role^="menuitem"]');Cu.call(this,n,e)},toggleMenu(r){const{popup:e}=this.elements.settings,t=this.elements.buttons.settings;if(!U.element(e)||!U.element(t))return;const{hidden:n}=e;let s=n;if(U.boolean(r))s=r;else if(U.keyboardEvent(r)&&r.key==="Escape")s=!1;else if(U.event(r)){const a=U.function(r.composedPath)?r.composedPath()[0]:r.target,o=e.contains(a);if(o||!o&&r.target!==t&&s)return}t.setAttribute("aria-expanded",s),is(e,!s),vt(this.elements.container,this.config.classNames.menu.open,s),s&&U.keyboardEvent(r)?be.focusFirstMenuItem.call(this,null,!0):s||n||Cu.call(this,t,U.keyboardEvent(r))},getMenuSize(r){const e=r.cloneNode(!0);e.style.position="absolute",e.style.opacity=0,e.removeAttribute("hidden"),r.parentNode.appendChild(e);const t=e.scrollWidth,n=e.scrollHeight;return or(e),{width:t,height:n}},showMenuPanel(r="",e=!1){const t=this.elements.container.querySelector(`#plyr-settings-${this.id}-${r}`);if(!U.element(t))return;const n=t.parentNode,s=Array.from(n.children).find(a=>!a.hidden);if($t.transitions&&!$t.reducedMotion){n.style.width=`${s.scrollWidth}px`,n.style.height=`${s.scrollHeight}px`;const a=be.getMenuSize.call(this,t),o=l=>{l.target===n&&["width","height"].includes(l.propertyName)&&(n.style.width="",n.style.height="",Qc.call(this,n,Yd,o))};pt.call(this,n,Yd,o),n.style.width=`${a.width}px`,n.style.height=`${a.height}px`}is(s,!0),is(t,!1),be.focusFirstMenuItem.call(this,t,e)},setDownloadUrl(){const r=this.elements.buttons.download;U.element(r)&&r.setAttribute("href",this.download)},create(r){const{bindMenuItemShortcuts:e,createButton:t,createProgress:n,createRange:s,createTime:a,setQualityMenu:o,setSpeedMenu:l,showMenuPanel:u}=be;this.elements.controls=null,U.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(t.call(this,"play-large"));const h=Ye("div",Pi(this.config.selectors.controls.wrapper));this.elements.controls=h;const f={class:"plyr__controls__item"};return Kd(U.array(this.config.controls)?this.config.controls:[]).forEach(c=>{if(c==="restart"&&h.appendChild(t.call(this,"restart",f)),c==="rewind"&&h.appendChild(t.call(this,"rewind",f)),c==="play"&&h.appendChild(t.call(this,"play",f)),c==="fast-forward"&&h.appendChild(t.call(this,"fast-forward",f)),c==="progress"){const d=Ye("div",{class:`${f.class} plyr__progress__container`}),p=Ye("div",Pi(this.config.selectors.progress));if(p.appendChild(s.call(this,"seek",{id:`plyr-seek-${r.id}`})),p.appendChild(n.call(this,"buffer")),this.config.tooltips.seek){const g=Ye("span",{class:this.config.classNames.tooltip},"00:00");p.appendChild(g),this.elements.display.seekTooltip=g}this.elements.progress=p,d.appendChild(this.elements.progress),h.appendChild(d)}if(c==="current-time"&&h.appendChild(a.call(this,"currentTime",f)),c==="duration"&&h.appendChild(a.call(this,"duration",f)),c==="mute"||c==="volume"){let{volume:d}=this.elements;if(U.element(d)&&h.contains(d)||(d=Ye("div",Wt({},f,{class:`${f.class} plyr__volume`.trim()})),this.elements.volume=d,h.appendChild(d)),c==="mute"&&d.appendChild(t.call(this,"mute")),c==="volume"&&!un.isIos&&!un.isIPadOS){const p={max:1,step:.05,value:this.config.volume};d.appendChild(s.call(this,"volume",Wt(p,{id:`plyr-volume-${r.id}`})))}}if(c==="captions"&&h.appendChild(t.call(this,"captions",f)),c==="settings"&&!U.empty(this.config.settings)){const d=Ye("div",Wt({},f,{class:`${f.class} plyr__menu`.trim(),hidden:""}));d.appendChild(t.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${r.id}`,"aria-expanded":!1}));const p=Ye("div",{class:"plyr__menu__container",id:`plyr-settings-${r.id}`,hidden:""}),g=Ye("div"),v=Ye("div",{id:`plyr-settings-${r.id}-home`}),_=Ye("div",{role:"menu"});v.appendChild(_),g.appendChild(v),this.elements.settings.panels.home=v,this.config.settings.forEach(m=>{const y=Ye("button",Wt(Pi(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));e.call(this,y,m),pt.call(this,y,"click",()=>{u.call(this,m,!1)});const x=Ye("span",null,cn.get(m,this.config)),b=Ye("span",{class:this.config.classNames.menu.value});b.innerHTML=r[m],x.appendChild(b),y.appendChild(x),_.appendChild(y);const T=Ye("div",{id:`plyr-settings-${r.id}-${m}`,hidden:""}),E=Ye("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});E.appendChild(Ye("span",{"aria-hidden":!0},cn.get(m,this.config))),E.appendChild(Ye("span",{class:this.config.classNames.hidden},cn.get("menuBack",this.config))),pt.call(this,T,"keydown",M=>{M.key==="ArrowLeft"&&(M.preventDefault(),M.stopPropagation(),u.call(this,"home",!0))},!1),pt.call(this,E,"click",()=>{u.call(this,"home",!1)}),T.appendChild(E),T.appendChild(Ye("div",{role:"menu"})),g.appendChild(T),this.elements.settings.buttons[m]=y,this.elements.settings.panels[m]=T}),p.appendChild(g),d.appendChild(p),h.appendChild(d),this.elements.settings.popup=p,this.elements.settings.menu=d}if(c==="pip"&&$t.pip&&h.appendChild(t.call(this,"pip",f)),c==="airplay"&&$t.airplay&&h.appendChild(t.call(this,"airplay",f)),c==="download"){const d=Wt({},f,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(d.download="");const{download:p}=this.config.urls;!U.url(p)&&this.isEmbed&&Wt(d,{icon:`logo-${this.provider}`,label:this.provider}),h.appendChild(t.call(this,"download",d))}c==="fullscreen"&&h.appendChild(t.call(this,"fullscreen",f))}),this.isHTML5&&o.call(this,Nr.getQualityOptions.call(this)),l.call(this),h},inject(){if(this.config.loadSprite){const s=be.getIconUrl.call(this);s.cors&&i0(s.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let r=null;this.elements.controls=null;const e={id:this.id,seektime:this.config.seekTime,title:this.config.title};let t=!0;U.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,e)),this.config.controls||(this.config.controls=[]),U.element(this.config.controls)||U.string(this.config.controls)?r=this.config.controls:(r=be.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:mt.getLabel.call(this)}),t=!1);let n;if(t&&U.string(this.config.controls)&&(r=(s=>{let a=s;return Object.entries(e).forEach(([o,l])=>{a=ko(a,`{${o}}`,l)}),a})(r)),U.string(this.config.selectors.controls.container)&&(n=document.querySelector(this.config.selectors.controls.container)),U.element(n)||(n=this.elements.container),n[U.element(r)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",r),U.element(this.elements.controls)||be.findElements.call(this),!U.empty(this.elements.buttons)){const s=a=>{const o=this.config.classNames.controlPressed;a.setAttribute("aria-pressed","false"),Object.defineProperty(a,"pressed",{configurable:!0,enumerable:!0,get:()=>Nc(a,o),set(l=!1){vt(a,o,l),a.setAttribute("aria-pressed",l?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach(a=>{U.array(a)||U.nodeList(a)?Array.from(a).filter(Boolean).forEach(s):s(a)})}if(un.isEdge&&j_(n),this.config.tooltips.controls){const{classNames:s,selectors:a}=this.config,o=`${a.controls.wrapper} ${a.labels} .${s.hidden}`,l=Jo.call(this,o);Array.from(l).forEach(u=>{vt(u,this.config.classNames.hidden,!1),vt(u,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch{}},setMarkers(){var r,e;if(!this.duration||this.elements.markers)return;const t=(r=this.config.markers)===null||r===void 0||(e=r.points)===null||e===void 0?void 0:e.filter(({time:u})=>u>0&&u<this.duration);if(t==null||!t.length)return;const n=document.createDocumentFragment(),s=document.createDocumentFragment();let a=null;const o=`${this.config.classNames.tooltip}--visible`,l=u=>vt(a,o,u);t.forEach(u=>{const h=Ye("span",{class:this.config.classNames.marker},""),f=u.time/this.duration*100+"%";a&&(h.addEventListener("mouseenter",()=>{u.label||(a.style.left=f,a.innerHTML=u.label,l(!0))}),h.addEventListener("mouseleave",()=>{l(!1)})),h.addEventListener("click",()=>{this.currentTime=u.time}),h.style.left=f,s.appendChild(h)}),n.appendChild(s),this.config.tooltips.seek||(a=Ye("span",{class:this.config.classNames.tooltip},""),n.appendChild(a)),this.elements.markers={points:s,tip:a},this.elements.progress.appendChild(n)}};function s0(r,e=!0){let t=r;if(e){const n=document.createElement("a");n.href=t,t=n.href}try{return new URL(t)}catch{return null}}function a0(r){const e=new URLSearchParams;return U.object(r)&&Object.entries(r).forEach(([t,n])=>{e.set(t,n)}),e}const mt={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!$t.textTracks)return void(U.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&be.setCaptionsMenu.call(this));if(U.element(this.elements.captions)||(this.elements.captions=Ye("div",Pi(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),ob(this.elements.captions,this.elements.wrapper)),un.isIE&&window.URL){const n=this.media.querySelectorAll("track");Array.from(n).forEach(s=>{const a=s.getAttribute("src"),o=s0(a);o!==null&&o.hostname!==window.location.href.hostname&&["http:","https:"].includes(o.protocol)&&dl(a,"blob").then(l=>{s.setAttribute("src",window.URL.createObjectURL(l))}).catch(()=>{or(s)})})}const r=Kd((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(n=>n.split("-")[0]));let e=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();e==="auto"&&([e]=r);let t=this.storage.get("captions");if(U.boolean(t)||({active:t}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:t,language:e,languages:r}),this.isHTML5){const n=this.config.captions.update?"addtrack removetrack":"removetrack";pt.call(this,this.media.textTracks,n,mt.update.bind(this))}setTimeout(mt.update.bind(this),0)},update(){const r=mt.getTracks.call(this,!0),{active:e,language:t,meta:n,currentTrackNode:s}=this.captions,a=!!r.find(o=>o.language===t);this.isHTML5&&this.isVideo&&r.filter(o=>!n.get(o)).forEach(o=>{this.debug.log("Track added",o),n.set(o,{default:o.mode==="showing"}),o.mode==="showing"&&(o.mode="hidden"),pt.call(this,o,"cuechange",()=>mt.updateCues.call(this))}),(a&&this.language!==t||!r.includes(s))&&(mt.setLanguage.call(this,t),mt.toggle.call(this,e&&a)),this.elements&&vt(this.elements.container,this.config.classNames.captions.enabled,!U.empty(r)),U.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&be.setCaptionsMenu.call(this)},toggle(r,e=!0){if(!this.supported.ui)return;const{toggled:t}=this.captions,n=this.config.classNames.captions.active,s=U.nullOrUndefined(r)?!t:r;if(s!==t){if(e||(this.captions.active=s,this.storage.set({captions:s})),!this.language&&s&&!e){const a=mt.getTracks.call(this),o=mt.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=o.language,void mt.set.call(this,a.indexOf(o))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=s),vt(this.elements.container,n,s),this.captions.toggled=s,be.updateSetting.call(this,"captions"),Ke.call(this,this.media,s?"captionsenabled":"captionsdisabled")}setTimeout(()=>{s&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(r,e=!0){const t=mt.getTracks.call(this);if(r!==-1)if(U.number(r))if(r in t){if(this.captions.currentTrack!==r){this.captions.currentTrack=r;const n=t[r],{language:s}=n||{};this.captions.currentTrackNode=n,be.updateSetting.call(this,"captions"),e||(this.captions.language=s,this.storage.set({language:s})),this.isVimeo&&this.embed.enableTextTrack(s),Ke.call(this,this.media,"languagechange")}mt.toggle.call(this,!0,e),this.isHTML5&&this.isVideo&&mt.updateCues.call(this)}else this.debug.warn("Track not found",r);else this.debug.warn("Invalid caption argument",r);else mt.toggle.call(this,!1,e)},setLanguage(r,e=!0){if(!U.string(r))return void this.debug.warn("Invalid language argument",r);const t=r.toLowerCase();this.captions.language=t;const n=mt.getTracks.call(this),s=mt.findTrack.call(this,[t]);mt.set.call(this,n.indexOf(s),e)},getTracks(r=!1){return Array.from((this.media||{}).textTracks||[]).filter(e=>!this.isHTML5||r||this.captions.meta.has(e)).filter(e=>["captions","subtitles"].includes(e.kind))},findTrack(r,e=!1){const t=mt.getTracks.call(this),n=o=>Number((this.captions.meta.get(o)||{}).default),s=Array.from(t).sort((o,l)=>n(l)-n(o));let a;return r.every(o=>(a=s.find(l=>l.language===o),!a)),a||(e?s[0]:void 0)},getCurrentTrack(){return mt.getTracks.call(this)[this.currentTrack]},getLabel(r){let e=r;return!U.track(e)&&$t.textTracks&&this.captions.toggled&&(e=mt.getCurrentTrack.call(this)),U.track(e)?U.empty(e.label)?U.empty(e.language)?cn.get("enabled",this.config):r.language.toUpperCase():e.label:cn.get("disabled",this.config)},updateCues(r){if(!this.supported.ui)return;if(!U.element(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!U.nullOrUndefined(r)&&!Array.isArray(r))return void this.debug.warn("updateCues: Invalid input",r);let e=r;if(!e){const n=mt.getCurrentTrack.call(this);e=Array.from((n||{}).activeCues||[]).map(s=>s.getCueAsHTML()).map(vb)}const t=e.map(n=>n.trim()).join(`
`);if(t!==this.elements.captions.innerHTML){gc(this.elements.captions);const n=Ye("span",Pi(this.config.selectors.caption));n.innerHTML=t,this.elements.captions.appendChild(n),Ke.call(this,this.media,"cuechange")}}},o0={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},Du={active:"picture-in-picture",inactive:"inline"},Dr={html5:"html5",youtube:"youtube",vimeo:"vimeo"},Pu={audio:"audio",video:"video"};function bb(r){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(r)?Dr.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(r)?Dr.vimeo:null}const Ru=()=>{};class Sb{constructor(e=!1){this.enabled=window.console&&e,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):Ru}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):Ru}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):Ru}}class Ei{constructor(e){Te(this,"onChange",()=>{if(!this.supported)return;const t=this.player.elements.buttons.fullscreen;U.element(t)&&(t.pressed=this.active);const n=this.target===this.player.media?this.target:this.player.elements.container;Ke.call(this.player,n,this.active?"enterfullscreen":"exitfullscreen",!0)}),Te(this,"toggleFallback",(t=!1)=>{if(t?this.scrollPosition={x:window.scrollX??0,y:window.scrollY??0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=t?"hidden":"",vt(this.target,this.player.config.classNames.fullscreen.fallback,t),un.isIos){let n=document.head.querySelector('meta[name="viewport"]');const s="viewport-fit=cover";n||(n=document.createElement("meta"),n.setAttribute("name","viewport"));const a=U.string(n.content)&&n.content.includes(s);t?(this.cleanupViewport=!a,a||(n.content+=`,${s}`)):this.cleanupViewport&&(n.content=n.content.split(",").filter(o=>o.trim()!==s).join(","))}this.onChange()}),Te(this,"trapFocus",t=>{if(un.isIos||un.isIPadOS||!this.active||t.key!=="Tab")return;const n=document.activeElement,s=Jo.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[a]=s,o=s[s.length-1];n!==o||t.shiftKey?n===a&&t.shiftKey&&(o.focus(),t.preventDefault()):(a.focus(),t.preventDefault())}),Te(this,"update",()=>{if(this.supported){let t;t=this.forceFallback?"Fallback (forced)":Ei.nativeSupported?"Native":"Fallback",this.player.debug.log(`${t} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");vt(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.supported)}),Te(this,"enter",()=>{this.supported&&(un.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!Ei.nativeSupported||this.forceFallback?this.toggleFallback(!0):this.prefix?U.empty(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))}),Te(this,"exit",()=>{if(this.supported)if(un.isIos&&this.player.config.fullscreen.iosNative)this.player.isVimeo?this.player.embed.exitFullscreen():this.target.webkitEnterFullscreen(),Oi(this.player.play());else if(!Ei.nativeSupported||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!U.empty(this.prefix)){const t=this.prefix==="moz"?"Cancel":"Exit";document[`${this.prefix}${t}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}),Te(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=e,this.prefix=Ei.prefix,this.property=Ei.property,this.scrollPosition={x:0,y:0},this.forceFallback=e.config.fullscreen.fallback==="force",this.player.elements.fullscreen=e.config.fullscreen.container&&lb(this.player.elements.container,e.config.fullscreen.container),pt.call(this.player,document,this.prefix==="ms"?"MSFullscreenChange":`${this.prefix}fullscreenchange`,()=>{this.onChange()}),pt.call(this.player,this.player.elements.container,"dblclick",t=>{U.element(this.player.elements.controls)&&this.player.elements.controls.contains(t.target)||this.player.listeners.proxy(t,this.toggle,"fullscreen")}),pt.call(this,this.player.elements.container,"keydown",t=>this.trapFocus(t)),this.update()}static get nativeSupported(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get useNative(){return Ei.nativeSupported&&!this.forceFallback}static get prefix(){if(U.function(document.exitFullscreen))return"";let e="";return["webkit","moz","ms"].some(t=>!(!U.function(document[`${t}ExitFullscreen`])&&!U.function(document[`${t}CancelFullScreen`]))&&(e=t,!0)),e}static get property(){return this.prefix==="moz"?"FullScreen":"Fullscreen"}get supported(){return[this.player.config.fullscreen.enabled,this.player.isVideo,Ei.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||Ei.nativeSupported||!un.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}get active(){if(!this.supported)return!1;if(!Ei.nativeSupported||this.forceFallback)return Nc(this.target,this.player.config.classNames.fullscreen.fallback);const e=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return e&&e.shadowRoot?e===this.target.getRootNode().host:e===this.target}get target(){return un.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen??this.player.elements.container}}function _c(r,e=1){return new Promise((t,n)=>{const s=new Image,a=()=>{delete s.onload,delete s.onerror,(s.naturalWidth>=e?t:n)(s)};Object.assign(s,{onload:a,onerror:a,src:r})})}const Tt={addStyleHook(){vt(this.elements.container,this.config.selectors.container.replace(".",""),!0),vt(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(r=!1){r&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void Tt.toggleNativeControls.call(this,!0);U.element(this.elements.controls)||(be.inject.call(this),this.listeners.controls()),Tt.toggleNativeControls.call(this),this.isHTML5&&mt.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,be.updateVolume.call(this),be.timeUpdate.call(this),be.durationUpdate.call(this),Tt.checkPlaying.call(this),vt(this.elements.container,this.config.classNames.pip.supported,$t.pip&&this.isHTML5&&this.isVideo),vt(this.elements.container,this.config.classNames.airplay.supported,$t.airplay&&this.isHTML5),vt(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{Ke.call(this,this.media,"ready")},0),Tt.setTitle.call(this),this.poster&&Tt.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&be.durationUpdate.call(this),this.config.mediaMetadata&&be.setMediaMetadata.call(this)},setTitle(){let r=cn.get("play",this.config);if(U.string(this.config.title)&&!U.empty(this.config.title)&&(r+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach(e=>{e.setAttribute("aria-label",r)}),this.isEmbed){const e=Qt.call(this,"iframe");if(!U.element(e))return;const t=U.empty(this.config.title)?"video":this.config.title,n=cn.get("frameTitle",this.config);e.setAttribute("title",n.replace("{title}",t))}},togglePoster(r){vt(this.elements.container,this.config.classNames.posterEnabled,r)},setPoster(r,e=!0){return e&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",r),this.elements.poster.removeAttribute("hidden"),db.call(this).then(()=>_c(r)).catch(t=>{throw r===this.poster&&Tt.togglePoster.call(this,!1),t}).then(()=>{if(r!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${r}')`,backgroundSize:""}),Tt.togglePoster.call(this,!0),r)))},checkPlaying(r){vt(this.elements.container,this.config.classNames.playing,this.playing),vt(this.elements.container,this.config.classNames.paused,this.paused),vt(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(e=>{Object.assign(e,{pressed:this.playing}),e.setAttribute("aria-label",cn.get(this.playing?"pause":"play",this.config))}),U.event(r)&&r.type==="timeupdate"||Tt.toggleControls.call(this)},checkLoading(r){this.loading=["stalled","waiting"].includes(r.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{vt(this.elements.container,this.config.classNames.loading,this.loading),Tt.toggleControls.call(this)},this.loading?250:0)},toggleControls(r){const{controls:e}=this.elements;if(e&&this.config.hideControls){const t=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(!!(r||this.loading||this.paused||e.pressed||e.hover||t))}},migrateStyles(){Object.values({...this.media.style}).filter(r=>!U.empty(r)&&U.string(r)&&r.startsWith("--plyr")).forEach(r=>{this.elements.container.style.setProperty(r,this.media.style.getPropertyValue(r)),this.media.style.removeProperty(r)}),U.empty(this.media.style)&&this.media.removeAttribute("style")}};class wb{constructor(e){Te(this,"firstTouch",()=>{const{player:t}=this,{elements:n}=t;t.touch=!0,vt(n.container,t.config.classNames.isTouch,!0)}),Te(this,"global",(t=!0)=>{const{player:n}=this;n.config.keyboard.global&&Qo.call(n,window,"keydown keyup",this.handleKey,t,!1),Qo.call(n,document.body,"click",this.toggleMenu,t),jh.call(n,document.body,"touchstart",this.firstTouch)}),Te(this,"container",()=>{const{player:t}=this,{config:n,elements:s,timers:a}=t;!n.keyboard.global&&n.keyboard.focused&&pt.call(t,s.container,"keydown keyup",this.handleKey,!1),pt.call(t,s.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",u=>{const{controls:h}=s;h&&u.type==="enterfullscreen"&&(h.pressed=!1,h.hover=!1);let f=0;["touchstart","touchmove","mousemove"].includes(u.type)&&(Tt.toggleControls.call(t,!0),f=t.touch?3e3:2e3),clearTimeout(a.controls),a.controls=setTimeout(()=>Tt.toggleControls.call(t,!1),f)});const o=()=>{if(!t.isVimeo||t.config.vimeo.premium)return;const u=s.wrapper,{active:h}=t.fullscreen,[f,c]=Kh.call(t),d=Q_(`aspect-ratio: ${f} / ${c}`);if(!h)return void(d?(u.style.width=null,u.style.height=null):(u.style.maxWidth=null,u.style.margin=null));const[p,g]=hb(),v=p/g>f/c;d?(u.style.width=v?"auto":"100%",u.style.height=v?"100%":"auto"):(u.style.maxWidth=v?g/c*f+"px":null,u.style.margin=v?"0 auto":null)},l=()=>{clearTimeout(a.resized),a.resized=setTimeout(o,50)};pt.call(t,s.container,"enterfullscreen exitfullscreen",u=>{const{target:h}=t.fullscreen;h===s.container&&(!t.isEmbed&&U.empty(t.config.ratio)||(o(),(u.type==="enterfullscreen"?pt:Qc).call(t,window,"resize",l)))})}),Te(this,"media",()=>{const{player:t}=this,{elements:n}=t;if(pt.call(t,t.media,"timeupdate seeking seeked",a=>be.timeUpdate.call(t,a)),pt.call(t,t.media,"durationchange loadeddata loadedmetadata",a=>be.durationUpdate.call(t,a)),pt.call(t,t.media,"ended",()=>{t.isHTML5&&t.isVideo&&t.config.resetOnEnd&&(t.restart(),t.pause())}),pt.call(t,t.media,"progress playing seeking seeked",a=>be.updateProgress.call(t,a)),pt.call(t,t.media,"volumechange",a=>be.updateVolume.call(t,a)),pt.call(t,t.media,"playing play pause ended emptied timeupdate",a=>Tt.checkPlaying.call(t,a)),pt.call(t,t.media,"waiting canplay seeked playing",a=>Tt.checkLoading.call(t,a)),t.supported.ui&&t.config.clickToPlay&&!t.isAudio){const a=Qt.call(t,`.${t.config.classNames.video}`);if(!U.element(a))return;pt.call(t,n.container,"click",o=>{([n.container,a].includes(o.target)||a.contains(o.target))&&(t.touch&&t.config.hideControls||(t.ended?(this.proxy(o,t.restart,"restart"),this.proxy(o,()=>{Oi(t.play())},"play")):this.proxy(o,()=>{Oi(t.togglePlay())},"play")))})}t.supported.ui&&t.config.disableContextMenu&&pt.call(t,n.wrapper,"contextmenu",a=>{a.preventDefault()},!1),pt.call(t,t.media,"volumechange",()=>{t.storage.set({volume:t.volume,muted:t.muted})}),pt.call(t,t.media,"ratechange",()=>{be.updateSetting.call(t,"speed"),t.storage.set({speed:t.speed})}),pt.call(t,t.media,"qualitychange",a=>{be.updateSetting.call(t,"quality",null,a.detail.quality)}),pt.call(t,t.media,"ready qualitychange",()=>{be.setDownloadUrl.call(t)});const s=t.config.events.concat(["keyup","keydown"]).join(" ");pt.call(t,t.media,s,a=>{let{detail:o={}}=a;a.type==="error"&&(o=t.media.error),Ke.call(t,n.container,a.type,!0,o)})}),Te(this,"proxy",(t,n,s)=>{const{player:a}=this,o=a.config.listeners[s];let l=!0;U.function(o)&&(l=o.call(a,t)),l!==!1&&U.function(n)&&n.call(a,t)}),Te(this,"bind",(t,n,s,a,o=!0)=>{const{player:l}=this,u=l.config.listeners[a],h=U.function(u);pt.call(l,t,n,f=>this.proxy(f,s,a),o&&!h)}),Te(this,"controls",()=>{const{player:t}=this,{elements:n}=t,s=un.isIE?"change":"input";if(n.buttons.play&&Array.from(n.buttons.play).forEach(a=>{this.bind(a,"click",()=>{Oi(t.togglePlay())},"play")}),this.bind(n.buttons.restart,"click",t.restart,"restart"),this.bind(n.buttons.rewind,"click",()=>{t.lastSeekTime=Date.now(),t.rewind()},"rewind"),this.bind(n.buttons.fastForward,"click",()=>{t.lastSeekTime=Date.now(),t.forward()},"fastForward"),this.bind(n.buttons.mute,"click",()=>{t.muted=!t.muted},"mute"),this.bind(n.buttons.captions,"click",()=>t.toggleCaptions()),this.bind(n.buttons.download,"click",()=>{Ke.call(t,t.media,"download")},"download"),this.bind(n.buttons.fullscreen,"click",()=>{t.fullscreen.toggle()},"fullscreen"),this.bind(n.buttons.pip,"click",()=>{t.pip="toggle"},"pip"),this.bind(n.buttons.airplay,"click",t.airplay,"airplay"),this.bind(n.buttons.settings,"click",a=>{a.stopPropagation(),a.preventDefault(),be.toggleMenu.call(t,a)},null,!1),this.bind(n.buttons.settings,"keyup",a=>{[" ","Enter"].includes(a.key)&&(a.key!=="Enter"?(a.preventDefault(),a.stopPropagation(),be.toggleMenu.call(t,a)):be.focusFirstMenuItem.call(t,null,!0))},null,!1),this.bind(n.settings.menu,"keydown",a=>{a.key==="Escape"&&be.toggleMenu.call(t,a)}),this.bind(n.inputs.seek,"mousedown mousemove",a=>{const o=n.progress.getBoundingClientRect(),l=100/o.width*(a.pageX-o.left);a.currentTarget.setAttribute("seek-value",l)}),this.bind(n.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",a=>{const o=a.currentTarget,l="play-on-seeked";if(U.keyboardEvent(a)&&!["ArrowLeft","ArrowRight"].includes(a.key))return;t.lastSeekTime=Date.now();const u=o.hasAttribute(l),h=["mouseup","touchend","keyup"].includes(a.type);u&&h?(o.removeAttribute(l),Oi(t.play())):!h&&t.playing&&(o.setAttribute(l,""),t.pause())}),un.isIos){const a=Jo.call(t,'input[type="range"]');Array.from(a).forEach(o=>this.bind(o,s,l=>j_(l.target)))}this.bind(n.inputs.seek,s,a=>{const o=a.currentTarget;let l=o.getAttribute("seek-value");U.empty(l)&&(l=o.value),o.removeAttribute("seek-value"),t.currentTime=l/o.max*t.duration},"seek"),this.bind(n.progress,"mouseenter mouseleave mousemove",a=>be.updateSeekTooltip.call(t,a)),this.bind(n.progress,"mousemove touchmove",a=>{const{previewThumbnails:o}=t;o&&o.loaded&&o.startMove(a)}),this.bind(n.progress,"mouseleave touchend click",()=>{const{previewThumbnails:a}=t;a&&a.loaded&&a.endMove(!1,!0)}),this.bind(n.progress,"mousedown touchstart",a=>{const{previewThumbnails:o}=t;o&&o.loaded&&o.startScrubbing(a)}),this.bind(n.progress,"mouseup touchend",a=>{const{previewThumbnails:o}=t;o&&o.loaded&&o.endScrubbing(a)}),un.isWebKit&&Array.from(Jo.call(t,'input[type="range"]')).forEach(a=>{this.bind(a,"input",o=>be.updateRangeFill.call(t,o.target))}),t.config.toggleInvert&&!U.element(n.display.duration)&&this.bind(n.display.currentTime,"click",()=>{t.currentTime!==0&&(t.config.invertTime=!t.config.invertTime,be.timeUpdate.call(t))}),this.bind(n.inputs.volume,s,a=>{t.volume=a.target.value},"volume"),this.bind(n.controls,"mouseenter mouseleave",a=>{n.controls.hover=!t.touch&&a.type==="mouseenter"}),n.fullscreen&&Array.from(n.fullscreen.children).filter(a=>!a.contains(n.container)).forEach(a=>{this.bind(a,"mouseenter mouseleave",o=>{n.controls&&(n.controls.hover=!t.touch&&o.type==="mouseenter")})}),this.bind(n.controls,"mousedown mouseup touchstart touchend touchcancel",a=>{n.controls.pressed=["mousedown","touchstart"].includes(a.type)}),this.bind(n.controls,"focusin",()=>{const{config:a,timers:o}=t;vt(n.controls,a.classNames.noTransition,!0),Tt.toggleControls.call(t,!0),setTimeout(()=>{vt(n.controls,a.classNames.noTransition,!1)},0);const l=this.touch?3e3:4e3;clearTimeout(o.controls),o.controls=setTimeout(()=>Tt.toggleControls.call(t,!1),l)}),this.bind(n.inputs.volume,"wheel",a=>{const o=a.webkitDirectionInvertedFromDevice,[l,u]=[a.deltaX,-a.deltaY].map(c=>o?-c:c),h=Math.sign(Math.abs(l)>Math.abs(u)?l:u);t.increaseVolume(h/50);const{volume:f}=t.media;(h===1&&f<1||h===-1&&f>0)&&a.preventDefault()},"volume",!1)}),this.player=e,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(e){const{player:t}=this,{elements:n}=t,{key:s,type:a,altKey:o,ctrlKey:l,metaKey:u,shiftKey:h}=e,f=a==="keydown",c=f&&s===this.lastKey;if(!(o||l||u||h)&&s){if(f){const p=document.activeElement;if(U.element(p)){const{editable:g}=t.config.selectors,{seek:v}=n.inputs;if(p!==v&&Ms(p,g)||e.key===" "&&Ms(p,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(s)&&(e.preventDefault(),e.stopPropagation()),s){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":c||(d=parseInt(s,10),t.currentTime=t.duration/10*d);break;case" ":case"k":c||Oi(t.togglePlay());break;case"ArrowUp":t.increaseVolume(.1);break;case"ArrowDown":t.decreaseVolume(.1);break;case"m":c||(t.muted=!t.muted);break;case"ArrowRight":t.forward();break;case"ArrowLeft":t.rewind();break;case"f":t.fullscreen.toggle();break;case"c":c||t.toggleCaptions();break;case"l":t.loop=!t.loop}s==="Escape"&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=s}else this.lastKey=null;var d}}toggleMenu(e){be.toggleMenu.call(this.player,e)}}function Eb(r,e){return r(e={exports:{}},e.exports),e.exports}var Tb=Eb(function(r,e){r.exports=function(){var t=function(){},n={},s={},a={};function o(d,p){d=d.push?d:[d];var g,v,_,m=[],y=d.length,x=y;for(g=function(b,T){T.length&&m.push(b),--x||p(m)};y--;)v=d[y],(_=s[v])?g(v,_):(a[v]=a[v]||[]).push(g)}function l(d,p){if(d){var g=a[d];if(s[d]=p,g)for(;g.length;)g[0](d,p),g.splice(0,1)}}function u(d,p){d.call&&(d={success:d}),p.length?(d.error||t)(p):(d.success||t)(d)}function h(d,p,g,v){var _,m,y=document,x=g.async,b=(g.numRetries||0)+1,T=g.before||t,E=d.replace(/[\?|#].*$/,""),M=d.replace(/^(css|img)!/,"");v=v||0,/(^css!|\.css$)/.test(E)?((m=y.createElement("link")).rel="stylesheet",m.href=M,(_="hideFocus"in m)&&m.relList&&(_=0,m.rel="preload",m.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(E)?(m=y.createElement("img")).src=M:((m=y.createElement("script")).src=d,m.async=x===void 0||x),m.onload=m.onerror=m.onbeforeload=function(A){var S=A.type[0];if(_)try{m.sheet.cssText.length||(S="e")}catch(w){w.code!=18&&(S="e")}if(S=="e"){if((v+=1)<b)return h(d,p,g,v)}else if(m.rel=="preload"&&m.as=="style")return m.rel="stylesheet";p(d,S,A.defaultPrevented)},T(d,m)!==!1&&y.head.appendChild(m)}function f(d,p,g){var v,_,m=(d=d.push?d:[d]).length,y=m,x=[];for(v=function(b,T,E){if(T=="e"&&x.push(b),T=="b"){if(!E)return;x.push(b)}--m||p(x)},_=0;_<y;_++)h(d[_],v,g)}function c(d,p,g){var v,_;if(p&&p.trim&&(v=p),_=(v?g:p)||{},v){if(v in n)throw"LoadJS";n[v]=!0}function m(y,x){f(d,function(b){u(_,b),y&&u({success:y,error:x},b),l(v,b)},_)}if(_.returnPromise)return new Promise(m);m()}return c.ready=function(d,p){return o(d,function(g){u(p,g)}),c},c.done=function(d){l(d,[])},c.reset=function(){n={},s={},a={}},c.isDefined=function(d){return d in n},c}()});function Zh(r){return new Promise((e,t)=>{Tb(r,{success:e,error:t})})}function Mb(r){return U.empty(r)?null:U.number(Number(r))?r:r.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:r}function Ab(r){const e=r.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return e&&e.length===5?e[4]:null}function io(r){r&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===r&&(this.media.paused=!r,Ke.call(this,this.media,r?"play":"pause"))}const Jd={setup(){const r=this;vt(r.elements.wrapper,r.config.classNames.embed,!0),r.options.speed=r.config.speed.options,Va.call(r),U.object(window.Vimeo)?Jd.ready.call(r):Zh(r.config.urls.vimeo.sdk).then(()=>{Jd.ready.call(r)}).catch(e=>{r.debug.warn("Vimeo SDK (player.js) failed to load",e)})},ready(){const r=this,e=r.config.vimeo,{premium:t,referrerPolicy:n,...s}=e;let a=r.media.getAttribute("src"),o="";U.empty(a)?(a=r.media.getAttribute(r.config.attributes.embed.id),o=r.media.getAttribute(r.config.attributes.embed.hash)):o=Ab(a);const l=o?{h:o}:{};t&&Object.assign(s,{controls:!1,sidedock:!1});const u=a0({loop:r.config.loop.active,autoplay:r.autoplay,muted:r.muted,gesture:"media",playsinline:r.config.playsinline,...l,...s}),h=Mb(a),f=Ye("iframe"),c=Zd(r.config.urls.vimeo.iframe,h,u);if(f.setAttribute("src",c),f.setAttribute("allowfullscreen",""),f.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),U.empty(n)||f.setAttribute("referrerPolicy",n),t||!e.customControls)f.setAttribute("data-poster",r.poster),r.media=Oc(f,r.media);else{const y=Ye("div",{class:r.config.classNames.embedContainer,"data-poster":r.poster});y.appendChild(f),r.media=Oc(y,r.media)}e.customControls||dl(Zd(r.config.urls.vimeo.api,c)).then(y=>{!U.empty(y)&&y.thumbnail_url&&Tt.setPoster.call(r,y.thumbnail_url).catch(()=>{})}),r.embed=new window.Vimeo.Player(f,{autopause:r.config.autopause,muted:r.muted}),r.media.paused=!0,r.media.currentTime=0,r.supported.ui&&r.embed.disableTextTrack(),r.media.play=()=>(io.call(r,!0),r.embed.play()),r.media.pause=()=>(io.call(r,!1),r.embed.pause()),r.media.stop=()=>{r.pause(),r.currentTime=0};let{currentTime:d}=r.media;Object.defineProperty(r.media,"currentTime",{get:()=>d,set(y){const{embed:x,media:b,paused:T,volume:E}=r,M=T&&!x.hasPlayed;b.seeking=!0,Ke.call(r,b,"seeking"),Promise.resolve(M&&x.setVolume(0)).then(()=>x.setCurrentTime(y)).then(()=>M&&x.pause()).then(()=>M&&x.setVolume(E)).catch(()=>{})}});let p=r.config.speed.selected;Object.defineProperty(r.media,"playbackRate",{get:()=>p,set(y){r.embed.setPlaybackRate(y).then(()=>{p=y,Ke.call(r,r.media,"ratechange")}).catch(()=>{r.options.speed=[1]})}});let{volume:g}=r.config;Object.defineProperty(r.media,"volume",{get:()=>g,set(y){r.embed.setVolume(y).then(()=>{g=y,Ke.call(r,r.media,"volumechange")})}});let{muted:v}=r.config;Object.defineProperty(r.media,"muted",{get:()=>v,set(y){const x=!!U.boolean(y)&&y;r.embed.setMuted(!!x||r.config.muted).then(()=>{v=x,Ke.call(r,r.media,"volumechange")})}});let _,{loop:m}=r.config;Object.defineProperty(r.media,"loop",{get:()=>m,set(y){const x=U.boolean(y)?y:r.config.loop.active;r.embed.setLoop(x).then(()=>{m=x})}}),r.embed.getVideoUrl().then(y=>{_=y,be.setDownloadUrl.call(r)}).catch(y=>{this.debug.warn(y)}),Object.defineProperty(r.media,"currentSrc",{get:()=>_}),Object.defineProperty(r.media,"ended",{get:()=>r.currentTime===r.duration}),Promise.all([r.embed.getVideoWidth(),r.embed.getVideoHeight()]).then(y=>{const[x,b]=y;r.embed.ratio=t0(x,b),Va.call(this)}),r.embed.setAutopause(r.config.autopause).then(y=>{r.config.autopause=y}),r.embed.getVideoTitle().then(y=>{r.config.title=y,Tt.setTitle.call(this)}),r.embed.getCurrentTime().then(y=>{d=y,Ke.call(r,r.media,"timeupdate")}),r.embed.getDuration().then(y=>{r.media.duration=y,Ke.call(r,r.media,"durationchange")}),r.embed.getTextTracks().then(y=>{r.media.textTracks=y,mt.setup.call(r)}),r.embed.on("cuechange",({cues:y=[]})=>{const x=y.map(b=>_b(b.text));mt.updateCues.call(r,x)}),r.embed.on("loaded",()=>{r.embed.getPaused().then(y=>{io.call(r,!y),y||Ke.call(r,r.media,"playing")}),U.element(r.embed.element)&&r.supported.ui&&r.embed.element.setAttribute("tabindex",-1)}),r.embed.on("bufferstart",()=>{Ke.call(r,r.media,"waiting")}),r.embed.on("bufferend",()=>{Ke.call(r,r.media,"playing")}),r.embed.on("play",()=>{io.call(r,!0),Ke.call(r,r.media,"playing")}),r.embed.on("pause",()=>{io.call(r,!1)}),r.embed.on("timeupdate",y=>{r.media.seeking=!1,d=y.seconds,Ke.call(r,r.media,"timeupdate")}),r.embed.on("progress",y=>{r.media.buffered=y.percent,Ke.call(r,r.media,"progress"),parseInt(y.percent,10)===1&&Ke.call(r,r.media,"canplaythrough"),r.embed.getDuration().then(x=>{x!==r.media.duration&&(r.media.duration=x,Ke.call(r,r.media,"durationchange"))})}),r.embed.on("seeked",()=>{r.media.seeking=!1,Ke.call(r,r.media,"seeked")}),r.embed.on("ended",()=>{r.media.paused=!0,Ke.call(r,r.media,"ended")}),r.embed.on("error",y=>{r.media.error=y,Ke.call(r,r.media,"error")}),e.customControls&&setTimeout(()=>Tt.build.call(r),0)}};function Cb(r){return U.empty(r)?null:r.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:r}function ro(r){r&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===r&&(this.media.paused=!r,Ke.call(this,this.media,r?"play":"pause"))}function Db(r){return r.noCookie?"https://www.youtube-nocookie.com":window.location.protocol==="http:"?"http://www.youtube.com":void 0}const vc={setup(){if(vt(this.elements.wrapper,this.config.classNames.embed,!0),U.object(window.YT)&&U.function(window.YT.Player))vc.ready.call(this);else{const r=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{U.function(r)&&r(),vc.ready.call(this)},Zh(this.config.urls.youtube.sdk).catch(e=>{this.debug.warn("YouTube API failed to load",e)})}},getTitle(r){dl(Zd(this.config.urls.youtube.api,r)).then(e=>{if(U.object(e)){const{title:t,height:n,width:s}=e;this.config.title=t,Tt.setTitle.call(this),this.embed.ratio=t0(s,n)}Va.call(this)}).catch(()=>{Va.call(this)})},ready(){const r=this,e=r.config.youtube,t=r.media&&r.media.getAttribute("id");if(!U.empty(t)&&t.startsWith("youtube-"))return;let n=r.media.getAttribute("src");U.empty(n)&&(n=r.media.getAttribute(this.config.attributes.embed.id));const s=Cb(n),a=Ye("div",{id:fb(r.provider),"data-poster":e.customControls?r.poster:void 0});if(r.media=Oc(a,r.media),e.customControls){const o=l=>`https://i.ytimg.com/vi/${s}/${l}default.jpg`;_c(o("maxres"),121).catch(()=>_c(o("sd"),121)).catch(()=>_c(o("hq"))).then(l=>Tt.setPoster.call(r,l.src)).then(l=>{l.includes("maxres")||(r.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}r.embed=new window.YT.Player(r.media,{videoId:s,host:Db(e),playerVars:Wt({},{autoplay:r.config.autoplay?1:0,hl:r.config.hl,controls:r.supported.ui&&e.customControls?0:1,disablekb:1,playsinline:r.config.playsinline&&!r.config.fullscreen.iosNative?1:0,cc_load_policy:r.captions.active?1:0,cc_lang_pref:r.config.captions.language,widget_referrer:window?window.location.href:null},e),events:{onError(o){if(!r.media.error){const l=o.data,u={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[l]||"An unknown error occurred";r.media.error={code:l,message:u},Ke.call(r,r.media,"error")}},onPlaybackRateChange(o){const l=o.target;r.media.playbackRate=l.getPlaybackRate(),Ke.call(r,r.media,"ratechange")},onReady(o){if(U.function(r.media.play))return;const l=o.target;vc.getTitle.call(r,s),r.media.play=()=>{ro.call(r,!0),l.playVideo()},r.media.pause=()=>{ro.call(r,!1),l.pauseVideo()},r.media.stop=()=>{l.stopVideo()},r.media.duration=l.getDuration(),r.media.paused=!0,r.media.currentTime=0,Object.defineProperty(r.media,"currentTime",{get:()=>Number(l.getCurrentTime()),set(c){r.paused&&!r.embed.hasPlayed&&r.embed.mute(),r.media.seeking=!0,Ke.call(r,r.media,"seeking"),l.seekTo(c)}}),Object.defineProperty(r.media,"playbackRate",{get:()=>l.getPlaybackRate(),set(c){l.setPlaybackRate(c)}});let{volume:u}=r.config;Object.defineProperty(r.media,"volume",{get:()=>u,set(c){u=c,l.setVolume(100*u),Ke.call(r,r.media,"volumechange")}});let{muted:h}=r.config;Object.defineProperty(r.media,"muted",{get:()=>h,set(c){const d=U.boolean(c)?c:h;h=d,l[d?"mute":"unMute"](),l.setVolume(100*u),Ke.call(r,r.media,"volumechange")}}),Object.defineProperty(r.media,"currentSrc",{get:()=>l.getVideoUrl()}),Object.defineProperty(r.media,"ended",{get:()=>r.currentTime===r.duration});const f=l.getAvailablePlaybackRates();r.options.speed=f.filter(c=>r.config.speed.options.includes(c)),r.supported.ui&&e.customControls&&r.media.setAttribute("tabindex",-1),Ke.call(r,r.media,"timeupdate"),Ke.call(r,r.media,"durationchange"),clearInterval(r.timers.buffering),r.timers.buffering=setInterval(()=>{r.media.buffered=l.getVideoLoadedFraction(),(r.media.lastBuffered===null||r.media.lastBuffered<r.media.buffered)&&Ke.call(r,r.media,"progress"),r.media.lastBuffered=r.media.buffered,r.media.buffered===1&&(clearInterval(r.timers.buffering),Ke.call(r,r.media,"canplaythrough"))},200),e.customControls&&setTimeout(()=>Tt.build.call(r),50)},onStateChange(o){const l=o.target;switch(clearInterval(r.timers.playing),r.media.seeking&&[1,2].includes(o.data)&&(r.media.seeking=!1,Ke.call(r,r.media,"seeked")),o.data){case-1:Ke.call(r,r.media,"timeupdate"),r.media.buffered=l.getVideoLoadedFraction(),Ke.call(r,r.media,"progress");break;case 0:ro.call(r,!1),r.media.loop?(l.stopVideo(),l.playVideo()):Ke.call(r,r.media,"ended");break;case 1:e.customControls&&!r.config.autoplay&&r.media.paused&&!r.embed.hasPlayed?r.media.pause():(ro.call(r,!0),Ke.call(r,r.media,"playing"),r.timers.playing=setInterval(()=>{Ke.call(r,r.media,"timeupdate")},50),r.media.duration!==l.getDuration()&&(r.media.duration=l.getDuration(),Ke.call(r,r.media,"durationchange")));break;case 2:r.muted||r.embed.unMute(),ro.call(r,!1);break;case 3:Ke.call(r,r.media,"waiting")}Ke.call(r,r.elements.container,"statechange",!1,{code:o.data})}}})}},l0={setup(){this.media?(vt(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),vt(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&vt(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=Ye("div",{class:this.config.classNames.video}),Z_(this.media,this.elements.wrapper),this.elements.poster=Ye("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?Nr.setup.call(this):this.isYouTube?vc.setup.call(this):this.isVimeo&&Jd.setup.call(this)):this.debug.warn("No media element found!")}};class Pb{constructor(e){Te(this,"load",()=>{this.enabled&&(U.object(window.google)&&U.object(window.google.ima)?this.ready():Zh(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))}))}),Te(this,"ready",()=>{var t;this.enabled||((t=this).manager&&t.manager.destroy(),t.elements.displayContainer&&t.elements.displayContainer.destroy(),t.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),Te(this,"setupIMA",()=>{this.elements.container=Ye("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,t=>this.onAdsManagerLoaded(t),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,t=>this.onAdError(t),!1),this.requestAds()}),Te(this,"requestAds",()=>{const{container:t}=this.player.elements;try{const n=new google.ima.AdsRequest;n.adTagUrl=this.tagUrl,n.linearAdSlotWidth=t.offsetWidth,n.linearAdSlotHeight=t.offsetHeight,n.nonLinearAdSlotWidth=t.offsetWidth,n.nonLinearAdSlotHeight=t.offsetHeight,n.forceNonLinearFullSlot=!1,n.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(n)}catch(n){this.onAdError(n)}}),Te(this,"pollCountdown",(t=!1)=>{if(!t)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(()=>{const n=eu(Math.max(this.manager.getRemainingTime(),0)),s=`${cn.get("advertisement",this.player.config)} - ${n}`;this.elements.container.setAttribute("data-badge-text",s)},100)}),Te(this,"onAdsManagerLoaded",t=>{if(!this.enabled)return;const n=new google.ima.AdsRenderingSettings;n.restoreCustomPlaybackStateOnAdBreakComplete=!0,n.enablePreloading=!0,this.manager=t.getAdsManager(this.player,n),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,s=>this.onAdError(s)),Object.keys(google.ima.AdEvent.Type).forEach(s=>{this.manager.addEventListener(google.ima.AdEvent.Type[s],a=>this.onAdEvent(a))}),this.trigger("loaded")}),Te(this,"addCuePoints",()=>{U.empty(this.cuePoints)||this.cuePoints.forEach(t=>{if(t!==0&&t!==-1&&t<this.player.duration){const n=this.player.elements.progress;if(U.element(n)){const s=100/this.player.duration*t,a=Ye("span",{class:this.player.config.classNames.cues});a.style.left=`${s.toString()}%`,n.appendChild(a)}}})}),Te(this,"onAdEvent",t=>{const{container:n}=this.player.elements,s=t.getAd(),a=t.getAdData();switch((o=>{Ke.call(this.player,this.player.media,`ads${o.replace(/_/g,"").toLowerCase()}`)})(t.type),t.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),s.isLinear()||(s.width=n.offsetWidth,s.height=n.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:a.adError&&this.player.debug.warn(`Non-fatal ad error: ${a.adError.getMessage()}`)}}),Te(this,"onAdError",t=>{this.cancel(),this.player.debug.warn("Ads error",t)}),Te(this,"listeners",()=>{const{container:t}=this.player.elements;let n;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{n=this.player.currentTime}),this.player.on("seeked",()=>{const s=this.player.currentTime;U.empty(this.cuePoints)||this.cuePoints.forEach((a,o)=>{n<a&&a<s&&(this.manager.discardAdBreak(),this.cuePoints.splice(o,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL)})}),Te(this,"play",()=>{const{container:t}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(n){this.onAdError(n)}}).catch(()=>{})}),Te(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,Oi(this.player.media.play())}),Te(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),Te(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),Te(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(t=>{this.on("loaded",t),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),Te(this,"trigger",(t,...n)=>{const s=this.events[t];U.array(s)&&s.forEach(a=>{U.function(a)&&a.apply(this,n)})}),Te(this,"on",(t,n)=>(U.array(this.events[t])||(this.events[t]=[]),this.events[t].push(n),this)),Te(this,"startSafetyTimer",(t,n)=>{this.player.debug.log(`Safety timer invoked from: ${n}`),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},t)}),Te(this,"clearSafetyTimer",t=>{U.nullOrUndefined(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${t}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=e,this.config=e.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((t,n)=>{this.on("loaded",t),this.on("error",n)}),this.load()}get enabled(){const{config:e}=this;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!U.empty(e.publisherId)||U.url(e.tagUrl))}get tagUrl(){const{config:e}=this;return U.url(e.tagUrl)?e.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${a0({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId})}`}}function c0(r=0,e=0,t=255){return Math.min(Math.max(r,e),t)}const Rb=r=>{const e=[];return r.split(/\r\n\r\n|\n\n|\r\r/).forEach(t=>{const n={};t.split(/\r\n|\n|\r/).forEach(s=>{if(U.number(n.startTime)){if(!U.empty(s.trim())&&U.empty(n.text)){const a=s.trim().split("#xywh=");[n.text]=a,a[1]&&([n.x,n.y,n.w,n.h]=a[1].split(","))}}else{const a=s.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);a&&(n.startTime=60*Number(a[1]||0)*60+60*Number(a[2])+Number(a[3])+ +`0.${a[4]}`,n.endTime=60*Number(a[6]||0)*60+60*Number(a[7])+Number(a[8])+ +`0.${a[9]}`)}}),n.text&&e.push(n)}),e},ip=(r,e)=>{const t={};return r>e.width/e.height?(t.width=e.width,t.height=1/r*e.width):(t.height=e.height,t.width=r*e.height),t};class Qd{constructor(e){Te(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.listeners(),this.loaded=!0)})}),Te(this,"getThumbnails",()=>new Promise(t=>{const{src:n}=this.player.config.previewThumbnails;if(U.empty(n))throw new Error("Missing previewThumbnails.src config attribute");const s=()=>{this.thumbnails.sort((a,o)=>a.height-o.height),this.player.debug.log("Preview thumbnails",this.thumbnails),t()};if(U.function(n))n(a=>{this.thumbnails=a,s()});else{const a=(U.string(n)?[n]:n).map(o=>this.getThumbnail(o));Promise.all(a).then(s)}})),Te(this,"getThumbnail",t=>new Promise(n=>{dl(t).then(s=>{const a={frames:Rb(s),height:null,urlPrefix:""};a.frames[0].text.startsWith("/")||a.frames[0].text.startsWith("http://")||a.frames[0].text.startsWith("https://")||(a.urlPrefix=t.substring(0,t.lastIndexOf("/")+1));const o=new Image;o.onload=()=>{a.height=o.naturalHeight,a.width=o.naturalWidth,this.thumbnails.push(a),n()},o.src=a.urlPrefix+a.frames[0].text})})),Te(this,"startMove",t=>{if(this.loaded&&U.event(t)&&["touchmove","mousemove"].includes(t.type)&&this.player.media.duration){if(t.type==="touchmove")this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var n,s;const a=this.player.elements.progress.getBoundingClientRect(),o=100/a.width*(t.pageX-a.left);this.seekTime=this.player.media.duration*(o/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=t.pageX,this.elements.thumb.time.innerText=eu(this.seekTime);const l=(n=this.player.config.markers)===null||n===void 0||(s=n.points)===null||s===void 0?void 0:s.find(({time:u})=>u===Math.round(this.seekTime));l&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${l.label}<br>`)}this.showImageAtCurrentTime()}}),Te(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),Te(this,"startScrubbing",t=>{(U.nullOrUndefined(t.button)||t.button===!1||t.button===0)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),Te(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):jh.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),Te(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),Te(this,"render",()=>{this.elements.thumb.container=Ye("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=Ye("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const t=Ye("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=Ye("span",{},"00:00"),t.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(t),U.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=Ye("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),Te(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),Te(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const t=this.thumbnails[0].frames.findIndex(a=>this.seekTime>=a.startTime&&this.seekTime<=a.endTime),n=t>=0;let s=0;this.mouseDown||this.toggleThumbContainer(n),n&&(this.thumbnails.forEach((a,o)=>{this.loadedImages.includes(a.frames[t].text)&&(s=o)}),t!==this.showingThumb&&(this.showingThumb=t,this.loadImage(s)))}),Te(this,"loadImage",(t=0)=>{const n=this.showingThumb,s=this.thumbnails[t],{urlPrefix:a}=s,o=s.frames[n],l=s.frames[n].text,u=a+l;if(this.currentImageElement&&this.currentImageElement.dataset.filename===l)this.showImage(this.currentImageElement,o,t,n,l,!1),this.currentImageElement.dataset.index=n,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const h=new Image;h.src=u,h.dataset.index=n,h.dataset.filename=l,this.showingThumbFilename=l,this.player.debug.log(`Loading image: ${u}`),h.onload=()=>this.showImage(h,o,t,n,l,!0),this.loadingImage=h,this.removeOldImages(h)}}),Te(this,"showImage",(t,n,s,a,o,l=!0)=>{this.player.debug.log(`Showing thumb: ${o}. num: ${a}. qual: ${s}. newimg: ${l}`),this.setImageSizeAndOffset(t,n),l&&(this.currentImageContainer.appendChild(t),this.currentImageElement=t,this.loadedImages.includes(o)||this.loadedImages.push(o)),this.preloadNearby(a,!0).then(this.preloadNearby(a,!1)).then(this.getHigherQuality(s,t,n,o))}),Te(this,"removeOldImages",t=>{Array.from(this.currentImageContainer.children).forEach(n=>{if(n.tagName.toLowerCase()!=="img")return;const s=this.usingSprites?500:1e3;if(n.dataset.index!==t.dataset.index&&!n.dataset.deleting){n.dataset.deleting=!0;const{currentImageContainer:a}=this;setTimeout(()=>{a.removeChild(n),this.player.debug.log(`Removing thumb: ${n.dataset.filename}`)},s)}})}),Te(this,"preloadNearby",(t,n=!0)=>new Promise(s=>{setTimeout(()=>{const a=this.thumbnails[0].frames[t].text;if(this.showingThumbFilename===a){let o;o=n?this.thumbnails[0].frames.slice(t):this.thumbnails[0].frames.slice(0,t).reverse();let l=!1;o.forEach(u=>{const h=u.text;if(h!==a&&!this.loadedImages.includes(h)){l=!0,this.player.debug.log(`Preloading thumb filename: ${h}`);const{urlPrefix:f}=this.thumbnails[0],c=f+h,d=new Image;d.src=c,d.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${h}`),this.loadedImages.includes(h)||this.loadedImages.push(h),s()}}}),l||s()}},300)})),Te(this,"getHigherQuality",(t,n,s,a)=>{if(t<this.thumbnails.length-1){let o=n.naturalHeight;this.usingSprites&&(o=s.h),o<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===a&&(this.player.debug.log(`Showing higher quality thumb for: ${a}`),this.loadImage(t+1))},300)}}),Te(this,"toggleThumbContainer",(t=!1,n=!1)=>{const s=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(s,t),!t&&n&&(this.showingThumb=null,this.showingThumbFilename=null)}),Te(this,"toggleScrubbingContainer",(t=!1)=>{const n=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(n,t),t||(this.showingThumb=null,this.showingThumbFilename=null)}),Te(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),Te(this,"setThumbContainerSizeAndPos",()=>{const{imageContainer:t}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(t.clientHeight>20&&t.clientWidth<20){const n=Math.floor(t.clientHeight*this.thumbAspectRatio);t.style.width=`${n}px`}else if(t.clientHeight<20&&t.clientWidth>20){const n=Math.floor(t.clientWidth/this.thumbAspectRatio);t.style.height=`${n}px`}}else{const n=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);t.style.height=`${this.thumbContainerHeight}px`,t.style.width=`${n}px`}this.setThumbContainerPos()}),Te(this,"setThumbContainerPos",()=>{const t=this.player.elements.progress.getBoundingClientRect(),n=this.player.elements.container.getBoundingClientRect(),{container:s}=this.elements.thumb,a=n.left-t.left+10,o=n.right-t.left-s.clientWidth-10,l=this.mousePosX-t.left-s.clientWidth/2,u=c0(l,a,o);s.style.left=`${u}px`,s.style.setProperty("--preview-arrow-offset",l-u+"px")}),Te(this,"setScrubbingContainerSize",()=>{const{width:t,height:n}=ip(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${t}px`,this.elements.scrubbing.container.style.height=`${n}px`}),Te(this,"setImageSizeAndOffset",(t,n)=>{if(!this.usingSprites)return;const s=this.thumbContainerHeight/n.h;t.style.height=t.naturalHeight*s+"px",t.style.width=t.naturalWidth*s+"px",t.style.left=`-${n.x*s}px`,t.style.top=`-${n.y*s}px`}),this.player=e,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:e}=ip(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return e}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}const eh={insertElements(r,e){U.string(e)?Qf(r,this.media,{src:e}):U.array(e)&&e.forEach(t=>{Qf(r,this.media,t)})},change(r){K_(r,"sources.length")?(Nr.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],or(this.media),this.media=null,U.element(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:e,type:t}=r,[{provider:n=Dr.html5,src:s}]=e,a=n==="html5"?t:"div",o=n==="html5"?{}:{src:s};Object.assign(this,{provider:n,type:t,supported:$t.check(t,n,this.config.playsinline),media:Ye(a,o)}),this.elements.container.appendChild(this.media),U.boolean(r.autoplay)&&(this.config.autoplay=r.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),U.empty(r.poster)||(this.poster=r.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),Tt.addStyleHook.call(this),this.isHTML5&&eh.insertElements.call(this,"source",e),this.config.title=r.title,l0.setup.call(this),this.isHTML5&&Object.keys(r).includes("tracks")&&eh.insertElements.call(this,"track",r.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Tt.build.call(this),this.isHTML5&&this.media.load(),U.empty(r.previewThumbnails)||(Object.assign(this.config.previewThumbnails,r.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Qd(this))),this.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};class tl{constructor(e,t){if(Te(this,"play",()=>U.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>Oi(this.media.play())),this.media.play()):null),Te(this,"pause",()=>this.playing&&U.function(this.media.pause)?this.media.pause():null),Te(this,"togglePlay",l=>(U.boolean(l)?l:!this.playing)?this.play():this.pause()),Te(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):U.function(this.media.stop)&&this.media.stop()}),Te(this,"restart",()=>{this.currentTime=0}),Te(this,"rewind",l=>{this.currentTime-=U.number(l)?l:this.config.seekTime}),Te(this,"forward",l=>{this.currentTime+=U.number(l)?l:this.config.seekTime}),Te(this,"increaseVolume",l=>{const u=this.media.muted?0:this.volume;this.volume=u+(U.number(l)?l:0)}),Te(this,"decreaseVolume",l=>{this.increaseVolume(-l)}),Te(this,"airplay",()=>{$t.airplay&&this.media.webkitShowPlaybackTargetPicker()}),Te(this,"toggleControls",l=>{if(this.supported.ui&&!this.isAudio){const u=Nc(this.elements.container,this.config.classNames.hideControls),h=l===void 0?void 0:!l,f=vt(this.elements.container,this.config.classNames.hideControls,h);if(f&&U.array(this.config.controls)&&this.config.controls.includes("settings")&&!U.empty(this.config.settings)&&be.toggleMenu.call(this,!1),f!==u){const c=f?"controlshidden":"controlsshown";Ke.call(this,this.media,c)}return!f}return!1}),Te(this,"on",(l,u)=>{pt.call(this,this.elements.container,l,u)}),Te(this,"once",(l,u)=>{jh.call(this,this.elements.container,l,u)}),Te(this,"off",(l,u)=>{Qc(this.elements.container,l,u)}),Te(this,"destroy",(l,u=!1)=>{if(!this.ready)return;const h=()=>{document.body.style.overflow="",this.embed=null,u?(Object.keys(this.elements).length&&(or(this.elements.buttons.play),or(this.elements.captions),or(this.elements.controls),or(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),U.function(l)&&l()):(ub.call(this),Nr.cancelRequests.call(this),Oc(this.elements.original,this.elements.container),Ke.call(this,this.elements.original,"destroyed",!0),U.function(l)&&l.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(Tt.toggleNativeControls.call(this,!0),h()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),this.embed!==null&&U.function(this.embed.destroy)&&this.embed.destroy(),h()):this.isVimeo&&(this.embed!==null&&this.embed.unload().then(h),setTimeout(h,200))}),Te(this,"supports",l=>$t.mime.call(this,l)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=$t.touch,this.media=e,U.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||U.nodeList(this.media)||U.array(this.media))&&(this.media=this.media[0]),this.config=Wt({},o0,tl.defaults,t||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch{return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new Sb(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",$t),U.nullOrUndefined(this.media)||!U.element(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!$t.check().api)return void this.debug.error("Setup failed: no support");const n=this.media.cloneNode(!0);n.autoplay=!1,this.elements.original=n;const s=this.media.tagName.toLowerCase();let a=null,o=null;switch(s){case"div":if(a=this.media.querySelector("iframe"),U.element(a)){if(o=s0(a.getAttribute("src")),this.provider=bb(o.toString()),this.elements.container=this.media,this.media=a,this.elements.container.className="",o.search.length){const l=["1","true"];l.includes(o.searchParams.get("autoplay"))&&(this.config.autoplay=!0),l.includes(o.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=l.includes(o.searchParams.get("playsinline")),this.config.youtube.hl=o.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(U.empty(this.provider)||!Object.values(Dr).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=Pu.video;break;case"video":case"audio":this.type=s,this.provider=Dr.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=$t.check(this.type,this.provider),this.supported.api?(this.eventListeners=[],this.listeners=new wb(this),this.storage=new el(this),this.media.plyr=this,U.element(this.elements.container)||(this.elements.container=Ye("div"),Z_(this.media,this.elements.container)),Tt.migrateStyles.call(this),Tt.addStyleHook.call(this),l0.setup.call(this),this.config.debug&&pt.call(this,this.elements.container,this.config.events.join(" "),l=>{this.debug.log(`event: ${l.type}`)}),this.fullscreen=new Ei(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Tt.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new Pb(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>Oi(this.play())),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Qd(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===Dr.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===Dr.youtube}get isVimeo(){return this.provider===Dr.vimeo}get isVideo(){return this.type===Pu.video}get isAudio(){return this.type===Pu.audio}get playing(){return!!(this.ready&&!this.paused&&!this.ended)}get paused(){return!!this.media.paused}get stopped(){return!!(this.paused&&this.currentTime===0)}get ended(){return!!this.media.ended}set currentTime(e){if(!this.duration)return;const t=U.number(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:e}=this.media;return U.number(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}get seeking(){return!!this.media.seeking}get duration(){const e=parseFloat(this.config.duration),t=(this.media||{}).duration,n=U.number(t)&&t!==1/0?t:0;return e||n}set volume(e){let t=e;U.string(t)&&(t=Number(t)),U.number(t)||(t=this.storage.get("volume")),U.number(t)||({volume:t}=this.config),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!U.empty(e)&&this.muted&&t>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(e){let t=e;U.boolean(t)||(t=this.storage.get("muted")),U.boolean(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t}get muted(){return!!this.media.muted}get hasAudio(){return!this.isHTML5||!!this.isAudio||!!this.media.mozHasAudio||!!this.media.webkitAudioDecodedByteCount||!!(this.media.audioTracks&&this.media.audioTracks.length)}set speed(e){let t=null;U.number(e)&&(t=e),U.number(t)||(t=this.storage.get("speed")),U.number(t)||(t=this.config.speed.selected);const{minimumSpeed:n,maximumSpeed:s}=this;t=c0(t,n,s),this.config.speed.selected=t,setTimeout(()=>{this.media&&(this.media.playbackRate=t)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(e){const t=this.config.quality,n=this.options.quality;if(!n.length)return;let s=[!U.empty(e)&&Number(e),this.storage.get("quality"),t.selected,t.default].find(U.number),a=!0;if(!n.includes(s)){const o=J_(n,s);this.debug.warn(`Unsupported quality option: ${s}, using ${o} instead`),s=o,a=!1}t.selected=s,this.media.quality=s,a&&this.storage.set({quality:s})}get quality(){return this.media.quality}set loop(e){const t=U.boolean(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t}get loop(){return!!this.media.loop}set source(e){eh.change.call(this,e)}get source(){return this.media.currentSrc}get download(){const{download:e}=this.config.urls;return U.url(e)?e:this.source}set download(e){U.url(e)&&(this.config.urls.download=e,be.setDownloadUrl.call(this))}set poster(e){this.isVideo?Tt.setPoster.call(this,e,!1).catch(()=>{}):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const e=Uc(Kh.call(this));return U.array(e)?e.join(":"):e}set ratio(e){this.isVideo?U.string(e)&&e0(e)?(this.config.ratio=Uc(e),Va.call(this)):this.debug.error(`Invalid aspect ratio specified (${e})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(e){this.config.autoplay=U.boolean(e)?e:this.config.autoplay}get autoplay(){return!!this.config.autoplay}toggleCaptions(e){mt.toggle.call(this,e,!1)}set currentTrack(e){mt.set.call(this,e,!1),mt.setup.call(this)}get currentTrack(){const{toggled:e,currentTrack:t}=this.captions;return e?t:-1}set language(e){mt.setLanguage.call(this,e,!1)}get language(){return(mt.getCurrentTrack.call(this)||{}).language}set pip(e){if(!$t.pip)return;const t=U.boolean(e)?e:!this.pip;U.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?Du.active:Du.inactive),U.function(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}get pip(){return $t.pip?U.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===Du.active:null}setPreviewThumbnails(e){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,e),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Qd(this))}static supported(e,t){return $t.check(e,t)}static loadSprite(e,t){return i0(e,t)}static setup(e,t={}){let n=null;return U.string(e)?n=Array.from(document.querySelectorAll(e)):U.nodeList(e)?n=Array.from(e):U.array(e)&&(n=e.filter(U.element)),U.empty(n)?null:n.map(s=>new tl(s,t))}}tl.defaults=ab(o0);const Lb=new tl("#player");we.registerPlugin($e);$e.clearScrollMemory();$e.refresh();class Ib{constructor(e){this.container=e,this.videoButton=this.container.querySelector(".e-about-cta"),this.videoPoster=this.container.querySelector(".e-about-main"),this.init()}init(){we.to(".main.ab",{opacity:1,duration:.5}),this.initSplitting(),this.displayVideo()}initSplitting(){const e=[...this.container.querySelectorAll("[split-text]")],t=Xh({target:e,by:"lines"});this.wordsC=this.container.querySelectorAll(".word"),this.wordsC.forEach(n=>{let s=document.createElement("span");s.classList.add("char-wrap"),n.parentNode.insertBefore(s,n),s.appendChild(n)}),this.words=t.map(n=>n.words),we.set([this.words,"[n-show]"],{yPercent:120}),this.showText()}showText(){[...document.querySelectorAll(".word"),...document.querySelectorAll("[n-show]")].forEach(n=>{we.to(n,{yPercent:0,scrollTrigger:{trigger:n,invalidateOnRefresh:!0,start:"top 98%",duration:2,ease:"expo.out"}})});let t=document.querySelector(".about-end-quote-wrapper").querySelectorAll(".word");we.from(t,{filter:"blur(80px)",autoAlpha:0,stagger:{amount:6},scrollTrigger:{trigger:document.querySelector(".about-end-quote-wrapper")}})}displayVideo(){this.videoTl=we.timeline({paused:!0}),this.videoTl.to(this.videoPoster.querySelectorAll(".word"),{yPercent:120,duration:.6,stagger:{amount:.1,from:"end"}}).to(this.videoPoster.querySelector("[n-show]"),{yPercent:120,duration:.6},"<").fromTo(this.videoPoster,{clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)"},{clipPath:"polygon(0% 0%, 100% 0%, 100% 0%, 0% 0%)",duration:.6,onComplete:()=>{this.videoPoster.querySelector("video").pause()}},"<0.4"),this.videoButton.addEventListener("click",()=>{this.videoTl.play(),Lb.play()})}}class Fb{constructor(e){this.container=e,this.products=[...this.container.querySelectorAll(".merch-collection-item")],this.addEventListeners()}addEventListeners(){this.products.forEach(e=>{let t=we.timeline({paused:!0});t.to(e.querySelector(".merch-visual-item:nth-child(1)"),{opacity:0,duration:.3}),t.to(e.querySelector(".merch-visual-item:nth-child(2)"),{opacity:1,duration:.3},"<0.1"),e.addEventListener("mouseenter",()=>{t.play()}),e.addEventListener("mouseleave",()=>{t.reverse()})})}createTimelines(){}}function rp(r){return r!==null&&typeof r=="object"&&"constructor"in r&&r.constructor===Object}function Jh(r,e){r===void 0&&(r={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof r[t]>"u"?r[t]=e[t]:rp(e[t])&&rp(r[t])&&Object.keys(e[t]).length>0&&Jh(r[t],e[t])})}const u0={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function gn(){const r=typeof document<"u"?document:{};return Jh(r,u0),r}const Ob={document:u0,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(r){return typeof setTimeout>"u"?(r(),null):setTimeout(r,0)},cancelAnimationFrame(r){typeof setTimeout>"u"||clearTimeout(r)}};function Ht(){const r=typeof window<"u"?window:{};return Jh(r,Ob),r}function Mr(r){return r===void 0&&(r=""),r.trim().split(" ").filter(e=>!!e.trim())}function Nb(r){const e=r;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function $s(r,e){return e===void 0&&(e=0),setTimeout(r,e)}function pi(){return Date.now()}function Ub(r){const e=Ht();let t;return e.getComputedStyle&&(t=e.getComputedStyle(r,null)),!t&&r.currentStyle&&(t=r.currentStyle),t||(t=r.style),t}function th(r,e){e===void 0&&(e="x");const t=Ht();let n,s,a;const o=Ub(r);return t.WebKitCSSMatrix?(s=o.transform||o.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(l=>l.replace(",",".")).join(", ")),a=new t.WebKitCSSMatrix(s==="none"?"":s)):(a=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=a.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?s=a.m41:n.length===16?s=parseFloat(n[12]):s=parseFloat(n[4])),e==="y"&&(t.WebKitCSSMatrix?s=a.m42:n.length===16?s=parseFloat(n[13]):s=parseFloat(n[5])),s||0}function xo(r){return typeof r=="object"&&r!==null&&r.constructor&&Object.prototype.toString.call(r).slice(8,-1)==="Object"}function kb(r){return typeof window<"u"&&typeof window.HTMLElement<"u"?r instanceof HTMLElement:r&&(r.nodeType===1||r.nodeType===11)}function Qn(){const r=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const n=t<0||arguments.length<=t?void 0:arguments[t];if(n!=null&&!kb(n)){const s=Object.keys(Object(n)).filter(a=>e.indexOf(a)<0);for(let a=0,o=s.length;a<o;a+=1){const l=s[a],u=Object.getOwnPropertyDescriptor(n,l);u!==void 0&&u.enumerable&&(xo(r[l])&&xo(n[l])?n[l].__swiper__?r[l]=n[l]:Qn(r[l],n[l]):!xo(r[l])&&xo(n[l])?(r[l]={},n[l].__swiper__?r[l]=n[l]:Qn(r[l],n[l])):r[l]=n[l])}}}return r}function bo(r,e,t){r.style.setProperty(e,t)}function d0(r){let{swiper:e,targetPosition:t,side:n}=r;const s=Ht(),a=-e.translate;let o=null,l;const u=e.params.speed;e.wrapperEl.style.scrollSnapType="none",s.cancelAnimationFrame(e.cssModeFrameID);const h=t>a?"next":"prev",f=(d,p)=>h==="next"&&d>=p||h==="prev"&&d<=p,c=()=>{l=new Date().getTime(),o===null&&(o=l);const d=Math.max(Math.min((l-o)/u,1),0),p=.5-Math.cos(d*Math.PI)/2;let g=a+p*(t-a);if(f(g,t)&&(g=t),e.wrapperEl.scrollTo({[n]:g}),f(g,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[n]:g})}),s.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=s.requestAnimationFrame(c)};c()}function Ys(r){return r.querySelector(".swiper-slide-transform")||r.shadowRoot&&r.shadowRoot.querySelector(".swiper-slide-transform")||r}function pn(r,e){return e===void 0&&(e=""),[...r.children].filter(t=>t.matches(e))}function kc(r){try{console.warn(r);return}catch{}}function ri(r,e){e===void 0&&(e=[]);const t=document.createElement(r);return t.classList.add(...Array.isArray(e)?e:Mr(e)),t}function Bc(r){const e=Ht(),t=gn(),n=r.getBoundingClientRect(),s=t.body,a=r.clientTop||s.clientTop||0,o=r.clientLeft||s.clientLeft||0,l=r===e?e.scrollY:r.scrollTop,u=r===e?e.scrollX:r.scrollLeft;return{top:n.top+l-a,left:n.left+u-o}}function Bb(r,e){const t=[];for(;r.previousElementSibling;){const n=r.previousElementSibling;e?n.matches(e)&&t.push(n):t.push(n),r=n}return t}function zb(r,e){const t=[];for(;r.nextElementSibling;){const n=r.nextElementSibling;e?n.matches(e)&&t.push(n):t.push(n),r=n}return t}function Ur(r,e){return Ht().getComputedStyle(r,null).getPropertyValue(e)}function nl(r){let e=r,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function Us(r,e){const t=[];let n=r.parentElement;for(;n;)e?n.matches(e)&&t.push(n):t.push(n),n=n.parentElement;return t}function Bo(r,e){function t(n){n.target===r&&(e.call(r,n),r.removeEventListener("transitionend",t))}e&&r.addEventListener("transitionend",t)}function nh(r,e,t){const n=Ht();return r[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(n.getComputedStyle(r,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(n.getComputedStyle(r,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function at(r){return(Array.isArray(r)?r:[r]).filter(e=>!!e)}let Lu;function Hb(){const r=Ht(),e=gn();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in r||r.DocumentTouch&&e instanceof r.DocumentTouch)}}function h0(){return Lu||(Lu=Hb()),Lu}let Iu;function Vb(r){let{userAgent:e}=r===void 0?{}:r;const t=h0(),n=Ht(),s=n.navigator.platform,a=e||n.navigator.userAgent,o={ios:!1,android:!1},l=n.screen.width,u=n.screen.height,h=a.match(/(Android);?[\s\/]+([\d.]+)?/);let f=a.match(/(iPad).*OS\s([\d_]+)/);const c=a.match(/(iPod)(.*OS\s([\d_]+))?/),d=!f&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p=s==="Win32";let g=s==="MacIntel";const v=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!f&&g&&t.touch&&v.indexOf(`${l}x${u}`)>=0&&(f=a.match(/(Version)\/([\d.]+)/),f||(f=[0,1,"13_0_0"]),g=!1),h&&!p&&(o.os="android",o.android=!0),(f||d||c)&&(o.os="ios",o.ios=!0),o}function f0(r){return r===void 0&&(r={}),Iu||(Iu=Vb(r)),Iu}let Fu;function Gb(){const r=Ht(),e=f0();let t=!1;function n(){const l=r.navigator.userAgent.toLowerCase();return l.indexOf("safari")>=0&&l.indexOf("chrome")<0&&l.indexOf("android")<0}if(n()){const l=String(r.navigator.userAgent);if(l.includes("Version/")){const[u,h]=l.split("Version/")[1].split(" ")[0].split(".").map(f=>Number(f));t=u<16||u===16&&h<2}}const s=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(r.navigator.userAgent),a=n(),o=a||s&&e.ios;return{isSafari:t||a,needPerspectiveFix:t,need3dFix:o,isWebView:s}}function Wb(){return Fu||(Fu=Gb()),Fu}function $b(r){let{swiper:e,on:t,emit:n}=r;const s=Ht();let a=null,o=null;const l=()=>{!e||e.destroyed||!e.initialized||(n("beforeResize"),n("resize"))},u=()=>{!e||e.destroyed||!e.initialized||(a=new ResizeObserver(c=>{o=s.requestAnimationFrame(()=>{const{width:d,height:p}=e;let g=d,v=p;c.forEach(_=>{let{contentBoxSize:m,contentRect:y,target:x}=_;x&&x!==e.el||(g=y?y.width:(m[0]||m).inlineSize,v=y?y.height:(m[0]||m).blockSize)}),(g!==d||v!==p)&&l()})}),a.observe(e.el))},h=()=>{o&&s.cancelAnimationFrame(o),a&&a.unobserve&&e.el&&(a.unobserve(e.el),a=null)},f=()=>{!e||e.destroyed||!e.initialized||n("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof s.ResizeObserver<"u"){u();return}s.addEventListener("resize",l),s.addEventListener("orientationchange",f)}),t("destroy",()=>{h(),s.removeEventListener("resize",l),s.removeEventListener("orientationchange",f)})}function Xb(r){let{swiper:e,extendParams:t,on:n,emit:s}=r;const a=[],o=Ht(),l=function(f,c){c===void 0&&(c={});const d=o.MutationObserver||o.WebkitMutationObserver,p=new d(g=>{if(e.__preventObserver__)return;if(g.length===1){s("observerUpdate",g[0]);return}const v=function(){s("observerUpdate",g[0])};o.requestAnimationFrame?o.requestAnimationFrame(v):o.setTimeout(v,0)});p.observe(f,{attributes:typeof c.attributes>"u"?!0:c.attributes,childList:typeof c.childList>"u"?!0:c.childList,characterData:typeof c.characterData>"u"?!0:c.characterData}),a.push(p)},u=()=>{if(e.params.observer){if(e.params.observeParents){const f=Us(e.hostEl);for(let c=0;c<f.length;c+=1)l(f[c])}l(e.hostEl,{childList:e.params.observeSlideChildren}),l(e.wrapperEl,{attributes:!1})}},h=()=>{a.forEach(f=>{f.disconnect()}),a.splice(0,a.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",u),n("destroy",h)}var qb={on(r,e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;const s=t?"unshift":"push";return r.split(" ").forEach(a=>{n.eventsListeners[a]||(n.eventsListeners[a]=[]),n.eventsListeners[a][s](e)}),n},once(r,e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;function s(){n.off(r,s),s.__emitterProxy&&delete s.__emitterProxy;for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];e.apply(n,o)}return s.__emitterProxy=e,n.on(r,s,t)},onAny(r,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof r!="function")return t;const n=e?"unshift":"push";return t.eventsAnyListeners.indexOf(r)<0&&t.eventsAnyListeners[n](r),t},offAny(r){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(r);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(r,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||r.split(" ").forEach(n=>{typeof e>"u"?t.eventsListeners[n]=[]:t.eventsListeners[n]&&t.eventsListeners[n].forEach((s,a)=>{(s===e||s.__emitterProxy&&s.__emitterProxy===e)&&t.eventsListeners[n].splice(a,1)})}),t},emit(){const r=this;if(!r.eventsListeners||r.destroyed||!r.eventsListeners)return r;let e,t,n;for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return typeof a[0]=="string"||Array.isArray(a[0])?(e=a[0],t=a.slice(1,a.length),n=r):(e=a[0].events,t=a[0].data,n=a[0].context||r),t.unshift(n),(Array.isArray(e)?e:e.split(" ")).forEach(u=>{r.eventsAnyListeners&&r.eventsAnyListeners.length&&r.eventsAnyListeners.forEach(h=>{h.apply(n,[u,...t])}),r.eventsListeners&&r.eventsListeners[u]&&r.eventsListeners[u].forEach(h=>{h.apply(n,t)})}),r}};function Yb(){const r=this;let e,t;const n=r.el;typeof r.params.width<"u"&&r.params.width!==null?e=r.params.width:e=n.clientWidth,typeof r.params.height<"u"&&r.params.height!==null?t=r.params.height:t=n.clientHeight,!(e===0&&r.isHorizontal()||t===0&&r.isVertical())&&(e=e-parseInt(Ur(n,"padding-left")||0,10)-parseInt(Ur(n,"padding-right")||0,10),t=t-parseInt(Ur(n,"padding-top")||0,10)-parseInt(Ur(n,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(r,{width:e,height:t,size:r.isHorizontal()?e:t}))}function jb(){const r=this;function e(w,C){return parseFloat(w.getPropertyValue(r.getDirectionLabel(C))||0)}const t=r.params,{wrapperEl:n,slidesEl:s,size:a,rtlTranslate:o,wrongRTL:l}=r,u=r.virtual&&t.virtual.enabled,h=u?r.virtual.slides.length:r.slides.length,f=pn(s,`.${r.params.slideClass}, swiper-slide`),c=u?r.virtual.slides.length:f.length;let d=[];const p=[],g=[];let v=t.slidesOffsetBefore;typeof v=="function"&&(v=t.slidesOffsetBefore.call(r));let _=t.slidesOffsetAfter;typeof _=="function"&&(_=t.slidesOffsetAfter.call(r));const m=r.snapGrid.length,y=r.slidesGrid.length;let x=t.spaceBetween,b=-v,T=0,E=0;if(typeof a>"u")return;typeof x=="string"&&x.indexOf("%")>=0?x=parseFloat(x.replace("%",""))/100*a:typeof x=="string"&&(x=parseFloat(x)),r.virtualSize=-x,f.forEach(w=>{o?w.style.marginLeft="":w.style.marginRight="",w.style.marginBottom="",w.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(bo(n,"--swiper-centered-offset-before",""),bo(n,"--swiper-centered-offset-after",""));const M=t.grid&&t.grid.rows>1&&r.grid;M?r.grid.initSlides(f):r.grid&&r.grid.unsetSlides();let A;const S=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(w=>typeof t.breakpoints[w].slidesPerView<"u").length>0;for(let w=0;w<c;w+=1){A=0;let C;if(f[w]&&(C=f[w]),M&&r.grid.updateSlide(w,C,f),!(f[w]&&Ur(C,"display")==="none")){if(t.slidesPerView==="auto"){S&&(f[w].style[r.getDirectionLabel("width")]="");const D=getComputedStyle(C),R=C.style.transform,F=C.style.webkitTransform;if(R&&(C.style.transform="none"),F&&(C.style.webkitTransform="none"),t.roundLengths)A=r.isHorizontal()?nh(C,"width"):nh(C,"height");else{const k=e(D,"width"),z=e(D,"padding-left"),O=e(D,"padding-right"),I=e(D,"margin-left"),j=e(D,"margin-right"),N=D.getPropertyValue("box-sizing");if(N&&N==="border-box")A=k+I+j;else{const{clientWidth:q,offsetWidth:ne}=C;A=k+z+O+I+j+(ne-q)}}R&&(C.style.transform=R),F&&(C.style.webkitTransform=F),t.roundLengths&&(A=Math.floor(A))}else A=(a-(t.slidesPerView-1)*x)/t.slidesPerView,t.roundLengths&&(A=Math.floor(A)),f[w]&&(f[w].style[r.getDirectionLabel("width")]=`${A}px`);f[w]&&(f[w].swiperSlideSize=A),g.push(A),t.centeredSlides?(b=b+A/2+T/2+x,T===0&&w!==0&&(b=b-a/2-x),w===0&&(b=b-a/2-x),Math.abs(b)<1/1e3&&(b=0),t.roundLengths&&(b=Math.floor(b)),E%t.slidesPerGroup===0&&d.push(b),p.push(b)):(t.roundLengths&&(b=Math.floor(b)),(E-Math.min(r.params.slidesPerGroupSkip,E))%r.params.slidesPerGroup===0&&d.push(b),p.push(b),b=b+A+x),r.virtualSize+=A+x,T=A,E+=1}}if(r.virtualSize=Math.max(r.virtualSize,a)+_,o&&l&&(t.effect==="slide"||t.effect==="coverflow")&&(n.style.width=`${r.virtualSize+x}px`),t.setWrapperSize&&(n.style[r.getDirectionLabel("width")]=`${r.virtualSize+x}px`),M&&r.grid.updateWrapperSize(A,d),!t.centeredSlides){const w=[];for(let C=0;C<d.length;C+=1){let D=d[C];t.roundLengths&&(D=Math.floor(D)),d[C]<=r.virtualSize-a&&w.push(D)}d=w,Math.floor(r.virtualSize-a)-Math.floor(d[d.length-1])>1&&d.push(r.virtualSize-a)}if(u&&t.loop){const w=g[0]+x;if(t.slidesPerGroup>1){const C=Math.ceil((r.virtual.slidesBefore+r.virtual.slidesAfter)/t.slidesPerGroup),D=w*t.slidesPerGroup;for(let R=0;R<C;R+=1)d.push(d[d.length-1]+D)}for(let C=0;C<r.virtual.slidesBefore+r.virtual.slidesAfter;C+=1)t.slidesPerGroup===1&&d.push(d[d.length-1]+w),p.push(p[p.length-1]+w),r.virtualSize+=w}if(d.length===0&&(d=[0]),x!==0){const w=r.isHorizontal()&&o?"marginLeft":r.getDirectionLabel("marginRight");f.filter((C,D)=>!t.cssMode||t.loop?!0:D!==f.length-1).forEach(C=>{C.style[w]=`${x}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let w=0;g.forEach(D=>{w+=D+(x||0)}),w-=x;const C=w-a;d=d.map(D=>D<=0?-v:D>C?C+_:D)}if(t.centerInsufficientSlides){let w=0;if(g.forEach(C=>{w+=C+(x||0)}),w-=x,w<a){const C=(a-w)/2;d.forEach((D,R)=>{d[R]=D-C}),p.forEach((D,R)=>{p[R]=D+C})}}if(Object.assign(r,{slides:f,snapGrid:d,slidesGrid:p,slidesSizesGrid:g}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){bo(n,"--swiper-centered-offset-before",`${-d[0]}px`),bo(n,"--swiper-centered-offset-after",`${r.size/2-g[g.length-1]/2}px`);const w=-r.snapGrid[0],C=-r.slidesGrid[0];r.snapGrid=r.snapGrid.map(D=>D+w),r.slidesGrid=r.slidesGrid.map(D=>D+C)}if(c!==h&&r.emit("slidesLengthChange"),d.length!==m&&(r.params.watchOverflow&&r.checkOverflow(),r.emit("snapGridLengthChange")),p.length!==y&&r.emit("slidesGridLengthChange"),t.watchSlidesProgress&&r.updateSlidesOffset(),r.emit("slidesUpdated"),!u&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const w=`${t.containerModifierClass}backface-hidden`,C=r.el.classList.contains(w);c<=t.maxBackfaceHiddenSlides?C||r.el.classList.add(w):C&&r.el.classList.remove(w)}}function Kb(r){const e=this,t=[],n=e.virtual&&e.params.virtual.enabled;let s=0,a;typeof r=="number"?e.setTransition(r):r===!0&&e.setTransition(e.params.speed);const o=l=>n?e.slides[e.getSlideIndexByData(l)]:e.slides[l];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(l=>{t.push(l)});else for(a=0;a<Math.ceil(e.params.slidesPerView);a+=1){const l=e.activeIndex+a;if(l>e.slides.length&&!n)break;t.push(o(l))}else t.push(o(e.activeIndex));for(a=0;a<t.length;a+=1)if(typeof t[a]<"u"){const l=t[a].offsetHeight;s=l>s?l:s}(s||s===0)&&(e.wrapperEl.style.height=`${s}px`)}function Zb(){const r=this,e=r.slides,t=r.isElement?r.isHorizontal()?r.wrapperEl.offsetLeft:r.wrapperEl.offsetTop:0;for(let n=0;n<e.length;n+=1)e[n].swiperSlideOffset=(r.isHorizontal()?e[n].offsetLeft:e[n].offsetTop)-t-r.cssOverflowAdjustment()}function Jb(r){r===void 0&&(r=this&&this.translate||0);const e=this,t=e.params,{slides:n,rtlTranslate:s,snapGrid:a}=e;if(n.length===0)return;typeof n[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-r;s&&(o=r),n.forEach(u=>{u.classList.remove(t.slideVisibleClass,t.slideFullyVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];let l=t.spaceBetween;typeof l=="string"&&l.indexOf("%")>=0?l=parseFloat(l.replace("%",""))/100*e.size:typeof l=="string"&&(l=parseFloat(l));for(let u=0;u<n.length;u+=1){const h=n[u];let f=h.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(f-=n[0].swiperSlideOffset);const c=(o+(t.centeredSlides?e.minTranslate():0)-f)/(h.swiperSlideSize+l),d=(o-a[0]+(t.centeredSlides?e.minTranslate():0)-f)/(h.swiperSlideSize+l),p=-(o-f),g=p+e.slidesSizesGrid[u],v=p>=0&&p<=e.size-e.slidesSizesGrid[u];(p>=0&&p<e.size-1||g>1&&g<=e.size||p<=0&&g>=e.size)&&(e.visibleSlides.push(h),e.visibleSlidesIndexes.push(u),n[u].classList.add(t.slideVisibleClass)),v&&n[u].classList.add(t.slideFullyVisibleClass),h.progress=s?-c:c,h.originalProgress=s?-d:d}}function Qb(r){const e=this;if(typeof r>"u"){const f=e.rtlTranslate?-1:1;r=e&&e.translate&&e.translate*f||0}const t=e.params,n=e.maxTranslate()-e.minTranslate();let{progress:s,isBeginning:a,isEnd:o,progressLoop:l}=e;const u=a,h=o;if(n===0)s=0,a=!0,o=!0;else{s=(r-e.minTranslate())/n;const f=Math.abs(r-e.minTranslate())<1,c=Math.abs(r-e.maxTranslate())<1;a=f||s<=0,o=c||s>=1,f&&(s=0),c&&(s=1)}if(t.loop){const f=e.getSlideIndexByData(0),c=e.getSlideIndexByData(e.slides.length-1),d=e.slidesGrid[f],p=e.slidesGrid[c],g=e.slidesGrid[e.slidesGrid.length-1],v=Math.abs(r);v>=d?l=(v-d)/g:l=(v+g-p)/g,l>1&&(l-=1)}Object.assign(e,{progress:s,progressLoop:l,isBeginning:a,isEnd:o}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(r),a&&!u&&e.emit("reachBeginning toEdge"),o&&!h&&e.emit("reachEnd toEdge"),(u&&!a||h&&!o)&&e.emit("fromEdge"),e.emit("progress",s)}const Ou=(r,e,t)=>{e&&!r.classList.contains(t)?r.classList.add(t):!e&&r.classList.contains(t)&&r.classList.remove(t)};function eS(){const r=this,{slides:e,params:t,slidesEl:n,activeIndex:s}=r,a=r.virtual&&t.virtual.enabled,o=r.grid&&t.grid&&t.grid.rows>1,l=c=>pn(n,`.${t.slideClass}${c}, swiper-slide${c}`)[0];let u,h,f;if(a)if(t.loop){let c=s-r.virtual.slidesBefore;c<0&&(c=r.virtual.slides.length+c),c>=r.virtual.slides.length&&(c-=r.virtual.slides.length),u=l(`[data-swiper-slide-index="${c}"]`)}else u=l(`[data-swiper-slide-index="${s}"]`);else o?(u=e.filter(c=>c.column===s)[0],f=e.filter(c=>c.column===s+1)[0],h=e.filter(c=>c.column===s-1)[0]):u=e[s];u&&(o||(f=zb(u,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!f&&(f=e[0]),h=Bb(u,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!h===0&&(h=e[e.length-1]))),e.forEach(c=>{Ou(c,c===u,t.slideActiveClass),Ou(c,c===f,t.slideNextClass),Ou(c,c===h,t.slidePrevClass)}),r.emitSlidesClasses()}const yc=(r,e)=>{if(!r||r.destroyed||!r.params)return;const t=()=>r.isElement?"swiper-slide":`.${r.params.slideClass}`,n=e.closest(t());if(n){let s=n.querySelector(`.${r.params.lazyPreloaderClass}`);!s&&r.isElement&&(n.shadowRoot?s=n.shadowRoot.querySelector(`.${r.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{n.shadowRoot&&(s=n.shadowRoot.querySelector(`.${r.params.lazyPreloaderClass}`),s&&s.remove())})),s&&s.remove()}},Nu=(r,e)=>{if(!r.slides[e])return;const t=r.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},ih=r=>{if(!r||r.destroyed||!r.params)return;let e=r.params.lazyPreloadPrevNext;const t=r.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const n=r.params.slidesPerView==="auto"?r.slidesPerViewDynamic():Math.ceil(r.params.slidesPerView),s=r.activeIndex;if(r.params.grid&&r.params.grid.rows>1){const o=s,l=[o-e];l.push(...Array.from({length:e}).map((u,h)=>o+n+h)),r.slides.forEach((u,h)=>{l.includes(u.column)&&Nu(r,h)});return}const a=s+n-1;if(r.params.rewind||r.params.loop)for(let o=s-e;o<=a+e;o+=1){const l=(o%t+t)%t;(l<s||l>a)&&Nu(r,l)}else for(let o=Math.max(s-e,0);o<=Math.min(a+e,t-1);o+=1)o!==s&&(o>a||o<s)&&Nu(r,o)};function tS(r){const{slidesGrid:e,params:t}=r,n=r.rtlTranslate?r.translate:-r.translate;let s;for(let a=0;a<e.length;a+=1)typeof e[a+1]<"u"?n>=e[a]&&n<e[a+1]-(e[a+1]-e[a])/2?s=a:n>=e[a]&&n<e[a+1]&&(s=a+1):n>=e[a]&&(s=a);return t.normalizeSlideIndex&&(s<0||typeof s>"u")&&(s=0),s}function nS(r){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:n,params:s,activeIndex:a,realIndex:o,snapIndex:l}=e;let u=r,h;const f=p=>{let g=p-e.virtual.slidesBefore;return g<0&&(g=e.virtual.slides.length+g),g>=e.virtual.slides.length&&(g-=e.virtual.slides.length),g};if(typeof u>"u"&&(u=tS(e)),n.indexOf(t)>=0)h=n.indexOf(t);else{const p=Math.min(s.slidesPerGroupSkip,u);h=p+Math.floor((u-p)/s.slidesPerGroup)}if(h>=n.length&&(h=n.length-1),u===a&&!e.params.loop){h!==l&&(e.snapIndex=h,e.emit("snapIndexChange"));return}if(u===a&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=f(u);return}const c=e.grid&&s.grid&&s.grid.rows>1;let d;if(e.virtual&&s.virtual.enabled&&s.loop)d=f(u);else if(c){const p=e.slides.filter(v=>v.column===u)[0];let g=parseInt(p.getAttribute("data-swiper-slide-index"),10);Number.isNaN(g)&&(g=Math.max(e.slides.indexOf(p),0)),d=Math.floor(g/s.grid.rows)}else if(e.slides[u]){const p=e.slides[u].getAttribute("data-swiper-slide-index");p?d=parseInt(p,10):d=u}else d=u;Object.assign(e,{previousSnapIndex:l,snapIndex:h,previousRealIndex:o,realIndex:d,previousIndex:a,activeIndex:u}),e.initialized&&ih(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(o!==d&&e.emit("realIndexChange"),e.emit("slideChange"))}function iS(r,e){const t=this,n=t.params;let s=r.closest(`.${n.slideClass}, swiper-slide`);!s&&t.isElement&&e&&e.length>1&&e.includes(r)&&[...e.slice(e.indexOf(r)+1,e.length)].forEach(l=>{!s&&l.matches&&l.matches(`.${n.slideClass}, swiper-slide`)&&(s=l)});let a=!1,o;if(s){for(let l=0;l<t.slides.length;l+=1)if(t.slides[l]===s){a=!0,o=l;break}}if(s&&a)t.clickedSlide=s,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(s.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=o;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}n.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var rS={updateSize:Yb,updateSlides:jb,updateAutoHeight:Kb,updateSlidesOffset:Zb,updateSlidesProgress:Jb,updateProgress:Qb,updateSlidesClasses:eS,updateActiveIndex:nS,updateClickedSlide:iS};function sS(r){r===void 0&&(r=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:n,translate:s,wrapperEl:a}=e;if(t.virtualTranslate)return n?-s:s;if(t.cssMode)return s;let o=th(a,r);return o+=e.cssOverflowAdjustment(),n&&(o=-o),o||0}function aS(r,e){const t=this,{rtlTranslate:n,params:s,wrapperEl:a,progress:o}=t;let l=0,u=0;const h=0;t.isHorizontal()?l=n?-r:r:u=r,s.roundLengths&&(l=Math.floor(l),u=Math.floor(u)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?l:u,s.cssMode?a[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-l:-u:s.virtualTranslate||(t.isHorizontal()?l-=t.cssOverflowAdjustment():u-=t.cssOverflowAdjustment(),a.style.transform=`translate3d(${l}px, ${u}px, ${h}px)`);let f;const c=t.maxTranslate()-t.minTranslate();c===0?f=0:f=(r-t.minTranslate())/c,f!==o&&t.updateProgress(r),t.emit("setTranslate",t.translate,e)}function oS(){return-this.snapGrid[0]}function lS(){return-this.snapGrid[this.snapGrid.length-1]}function cS(r,e,t,n,s){r===void 0&&(r=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),n===void 0&&(n=!0);const a=this,{params:o,wrapperEl:l}=a;if(a.animating&&o.preventInteractionOnTransition)return!1;const u=a.minTranslate(),h=a.maxTranslate();let f;if(n&&r>u?f=u:n&&r<h?f=h:f=r,a.updateProgress(f),o.cssMode){const c=a.isHorizontal();if(e===0)l[c?"scrollLeft":"scrollTop"]=-f;else{if(!a.support.smoothScroll)return d0({swiper:a,targetPosition:-f,side:c?"left":"top"}),!0;l.scrollTo({[c?"left":"top"]:-f,behavior:"smooth"})}return!0}return e===0?(a.setTransition(0),a.setTranslate(f),t&&(a.emit("beforeTransitionStart",e,s),a.emit("transitionEnd"))):(a.setTransition(e),a.setTranslate(f),t&&(a.emit("beforeTransitionStart",e,s),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(d){!a||a.destroyed||d.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,a.animating=!1,t&&a.emit("transitionEnd"))}),a.wrapperEl.addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd))),!0}var uS={getTranslate:sS,setTranslate:aS,minTranslate:oS,maxTranslate:lS,translateTo:cS};function dS(r,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${r}ms`,t.wrapperEl.style.transitionDelay=r===0?"0ms":""),t.emit("setTransition",r,e)}function p0(r){let{swiper:e,runCallbacks:t,direction:n,step:s}=r;const{activeIndex:a,previousIndex:o}=e;let l=n;if(l||(a>o?l="next":a<o?l="prev":l="reset"),e.emit(`transition${s}`),t&&a!==o){if(l==="reset"){e.emit(`slideResetTransition${s}`);return}e.emit(`slideChangeTransition${s}`),l==="next"?e.emit(`slideNextTransition${s}`):e.emit(`slidePrevTransition${s}`)}}function hS(r,e){r===void 0&&(r=!0);const t=this,{params:n}=t;n.cssMode||(n.autoHeight&&t.updateAutoHeight(),p0({swiper:t,runCallbacks:r,direction:e,step:"Start"}))}function fS(r,e){r===void 0&&(r=!0);const t=this,{params:n}=t;t.animating=!1,!n.cssMode&&(t.setTransition(0),p0({swiper:t,runCallbacks:r,direction:e,step:"End"}))}var pS={setTransition:dS,transitionStart:hS,transitionEnd:fS};function mS(r,e,t,n,s){r===void 0&&(r=0),t===void 0&&(t=!0),typeof r=="string"&&(r=parseInt(r,10));const a=this;let o=r;o<0&&(o=0);const{params:l,snapGrid:u,slidesGrid:h,previousIndex:f,activeIndex:c,rtlTranslate:d,wrapperEl:p,enabled:g}=a;if(!g&&!n&&!s||a.destroyed||a.animating&&l.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=a.params.speed);const v=Math.min(a.params.slidesPerGroupSkip,o);let _=v+Math.floor((o-v)/a.params.slidesPerGroup);_>=u.length&&(_=u.length-1);const m=-u[_];if(l.normalizeSlideIndex)for(let x=0;x<h.length;x+=1){const b=-Math.floor(m*100),T=Math.floor(h[x]*100),E=Math.floor(h[x+1]*100);typeof h[x+1]<"u"?b>=T&&b<E-(E-T)/2?o=x:b>=T&&b<E&&(o=x+1):b>=T&&(o=x)}if(a.initialized&&o!==c&&(!a.allowSlideNext&&(d?m>a.translate&&m>a.minTranslate():m<a.translate&&m<a.minTranslate())||!a.allowSlidePrev&&m>a.translate&&m>a.maxTranslate()&&(c||0)!==o))return!1;o!==(f||0)&&t&&a.emit("beforeSlideChangeStart"),a.updateProgress(m);let y;if(o>c?y="next":o<c?y="prev":y="reset",d&&-m===a.translate||!d&&m===a.translate)return a.updateActiveIndex(o),l.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),l.effect!=="slide"&&a.setTranslate(m),y!=="reset"&&(a.transitionStart(t,y),a.transitionEnd(t,y)),!1;if(l.cssMode){const x=a.isHorizontal(),b=d?m:-m;if(e===0){const T=a.virtual&&a.params.virtual.enabled;T&&(a.wrapperEl.style.scrollSnapType="none",a._immediateVirtual=!0),T&&!a._cssModeVirtualInitialSet&&a.params.initialSlide>0?(a._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{p[x?"scrollLeft":"scrollTop"]=b})):p[x?"scrollLeft":"scrollTop"]=b,T&&requestAnimationFrame(()=>{a.wrapperEl.style.scrollSnapType="",a._immediateVirtual=!1})}else{if(!a.support.smoothScroll)return d0({swiper:a,targetPosition:b,side:x?"left":"top"}),!0;p.scrollTo({[x?"left":"top"]:b,behavior:"smooth"})}return!0}return a.setTransition(e),a.setTranslate(m),a.updateActiveIndex(o),a.updateSlidesClasses(),a.emit("beforeTransitionStart",e,n),a.transitionStart(t,y),e===0?a.transitionEnd(t,y):a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(b){!a||a.destroyed||b.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(t,y))}),a.wrapperEl.addEventListener("transitionend",a.onSlideToWrapperTransitionEnd)),!0}function gS(r,e,t,n){r===void 0&&(r=0),t===void 0&&(t=!0),typeof r=="string"&&(r=parseInt(r,10));const s=this;if(s.destroyed)return;typeof e>"u"&&(e=s.params.speed);const a=s.grid&&s.params.grid&&s.params.grid.rows>1;let o=r;if(s.params.loop)if(s.virtual&&s.params.virtual.enabled)o=o+s.virtual.slidesBefore;else{let l;if(a){const d=o*s.params.grid.rows;l=s.slides.filter(p=>p.getAttribute("data-swiper-slide-index")*1===d)[0].column}else l=s.getSlideIndexByData(o);const u=a?Math.ceil(s.slides.length/s.params.grid.rows):s.slides.length,{centeredSlides:h}=s.params;let f=s.params.slidesPerView;f==="auto"?f=s.slidesPerViewDynamic():(f=Math.ceil(parseFloat(s.params.slidesPerView,10)),h&&f%2===0&&(f=f+1));let c=u-l<f;if(h&&(c=c||l<Math.ceil(f/2)),n&&h&&s.params.slidesPerView!=="auto"&&!a&&(c=!1),c){const d=h?l<s.activeIndex?"prev":"next":l-s.activeIndex-1<s.params.slidesPerView?"next":"prev";s.loopFix({direction:d,slideTo:!0,activeSlideIndex:d==="next"?l+1:l-u+1,slideRealIndex:d==="next"?s.realIndex:void 0})}if(a){const d=o*s.params.grid.rows;o=s.slides.filter(p=>p.getAttribute("data-swiper-slide-index")*1===d)[0].column}else o=s.getSlideIndexByData(o)}return requestAnimationFrame(()=>{s.slideTo(o,e,t,n)}),s}function _S(r,e,t){e===void 0&&(e=!0);const n=this,{enabled:s,params:a,animating:o}=n;if(!s||n.destroyed)return n;typeof r>"u"&&(r=n.params.speed);let l=a.slidesPerGroup;a.slidesPerView==="auto"&&a.slidesPerGroup===1&&a.slidesPerGroupAuto&&(l=Math.max(n.slidesPerViewDynamic("current",!0),1));const u=n.activeIndex<a.slidesPerGroupSkip?1:l,h=n.virtual&&a.virtual.enabled;if(a.loop){if(o&&!h&&a.loopPreventsSliding)return!1;if(n.loopFix({direction:"next"}),n._clientLeft=n.wrapperEl.clientLeft,n.activeIndex===n.slides.length-1&&a.cssMode)return requestAnimationFrame(()=>{n.slideTo(n.activeIndex+u,r,e,t)}),!0}return a.rewind&&n.isEnd?n.slideTo(0,r,e,t):n.slideTo(n.activeIndex+u,r,e,t)}function vS(r,e,t){e===void 0&&(e=!0);const n=this,{params:s,snapGrid:a,slidesGrid:o,rtlTranslate:l,enabled:u,animating:h}=n;if(!u||n.destroyed)return n;typeof r>"u"&&(r=n.params.speed);const f=n.virtual&&s.virtual.enabled;if(s.loop){if(h&&!f&&s.loopPreventsSliding)return!1;n.loopFix({direction:"prev"}),n._clientLeft=n.wrapperEl.clientLeft}const c=l?n.translate:-n.translate;function d(m){return m<0?-Math.floor(Math.abs(m)):Math.floor(m)}const p=d(c),g=a.map(m=>d(m));let v=a[g.indexOf(p)-1];if(typeof v>"u"&&s.cssMode){let m;a.forEach((y,x)=>{p>=y&&(m=x)}),typeof m<"u"&&(v=a[m>0?m-1:m])}let _=0;if(typeof v<"u"&&(_=o.indexOf(v),_<0&&(_=n.activeIndex-1),s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(_=_-n.slidesPerViewDynamic("previous",!0)+1,_=Math.max(_,0))),s.rewind&&n.isBeginning){const m=n.params.virtual&&n.params.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1;return n.slideTo(m,r,e,t)}else if(s.loop&&n.activeIndex===0&&s.cssMode)return requestAnimationFrame(()=>{n.slideTo(_,r,e,t)}),!0;return n.slideTo(_,r,e,t)}function yS(r,e,t){e===void 0&&(e=!0);const n=this;if(!n.destroyed)return typeof r>"u"&&(r=n.params.speed),n.slideTo(n.activeIndex,r,e,t)}function xS(r,e,t,n){e===void 0&&(e=!0),n===void 0&&(n=.5);const s=this;if(s.destroyed)return;typeof r>"u"&&(r=s.params.speed);let a=s.activeIndex;const o=Math.min(s.params.slidesPerGroupSkip,a),l=o+Math.floor((a-o)/s.params.slidesPerGroup),u=s.rtlTranslate?s.translate:-s.translate;if(u>=s.snapGrid[l]){const h=s.snapGrid[l],f=s.snapGrid[l+1];u-h>(f-h)*n&&(a+=s.params.slidesPerGroup)}else{const h=s.snapGrid[l-1],f=s.snapGrid[l];u-h<=(f-h)*n&&(a-=s.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,s.slidesGrid.length-1),s.slideTo(a,r,e,t)}function bS(){const r=this;if(r.destroyed)return;const{params:e,slidesEl:t}=r,n=e.slidesPerView==="auto"?r.slidesPerViewDynamic():e.slidesPerView;let s=r.clickedIndex,a;const o=r.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(r.animating)return;a=parseInt(r.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?s<r.loopedSlides-n/2||s>r.slides.length-r.loopedSlides+n/2?(r.loopFix(),s=r.getSlideIndex(pn(t,`${o}[data-swiper-slide-index="${a}"]`)[0]),$s(()=>{r.slideTo(s)})):r.slideTo(s):s>r.slides.length-n?(r.loopFix(),s=r.getSlideIndex(pn(t,`${o}[data-swiper-slide-index="${a}"]`)[0]),$s(()=>{r.slideTo(s)})):r.slideTo(s)}else r.slideTo(s)}var SS={slideTo:mS,slideToLoop:gS,slideNext:_S,slidePrev:vS,slideReset:yS,slideToClosest:xS,slideToClickedSlide:bS};function wS(r){const e=this,{params:t,slidesEl:n}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;const s=()=>{pn(n,`.${t.slideClass}, swiper-slide`).forEach((c,d)=>{c.setAttribute("data-swiper-slide-index",d)})},a=e.grid&&t.grid&&t.grid.rows>1,o=t.slidesPerGroup*(a?t.grid.rows:1),l=e.slides.length%o!==0,u=a&&e.slides.length%t.grid.rows!==0,h=f=>{for(let c=0;c<f;c+=1){const d=e.isElement?ri("swiper-slide",[t.slideBlankClass]):ri("div",[t.slideClass,t.slideBlankClass]);e.slidesEl.append(d)}};if(l){if(t.loopAddBlankSlides){const f=o-e.slides.length%o;h(f),e.recalcSlides(),e.updateSlides()}else kc("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else if(u){if(t.loopAddBlankSlides){const f=t.grid.rows-e.slides.length%t.grid.rows;h(f),e.recalcSlides(),e.updateSlides()}else kc("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else s();e.loopFix({slideRealIndex:r,direction:t.centeredSlides?void 0:"next"})}function ES(r){let{slideRealIndex:e,slideTo:t=!0,direction:n,setTranslate:s,activeSlideIndex:a,byController:o,byMousewheel:l}=r===void 0?{}:r;const u=this;if(!u.params.loop)return;u.emit("beforeLoopFix");const{slides:h,allowSlidePrev:f,allowSlideNext:c,slidesEl:d,params:p}=u,{centeredSlides:g}=p;if(u.allowSlidePrev=!0,u.allowSlideNext=!0,u.virtual&&p.virtual.enabled){t&&(!p.centeredSlides&&u.snapIndex===0?u.slideTo(u.virtual.slides.length,0,!1,!0):p.centeredSlides&&u.snapIndex<p.slidesPerView?u.slideTo(u.virtual.slides.length+u.snapIndex,0,!1,!0):u.snapIndex===u.snapGrid.length-1&&u.slideTo(u.virtual.slidesBefore,0,!1,!0)),u.allowSlidePrev=f,u.allowSlideNext=c,u.emit("loopFix");return}let v=p.slidesPerView;v==="auto"?v=u.slidesPerViewDynamic():(v=Math.ceil(parseFloat(p.slidesPerView,10)),g&&v%2===0&&(v=v+1));const _=p.slidesPerGroupAuto?v:p.slidesPerGroup;let m=_;m%_!==0&&(m+=_-m%_),m+=p.loopAdditionalSlides,u.loopedSlides=m;const y=u.grid&&p.grid&&p.grid.rows>1;h.length<v+m?kc("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):y&&p.grid.fill==="row"&&kc("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const x=[],b=[];let T=u.activeIndex;typeof a>"u"?a=u.getSlideIndex(h.filter(R=>R.classList.contains(p.slideActiveClass))[0]):T=a;const E=n==="next"||!n,M=n==="prev"||!n;let A=0,S=0;const w=y?Math.ceil(h.length/p.grid.rows):h.length,D=(y?h[a].column:a)+(g&&typeof s>"u"?-v/2+.5:0);if(D<m){A=Math.max(m-D,_);for(let R=0;R<m-D;R+=1){const F=R-Math.floor(R/w)*w;if(y){const k=w-F-1;for(let z=h.length-1;z>=0;z-=1)h[z].column===k&&x.push(z)}else x.push(w-F-1)}}else if(D+v>w-m){S=Math.max(D-(w-m*2),_);for(let R=0;R<S;R+=1){const F=R-Math.floor(R/w)*w;y?h.forEach((k,z)=>{k.column===F&&b.push(z)}):b.push(F)}}if(u.__preventObserver__=!0,requestAnimationFrame(()=>{u.__preventObserver__=!1}),M&&x.forEach(R=>{h[R].swiperLoopMoveDOM=!0,d.prepend(h[R]),h[R].swiperLoopMoveDOM=!1}),E&&b.forEach(R=>{h[R].swiperLoopMoveDOM=!0,d.append(h[R]),h[R].swiperLoopMoveDOM=!1}),u.recalcSlides(),p.slidesPerView==="auto"?u.updateSlides():y&&(x.length>0&&M||b.length>0&&E)&&u.slides.forEach((R,F)=>{u.grid.updateSlide(F,R,u.slides)}),p.watchSlidesProgress&&u.updateSlidesOffset(),t){if(x.length>0&&M){if(typeof e>"u"){const R=u.slidesGrid[T],k=u.slidesGrid[T+A]-R;l?u.setTranslate(u.translate-k):(u.slideTo(T+Math.ceil(A),0,!1,!0),s&&(u.touchEventsData.startTranslate=u.touchEventsData.startTranslate-k,u.touchEventsData.currentTranslate=u.touchEventsData.currentTranslate-k))}else if(s){const R=y?x.length/p.grid.rows:x.length;u.slideTo(u.activeIndex+R,0,!1,!0),u.touchEventsData.currentTranslate=u.translate}}else if(b.length>0&&E)if(typeof e>"u"){const R=u.slidesGrid[T],k=u.slidesGrid[T-S]-R;l?u.setTranslate(u.translate-k):(u.slideTo(T-S,0,!1,!0),s&&(u.touchEventsData.startTranslate=u.touchEventsData.startTranslate-k,u.touchEventsData.currentTranslate=u.touchEventsData.currentTranslate-k))}else{const R=y?b.length/p.grid.rows:b.length;u.slideTo(u.activeIndex-R,0,!1,!0)}}if(u.allowSlidePrev=f,u.allowSlideNext=c,u.controller&&u.controller.control&&!o){const R={slideRealIndex:e,direction:n,setTranslate:s,activeSlideIndex:a,byController:!0};Array.isArray(u.controller.control)?u.controller.control.forEach(F=>{!F.destroyed&&F.params.loop&&F.loopFix({...R,slideTo:F.params.slidesPerView===p.slidesPerView?t:!1})}):u.controller.control instanceof u.constructor&&u.controller.control.params.loop&&u.controller.control.loopFix({...R,slideTo:u.controller.control.params.slidesPerView===p.slidesPerView?t:!1})}u.emit("loopFix")}function TS(){const r=this,{params:e,slidesEl:t}=r;if(!e.loop||r.virtual&&r.params.virtual.enabled)return;r.recalcSlides();const n=[];r.slides.forEach(s=>{const a=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;n[a]=s}),r.slides.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),n.forEach(s=>{t.append(s)}),r.recalcSlides(),r.slideTo(r.realIndex,0)}var MS={loopCreate:wS,loopFix:ES,loopDestroy:TS};function AS(r){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=r?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function CS(){const r=this;r.params.watchOverflow&&r.isLocked||r.params.cssMode||(r.isElement&&(r.__preventObserver__=!0),r[r.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",r.isElement&&requestAnimationFrame(()=>{r.__preventObserver__=!1}))}var DS={setGrabCursor:AS,unsetGrabCursor:CS};function PS(r,e){e===void 0&&(e=this);function t(n){if(!n||n===gn()||n===Ht())return null;n.assignedSlot&&(n=n.assignedSlot);const s=n.closest(r);return!s&&!n.getRootNode?null:s||t(n.getRootNode().host)}return t(e)}function sp(r,e,t){const n=Ht(),{params:s}=r,a=s.edgeSwipeDetection,o=s.edgeSwipeThreshold;return a&&(t<=o||t>=n.innerWidth-o)?a==="prevent"?(e.preventDefault(),!0):!1:!0}function RS(r){const e=this,t=gn();let n=r;n.originalEvent&&(n=n.originalEvent);const s=e.touchEventsData;if(n.type==="pointerdown"){if(s.pointerId!==null&&s.pointerId!==n.pointerId)return;s.pointerId=n.pointerId}else n.type==="touchstart"&&n.targetTouches.length===1&&(s.touchId=n.targetTouches[0].identifier);if(n.type==="touchstart"){sp(e,n,n.targetTouches[0].pageX);return}const{params:a,touches:o,enabled:l}=e;if(!l||!a.simulateTouch&&n.pointerType==="mouse"||e.animating&&a.preventInteractionOnTransition)return;!e.animating&&a.cssMode&&a.loop&&e.loopFix();let u=n.target;if(a.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(u)||"which"in n&&n.which===3||"button"in n&&n.button>0||s.isTouched&&s.isMoved)return;const h=!!a.noSwipingClass&&a.noSwipingClass!=="",f=n.composedPath?n.composedPath():n.path;h&&n.target&&n.target.shadowRoot&&f&&(u=f[0]);const c=a.noSwipingSelector?a.noSwipingSelector:`.${a.noSwipingClass}`,d=!!(n.target&&n.target.shadowRoot);if(a.noSwiping&&(d?PS(c,u):u.closest(c))){e.allowClick=!0;return}if(a.swipeHandler&&!u.closest(a.swipeHandler))return;o.currentX=n.pageX,o.currentY=n.pageY;const p=o.currentX,g=o.currentY;if(!sp(e,n,p))return;Object.assign(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=p,o.startY=g,s.touchStartTime=pi(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,a.threshold>0&&(s.allowThresholdMove=!1);let v=!0;u.matches(s.focusableElements)&&(v=!1,u.nodeName==="SELECT"&&(s.isTouched=!1)),t.activeElement&&t.activeElement.matches(s.focusableElements)&&t.activeElement!==u&&t.activeElement.blur();const _=v&&e.allowTouchMove&&a.touchStartPreventDefault;(a.touchStartForcePreventDefault||_)&&!u.isContentEditable&&n.preventDefault(),a.freeMode&&a.freeMode.enabled&&e.freeMode&&e.animating&&!a.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",n)}function LS(r){const e=gn(),t=this,n=t.touchEventsData,{params:s,touches:a,rtlTranslate:o,enabled:l}=t;if(!l||!s.simulateTouch&&r.pointerType==="mouse")return;let u=r;if(u.originalEvent&&(u=u.originalEvent),u.type==="pointermove"&&(n.touchId!==null||u.pointerId!==n.pointerId))return;let h;if(u.type==="touchmove"){if(h=[...u.changedTouches].filter(E=>E.identifier===n.touchId)[0],!h||h.identifier!==n.touchId)return}else h=u;if(!n.isTouched){n.startMoving&&n.isScrolling&&t.emit("touchMoveOpposite",u);return}const f=h.pageX,c=h.pageY;if(u.preventedByNestedSwiper){a.startX=f,a.startY=c;return}if(!t.allowTouchMove){u.target.matches(n.focusableElements)||(t.allowClick=!1),n.isTouched&&(Object.assign(a,{startX:f,startY:c,currentX:f,currentY:c}),n.touchStartTime=pi());return}if(s.touchReleaseOnEdges&&!s.loop){if(t.isVertical()){if(c<a.startY&&t.translate<=t.maxTranslate()||c>a.startY&&t.translate>=t.minTranslate()){n.isTouched=!1,n.isMoved=!1;return}}else if(f<a.startX&&t.translate<=t.maxTranslate()||f>a.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&u.target===e.activeElement&&u.target.matches(n.focusableElements)){n.isMoved=!0,t.allowClick=!1;return}n.allowTouchCallbacks&&t.emit("touchMove",u),a.previousX=a.currentX,a.previousY=a.currentY,a.currentX=f,a.currentY=c;const d=a.currentX-a.startX,p=a.currentY-a.startY;if(t.params.threshold&&Math.sqrt(d**2+p**2)<t.params.threshold)return;if(typeof n.isScrolling>"u"){let E;t.isHorizontal()&&a.currentY===a.startY||t.isVertical()&&a.currentX===a.startX?n.isScrolling=!1:d*d+p*p>=25&&(E=Math.atan2(Math.abs(p),Math.abs(d))*180/Math.PI,n.isScrolling=t.isHorizontal()?E>s.touchAngle:90-E>s.touchAngle)}if(n.isScrolling&&t.emit("touchMoveOpposite",u),typeof n.startMoving>"u"&&(a.currentX!==a.startX||a.currentY!==a.startY)&&(n.startMoving=!0),n.isScrolling||u.type==="touchmove"&&n.preventTouchMoveFromPointerMove){n.isTouched=!1;return}if(!n.startMoving)return;t.allowClick=!1,!s.cssMode&&u.cancelable&&u.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&u.stopPropagation();let g=t.isHorizontal()?d:p,v=t.isHorizontal()?a.currentX-a.previousX:a.currentY-a.previousY;s.oneWayMovement&&(g=Math.abs(g)*(o?1:-1),v=Math.abs(v)*(o?1:-1)),a.diff=g,g*=s.touchRatio,o&&(g=-g,v=-v);const _=t.touchesDirection;t.swipeDirection=g>0?"prev":"next",t.touchesDirection=v>0?"prev":"next";const m=t.params.loop&&!s.cssMode,y=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!n.isMoved){if(m&&y&&t.loopFix({direction:t.swipeDirection}),n.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const E=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(E)}n.allowMomentumBounce=!1,s.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",u)}let x;if(new Date().getTime(),n.isMoved&&n.allowThresholdMove&&_!==t.touchesDirection&&m&&y&&Math.abs(g)>=1){Object.assign(a,{startX:f,startY:c,currentX:f,currentY:c,startTranslate:n.currentTranslate}),n.loopSwapReset=!0,n.startTranslate=n.currentTranslate;return}t.emit("sliderMove",u),n.isMoved=!0,n.currentTranslate=g+n.startTranslate;let b=!0,T=s.resistanceRatio;if(s.touchReleaseOnEdges&&(T=0),g>0?(m&&y&&!x&&n.allowThresholdMove&&n.currentTranslate>(s.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),n.currentTranslate>t.minTranslate()&&(b=!1,s.resistance&&(n.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+n.startTranslate+g)**T))):g<0&&(m&&y&&!x&&n.allowThresholdMove&&n.currentTranslate<(s.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]:t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(s.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(s.slidesPerView,10)))}),n.currentTranslate<t.maxTranslate()&&(b=!1,s.resistance&&(n.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-n.startTranslate-g)**T))),b&&(u.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(n.currentTranslate=n.startTranslate),s.threshold>0)if(Math.abs(g)>s.threshold||n.allowThresholdMove){if(!n.allowThresholdMove){n.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,n.currentTranslate=n.startTranslate,a.diff=t.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY;return}}else{n.currentTranslate=n.startTranslate;return}!s.followFinger||s.cssMode||((s.freeMode&&s.freeMode.enabled&&t.freeMode||s.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),s.freeMode&&s.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(n.currentTranslate),t.setTranslate(n.currentTranslate))}function IS(r){const e=this,t=e.touchEventsData;let n=r;n.originalEvent&&(n=n.originalEvent);let s;if(n.type==="touchend"||n.type==="touchcancel"){if(s=[...n.changedTouches].filter(T=>T.identifier===t.touchId)[0],!s||s.identifier!==t.touchId)return}else{if(t.touchId!==null||n.pointerId!==t.pointerId)return;s=n}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(n.type)&&!(["pointercancel","contextmenu"].includes(n.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:o,touches:l,rtlTranslate:u,slidesGrid:h,enabled:f}=e;if(!f||!o.simulateTouch&&n.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",n),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&o.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}o.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const c=pi(),d=c-t.touchStartTime;if(e.allowClick){const T=n.path||n.composedPath&&n.composedPath();e.updateClickedSlide(T&&T[0]||n.target,T),e.emit("tap click",n),d<300&&c-t.lastClickTime<300&&e.emit("doubleTap doubleClick",n)}if(t.lastClickTime=pi(),$s(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||l.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let p;if(o.followFinger?p=u?e.translate:-e.translate:p=-t.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:p});return}const g=p>=-e.maxTranslate()&&!e.params.loop;let v=0,_=e.slidesSizesGrid[0];for(let T=0;T<h.length;T+=T<o.slidesPerGroupSkip?1:o.slidesPerGroup){const E=T<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof h[T+E]<"u"?(g||p>=h[T]&&p<h[T+E])&&(v=T,_=h[T+E]-h[T]):(g||p>=h[T])&&(v=T,_=h[h.length-1]-h[h.length-2])}let m=null,y=null;o.rewind&&(e.isBeginning?y=o.virtual&&o.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(m=0));const x=(p-h[v])/_,b=v<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(d>o.longSwipesMs){if(!o.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(x>=o.longSwipesRatio?e.slideTo(o.rewind&&e.isEnd?m:v+b):e.slideTo(v)),e.swipeDirection==="prev"&&(x>1-o.longSwipesRatio?e.slideTo(v+b):y!==null&&x<0&&Math.abs(x)>o.longSwipesRatio?e.slideTo(y):e.slideTo(v))}else{if(!o.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(n.target===e.navigation.nextEl||n.target===e.navigation.prevEl)?n.target===e.navigation.nextEl?e.slideTo(v+b):e.slideTo(v):(e.swipeDirection==="next"&&e.slideTo(m!==null?m:v+b),e.swipeDirection==="prev"&&e.slideTo(y!==null?y:v))}}function ap(){const r=this,{params:e,el:t}=r;if(t&&t.offsetWidth===0)return;e.breakpoints&&r.setBreakpoint();const{allowSlideNext:n,allowSlidePrev:s,snapGrid:a}=r,o=r.virtual&&r.params.virtual.enabled;r.allowSlideNext=!0,r.allowSlidePrev=!0,r.updateSize(),r.updateSlides(),r.updateSlidesClasses();const l=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&r.isEnd&&!r.isBeginning&&!r.params.centeredSlides&&!l?r.slideTo(r.slides.length-1,0,!1,!0):r.params.loop&&!o?r.slideToLoop(r.realIndex,0,!1,!0):r.slideTo(r.activeIndex,0,!1,!0),r.autoplay&&r.autoplay.running&&r.autoplay.paused&&(clearTimeout(r.autoplay.resizeTimeout),r.autoplay.resizeTimeout=setTimeout(()=>{r.autoplay&&r.autoplay.running&&r.autoplay.paused&&r.autoplay.resume()},500)),r.allowSlidePrev=s,r.allowSlideNext=n,r.params.watchOverflow&&a!==r.snapGrid&&r.checkOverflow()}function FS(r){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&r.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(r.stopPropagation(),r.stopImmediatePropagation())))}function OS(){const r=this,{wrapperEl:e,rtlTranslate:t,enabled:n}=r;if(!n)return;r.previousTranslate=r.translate,r.isHorizontal()?r.translate=-e.scrollLeft:r.translate=-e.scrollTop,r.translate===0&&(r.translate=0),r.updateActiveIndex(),r.updateSlidesClasses();let s;const a=r.maxTranslate()-r.minTranslate();a===0?s=0:s=(r.translate-r.minTranslate())/a,s!==r.progress&&r.updateProgress(t?-r.translate:r.translate),r.emit("setTranslate",r.translate,!1)}function NS(r){const e=this;yc(e,r.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function US(){const r=this;r.documentTouchHandlerProceeded||(r.documentTouchHandlerProceeded=!0,r.params.touchReleaseOnEdges&&(r.el.style.touchAction="auto"))}const m0=(r,e)=>{const t=gn(),{params:n,el:s,wrapperEl:a,device:o}=r,l=!!n.nested,u=e==="on"?"addEventListener":"removeEventListener",h=e;t[u]("touchstart",r.onDocumentTouchStart,{passive:!1,capture:l}),s[u]("touchstart",r.onTouchStart,{passive:!1}),s[u]("pointerdown",r.onTouchStart,{passive:!1}),t[u]("touchmove",r.onTouchMove,{passive:!1,capture:l}),t[u]("pointermove",r.onTouchMove,{passive:!1,capture:l}),t[u]("touchend",r.onTouchEnd,{passive:!0}),t[u]("pointerup",r.onTouchEnd,{passive:!0}),t[u]("pointercancel",r.onTouchEnd,{passive:!0}),t[u]("touchcancel",r.onTouchEnd,{passive:!0}),t[u]("pointerout",r.onTouchEnd,{passive:!0}),t[u]("pointerleave",r.onTouchEnd,{passive:!0}),t[u]("contextmenu",r.onTouchEnd,{passive:!0}),(n.preventClicks||n.preventClicksPropagation)&&s[u]("click",r.onClick,!0),n.cssMode&&a[u]("scroll",r.onScroll),n.updateOnWindowResize?r[h](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",ap,!0):r[h]("observerUpdate",ap,!0),s[u]("load",r.onLoad,{capture:!0})};function kS(){const r=this,{params:e}=r;r.onTouchStart=RS.bind(r),r.onTouchMove=LS.bind(r),r.onTouchEnd=IS.bind(r),r.onDocumentTouchStart=US.bind(r),e.cssMode&&(r.onScroll=OS.bind(r)),r.onClick=FS.bind(r),r.onLoad=NS.bind(r),m0(r,"on")}function BS(){m0(this,"off")}var zS={attachEvents:kS,detachEvents:BS};const op=(r,e)=>r.grid&&e.grid&&e.grid.rows>1;function HS(){const r=this,{realIndex:e,initialized:t,params:n,el:s}=r,a=n.breakpoints;if(!a||a&&Object.keys(a).length===0)return;const o=r.getBreakpoint(a,r.params.breakpointsBase,r.el);if(!o||r.currentBreakpoint===o)return;const u=(o in a?a[o]:void 0)||r.originalParams,h=op(r,n),f=op(r,u),c=r.params.grabCursor,d=u.grabCursor,p=n.enabled;h&&!f?(s.classList.remove(`${n.containerModifierClass}grid`,`${n.containerModifierClass}grid-column`),r.emitContainerClasses()):!h&&f&&(s.classList.add(`${n.containerModifierClass}grid`),(u.grid.fill&&u.grid.fill==="column"||!u.grid.fill&&n.grid.fill==="column")&&s.classList.add(`${n.containerModifierClass}grid-column`),r.emitContainerClasses()),c&&!d?r.unsetGrabCursor():!c&&d&&r.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(x=>{if(typeof u[x]>"u")return;const b=n[x]&&n[x].enabled,T=u[x]&&u[x].enabled;b&&!T&&r[x].disable(),!b&&T&&r[x].enable()});const g=u.direction&&u.direction!==n.direction,v=n.loop&&(u.slidesPerView!==n.slidesPerView||g),_=n.loop;g&&t&&r.changeDirection(),Qn(r.params,u);const m=r.params.enabled,y=r.params.loop;Object.assign(r,{allowTouchMove:r.params.allowTouchMove,allowSlideNext:r.params.allowSlideNext,allowSlidePrev:r.params.allowSlidePrev}),p&&!m?r.disable():!p&&m&&r.enable(),r.currentBreakpoint=o,r.emit("_beforeBreakpoint",u),t&&(v?(r.loopDestroy(),r.loopCreate(e),r.updateSlides()):!_&&y?(r.loopCreate(e),r.updateSlides()):_&&!y&&r.loopDestroy()),r.emit("breakpoint",u)}function VS(r,e,t){if(e===void 0&&(e="window"),!r||e==="container"&&!t)return;let n=!1;const s=Ht(),a=e==="window"?s.innerHeight:t.clientHeight,o=Object.keys(r).map(l=>{if(typeof l=="string"&&l.indexOf("@")===0){const u=parseFloat(l.substr(1));return{value:a*u,point:l}}return{value:l,point:l}});o.sort((l,u)=>parseInt(l.value,10)-parseInt(u.value,10));for(let l=0;l<o.length;l+=1){const{point:u,value:h}=o[l];e==="window"?s.matchMedia(`(min-width: ${h}px)`).matches&&(n=u):h<=t.clientWidth&&(n=u)}return n||"max"}var GS={setBreakpoint:HS,getBreakpoint:VS};function WS(r,e){const t=[];return r.forEach(n=>{typeof n=="object"?Object.keys(n).forEach(s=>{n[s]&&t.push(e+s)}):typeof n=="string"&&t.push(e+n)}),t}function $S(){const r=this,{classNames:e,params:t,rtl:n,el:s,device:a}=r,o=WS(["initialized",t.direction,{"free-mode":r.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:n},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:a.android},{ios:a.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...o),s.classList.add(...e),r.emitContainerClasses()}function XS(){const r=this,{el:e,classNames:t}=r;e.classList.remove(...t),r.emitContainerClasses()}var qS={addClasses:$S,removeClasses:XS};function YS(){const r=this,{isLocked:e,params:t}=r,{slidesOffsetBefore:n}=t;if(n){const s=r.slides.length-1,a=r.slidesGrid[s]+r.slidesSizesGrid[s]+n*2;r.isLocked=r.size>a}else r.isLocked=r.snapGrid.length===1;t.allowSlideNext===!0&&(r.allowSlideNext=!r.isLocked),t.allowSlidePrev===!0&&(r.allowSlidePrev=!r.isLocked),e&&e!==r.isLocked&&(r.isEnd=!1),e!==r.isLocked&&r.emit(r.isLocked?"lock":"unlock")}var jS={checkOverflow:YS},lp={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function KS(r,e){return function(n){n===void 0&&(n={});const s=Object.keys(n)[0],a=n[s];if(typeof a!="object"||a===null){Qn(e,n);return}if(r[s]===!0&&(r[s]={enabled:!0}),s==="navigation"&&r[s]&&r[s].enabled&&!r[s].prevEl&&!r[s].nextEl&&(r[s].auto=!0),["pagination","scrollbar"].indexOf(s)>=0&&r[s]&&r[s].enabled&&!r[s].el&&(r[s].auto=!0),!(s in r&&"enabled"in a)){Qn(e,n);return}typeof r[s]=="object"&&!("enabled"in r[s])&&(r[s].enabled=!0),r[s]||(r[s]={enabled:!1}),Qn(e,n)}}const Uu={eventsEmitter:qb,update:rS,translate:uS,transition:pS,slide:SS,loop:MS,grabCursor:DS,events:zS,breakpoints:GS,checkOverflow:jS,classes:qS},ku={};class Rn{constructor(){let e,t;for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];s.length===1&&s[0].constructor&&Object.prototype.toString.call(s[0]).slice(8,-1)==="Object"?t=s[0]:[e,t]=s,t||(t={}),t=Qn({},t),e&&!t.el&&(t.el=e);const o=gn();if(t.el&&typeof t.el=="string"&&o.querySelectorAll(t.el).length>1){const f=[];return o.querySelectorAll(t.el).forEach(c=>{const d=Qn({},t,{el:c});f.push(new Rn(d))}),f}const l=this;l.__swiper__=!0,l.support=h0(),l.device=f0({userAgent:t.userAgent}),l.browser=Wb(),l.eventsListeners={},l.eventsAnyListeners=[],l.modules=[...l.__modules__],t.modules&&Array.isArray(t.modules)&&l.modules.push(...t.modules);const u={};l.modules.forEach(f=>{f({params:t,swiper:l,extendParams:KS(t,u),on:l.on.bind(l),once:l.once.bind(l),off:l.off.bind(l),emit:l.emit.bind(l)})});const h=Qn({},lp,u);return l.params=Qn({},h,ku,t),l.originalParams=Qn({},l.params),l.passedParams=Qn({},t),l.params&&l.params.on&&Object.keys(l.params.on).forEach(f=>{l.on(f,l.params.on[f])}),l.params&&l.params.onAny&&l.onAny(l.params.onAny),Object.assign(l,{enabled:l.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return l.params.direction==="horizontal"},isVertical(){return l.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:l.params.allowSlideNext,allowSlidePrev:l.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:l.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:l.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),l.emit("_swiper"),l.params.init&&l.init(),l}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:n}=this,s=pn(t,`.${n.slideClass}, swiper-slide`),a=nl(s[0]);return nl(e)-a}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:t,params:n}=e;e.slides=pn(t,`.${n.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const s=n.minTranslate(),o=(n.maxTranslate()-s)*e+s;n.translateTo(o,typeof t>"u"?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(n=>n.indexOf("swiper")===0||n.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(n=>n.indexOf("swiper-slide")===0||n.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(n=>{const s=e.getSlideClasses(n);t.push({slideEl:n,classNames:s}),e.emit("_slideClass",n,s)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const n=this,{params:s,slides:a,slidesGrid:o,slidesSizesGrid:l,size:u,activeIndex:h}=n;let f=1;if(typeof s.slidesPerView=="number")return s.slidesPerView;if(s.centeredSlides){let c=a[h]?Math.ceil(a[h].swiperSlideSize):0,d;for(let p=h+1;p<a.length;p+=1)a[p]&&!d&&(c+=Math.ceil(a[p].swiperSlideSize),f+=1,c>u&&(d=!0));for(let p=h-1;p>=0;p-=1)a[p]&&!d&&(c+=a[p].swiperSlideSize,f+=1,c>u&&(d=!0))}else if(e==="current")for(let c=h+1;c<a.length;c+=1)(t?o[c]+l[c]-o[h]<u:o[c]-o[h]<u)&&(f+=1);else for(let c=h-1;c>=0;c-=1)o[h]-o[c]<u&&(f+=1);return f}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;n.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&yc(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function s(){const o=e.rtlTranslate?e.translate*-1:e.translate,l=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(l),e.updateActiveIndex(),e.updateSlidesClasses()}let a;if(n.freeMode&&n.freeMode.enabled&&!n.cssMode)s(),n.autoHeight&&e.updateAutoHeight();else{if((n.slidesPerView==="auto"||n.slidesPerView>1)&&e.isEnd&&!n.centeredSlides){const o=e.virtual&&n.virtual.enabled?e.virtual.slides:e.slides;a=e.slideTo(o.length-1,0,!1,!0)}else a=e.slideTo(e.activeIndex,0,!1,!0);a||s()}n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const n=this,s=n.params.direction;return e||(e=s==="horizontal"?"vertical":"horizontal"),e===s||e!=="horizontal"&&e!=="vertical"||(n.el.classList.remove(`${n.params.containerModifierClass}${s}`),n.el.classList.add(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.forEach(a=>{e==="vertical"?a.style.width="":a.style.height=""}),n.emit("changeDirection"),t&&n.update()),n}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let n=e||t.params.el;if(typeof n=="string"&&(n=document.querySelector(n)),!n)return!1;n.swiper=t,n.parentNode&&n.parentNode.host&&n.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const s=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=n&&n.shadowRoot&&n.shadowRoot.querySelector?n.shadowRoot.querySelector(s()):pn(n,s())[0];return!o&&t.params.createElements&&(o=ri("div",t.params.wrapperClass),n.append(o),pn(n,`.${t.params.slideClass}`).forEach(l=>{o.append(l)})),Object.assign(t,{el:n,wrapperEl:o,slidesEl:t.isElement&&!n.parentNode.host.slideSlots?n.parentNode.host:o,hostEl:t.isElement?n.parentNode.host:n,mounted:!0,rtl:n.dir.toLowerCase()==="rtl"||Ur(n,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(n.dir.toLowerCase()==="rtl"||Ur(n,"direction")==="rtl"),wrongRTL:Ur(o,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const s=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&s.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),s.forEach(a=>{a.complete?yc(t,a):a.addEventListener("load",o=>{yc(t,o.target)})}),ih(t),t.initialized=!0,ih(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const n=this,{params:s,el:a,wrapperEl:o,slides:l}=n;return typeof n.params>"u"||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),s.loop&&n.loopDestroy(),t&&(n.removeClasses(),a.removeAttribute("style"),o.removeAttribute("style"),l&&l.length&&l.forEach(u=>{u.classList.remove(s.slideVisibleClass,s.slideFullyVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),u.removeAttribute("style"),u.removeAttribute("data-swiper-slide-index")})),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(u=>{n.off(u)}),e!==!1&&(n.el.swiper=null,Nb(n)),n.destroyed=!0),null}static extendDefaults(e){Qn(ku,e)}static get extendedDefaults(){return ku}static get defaults(){return lp}static installModule(e){Rn.prototype.__modules__||(Rn.prototype.__modules__=[]);const t=Rn.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>Rn.installModule(t)),Rn):(Rn.installModule(e),Rn)}}Object.keys(Uu).forEach(r=>{Object.keys(Uu[r]).forEach(e=>{Rn.prototype[e]=Uu[r][e]})});Rn.use([$b,Xb]);function ZS(r){let{swiper:e,extendParams:t,on:n,emit:s}=r;t({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}});let a;const o=gn();e.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]};const l=o.createElement("div");function u(g,v){const _=e.params.virtual;if(_.cache&&e.virtual.cache[v])return e.virtual.cache[v];let m;return _.renderSlide?(m=_.renderSlide.call(e,g,v),typeof m=="string"&&(l.innerHTML=m,m=l.children[0])):e.isElement?m=ri("swiper-slide"):m=ri("div",e.params.slideClass),m.setAttribute("data-swiper-slide-index",v),_.renderSlide||(m.innerHTML=g),_.cache&&(e.virtual.cache[v]=m),m}function h(g,v){const{slidesPerView:_,slidesPerGroup:m,centeredSlides:y,loop:x,initialSlide:b}=e.params;if(v&&!x&&b>0)return;const{addSlidesBefore:T,addSlidesAfter:E}=e.params.virtual,{from:M,to:A,slides:S,slidesGrid:w,offset:C}=e.virtual;e.params.cssMode||e.updateActiveIndex();const D=e.activeIndex||0;let R;e.rtlTranslate?R="right":R=e.isHorizontal()?"left":"top";let F,k;y?(F=Math.floor(_/2)+m+E,k=Math.floor(_/2)+m+T):(F=_+(m-1)+E,k=(x?_:m)+T);let z=D-k,O=D+F;x||(z=Math.max(z,0),O=Math.min(O,S.length-1));let I=(e.slidesGrid[z]||0)-(e.slidesGrid[0]||0);x&&D>=k?(z-=k,y||(I+=e.slidesGrid[0])):x&&D<k&&(z=-k,y&&(I+=e.slidesGrid[0])),Object.assign(e.virtual,{from:z,to:O,offset:I,slidesGrid:e.slidesGrid,slidesBefore:k,slidesAfter:F});function j(){e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),s("virtualUpdate")}if(M===z&&A===O&&!g){e.slidesGrid!==w&&I!==C&&e.slides.forEach(G=>{G.style[R]=`${I-Math.abs(e.cssOverflowAdjustment())}px`}),e.updateProgress(),s("virtualUpdate");return}if(e.params.virtual.renderExternal){e.params.virtual.renderExternal.call(e,{offset:I,from:z,to:O,slides:function(){const ee=[];for(let te=z;te<=O;te+=1)ee.push(S[te]);return ee}()}),e.params.virtual.renderExternalUpdate?j():s("virtualUpdate");return}const N=[],q=[],ne=G=>{let ee=G;return G<0?ee=S.length+G:ee>=S.length&&(ee=ee-S.length),ee};if(g)e.slides.filter(G=>G.matches(`.${e.params.slideClass}, swiper-slide`)).forEach(G=>{G.remove()});else for(let G=M;G<=A;G+=1)if(G<z||G>O){const ee=ne(G);e.slides.filter(te=>te.matches(`.${e.params.slideClass}[data-swiper-slide-index="${ee}"], swiper-slide[data-swiper-slide-index="${ee}"]`)).forEach(te=>{te.remove()})}const W=x?-S.length:0,H=x?S.length*2:S.length;for(let G=W;G<H;G+=1)if(G>=z&&G<=O){const ee=ne(G);typeof A>"u"||g?q.push(ee):(G>A&&q.push(ee),G<M&&N.push(ee))}if(q.forEach(G=>{e.slidesEl.append(u(S[G],G))}),x)for(let G=N.length-1;G>=0;G-=1){const ee=N[G];e.slidesEl.prepend(u(S[ee],ee))}else N.sort((G,ee)=>ee-G),N.forEach(G=>{e.slidesEl.prepend(u(S[G],G))});pn(e.slidesEl,".swiper-slide, swiper-slide").forEach(G=>{G.style[R]=`${I-Math.abs(e.cssOverflowAdjustment())}px`}),j()}function f(g){if(typeof g=="object"&&"length"in g)for(let v=0;v<g.length;v+=1)g[v]&&e.virtual.slides.push(g[v]);else e.virtual.slides.push(g);h(!0)}function c(g){const v=e.activeIndex;let _=v+1,m=1;if(Array.isArray(g)){for(let y=0;y<g.length;y+=1)g[y]&&e.virtual.slides.unshift(g[y]);_=v+g.length,m=g.length}else e.virtual.slides.unshift(g);if(e.params.virtual.cache){const y=e.virtual.cache,x={};Object.keys(y).forEach(b=>{const T=y[b],E=T.getAttribute("data-swiper-slide-index");E&&T.setAttribute("data-swiper-slide-index",parseInt(E,10)+m),x[parseInt(b,10)+m]=T}),e.virtual.cache=x}h(!0),e.slideTo(_,0)}function d(g){if(typeof g>"u"||g===null)return;let v=e.activeIndex;if(Array.isArray(g))for(let _=g.length-1;_>=0;_-=1)e.params.virtual.cache&&(delete e.virtual.cache[g[_]],Object.keys(e.virtual.cache).forEach(m=>{m>g&&(e.virtual.cache[m-1]=e.virtual.cache[m],e.virtual.cache[m-1].setAttribute("data-swiper-slide-index",m-1),delete e.virtual.cache[m])})),e.virtual.slides.splice(g[_],1),g[_]<v&&(v-=1),v=Math.max(v,0);else e.params.virtual.cache&&(delete e.virtual.cache[g],Object.keys(e.virtual.cache).forEach(_=>{_>g&&(e.virtual.cache[_-1]=e.virtual.cache[_],e.virtual.cache[_-1].setAttribute("data-swiper-slide-index",_-1),delete e.virtual.cache[_])})),e.virtual.slides.splice(g,1),g<v&&(v-=1),v=Math.max(v,0);h(!0),e.slideTo(v,0)}function p(){e.virtual.slides=[],e.params.virtual.cache&&(e.virtual.cache={}),h(!0),e.slideTo(0,0)}n("beforeInit",()=>{if(!e.params.virtual.enabled)return;let g;if(typeof e.passedParams.virtual.slides>"u"){const v=[...e.slidesEl.children].filter(_=>_.matches(`.${e.params.slideClass}, swiper-slide`));v&&v.length&&(e.virtual.slides=[...v],g=!0,v.forEach((_,m)=>{_.setAttribute("data-swiper-slide-index",m),e.virtual.cache[m]=_,_.remove()}))}g||(e.virtual.slides=e.params.virtual.slides),e.classNames.push(`${e.params.containerModifierClass}virtual`),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0,h(!1,!0)}),n("setTranslate",()=>{e.params.virtual.enabled&&(e.params.cssMode&&!e._immediateVirtual?(clearTimeout(a),a=setTimeout(()=>{h()},100)):h())}),n("init update resize",()=>{e.params.virtual.enabled&&e.params.cssMode&&bo(e.wrapperEl,"--swiper-virtual-size",`${e.virtualSize}px`)}),Object.assign(e.virtual,{appendSlide:f,prependSlide:c,removeSlide:d,removeAllSlides:p,update:h})}function JS(r){let{swiper:e,extendParams:t,on:n,emit:s}=r;const a=gn(),o=Ht();e.keyboard={enabled:!1},t({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}});function l(f){if(!e.enabled)return;const{rtlTranslate:c}=e;let d=f;d.originalEvent&&(d=d.originalEvent);const p=d.keyCode||d.charCode,g=e.params.keyboard.pageUpDown,v=g&&p===33,_=g&&p===34,m=p===37,y=p===39,x=p===38,b=p===40;if(!e.allowSlideNext&&(e.isHorizontal()&&y||e.isVertical()&&b||_)||!e.allowSlidePrev&&(e.isHorizontal()&&m||e.isVertical()&&x||v))return!1;if(!(d.shiftKey||d.altKey||d.ctrlKey||d.metaKey)&&!(a.activeElement&&a.activeElement.nodeName&&(a.activeElement.nodeName.toLowerCase()==="input"||a.activeElement.nodeName.toLowerCase()==="textarea"))){if(e.params.keyboard.onlyInViewport&&(v||_||m||y||x||b)){let T=!1;if(Us(e.el,`.${e.params.slideClass}, swiper-slide`).length>0&&Us(e.el,`.${e.params.slideActiveClass}`).length===0)return;const E=e.el,M=E.clientWidth,A=E.clientHeight,S=o.innerWidth,w=o.innerHeight,C=Bc(E);c&&(C.left-=E.scrollLeft);const D=[[C.left,C.top],[C.left+M,C.top],[C.left,C.top+A],[C.left+M,C.top+A]];for(let R=0;R<D.length;R+=1){const F=D[R];if(F[0]>=0&&F[0]<=S&&F[1]>=0&&F[1]<=w){if(F[0]===0&&F[1]===0)continue;T=!0}}if(!T)return}e.isHorizontal()?((v||_||m||y)&&(d.preventDefault?d.preventDefault():d.returnValue=!1),((_||y)&&!c||(v||m)&&c)&&e.slideNext(),((v||m)&&!c||(_||y)&&c)&&e.slidePrev()):((v||_||x||b)&&(d.preventDefault?d.preventDefault():d.returnValue=!1),(_||b)&&e.slideNext(),(v||x)&&e.slidePrev()),s("keyPress",p)}}function u(){e.keyboard.enabled||(a.addEventListener("keydown",l),e.keyboard.enabled=!0)}function h(){e.keyboard.enabled&&(a.removeEventListener("keydown",l),e.keyboard.enabled=!1)}n("init",()=>{e.params.keyboard.enabled&&u()}),n("destroy",()=>{e.keyboard.enabled&&h()}),Object.assign(e.keyboard,{enable:u,disable:h})}function QS(r){let{swiper:e,extendParams:t,on:n,emit:s}=r;const a=Ht();t({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),e.mousewheel={enabled:!1};let o,l=pi(),u;const h=[];function f(x){let M=0,A=0,S=0,w=0;return"detail"in x&&(A=x.detail),"wheelDelta"in x&&(A=-x.wheelDelta/120),"wheelDeltaY"in x&&(A=-x.wheelDeltaY/120),"wheelDeltaX"in x&&(M=-x.wheelDeltaX/120),"axis"in x&&x.axis===x.HORIZONTAL_AXIS&&(M=A,A=0),S=M*10,w=A*10,"deltaY"in x&&(w=x.deltaY),"deltaX"in x&&(S=x.deltaX),x.shiftKey&&!S&&(S=w,w=0),(S||w)&&x.deltaMode&&(x.deltaMode===1?(S*=40,w*=40):(S*=800,w*=800)),S&&!M&&(M=S<1?-1:1),w&&!A&&(A=w<1?-1:1),{spinX:M,spinY:A,pixelX:S,pixelY:w}}function c(){e.enabled&&(e.mouseEntered=!0)}function d(){e.enabled&&(e.mouseEntered=!1)}function p(x){return e.params.mousewheel.thresholdDelta&&x.delta<e.params.mousewheel.thresholdDelta||e.params.mousewheel.thresholdTime&&pi()-l<e.params.mousewheel.thresholdTime?!1:x.delta>=6&&pi()-l<60?!0:(x.direction<0?(!e.isEnd||e.params.loop)&&!e.animating&&(e.slideNext(),s("scroll",x.raw)):(!e.isBeginning||e.params.loop)&&!e.animating&&(e.slidePrev(),s("scroll",x.raw)),l=new a.Date().getTime(),!1)}function g(x){const b=e.params.mousewheel;if(x.direction<0){if(e.isEnd&&!e.params.loop&&b.releaseOnEdges)return!0}else if(e.isBeginning&&!e.params.loop&&b.releaseOnEdges)return!0;return!1}function v(x){let b=x,T=!0;if(!e.enabled||x.target.closest(`.${e.params.mousewheel.noMousewheelClass}`))return;const E=e.params.mousewheel;e.params.cssMode&&b.preventDefault();let M=e.el;e.params.mousewheel.eventsTarget!=="container"&&(M=document.querySelector(e.params.mousewheel.eventsTarget));const A=M&&M.contains(b.target);if(!e.mouseEntered&&!A&&!E.releaseOnEdges)return!0;b.originalEvent&&(b=b.originalEvent);let S=0;const w=e.rtlTranslate?-1:1,C=f(b);if(E.forceToAxis)if(e.isHorizontal())if(Math.abs(C.pixelX)>Math.abs(C.pixelY))S=-C.pixelX*w;else return!0;else if(Math.abs(C.pixelY)>Math.abs(C.pixelX))S=-C.pixelY;else return!0;else S=Math.abs(C.pixelX)>Math.abs(C.pixelY)?-C.pixelX*w:-C.pixelY;if(S===0)return!0;E.invert&&(S=-S);let D=e.getTranslate()+S*E.sensitivity;if(D>=e.minTranslate()&&(D=e.minTranslate()),D<=e.maxTranslate()&&(D=e.maxTranslate()),T=e.params.loop?!0:!(D===e.minTranslate()||D===e.maxTranslate()),T&&e.params.nested&&b.stopPropagation(),!e.params.freeMode||!e.params.freeMode.enabled){const R={time:pi(),delta:Math.abs(S),direction:Math.sign(S),raw:x};h.length>=2&&h.shift();const F=h.length?h[h.length-1]:void 0;if(h.push(R),F?(R.direction!==F.direction||R.delta>F.delta||R.time>F.time+150)&&p(R):p(R),g(R))return!0}else{const R={time:pi(),delta:Math.abs(S),direction:Math.sign(S)},F=u&&R.time<u.time+500&&R.delta<=u.delta&&R.direction===u.direction;if(!F){u=void 0;let k=e.getTranslate()+S*E.sensitivity;const z=e.isBeginning,O=e.isEnd;if(k>=e.minTranslate()&&(k=e.minTranslate()),k<=e.maxTranslate()&&(k=e.maxTranslate()),e.setTransition(0),e.setTranslate(k),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses(),(!z&&e.isBeginning||!O&&e.isEnd)&&e.updateSlidesClasses(),e.params.loop&&e.loopFix({direction:R.direction<0?"next":"prev",byMousewheel:!0}),e.params.freeMode.sticky){clearTimeout(o),o=void 0,h.length>=15&&h.shift();const I=h.length?h[h.length-1]:void 0,j=h[0];if(h.push(R),I&&(R.delta>I.delta||R.direction!==I.direction))h.splice(0);else if(h.length>=15&&R.time-j.time<500&&j.delta-R.delta>=1&&R.delta<=6){const N=S>0?.8:.2;u=R,h.splice(0),o=$s(()=>{e.slideToClosest(e.params.speed,!0,void 0,N)},0)}o||(o=$s(()=>{u=R,h.splice(0),e.slideToClosest(e.params.speed,!0,void 0,.5)},500))}if(F||s("scroll",b),e.params.autoplay&&e.params.autoplayDisableOnInteraction&&e.autoplay.stop(),E.releaseOnEdges&&(k===e.minTranslate()||k===e.maxTranslate()))return!0}}return b.preventDefault?b.preventDefault():b.returnValue=!1,!1}function _(x){let b=e.el;e.params.mousewheel.eventsTarget!=="container"&&(b=document.querySelector(e.params.mousewheel.eventsTarget)),b[x]("mouseenter",c),b[x]("mouseleave",d),b[x]("wheel",v)}function m(){return e.params.cssMode?(e.wrapperEl.removeEventListener("wheel",v),!0):e.mousewheel.enabled?!1:(_("addEventListener"),e.mousewheel.enabled=!0,!0)}function y(){return e.params.cssMode?(e.wrapperEl.addEventListener(event,v),!0):e.mousewheel.enabled?(_("removeEventListener"),e.mousewheel.enabled=!1,!0):!1}n("init",()=>{!e.params.mousewheel.enabled&&e.params.cssMode&&y(),e.params.mousewheel.enabled&&m()}),n("destroy",()=>{e.params.cssMode&&m(),e.mousewheel.enabled&&y()}),Object.assign(e.mousewheel,{enable:m,disable:y})}function Qh(r,e,t,n){return r.params.createElements&&Object.keys(n).forEach(s=>{if(!t[s]&&t.auto===!0){let a=pn(r.el,`.${n[s]}`)[0];a||(a=ri("div",n[s]),a.className=n[s],r.el.append(a)),t[s]=a,e[s]=a}}),t}function ew(r){let{swiper:e,extendParams:t,on:n,emit:s}=r;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function a(g){let v;return g&&typeof g=="string"&&e.isElement&&(v=e.el.querySelector(g),v)?v:(g&&(typeof g=="string"&&(v=[...document.querySelectorAll(g)]),e.params.uniqueNavElements&&typeof g=="string"&&v&&v.length>1&&e.el.querySelectorAll(g).length===1?v=e.el.querySelector(g):v&&v.length===1&&(v=v[0])),g&&!v?g:v)}function o(g,v){const _=e.params.navigation;g=at(g),g.forEach(m=>{m&&(m.classList[v?"add":"remove"](..._.disabledClass.split(" ")),m.tagName==="BUTTON"&&(m.disabled=v),e.params.watchOverflow&&e.enabled&&m.classList[e.isLocked?"add":"remove"](_.lockClass))})}function l(){const{nextEl:g,prevEl:v}=e.navigation;if(e.params.loop){o(v,!1),o(g,!1);return}o(v,e.isBeginning&&!e.params.rewind),o(g,e.isEnd&&!e.params.rewind)}function u(g){g.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),s("navigationPrev"))}function h(g){g.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),s("navigationNext"))}function f(){const g=e.params.navigation;if(e.params.navigation=Qh(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(g.nextEl||g.prevEl))return;let v=a(g.nextEl),_=a(g.prevEl);Object.assign(e.navigation,{nextEl:v,prevEl:_}),v=at(v),_=at(_);const m=(y,x)=>{y&&y.addEventListener("click",x==="next"?h:u),!e.enabled&&y&&y.classList.add(...g.lockClass.split(" "))};v.forEach(y=>m(y,"next")),_.forEach(y=>m(y,"prev"))}function c(){let{nextEl:g,prevEl:v}=e.navigation;g=at(g),v=at(v);const _=(m,y)=>{m.removeEventListener("click",y==="next"?h:u),m.classList.remove(...e.params.navigation.disabledClass.split(" "))};g.forEach(m=>_(m,"next")),v.forEach(m=>_(m,"prev"))}n("init",()=>{e.params.navigation.enabled===!1?p():(f(),l())}),n("toEdge fromEdge lock unlock",()=>{l()}),n("destroy",()=>{c()}),n("enable disable",()=>{let{nextEl:g,prevEl:v}=e.navigation;if(g=at(g),v=at(v),e.enabled){l();return}[...g,...v].filter(_=>!!_).forEach(_=>_.classList.add(e.params.navigation.lockClass))}),n("click",(g,v)=>{let{nextEl:_,prevEl:m}=e.navigation;_=at(_),m=at(m);const y=v.target;if(e.params.navigation.hideOnClick&&!m.includes(y)&&!_.includes(y)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===y||e.pagination.el.contains(y)))return;let x;_.length?x=_[0].classList.contains(e.params.navigation.hiddenClass):m.length&&(x=m[0].classList.contains(e.params.navigation.hiddenClass)),s(x===!0?"navigationShow":"navigationHide"),[..._,...m].filter(b=>!!b).forEach(b=>b.classList.toggle(e.params.navigation.hiddenClass))}});const d=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),f(),l()},p=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),c()};Object.assign(e.navigation,{enable:d,disable:p,update:l,init:f,destroy:c})}function sr(r){return r===void 0&&(r=""),`.${r.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function tw(r){let{swiper:e,extendParams:t,on:n,emit:s}=r;const a="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:m=>m,formatFractionTotal:m=>m,bulletClass:`${a}-bullet`,bulletActiveClass:`${a}-bullet-active`,modifierClass:`${a}-`,currentClass:`${a}-current`,totalClass:`${a}-total`,hiddenClass:`${a}-hidden`,progressbarFillClass:`${a}-progressbar-fill`,progressbarOppositeClass:`${a}-progressbar-opposite`,clickableClass:`${a}-clickable`,lockClass:`${a}-lock`,horizontalClass:`${a}-horizontal`,verticalClass:`${a}-vertical`,paginationDisabledClass:`${a}-disabled`}}),e.pagination={el:null,bullets:[]};let o,l=0;function u(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function h(m,y){const{bulletActiveClass:x}=e.params.pagination;m&&(m=m[`${y==="prev"?"previous":"next"}ElementSibling`],m&&(m.classList.add(`${x}-${y}`),m=m[`${y==="prev"?"previous":"next"}ElementSibling`],m&&m.classList.add(`${x}-${y}-${y}`)))}function f(m){const y=m.target.closest(sr(e.params.pagination.bulletClass));if(!y)return;m.preventDefault();const x=nl(y)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===x)return;e.slideToLoop(x)}else e.slideTo(x)}function c(){const m=e.rtl,y=e.params.pagination;if(u())return;let x=e.pagination.el;x=at(x);let b,T;const E=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,M=e.params.loop?Math.ceil(E/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(T=e.previousRealIndex||0,b=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(b=e.snapIndex,T=e.previousSnapIndex):(T=e.previousIndex||0,b=e.activeIndex||0),y.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const A=e.pagination.bullets;let S,w,C;if(y.dynamicBullets&&(o=nh(A[0],e.isHorizontal()?"width":"height"),x.forEach(D=>{D.style[e.isHorizontal()?"width":"height"]=`${o*(y.dynamicMainBullets+4)}px`}),y.dynamicMainBullets>1&&T!==void 0&&(l+=b-(T||0),l>y.dynamicMainBullets-1?l=y.dynamicMainBullets-1:l<0&&(l=0)),S=Math.max(b-l,0),w=S+(Math.min(A.length,y.dynamicMainBullets)-1),C=(w+S)/2),A.forEach(D=>{const R=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(F=>`${y.bulletActiveClass}${F}`)].map(F=>typeof F=="string"&&F.includes(" ")?F.split(" "):F).flat();D.classList.remove(...R)}),x.length>1)A.forEach(D=>{const R=nl(D);R===b?D.classList.add(...y.bulletActiveClass.split(" ")):e.isElement&&D.setAttribute("part","bullet"),y.dynamicBullets&&(R>=S&&R<=w&&D.classList.add(...`${y.bulletActiveClass}-main`.split(" ")),R===S&&h(D,"prev"),R===w&&h(D,"next"))});else{const D=A[b];if(D&&D.classList.add(...y.bulletActiveClass.split(" ")),e.isElement&&A.forEach((R,F)=>{R.setAttribute("part",F===b?"bullet-active":"bullet")}),y.dynamicBullets){const R=A[S],F=A[w];for(let k=S;k<=w;k+=1)A[k]&&A[k].classList.add(...`${y.bulletActiveClass}-main`.split(" "));h(R,"prev"),h(F,"next")}}if(y.dynamicBullets){const D=Math.min(A.length,y.dynamicMainBullets+4),R=(o*D-o)/2-C*o,F=m?"right":"left";A.forEach(k=>{k.style[e.isHorizontal()?F:"top"]=`${R}px`})}}x.forEach((A,S)=>{if(y.type==="fraction"&&(A.querySelectorAll(sr(y.currentClass)).forEach(w=>{w.textContent=y.formatFractionCurrent(b+1)}),A.querySelectorAll(sr(y.totalClass)).forEach(w=>{w.textContent=y.formatFractionTotal(M)})),y.type==="progressbar"){let w;y.progressbarOpposite?w=e.isHorizontal()?"vertical":"horizontal":w=e.isHorizontal()?"horizontal":"vertical";const C=(b+1)/M;let D=1,R=1;w==="horizontal"?D=C:R=C,A.querySelectorAll(sr(y.progressbarFillClass)).forEach(F=>{F.style.transform=`translate3d(0,0,0) scaleX(${D}) scaleY(${R})`,F.style.transitionDuration=`${e.params.speed}ms`})}y.type==="custom"&&y.renderCustom?(A.innerHTML=y.renderCustom(e,b+1,M),S===0&&s("paginationRender",A)):(S===0&&s("paginationRender",A),s("paginationUpdate",A)),e.params.watchOverflow&&e.enabled&&A.classList[e.isLocked?"add":"remove"](y.lockClass)})}function d(){const m=e.params.pagination;if(u())return;const y=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let x=e.pagination.el;x=at(x);let b="";if(m.type==="bullets"){let T=e.params.loop?Math.ceil(y/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&T>y&&(T=y);for(let E=0;E<T;E+=1)m.renderBullet?b+=m.renderBullet.call(e,E,m.bulletClass):b+=`<${m.bulletElement} ${e.isElement?'part="bullet"':""} class="${m.bulletClass}"></${m.bulletElement}>`}m.type==="fraction"&&(m.renderFraction?b=m.renderFraction.call(e,m.currentClass,m.totalClass):b=`<span class="${m.currentClass}"></span> / <span class="${m.totalClass}"></span>`),m.type==="progressbar"&&(m.renderProgressbar?b=m.renderProgressbar.call(e,m.progressbarFillClass):b=`<span class="${m.progressbarFillClass}"></span>`),e.pagination.bullets=[],x.forEach(T=>{m.type!=="custom"&&(T.innerHTML=b||""),m.type==="bullets"&&e.pagination.bullets.push(...T.querySelectorAll(sr(m.bulletClass)))}),m.type!=="custom"&&s("paginationRender",x[0])}function p(){e.params.pagination=Qh(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const m=e.params.pagination;if(!m.el)return;let y;typeof m.el=="string"&&e.isElement&&(y=e.el.querySelector(m.el)),!y&&typeof m.el=="string"&&(y=[...document.querySelectorAll(m.el)]),y||(y=m.el),!(!y||y.length===0)&&(e.params.uniqueNavElements&&typeof m.el=="string"&&Array.isArray(y)&&y.length>1&&(y=[...e.el.querySelectorAll(m.el)],y.length>1&&(y=y.filter(x=>Us(x,".swiper")[0]===e.el)[0])),Array.isArray(y)&&y.length===1&&(y=y[0]),Object.assign(e.pagination,{el:y}),y=at(y),y.forEach(x=>{m.type==="bullets"&&m.clickable&&x.classList.add(...(m.clickableClass||"").split(" ")),x.classList.add(m.modifierClass+m.type),x.classList.add(e.isHorizontal()?m.horizontalClass:m.verticalClass),m.type==="bullets"&&m.dynamicBullets&&(x.classList.add(`${m.modifierClass}${m.type}-dynamic`),l=0,m.dynamicMainBullets<1&&(m.dynamicMainBullets=1)),m.type==="progressbar"&&m.progressbarOpposite&&x.classList.add(m.progressbarOppositeClass),m.clickable&&x.addEventListener("click",f),e.enabled||x.classList.add(m.lockClass)}))}function g(){const m=e.params.pagination;if(u())return;let y=e.pagination.el;y&&(y=at(y),y.forEach(x=>{x.classList.remove(m.hiddenClass),x.classList.remove(m.modifierClass+m.type),x.classList.remove(e.isHorizontal()?m.horizontalClass:m.verticalClass),m.clickable&&(x.classList.remove(...(m.clickableClass||"").split(" ")),x.removeEventListener("click",f))})),e.pagination.bullets&&e.pagination.bullets.forEach(x=>x.classList.remove(...m.bulletActiveClass.split(" ")))}n("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const m=e.params.pagination;let{el:y}=e.pagination;y=at(y),y.forEach(x=>{x.classList.remove(m.horizontalClass,m.verticalClass),x.classList.add(e.isHorizontal()?m.horizontalClass:m.verticalClass)})}),n("init",()=>{e.params.pagination.enabled===!1?_():(p(),d(),c())}),n("activeIndexChange",()=>{typeof e.snapIndex>"u"&&c()}),n("snapIndexChange",()=>{c()}),n("snapGridLengthChange",()=>{d(),c()}),n("destroy",()=>{g()}),n("enable disable",()=>{let{el:m}=e.pagination;m&&(m=at(m),m.forEach(y=>y.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),n("lock unlock",()=>{c()}),n("click",(m,y)=>{const x=y.target,b=at(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&b&&b.length>0&&!x.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&x===e.navigation.nextEl||e.navigation.prevEl&&x===e.navigation.prevEl))return;const T=b[0].classList.contains(e.params.pagination.hiddenClass);s(T===!0?"paginationShow":"paginationHide"),b.forEach(E=>E.classList.toggle(e.params.pagination.hiddenClass))}});const v=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:m}=e.pagination;m&&(m=at(m),m.forEach(y=>y.classList.remove(e.params.pagination.paginationDisabledClass))),p(),d(),c()},_=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:m}=e.pagination;m&&(m=at(m),m.forEach(y=>y.classList.add(e.params.pagination.paginationDisabledClass))),g()};Object.assign(e.pagination,{enable:v,disable:_,render:d,update:c,init:p,destroy:g})}function nw(r){let{swiper:e,extendParams:t,on:n,emit:s}=r;const a=gn();let o=!1,l=null,u=null,h,f,c,d;t({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),e.scrollbar={el:null,dragEl:null};function p(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:D,rtlTranslate:R}=e,{dragEl:F,el:k}=D,z=e.params.scrollbar,O=e.params.loop?e.progressLoop:e.progress;let I=f,j=(c-f)*O;R?(j=-j,j>0?(I=f-j,j=0):-j+f>c&&(I=c+j)):j<0?(I=f+j,j=0):j+f>c&&(I=c-j),e.isHorizontal()?(F.style.transform=`translate3d(${j}px, 0, 0)`,F.style.width=`${I}px`):(F.style.transform=`translate3d(0px, ${j}px, 0)`,F.style.height=`${I}px`),z.hide&&(clearTimeout(l),k.style.opacity=1,l=setTimeout(()=>{k.style.opacity=0,k.style.transitionDuration="400ms"},1e3))}function g(D){!e.params.scrollbar.el||!e.scrollbar.el||(e.scrollbar.dragEl.style.transitionDuration=`${D}ms`)}function v(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:D}=e,{dragEl:R,el:F}=D;R.style.width="",R.style.height="",c=e.isHorizontal()?F.offsetWidth:F.offsetHeight,d=e.size/(e.virtualSize+e.params.slidesOffsetBefore-(e.params.centeredSlides?e.snapGrid[0]:0)),e.params.scrollbar.dragSize==="auto"?f=c*d:f=parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?R.style.width=`${f}px`:R.style.height=`${f}px`,d>=1?F.style.display="none":F.style.display="",e.params.scrollbar.hide&&(F.style.opacity=0),e.params.watchOverflow&&e.enabled&&D.el.classList[e.isLocked?"add":"remove"](e.params.scrollbar.lockClass)}function _(D){return e.isHorizontal()?D.clientX:D.clientY}function m(D){const{scrollbar:R,rtlTranslate:F}=e,{el:k}=R;let z;z=(_(D)-Bc(k)[e.isHorizontal()?"left":"top"]-(h!==null?h:f/2))/(c-f),z=Math.max(Math.min(z,1),0),F&&(z=1-z);const O=e.minTranslate()+(e.maxTranslate()-e.minTranslate())*z;e.updateProgress(O),e.setTranslate(O),e.updateActiveIndex(),e.updateSlidesClasses()}function y(D){const R=e.params.scrollbar,{scrollbar:F,wrapperEl:k}=e,{el:z,dragEl:O}=F;o=!0,h=D.target===O?_(D)-D.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,D.preventDefault(),D.stopPropagation(),k.style.transitionDuration="100ms",O.style.transitionDuration="100ms",m(D),clearTimeout(u),z.style.transitionDuration="0ms",R.hide&&(z.style.opacity=1),e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="none"),s("scrollbarDragStart",D)}function x(D){const{scrollbar:R,wrapperEl:F}=e,{el:k,dragEl:z}=R;o&&(D.preventDefault&&D.cancelable?D.preventDefault():D.returnValue=!1,m(D),F.style.transitionDuration="0ms",k.style.transitionDuration="0ms",z.style.transitionDuration="0ms",s("scrollbarDragMove",D))}function b(D){const R=e.params.scrollbar,{scrollbar:F,wrapperEl:k}=e,{el:z}=F;o&&(o=!1,e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="",k.style.transitionDuration=""),R.hide&&(clearTimeout(u),u=$s(()=>{z.style.opacity=0,z.style.transitionDuration="400ms"},1e3)),s("scrollbarDragEnd",D),R.snapOnRelease&&e.slideToClosest())}function T(D){const{scrollbar:R,params:F}=e,k=R.el;if(!k)return;const z=k,O=F.passiveListeners?{passive:!1,capture:!1}:!1,I=F.passiveListeners?{passive:!0,capture:!1}:!1;if(!z)return;const j=D==="on"?"addEventListener":"removeEventListener";z[j]("pointerdown",y,O),a[j]("pointermove",x,O),a[j]("pointerup",b,I)}function E(){!e.params.scrollbar.el||!e.scrollbar.el||T("on")}function M(){!e.params.scrollbar.el||!e.scrollbar.el||T("off")}function A(){const{scrollbar:D,el:R}=e;e.params.scrollbar=Qh(e,e.originalParams.scrollbar,e.params.scrollbar,{el:"swiper-scrollbar"});const F=e.params.scrollbar;if(!F.el)return;let k;if(typeof F.el=="string"&&e.isElement&&(k=e.el.querySelector(F.el)),!k&&typeof F.el=="string"){if(k=a.querySelectorAll(F.el),!k.length)return}else k||(k=F.el);e.params.uniqueNavElements&&typeof F.el=="string"&&k.length>1&&R.querySelectorAll(F.el).length===1&&(k=R.querySelector(F.el)),k.length>0&&(k=k[0]),k.classList.add(e.isHorizontal()?F.horizontalClass:F.verticalClass);let z;k&&(z=k.querySelector(sr(e.params.scrollbar.dragClass)),z||(z=ri("div",e.params.scrollbar.dragClass),k.append(z))),Object.assign(D,{el:k,dragEl:z}),F.draggable&&E(),k&&k.classList[e.enabled?"remove":"add"](...Mr(e.params.scrollbar.lockClass))}function S(){const D=e.params.scrollbar,R=e.scrollbar.el;R&&R.classList.remove(...Mr(e.isHorizontal()?D.horizontalClass:D.verticalClass)),M()}n("changeDirection",()=>{if(!e.scrollbar||!e.scrollbar.el)return;const D=e.params.scrollbar;let{el:R}=e.scrollbar;R=at(R),R.forEach(F=>{F.classList.remove(D.horizontalClass,D.verticalClass),F.classList.add(e.isHorizontal()?D.horizontalClass:D.verticalClass)})}),n("init",()=>{e.params.scrollbar.enabled===!1?C():(A(),v(),p())}),n("update resize observerUpdate lock unlock changeDirection",()=>{v()}),n("setTranslate",()=>{p()}),n("setTransition",(D,R)=>{g(R)}),n("enable disable",()=>{const{el:D}=e.scrollbar;D&&D.classList[e.enabled?"remove":"add"](...Mr(e.params.scrollbar.lockClass))}),n("destroy",()=>{S()});const w=()=>{e.el.classList.remove(...Mr(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.remove(...Mr(e.params.scrollbar.scrollbarDisabledClass)),A(),v(),p()},C=()=>{e.el.classList.add(...Mr(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.add(...Mr(e.params.scrollbar.scrollbarDisabledClass)),S()};Object.assign(e.scrollbar,{enable:w,disable:C,updateSize:v,setTranslate:p,init:A,destroy:S})}function iw(r){let{swiper:e,extendParams:t,on:n}=r;t({parallax:{enabled:!1}});const s="[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]",a=(u,h)=>{const{rtl:f}=e,c=f?-1:1,d=u.getAttribute("data-swiper-parallax")||"0";let p=u.getAttribute("data-swiper-parallax-x"),g=u.getAttribute("data-swiper-parallax-y");const v=u.getAttribute("data-swiper-parallax-scale"),_=u.getAttribute("data-swiper-parallax-opacity"),m=u.getAttribute("data-swiper-parallax-rotate");if(p||g?(p=p||"0",g=g||"0"):e.isHorizontal()?(p=d,g="0"):(g=d,p="0"),p.indexOf("%")>=0?p=`${parseInt(p,10)*h*c}%`:p=`${p*h*c}px`,g.indexOf("%")>=0?g=`${parseInt(g,10)*h}%`:g=`${g*h}px`,typeof _<"u"&&_!==null){const x=_-(_-1)*(1-Math.abs(h));u.style.opacity=x}let y=`translate3d(${p}, ${g}, 0px)`;if(typeof v<"u"&&v!==null){const x=v-(v-1)*(1-Math.abs(h));y+=` scale(${x})`}if(m&&typeof m<"u"&&m!==null){const x=m*h*-1;y+=` rotate(${x}deg)`}u.style.transform=y},o=()=>{const{el:u,slides:h,progress:f,snapGrid:c,isElement:d}=e,p=pn(u,s);e.isElement&&p.push(...pn(e.hostEl,s)),p.forEach(g=>{a(g,f)}),h.forEach((g,v)=>{let _=g.progress;e.params.slidesPerGroup>1&&e.params.slidesPerView!=="auto"&&(_+=Math.ceil(v/2)-f*(c.length-1)),_=Math.min(Math.max(_,-1),1),g.querySelectorAll(`${s}, [data-swiper-parallax-rotate]`).forEach(m=>{a(m,_)})})},l=function(u){u===void 0&&(u=e.params.speed);const{el:h,hostEl:f}=e,c=[...h.querySelectorAll(s)];e.isElement&&c.push(...f.querySelectorAll(s)),c.forEach(d=>{let p=parseInt(d.getAttribute("data-swiper-parallax-duration"),10)||u;u===0&&(p=0),d.style.transitionDuration=`${p}ms`})};n("beforeInit",()=>{e.params.parallax.enabled&&(e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)}),n("init",()=>{e.params.parallax.enabled&&o()}),n("setTranslate",()=>{e.params.parallax.enabled&&o()}),n("setTransition",(u,h)=>{e.params.parallax.enabled&&l(h)})}function rw(r){let{swiper:e,extendParams:t,on:n,emit:s}=r;const a=Ht();t({zoom:{enabled:!1,limitToOriginalSize:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),e.zoom={enabled:!1};let o=1,l=!1,u,h;const f=[],c={originX:0,originY:0,slideEl:void 0,slideWidth:void 0,slideHeight:void 0,imageEl:void 0,imageWrapEl:void 0,maxRatio:3},d={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},p={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0};let g=1;Object.defineProperty(e.zoom,"scale",{get(){return g},set(q){if(g!==q){const ne=c.imageEl,W=c.slideEl;s("zoomChange",q,ne,W)}g=q}});function v(){if(f.length<2)return 1;const q=f[0].pageX,ne=f[0].pageY,W=f[1].pageX,H=f[1].pageY;return Math.sqrt((W-q)**2+(H-ne)**2)}function _(){const q=e.params.zoom,ne=c.imageWrapEl.getAttribute("data-swiper-zoom")||q.maxRatio;if(q.limitToOriginalSize&&c.imageEl&&c.imageEl.naturalWidth){const W=c.imageEl.naturalWidth/c.imageEl.offsetWidth;return Math.min(W,ne)}return ne}function m(){if(f.length<2)return{x:null,y:null};const q=c.imageEl.getBoundingClientRect();return[(f[0].pageX+(f[1].pageX-f[0].pageX)/2-q.x-a.scrollX)/o,(f[0].pageY+(f[1].pageY-f[0].pageY)/2-q.y-a.scrollY)/o]}function y(){return e.isElement?"swiper-slide":`.${e.params.slideClass}`}function x(q){const ne=y();return!!(q.target.matches(ne)||e.slides.filter(W=>W.contains(q.target)).length>0)}function b(q){const ne=`.${e.params.zoom.containerClass}`;return!!(q.target.matches(ne)||[...e.hostEl.querySelectorAll(ne)].filter(W=>W.contains(q.target)).length>0)}function T(q){if(q.pointerType==="mouse"&&f.splice(0,f.length),!x(q))return;const ne=e.params.zoom;if(u=!1,h=!1,f.push(q),!(f.length<2)){if(u=!0,c.scaleStart=v(),!c.slideEl){c.slideEl=q.target.closest(`.${e.params.slideClass}, swiper-slide`),c.slideEl||(c.slideEl=e.slides[e.activeIndex]);let W=c.slideEl.querySelector(`.${ne.containerClass}`);if(W&&(W=W.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),c.imageEl=W,W?c.imageWrapEl=Us(c.imageEl,`.${ne.containerClass}`)[0]:c.imageWrapEl=void 0,!c.imageWrapEl){c.imageEl=void 0;return}c.maxRatio=_()}if(c.imageEl){const[W,H]=m();c.originX=W,c.originY=H,c.imageEl.style.transitionDuration="0ms"}l=!0}}function E(q){if(!x(q))return;const ne=e.params.zoom,W=e.zoom,H=f.findIndex(G=>G.pointerId===q.pointerId);H>=0&&(f[H]=q),!(f.length<2)&&(h=!0,c.scaleMove=v(),c.imageEl&&(W.scale=c.scaleMove/c.scaleStart*o,W.scale>c.maxRatio&&(W.scale=c.maxRatio-1+(W.scale-c.maxRatio+1)**.5),W.scale<ne.minRatio&&(W.scale=ne.minRatio+1-(ne.minRatio-W.scale+1)**.5),c.imageEl.style.transform=`translate3d(0,0,0) scale(${W.scale})`))}function M(q){if(!x(q)||q.pointerType==="mouse"&&q.type==="pointerout")return;const ne=e.params.zoom,W=e.zoom,H=f.findIndex(G=>G.pointerId===q.pointerId);H>=0&&f.splice(H,1),!(!u||!h)&&(u=!1,h=!1,c.imageEl&&(W.scale=Math.max(Math.min(W.scale,c.maxRatio),ne.minRatio),c.imageEl.style.transitionDuration=`${e.params.speed}ms`,c.imageEl.style.transform=`translate3d(0,0,0) scale(${W.scale})`,o=W.scale,l=!1,W.scale>1&&c.slideEl?c.slideEl.classList.add(`${ne.zoomedSlideClass}`):W.scale<=1&&c.slideEl&&c.slideEl.classList.remove(`${ne.zoomedSlideClass}`),W.scale===1&&(c.originX=0,c.originY=0,c.slideEl=void 0)))}let A;function S(){e.touchEventsData.preventTouchMoveFromPointerMove=!1}function w(){clearTimeout(A),e.touchEventsData.preventTouchMoveFromPointerMove=!0,A=setTimeout(()=>{S()})}function C(q){const ne=e.device;if(!c.imageEl||d.isTouched)return;ne.android&&q.cancelable&&q.preventDefault(),d.isTouched=!0;const W=f.length>0?f[0]:q;d.touchesStart.x=W.pageX,d.touchesStart.y=W.pageY}function D(q){if(!x(q)||!b(q))return;const ne=e.zoom;if(!c.imageEl||!d.isTouched||!c.slideEl)return;d.isMoved||(d.width=c.imageEl.offsetWidth||c.imageEl.clientWidth,d.height=c.imageEl.offsetHeight||c.imageEl.clientHeight,d.startX=th(c.imageWrapEl,"x")||0,d.startY=th(c.imageWrapEl,"y")||0,c.slideWidth=c.slideEl.offsetWidth,c.slideHeight=c.slideEl.offsetHeight,c.imageWrapEl.style.transitionDuration="0ms");const W=d.width*ne.scale,H=d.height*ne.scale;if(W<c.slideWidth&&H<c.slideHeight){S();return}if(d.minX=Math.min(c.slideWidth/2-W/2,0),d.maxX=-d.minX,d.minY=Math.min(c.slideHeight/2-H/2,0),d.maxY=-d.minY,d.touchesCurrent.x=f.length>0?f[0].pageX:q.pageX,d.touchesCurrent.y=f.length>0?f[0].pageY:q.pageY,Math.max(Math.abs(d.touchesCurrent.x-d.touchesStart.x),Math.abs(d.touchesCurrent.y-d.touchesStart.y))>5&&(e.allowClick=!1),!d.isMoved&&!l){if(e.isHorizontal()&&(Math.floor(d.minX)===Math.floor(d.startX)&&d.touchesCurrent.x<d.touchesStart.x||Math.floor(d.maxX)===Math.floor(d.startX)&&d.touchesCurrent.x>d.touchesStart.x)){d.isTouched=!1,S();return}if(!e.isHorizontal()&&(Math.floor(d.minY)===Math.floor(d.startY)&&d.touchesCurrent.y<d.touchesStart.y||Math.floor(d.maxY)===Math.floor(d.startY)&&d.touchesCurrent.y>d.touchesStart.y)){d.isTouched=!1,S();return}}q.cancelable&&q.preventDefault(),q.stopPropagation(),w(),d.isMoved=!0;const ee=(ne.scale-o)/(c.maxRatio-e.params.zoom.minRatio),{originX:te,originY:pe}=c;d.currentX=d.touchesCurrent.x-d.touchesStart.x+d.startX+ee*(d.width-te*2),d.currentY=d.touchesCurrent.y-d.touchesStart.y+d.startY+ee*(d.height-pe*2),d.currentX<d.minX&&(d.currentX=d.minX+1-(d.minX-d.currentX+1)**.8),d.currentX>d.maxX&&(d.currentX=d.maxX-1+(d.currentX-d.maxX+1)**.8),d.currentY<d.minY&&(d.currentY=d.minY+1-(d.minY-d.currentY+1)**.8),d.currentY>d.maxY&&(d.currentY=d.maxY-1+(d.currentY-d.maxY+1)**.8),p.prevPositionX||(p.prevPositionX=d.touchesCurrent.x),p.prevPositionY||(p.prevPositionY=d.touchesCurrent.y),p.prevTime||(p.prevTime=Date.now()),p.x=(d.touchesCurrent.x-p.prevPositionX)/(Date.now()-p.prevTime)/2,p.y=(d.touchesCurrent.y-p.prevPositionY)/(Date.now()-p.prevTime)/2,Math.abs(d.touchesCurrent.x-p.prevPositionX)<2&&(p.x=0),Math.abs(d.touchesCurrent.y-p.prevPositionY)<2&&(p.y=0),p.prevPositionX=d.touchesCurrent.x,p.prevPositionY=d.touchesCurrent.y,p.prevTime=Date.now(),c.imageWrapEl.style.transform=`translate3d(${d.currentX}px, ${d.currentY}px,0)`}function R(){const q=e.zoom;if(!c.imageEl)return;if(!d.isTouched||!d.isMoved){d.isTouched=!1,d.isMoved=!1;return}d.isTouched=!1,d.isMoved=!1;let ne=300,W=300;const H=p.x*ne,G=d.currentX+H,ee=p.y*W,te=d.currentY+ee;p.x!==0&&(ne=Math.abs((G-d.currentX)/p.x)),p.y!==0&&(W=Math.abs((te-d.currentY)/p.y));const pe=Math.max(ne,W);d.currentX=G,d.currentY=te;const me=d.width*q.scale,_e=d.height*q.scale;d.minX=Math.min(c.slideWidth/2-me/2,0),d.maxX=-d.minX,d.minY=Math.min(c.slideHeight/2-_e/2,0),d.maxY=-d.minY,d.currentX=Math.max(Math.min(d.currentX,d.maxX),d.minX),d.currentY=Math.max(Math.min(d.currentY,d.maxY),d.minY),c.imageWrapEl.style.transitionDuration=`${pe}ms`,c.imageWrapEl.style.transform=`translate3d(${d.currentX}px, ${d.currentY}px,0)`}function F(){const q=e.zoom;c.slideEl&&e.activeIndex!==e.slides.indexOf(c.slideEl)&&(c.imageEl&&(c.imageEl.style.transform="translate3d(0,0,0) scale(1)"),c.imageWrapEl&&(c.imageWrapEl.style.transform="translate3d(0,0,0)"),c.slideEl.classList.remove(`${e.params.zoom.zoomedSlideClass}`),q.scale=1,o=1,c.slideEl=void 0,c.imageEl=void 0,c.imageWrapEl=void 0,c.originX=0,c.originY=0)}function k(q){const ne=e.zoom,W=e.params.zoom;if(!c.slideEl){q&&q.target&&(c.slideEl=q.target.closest(`.${e.params.slideClass}, swiper-slide`)),c.slideEl||(e.params.virtual&&e.params.virtual.enabled&&e.virtual?c.slideEl=pn(e.slidesEl,`.${e.params.slideActiveClass}`)[0]:c.slideEl=e.slides[e.activeIndex]);let le=c.slideEl.querySelector(`.${W.containerClass}`);le&&(le=le.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),c.imageEl=le,le?c.imageWrapEl=Us(c.imageEl,`.${W.containerClass}`)[0]:c.imageWrapEl=void 0}if(!c.imageEl||!c.imageWrapEl)return;e.params.cssMode&&(e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.touchAction="none"),c.slideEl.classList.add(`${W.zoomedSlideClass}`);let H,G,ee,te,pe,me,_e,V,ke,Ee,Xe,Ae,He,K,Ne,dt,B,P;typeof d.touchesStart.x>"u"&&q?(H=q.pageX,G=q.pageY):(H=d.touchesStart.x,G=d.touchesStart.y);const Q=typeof q=="number"?q:null;o===1&&Q&&(H=void 0,G=void 0);const oe=_();ne.scale=Q||oe,o=Q||oe,q&&!(o===1&&Q)?(B=c.slideEl.offsetWidth,P=c.slideEl.offsetHeight,ee=Bc(c.slideEl).left+a.scrollX,te=Bc(c.slideEl).top+a.scrollY,pe=ee+B/2-H,me=te+P/2-G,ke=c.imageEl.offsetWidth||c.imageEl.clientWidth,Ee=c.imageEl.offsetHeight||c.imageEl.clientHeight,Xe=ke*ne.scale,Ae=Ee*ne.scale,He=Math.min(B/2-Xe/2,0),K=Math.min(P/2-Ae/2,0),Ne=-He,dt=-K,_e=pe*ne.scale,V=me*ne.scale,_e<He&&(_e=He),_e>Ne&&(_e=Ne),V<K&&(V=K),V>dt&&(V=dt)):(_e=0,V=0),Q&&ne.scale===1&&(c.originX=0,c.originY=0),c.imageWrapEl.style.transitionDuration="300ms",c.imageWrapEl.style.transform=`translate3d(${_e}px, ${V}px,0)`,c.imageEl.style.transitionDuration="300ms",c.imageEl.style.transform=`translate3d(0,0,0) scale(${ne.scale})`}function z(){const q=e.zoom,ne=e.params.zoom;if(!c.slideEl){e.params.virtual&&e.params.virtual.enabled&&e.virtual?c.slideEl=pn(e.slidesEl,`.${e.params.slideActiveClass}`)[0]:c.slideEl=e.slides[e.activeIndex];let W=c.slideEl.querySelector(`.${ne.containerClass}`);W&&(W=W.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),c.imageEl=W,W?c.imageWrapEl=Us(c.imageEl,`.${ne.containerClass}`)[0]:c.imageWrapEl=void 0}!c.imageEl||!c.imageWrapEl||(e.params.cssMode&&(e.wrapperEl.style.overflow="",e.wrapperEl.style.touchAction=""),q.scale=1,o=1,c.imageWrapEl.style.transitionDuration="300ms",c.imageWrapEl.style.transform="translate3d(0,0,0)",c.imageEl.style.transitionDuration="300ms",c.imageEl.style.transform="translate3d(0,0,0) scale(1)",c.slideEl.classList.remove(`${ne.zoomedSlideClass}`),c.slideEl=void 0,c.originX=0,c.originY=0)}function O(q){const ne=e.zoom;ne.scale&&ne.scale!==1?z():k(q)}function I(){const q=e.params.passiveListeners?{passive:!0,capture:!1}:!1,ne=e.params.passiveListeners?{passive:!1,capture:!0}:!0;return{passiveListener:q,activeListenerWithCapture:ne}}function j(){const q=e.zoom;if(q.enabled)return;q.enabled=!0;const{passiveListener:ne,activeListenerWithCapture:W}=I();e.wrapperEl.addEventListener("pointerdown",T,ne),e.wrapperEl.addEventListener("pointermove",E,W),["pointerup","pointercancel","pointerout"].forEach(H=>{e.wrapperEl.addEventListener(H,M,ne)}),e.wrapperEl.addEventListener("pointermove",D,W)}function N(){const q=e.zoom;if(!q.enabled)return;q.enabled=!1;const{passiveListener:ne,activeListenerWithCapture:W}=I();e.wrapperEl.removeEventListener("pointerdown",T,ne),e.wrapperEl.removeEventListener("pointermove",E,W),["pointerup","pointercancel","pointerout"].forEach(H=>{e.wrapperEl.removeEventListener(H,M,ne)}),e.wrapperEl.removeEventListener("pointermove",D,W)}n("init",()=>{e.params.zoom.enabled&&j()}),n("destroy",()=>{N()}),n("touchStart",(q,ne)=>{e.zoom.enabled&&C(ne)}),n("touchEnd",(q,ne)=>{e.zoom.enabled&&R()}),n("doubleTap",(q,ne)=>{!e.animating&&e.params.zoom.enabled&&e.zoom.enabled&&e.params.zoom.toggle&&O(ne)}),n("transitionEnd",()=>{e.zoom.enabled&&e.params.zoom.enabled&&F()}),n("slideChange",()=>{e.zoom.enabled&&e.params.zoom.enabled&&e.params.cssMode&&F()}),Object.assign(e.zoom,{enable:j,disable:N,in:k,out:z,toggle:O})}function sw(r){let{swiper:e,extendParams:t,on:n}=r;t({controller:{control:void 0,inverse:!1,by:"slide"}}),e.controller={control:void 0};function s(h,f){const c=function(){let v,_,m;return(y,x)=>{for(_=-1,v=y.length;v-_>1;)m=v+_>>1,y[m]<=x?_=m:v=m;return v}}();this.x=h,this.y=f,this.lastIndex=h.length-1;let d,p;return this.interpolate=function(v){return v?(p=c(this.x,v),d=p-1,(v-this.x[d])*(this.y[p]-this.y[d])/(this.x[p]-this.x[d])+this.y[d]):0},this}function a(h){e.controller.spline=e.params.loop?new s(e.slidesGrid,h.slidesGrid):new s(e.snapGrid,h.snapGrid)}function o(h,f){const c=e.controller.control;let d,p;const g=e.constructor;function v(_){if(_.destroyed)return;const m=e.rtlTranslate?-e.translate:e.translate;e.params.controller.by==="slide"&&(a(_),p=-e.controller.spline.interpolate(-m)),(!p||e.params.controller.by==="container")&&(d=(_.maxTranslate()-_.minTranslate())/(e.maxTranslate()-e.minTranslate()),(Number.isNaN(d)||!Number.isFinite(d))&&(d=1),p=(m-e.minTranslate())*d+_.minTranslate()),e.params.controller.inverse&&(p=_.maxTranslate()-p),_.updateProgress(p),_.setTranslate(p,e),_.updateActiveIndex(),_.updateSlidesClasses()}if(Array.isArray(c))for(let _=0;_<c.length;_+=1)c[_]!==f&&c[_]instanceof g&&v(c[_]);else c instanceof g&&f!==c&&v(c)}function l(h,f){const c=e.constructor,d=e.controller.control;let p;function g(v){v.destroyed||(v.setTransition(h,e),h!==0&&(v.transitionStart(),v.params.autoHeight&&$s(()=>{v.updateAutoHeight()}),Bo(v.wrapperEl,()=>{d&&v.transitionEnd()})))}if(Array.isArray(d))for(p=0;p<d.length;p+=1)d[p]!==f&&d[p]instanceof c&&g(d[p]);else d instanceof c&&f!==d&&g(d)}function u(){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)}n("beforeInit",()=>{if(typeof window<"u"&&(typeof e.params.controller.control=="string"||e.params.controller.control instanceof HTMLElement)){const h=document.querySelector(e.params.controller.control);if(h&&h.swiper)e.controller.control=h.swiper;else if(h){const f=c=>{e.controller.control=c.detail[0],e.update(),h.removeEventListener("init",f)};h.addEventListener("init",f)}return}e.controller.control=e.params.controller.control}),n("update",()=>{u()}),n("resize",()=>{u()}),n("observerUpdate",()=>{u()}),n("setTranslate",(h,f,c)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTranslate(f,c)}),n("setTransition",(h,f,c)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTransition(f,c)}),Object.assign(e.controller,{setTranslate:o,setTransition:l})}function aw(r){let{swiper:e,extendParams:t,on:n}=r;t({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),e.a11y={clicked:!1};let s=null,a,o,l=new Date().getTime();function u(O){const I=s;I.length!==0&&(I.innerHTML="",I.innerHTML=O)}function h(O){const I=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(O).replace(/x/g,I)}function f(O){O=at(O),O.forEach(I=>{I.setAttribute("tabIndex","0")})}function c(O){O=at(O),O.forEach(I=>{I.setAttribute("tabIndex","-1")})}function d(O,I){O=at(O),O.forEach(j=>{j.setAttribute("role",I)})}function p(O,I){O=at(O),O.forEach(j=>{j.setAttribute("aria-roledescription",I)})}function g(O,I){O=at(O),O.forEach(j=>{j.setAttribute("aria-controls",I)})}function v(O,I){O=at(O),O.forEach(j=>{j.setAttribute("aria-label",I)})}function _(O,I){O=at(O),O.forEach(j=>{j.setAttribute("id",I)})}function m(O,I){O=at(O),O.forEach(j=>{j.setAttribute("aria-live",I)})}function y(O){O=at(O),O.forEach(I=>{I.setAttribute("aria-disabled",!0)})}function x(O){O=at(O),O.forEach(I=>{I.setAttribute("aria-disabled",!1)})}function b(O){if(O.keyCode!==13&&O.keyCode!==32)return;const I=e.params.a11y,j=O.target;if(!(e.pagination&&e.pagination.el&&(j===e.pagination.el||e.pagination.el.contains(O.target))&&!O.target.matches(sr(e.params.pagination.bulletClass)))){if(e.navigation&&e.navigation.prevEl&&e.navigation.nextEl){const N=at(e.navigation.prevEl);at(e.navigation.nextEl).includes(j)&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?u(I.lastSlideMessage):u(I.nextSlideMessage)),N.includes(j)&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?u(I.firstSlideMessage):u(I.prevSlideMessage))}e.pagination&&j.matches(sr(e.params.pagination.bulletClass))&&j.click()}}function T(){if(e.params.loop||e.params.rewind||!e.navigation)return;const{nextEl:O,prevEl:I}=e.navigation;I&&(e.isBeginning?(y(I),c(I)):(x(I),f(I))),O&&(e.isEnd?(y(O),c(O)):(x(O),f(O)))}function E(){return e.pagination&&e.pagination.bullets&&e.pagination.bullets.length}function M(){return E()&&e.params.pagination.clickable}function A(){const O=e.params.a11y;E()&&e.pagination.bullets.forEach(I=>{e.params.pagination.clickable&&(f(I),e.params.pagination.renderBullet||(d(I,"button"),v(I,O.paginationBulletMessage.replace(/\{\{index\}\}/,nl(I)+1)))),I.matches(sr(e.params.pagination.bulletActiveClass))?I.setAttribute("aria-current","true"):I.removeAttribute("aria-current")})}const S=(O,I,j)=>{f(O),O.tagName!=="BUTTON"&&(d(O,"button"),O.addEventListener("keydown",b)),v(O,j),g(O,I)},w=O=>{o&&o!==O.target&&!o.contains(O.target)&&(a=!0),e.a11y.clicked=!0},C=()=>{a=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.destroyed||(e.a11y.clicked=!1)})})},D=O=>{l=new Date().getTime()},R=O=>{if(e.a11y.clicked||new Date().getTime()-l<100)return;const I=O.target.closest(`.${e.params.slideClass}, swiper-slide`);if(!I||!e.slides.includes(I))return;o=I;const j=e.slides.indexOf(I)===e.activeIndex,N=e.params.watchSlidesProgress&&e.visibleSlides&&e.visibleSlides.includes(I);j||N||O.sourceCapabilities&&O.sourceCapabilities.firesTouchEvents||(e.isHorizontal()?e.el.scrollLeft=0:e.el.scrollTop=0,requestAnimationFrame(()=>{a||(e.slideTo(e.slides.indexOf(I),0),a=!1)}))},F=()=>{const O=e.params.a11y;O.itemRoleDescriptionMessage&&p(e.slides,O.itemRoleDescriptionMessage),O.slideRole&&d(e.slides,O.slideRole);const I=e.slides.length;O.slideLabelMessage&&e.slides.forEach((j,N)=>{const q=e.params.loop?parseInt(j.getAttribute("data-swiper-slide-index"),10):N,ne=O.slideLabelMessage.replace(/\{\{index\}\}/,q+1).replace(/\{\{slidesLength\}\}/,I);v(j,ne)})},k=()=>{const O=e.params.a11y;e.el.append(s);const I=e.el;O.containerRoleDescriptionMessage&&p(I,O.containerRoleDescriptionMessage),O.containerMessage&&v(I,O.containerMessage);const j=e.wrapperEl,N=O.id||j.getAttribute("id")||`swiper-wrapper-${h(16)}`,q=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";_(j,N),m(j,q),F();let{nextEl:ne,prevEl:W}=e.navigation?e.navigation:{};ne=at(ne),W=at(W),ne&&ne.forEach(G=>S(G,N,O.nextSlideMessage)),W&&W.forEach(G=>S(G,N,O.prevSlideMessage)),M()&&at(e.pagination.el).forEach(ee=>{ee.addEventListener("keydown",b)}),gn().addEventListener("visibilitychange",D),e.el.addEventListener("focus",R,!0),e.el.addEventListener("focus",R,!0),e.el.addEventListener("pointerdown",w,!0),e.el.addEventListener("pointerup",C,!0)};function z(){s&&s.remove();let{nextEl:O,prevEl:I}=e.navigation?e.navigation:{};O=at(O),I=at(I),O&&O.forEach(N=>N.removeEventListener("keydown",b)),I&&I.forEach(N=>N.removeEventListener("keydown",b)),M()&&at(e.pagination.el).forEach(q=>{q.removeEventListener("keydown",b)}),gn().removeEventListener("visibilitychange",D),e.el.removeEventListener("focus",R,!0),e.el.removeEventListener("pointerdown",w,!0),e.el.removeEventListener("pointerup",C,!0)}n("beforeInit",()=>{s=ri("span",e.params.a11y.notificationClass),s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true")}),n("afterInit",()=>{e.params.a11y.enabled&&k()}),n("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{e.params.a11y.enabled&&F()}),n("fromEdge toEdge afterInit lock unlock",()=>{e.params.a11y.enabled&&T()}),n("paginationUpdate",()=>{e.params.a11y.enabled&&A()}),n("destroy",()=>{e.params.a11y.enabled&&z()})}function ow(r){let{swiper:e,extendParams:t,on:n}=r;t({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let s=!1,a={};const o=p=>p.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),l=p=>{const g=Ht();let v;p?v=new URL(p):v=g.location;const _=v.pathname.slice(1).split("/").filter(b=>b!==""),m=_.length,y=_[m-2],x=_[m-1];return{key:y,value:x}},u=(p,g)=>{const v=Ht();if(!s||!e.params.history.enabled)return;let _;e.params.url?_=new URL(e.params.url):_=v.location;const m=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${g}"]`):e.slides[g];let y=o(m.getAttribute("data-history"));if(e.params.history.root.length>0){let b=e.params.history.root;b[b.length-1]==="/"&&(b=b.slice(0,b.length-1)),y=`${b}/${p?`${p}/`:""}${y}`}else _.pathname.includes(p)||(y=`${p?`${p}/`:""}${y}`);e.params.history.keepQuery&&(y+=_.search);const x=v.history.state;x&&x.value===y||(e.params.history.replaceState?v.history.replaceState({value:y},null,y):v.history.pushState({value:y},null,y))},h=(p,g,v)=>{if(g)for(let _=0,m=e.slides.length;_<m;_+=1){const y=e.slides[_];if(o(y.getAttribute("data-history"))===g){const b=e.getSlideIndex(y);e.slideTo(b,p,v)}}else e.slideTo(0,p,v)},f=()=>{a=l(e.params.url),h(e.params.speed,a.value,!1)},c=()=>{const p=Ht();if(e.params.history){if(!p.history||!p.history.pushState){e.params.history.enabled=!1,e.params.hashNavigation.enabled=!0;return}if(s=!0,a=l(e.params.url),!a.key&&!a.value){e.params.history.replaceState||p.addEventListener("popstate",f);return}h(0,a.value,e.params.runCallbacksOnInit),e.params.history.replaceState||p.addEventListener("popstate",f)}},d=()=>{const p=Ht();e.params.history.replaceState||p.removeEventListener("popstate",f)};n("init",()=>{e.params.history.enabled&&c()}),n("destroy",()=>{e.params.history.enabled&&d()}),n("transitionEnd _freeModeNoMomentumRelease",()=>{s&&u(e.params.history.key,e.activeIndex)}),n("slideChange",()=>{s&&e.params.cssMode&&u(e.params.history.key,e.activeIndex)})}function lw(r){let{swiper:e,extendParams:t,emit:n,on:s}=r,a=!1;const o=gn(),l=Ht();t({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(d,p){if(e.virtual&&e.params.virtual.enabled){const g=e.slides.filter(_=>_.getAttribute("data-hash")===p)[0];return g?parseInt(g.getAttribute("data-swiper-slide-index"),10):0}return e.getSlideIndex(pn(e.slidesEl,`.${e.params.slideClass}[data-hash="${p}"], swiper-slide[data-hash="${p}"]`)[0])}}});const u=()=>{n("hashChange");const d=o.location.hash.replace("#",""),p=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${e.activeIndex}"]`):e.slides[e.activeIndex],g=p?p.getAttribute("data-hash"):"";if(d!==g){const v=e.params.hashNavigation.getSlideIndex(e,d);if(typeof v>"u"||Number.isNaN(v))return;e.slideTo(v)}},h=()=>{if(!a||!e.params.hashNavigation.enabled)return;const d=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${e.activeIndex}"]`):e.slides[e.activeIndex],p=d?d.getAttribute("data-hash")||d.getAttribute("data-history"):"";e.params.hashNavigation.replaceState&&l.history&&l.history.replaceState?(l.history.replaceState(null,null,`#${p}`||""),n("hashSet")):(o.location.hash=p||"",n("hashSet"))},f=()=>{if(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)return;a=!0;const d=o.location.hash.replace("#","");if(d){const g=e.params.hashNavigation.getSlideIndex(e,d);e.slideTo(g||0,0,e.params.runCallbacksOnInit,!0)}e.params.hashNavigation.watchState&&l.addEventListener("hashchange",u)},c=()=>{e.params.hashNavigation.watchState&&l.removeEventListener("hashchange",u)};s("init",()=>{e.params.hashNavigation.enabled&&f()}),s("destroy",()=>{e.params.hashNavigation.enabled&&c()}),s("transitionEnd _freeModeNoMomentumRelease",()=>{a&&h()}),s("slideChange",()=>{a&&e.params.cssMode&&h()})}function cw(r){let{swiper:e,extendParams:t,on:n,emit:s,params:a}=r;e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let o,l,u=a&&a.autoplay?a.autoplay.delay:3e3,h=a&&a.autoplay?a.autoplay.delay:3e3,f,c=new Date().getTime(),d,p,g,v,_,m,y;function x(I){!e||e.destroyed||!e.wrapperEl||I.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",x),!y&&w())}const b=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?d=!0:d&&(h=f,d=!1);const I=e.autoplay.paused?f:c+h-new Date().getTime();e.autoplay.timeLeft=I,s("autoplayTimeLeft",I,I/u),l=requestAnimationFrame(()=>{b()})},T=()=>{let I;return e.virtual&&e.params.virtual.enabled?I=e.slides.filter(N=>N.classList.contains("swiper-slide-active"))[0]:I=e.slides[e.activeIndex],I?parseInt(I.getAttribute("data-swiper-autoplay"),10):void 0},E=I=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(l),b();let j=typeof I>"u"?e.params.autoplay.delay:I;u=e.params.autoplay.delay,h=e.params.autoplay.delay;const N=T();!Number.isNaN(N)&&N>0&&typeof I>"u"&&(j=N,u=N,h=N),f=j;const q=e.params.speed,ne=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(q,!0,!0),s("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,q,!0,!0),s("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(q,!0,!0),s("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,q,!0,!0),s("autoplay")),e.params.cssMode&&(c=new Date().getTime(),requestAnimationFrame(()=>{E()})))};return j>0?(clearTimeout(o),o=setTimeout(()=>{ne()},j)):requestAnimationFrame(()=>{ne()}),j},M=()=>{c=new Date().getTime(),e.autoplay.running=!0,E(),s("autoplayStart")},A=()=>{e.autoplay.running=!1,clearTimeout(o),cancelAnimationFrame(l),s("autoplayStop")},S=(I,j)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(o),I||(m=!0);const N=()=>{s("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",x):w()};if(e.autoplay.paused=!0,j){_&&(f=e.params.autoplay.delay),_=!1,N();return}f=(f||e.params.autoplay.delay)-(new Date().getTime()-c),!(e.isEnd&&f<0&&!e.params.loop)&&(f<0&&(f=0),N())},w=()=>{e.isEnd&&f<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(c=new Date().getTime(),m?(m=!1,E(f)):E(),e.autoplay.paused=!1,s("autoplayResume"))},C=()=>{if(e.destroyed||!e.autoplay.running)return;const I=gn();I.visibilityState==="hidden"&&(m=!0,S(!0)),I.visibilityState==="visible"&&w()},D=I=>{I.pointerType==="mouse"&&(m=!0,y=!0,!(e.animating||e.autoplay.paused)&&S(!0))},R=I=>{I.pointerType==="mouse"&&(y=!1,e.autoplay.paused&&w())},F=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",D),e.el.addEventListener("pointerleave",R))},k=()=>{e.el.removeEventListener("pointerenter",D),e.el.removeEventListener("pointerleave",R)},z=()=>{gn().addEventListener("visibilitychange",C)},O=()=>{gn().removeEventListener("visibilitychange",C)};n("init",()=>{e.params.autoplay.enabled&&(F(),z(),M())}),n("destroy",()=>{k(),O(),e.autoplay.running&&A()}),n("_freeModeStaticRelease",()=>{(g||m)&&w()}),n("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?A():S(!0,!0)}),n("beforeTransitionStart",(I,j,N)=>{e.destroyed||!e.autoplay.running||(N||!e.params.autoplay.disableOnInteraction?S(!0,!0):A())}),n("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){A();return}p=!0,g=!1,m=!1,v=setTimeout(()=>{m=!0,g=!0,S(!0)},200)}}),n("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!p)){if(clearTimeout(v),clearTimeout(o),e.params.autoplay.disableOnInteraction){g=!1,p=!1;return}g&&e.params.cssMode&&w(),g=!1,p=!1}}),n("slideChange",()=>{e.destroyed||!e.autoplay.running||(_=!0)}),Object.assign(e.autoplay,{start:M,stop:A,pause:S,resume:w})}function uw(r){let{swiper:e,extendParams:t,on:n}=r;t({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let s=!1,a=!1;e.thumbs={swiper:null};function o(){const h=e.thumbs.swiper;if(!h||h.destroyed)return;const f=h.clickedIndex,c=h.clickedSlide;if(c&&c.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof f>"u"||f===null)return;let d;h.params.loop?d=parseInt(h.clickedSlide.getAttribute("data-swiper-slide-index"),10):d=f,e.params.loop?e.slideToLoop(d):e.slideTo(d)}function l(){const{thumbs:h}=e.params;if(s)return!1;s=!0;const f=e.constructor;if(h.swiper instanceof f)e.thumbs.swiper=h.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update();else if(xo(h.swiper)){const c=Object.assign({},h.swiper);Object.assign(c,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new f(c),a=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",o),!0}function u(h){const f=e.thumbs.swiper;if(!f||f.destroyed)return;const c=f.params.slidesPerView==="auto"?f.slidesPerViewDynamic():f.params.slidesPerView;let d=1;const p=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(d=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(d=1),d=Math.floor(d),f.slides.forEach(_=>_.classList.remove(p)),f.params.loop||f.params.virtual&&f.params.virtual.enabled)for(let _=0;_<d;_+=1)pn(f.slidesEl,`[data-swiper-slide-index="${e.realIndex+_}"]`).forEach(m=>{m.classList.add(p)});else for(let _=0;_<d;_+=1)f.slides[e.realIndex+_]&&f.slides[e.realIndex+_].classList.add(p);const g=e.params.thumbs.autoScrollOffset,v=g&&!f.params.loop;if(e.realIndex!==f.realIndex||v){const _=f.activeIndex;let m,y;if(f.params.loop){const x=f.slides.filter(b=>b.getAttribute("data-swiper-slide-index")===`${e.realIndex}`)[0];m=f.slides.indexOf(x),y=e.activeIndex>e.previousIndex?"next":"prev"}else m=e.realIndex,y=m>e.previousIndex?"next":"prev";v&&(m+=y==="next"?g:-1*g),f.visibleSlidesIndexes&&f.visibleSlidesIndexes.indexOf(m)<0&&(f.params.centeredSlides?m>_?m=m-Math.floor(c/2)+1:m=m+Math.floor(c/2)-1:m>_&&f.params.slidesPerGroup,f.slideTo(m,h?0:void 0))}}n("beforeInit",()=>{const{thumbs:h}=e.params;if(!(!h||!h.swiper))if(typeof h.swiper=="string"||h.swiper instanceof HTMLElement){const f=gn(),c=()=>{const p=typeof h.swiper=="string"?f.querySelector(h.swiper):h.swiper;if(p&&p.swiper)h.swiper=p.swiper,l(),u(!0);else if(p){const g=v=>{h.swiper=v.detail[0],p.removeEventListener("init",g),l(),u(!0),h.swiper.update(),e.update()};p.addEventListener("init",g)}return p},d=()=>{if(e.destroyed)return;c()||requestAnimationFrame(d)};requestAnimationFrame(d)}else l(),u(!0)}),n("slideChange update resize observerUpdate",()=>{u()}),n("setTransition",(h,f)=>{const c=e.thumbs.swiper;!c||c.destroyed||c.setTransition(f)}),n("beforeDestroy",()=>{const h=e.thumbs.swiper;!h||h.destroyed||a&&h.destroy()}),Object.assign(e.thumbs,{init:l,update:u})}function dw(r){let{swiper:e,extendParams:t,emit:n,once:s}=r;t({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function a(){if(e.params.cssMode)return;const u=e.getTranslate();e.setTranslate(u),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function o(){if(e.params.cssMode)return;const{touchEventsData:u,touches:h}=e;u.velocities.length===0&&u.velocities.push({position:h[e.isHorizontal()?"startX":"startY"],time:u.touchStartTime}),u.velocities.push({position:h[e.isHorizontal()?"currentX":"currentY"],time:pi()})}function l(u){let{currentPos:h}=u;if(e.params.cssMode)return;const{params:f,wrapperEl:c,rtlTranslate:d,snapGrid:p,touchEventsData:g}=e,_=pi()-g.touchStartTime;if(h<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(h>-e.maxTranslate()){e.slides.length<p.length?e.slideTo(p.length-1):e.slideTo(e.slides.length-1);return}if(f.freeMode.momentum){if(g.velocities.length>1){const A=g.velocities.pop(),S=g.velocities.pop(),w=A.position-S.position,C=A.time-S.time;e.velocity=w/C,e.velocity/=2,Math.abs(e.velocity)<f.freeMode.minimumVelocity&&(e.velocity=0),(C>150||pi()-A.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=f.freeMode.momentumVelocityRatio,g.velocities.length=0;let m=1e3*f.freeMode.momentumRatio;const y=e.velocity*m;let x=e.translate+y;d&&(x=-x);let b=!1,T;const E=Math.abs(e.velocity)*20*f.freeMode.momentumBounceRatio;let M;if(x<e.maxTranslate())f.freeMode.momentumBounce?(x+e.maxTranslate()<-E&&(x=e.maxTranslate()-E),T=e.maxTranslate(),b=!0,g.allowMomentumBounce=!0):x=e.maxTranslate(),f.loop&&f.centeredSlides&&(M=!0);else if(x>e.minTranslate())f.freeMode.momentumBounce?(x-e.minTranslate()>E&&(x=e.minTranslate()+E),T=e.minTranslate(),b=!0,g.allowMomentumBounce=!0):x=e.minTranslate(),f.loop&&f.centeredSlides&&(M=!0);else if(f.freeMode.sticky){let A;for(let S=0;S<p.length;S+=1)if(p[S]>-x){A=S;break}Math.abs(p[A]-x)<Math.abs(p[A-1]-x)||e.swipeDirection==="next"?x=p[A]:x=p[A-1],x=-x}if(M&&s("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(d?m=Math.abs((-x-e.translate)/e.velocity):m=Math.abs((x-e.translate)/e.velocity),f.freeMode.sticky){const A=Math.abs((d?-x:x)-e.translate),S=e.slidesSizesGrid[e.activeIndex];A<S?m=f.speed:A<2*S?m=f.speed*1.5:m=f.speed*2.5}}else if(f.freeMode.sticky){e.slideToClosest();return}f.freeMode.momentumBounce&&b?(e.updateProgress(T),e.setTransition(m),e.setTranslate(x),e.transitionStart(!0,e.swipeDirection),e.animating=!0,Bo(c,()=>{!e||e.destroyed||!g.allowMomentumBounce||(n("momentumBounce"),e.setTransition(f.speed),setTimeout(()=>{e.setTranslate(T),Bo(c,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(n("_freeModeNoMomentumRelease"),e.updateProgress(x),e.setTransition(m),e.setTranslate(x),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,Bo(c,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(x),e.updateActiveIndex(),e.updateSlidesClasses()}else if(f.freeMode.sticky){e.slideToClosest();return}else f.freeMode&&n("_freeModeNoMomentumRelease");(!f.freeMode.momentum||_>=f.longSwipesMs)&&(n("_freeModeStaticRelease"),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:a,onTouchMove:o,onTouchEnd:l}})}function hw(r){let{swiper:e,extendParams:t,on:n}=r;t({grid:{rows:1,fill:"column"}});let s,a,o,l;const u=()=>{let v=e.params.spaceBetween;return typeof v=="string"&&v.indexOf("%")>=0?v=parseFloat(v.replace("%",""))/100*e.size:typeof v=="string"&&(v=parseFloat(v)),v},h=v=>{const{slidesPerView:_}=e.params,{rows:m,fill:y}=e.params.grid,x=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:v.length;o=Math.floor(x/m),Math.floor(x/m)===x/m?s=x:s=Math.ceil(x/m)*m,_!=="auto"&&y==="row"&&(s=Math.max(s,_*m)),a=s/m},f=()=>{e.slides&&e.slides.forEach(v=>{v.swiperSlideGridSet&&(v.style.height="",v.style[e.getDirectionLabel("margin-top")]="")})},c=(v,_,m)=>{const{slidesPerGroup:y}=e.params,x=u(),{rows:b,fill:T}=e.params.grid,E=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:m.length;let M,A,S;if(T==="row"&&y>1){const w=Math.floor(v/(y*b)),C=v-b*y*w,D=w===0?y:Math.min(Math.ceil((E-w*b*y)/b),y);S=Math.floor(C/D),A=C-S*D+w*y,M=A+S*s/b,_.style.order=M}else T==="column"?(A=Math.floor(v/b),S=v-A*b,(A>o||A===o&&S===b-1)&&(S+=1,S>=b&&(S=0,A+=1))):(S=Math.floor(v/a),A=v-S*a);_.row=S,_.column=A,_.style.height=`calc((100% - ${(b-1)*x}px) / ${b})`,_.style[e.getDirectionLabel("margin-top")]=S!==0?x&&`${x}px`:"",_.swiperSlideGridSet=!0},d=(v,_)=>{const{centeredSlides:m,roundLengths:y}=e.params,x=u(),{rows:b}=e.params.grid;if(e.virtualSize=(v+x)*s,e.virtualSize=Math.ceil(e.virtualSize/b)-x,e.params.cssMode||(e.wrapperEl.style[e.getDirectionLabel("width")]=`${e.virtualSize+x}px`),m){const T=[];for(let E=0;E<_.length;E+=1){let M=_[E];y&&(M=Math.floor(M)),_[E]<e.virtualSize+_[0]&&T.push(M)}_.splice(0,_.length),_.push(...T)}},p=()=>{l=e.params.grid&&e.params.grid.rows>1},g=()=>{const{params:v,el:_}=e,m=v.grid&&v.grid.rows>1;l&&!m?(_.classList.remove(`${v.containerModifierClass}grid`,`${v.containerModifierClass}grid-column`),o=1,e.emitContainerClasses()):!l&&m&&(_.classList.add(`${v.containerModifierClass}grid`),v.grid.fill==="column"&&_.classList.add(`${v.containerModifierClass}grid-column`),e.emitContainerClasses()),l=m};n("init",p),n("update",g),e.grid={initSlides:h,unsetSlides:f,updateSlide:c,updateWrapperSize:d}}function fw(r){const e=this,{params:t,slidesEl:n}=e;t.loop&&e.loopDestroy();const s=a=>{if(typeof a=="string"){const o=document.createElement("div");o.innerHTML=a,n.append(o.children[0]),o.innerHTML=""}else n.append(a)};if(typeof r=="object"&&"length"in r)for(let a=0;a<r.length;a+=1)r[a]&&s(r[a]);else s(r);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update()}function pw(r){const e=this,{params:t,activeIndex:n,slidesEl:s}=e;t.loop&&e.loopDestroy();let a=n+1;const o=l=>{if(typeof l=="string"){const u=document.createElement("div");u.innerHTML=l,s.prepend(u.children[0]),u.innerHTML=""}else s.prepend(l)};if(typeof r=="object"&&"length"in r){for(let l=0;l<r.length;l+=1)r[l]&&o(r[l]);a=n+r.length}else o(r);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update(),e.slideTo(a,0,!1)}function mw(r,e){const t=this,{params:n,activeIndex:s,slidesEl:a}=t;let o=s;n.loop&&(o-=t.loopedSlides,t.loopDestroy(),t.recalcSlides());const l=t.slides.length;if(r<=0){t.prependSlide(e);return}if(r>=l){t.appendSlide(e);return}let u=o>r?o+1:o;const h=[];for(let f=l-1;f>=r;f-=1){const c=t.slides[f];c.remove(),h.unshift(c)}if(typeof e=="object"&&"length"in e){for(let f=0;f<e.length;f+=1)e[f]&&a.append(e[f]);u=o>r?o+e.length:o}else a.append(e);for(let f=0;f<h.length;f+=1)a.append(h[f]);t.recalcSlides(),n.loop&&t.loopCreate(),(!n.observer||t.isElement)&&t.update(),n.loop?t.slideTo(u+t.loopedSlides,0,!1):t.slideTo(u,0,!1)}function gw(r){const e=this,{params:t,activeIndex:n}=e;let s=n;t.loop&&(s-=e.loopedSlides,e.loopDestroy());let a=s,o;if(typeof r=="object"&&"length"in r){for(let l=0;l<r.length;l+=1)o=r[l],e.slides[o]&&e.slides[o].remove(),o<a&&(a-=1);a=Math.max(a,0)}else o=r,e.slides[o]&&e.slides[o].remove(),o<a&&(a-=1),a=Math.max(a,0);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update(),t.loop?e.slideTo(a+e.loopedSlides,0,!1):e.slideTo(a,0,!1)}function _w(){const r=this,e=[];for(let t=0;t<r.slides.length;t+=1)e.push(t);r.removeSlide(e)}function vw(r){let{swiper:e}=r;Object.assign(e,{appendSlide:fw.bind(e),prependSlide:pw.bind(e),addSlide:mw.bind(e),removeSlide:gw.bind(e),removeAllSlides:_w.bind(e)})}function Ka(r){const{effect:e,swiper:t,on:n,setTranslate:s,setTransition:a,overwriteParams:o,perspective:l,recreateShadows:u,getEffectParams:h}=r;n("beforeInit",()=>{if(t.params.effect!==e)return;t.classNames.push(`${t.params.containerModifierClass}${e}`),l&&l()&&t.classNames.push(`${t.params.containerModifierClass}3d`);const c=o?o():{};Object.assign(t.params,c),Object.assign(t.originalParams,c)}),n("setTranslate",()=>{t.params.effect===e&&s()}),n("setTransition",(c,d)=>{t.params.effect===e&&a(d)}),n("transitionEnd",()=>{if(t.params.effect===e&&u){if(!h||!h().slideShadows)return;t.slides.forEach(c=>{c.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(d=>d.remove())}),u()}});let f;n("virtualUpdate",()=>{t.params.effect===e&&(t.slides.length||(f=!0),requestAnimationFrame(()=>{f&&t.slides&&t.slides.length&&(s(),f=!1)}))})}function hl(r,e){const t=Ys(e);return t!==e&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function tu(r){let{swiper:e,duration:t,transformElements:n,allSlides:s}=r;const{activeIndex:a}=e,o=l=>l.parentElement?l.parentElement:e.slides.filter(h=>h.shadowRoot&&h.shadowRoot===l.parentNode)[0];if(e.params.virtualTranslate&&t!==0){let l=!1,u;s?u=n:u=n.filter(h=>{const f=h.classList.contains("swiper-slide-transform")?o(h):h;return e.getSlideIndex(f)===a}),u.forEach(h=>{Bo(h,()=>{if(l||!e||e.destroyed)return;l=!0,e.animating=!1;const f=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(f)})})}}function yw(r){let{swiper:e,extendParams:t,on:n}=r;t({fadeEffect:{crossFade:!1}}),Ka({effect:"fade",swiper:e,on:n,setTranslate:()=>{const{slides:o}=e,l=e.params.fadeEffect;for(let u=0;u<o.length;u+=1){const h=e.slides[u];let c=-h.swiperSlideOffset;e.params.virtualTranslate||(c-=e.translate);let d=0;e.isHorizontal()||(d=c,c=0);const p=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(h.progress),0):1+Math.min(Math.max(h.progress,-1),0),g=hl(l,h);g.style.opacity=p,g.style.transform=`translate3d(${c}px, ${d}px, 0px)`}},setTransition:o=>{const l=e.slides.map(u=>Ys(u));l.forEach(u=>{u.style.transitionDuration=`${o}ms`}),tu({swiper:e,duration:o,transformElements:l,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function xw(r){let{swiper:e,extendParams:t,on:n}=r;t({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});const s=(u,h,f)=>{let c=f?u.querySelector(".swiper-slide-shadow-left"):u.querySelector(".swiper-slide-shadow-top"),d=f?u.querySelector(".swiper-slide-shadow-right"):u.querySelector(".swiper-slide-shadow-bottom");c||(c=ri("div",`swiper-slide-shadow-cube swiper-slide-shadow-${f?"left":"top"}`.split(" ")),u.append(c)),d||(d=ri("div",`swiper-slide-shadow-cube swiper-slide-shadow-${f?"right":"bottom"}`.split(" ")),u.append(d)),c&&(c.style.opacity=Math.max(-h,0)),d&&(d.style.opacity=Math.max(h,0))};Ka({effect:"cube",swiper:e,on:n,setTranslate:()=>{const{el:u,wrapperEl:h,slides:f,width:c,height:d,rtlTranslate:p,size:g,browser:v}=e,_=e.params.cubeEffect,m=e.isHorizontal(),y=e.virtual&&e.params.virtual.enabled;let x=0,b;_.shadow&&(m?(b=e.wrapperEl.querySelector(".swiper-cube-shadow"),b||(b=ri("div","swiper-cube-shadow"),e.wrapperEl.append(b)),b.style.height=`${c}px`):(b=u.querySelector(".swiper-cube-shadow"),b||(b=ri("div","swiper-cube-shadow"),u.append(b))));for(let E=0;E<f.length;E+=1){const M=f[E];let A=E;y&&(A=parseInt(M.getAttribute("data-swiper-slide-index"),10));let S=A*90,w=Math.floor(S/360);p&&(S=-S,w=Math.floor(-S/360));const C=Math.max(Math.min(M.progress,1),-1);let D=0,R=0,F=0;A%4===0?(D=-w*4*g,F=0):(A-1)%4===0?(D=0,F=-w*4*g):(A-2)%4===0?(D=g+w*4*g,F=g):(A-3)%4===0&&(D=-g,F=3*g+g*4*w),p&&(D=-D),m||(R=D,D=0);const k=`rotateX(${m?0:-S}deg) rotateY(${m?S:0}deg) translate3d(${D}px, ${R}px, ${F}px)`;C<=1&&C>-1&&(x=A*90+C*90,p&&(x=-A*90-C*90),e.browser&&e.browser.need3dFix&&Math.abs(x)/90%2===1&&(x+=.001)),M.style.transform=k,_.slideShadows&&s(M,C,m)}if(h.style.transformOrigin=`50% 50% -${g/2}px`,h.style["-webkit-transform-origin"]=`50% 50% -${g/2}px`,_.shadow)if(m)b.style.transform=`translate3d(0px, ${c/2+_.shadowOffset}px, ${-c/2}px) rotateX(89.99deg) rotateZ(0deg) scale(${_.shadowScale})`;else{const E=Math.abs(x)-Math.floor(Math.abs(x)/90)*90,M=1.5-(Math.sin(E*2*Math.PI/360)/2+Math.cos(E*2*Math.PI/360)/2),A=_.shadowScale,S=_.shadowScale/M,w=_.shadowOffset;b.style.transform=`scale3d(${A}, 1, ${S}) translate3d(0px, ${d/2+w}px, ${-d/2/S}px) rotateX(-89.99deg)`}const T=(v.isSafari||v.isWebView)&&v.needPerspectiveFix?-g/2:0;h.style.transform=`translate3d(0px,0,${T}px) rotateX(${e.isHorizontal()?0:x}deg) rotateY(${e.isHorizontal()?-x:0}deg)`,h.style.setProperty("--swiper-cube-translate-z",`${T}px`)},setTransition:u=>{const{el:h,slides:f}=e;if(f.forEach(c=>{c.style.transitionDuration=`${u}ms`,c.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(d=>{d.style.transitionDuration=`${u}ms`})}),e.params.cubeEffect.shadow&&!e.isHorizontal()){const c=h.querySelector(".swiper-cube-shadow");c&&(c.style.transitionDuration=`${u}ms`)}},recreateShadows:()=>{const u=e.isHorizontal();e.slides.forEach(h=>{const f=Math.max(Math.min(h.progress,1),-1);s(h,f,u)})},getEffectParams:()=>e.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})}function Ga(r,e,t){const n=`swiper-slide-shadow${t?`-${t}`:""}${r?` swiper-slide-shadow-${r}`:""}`,s=Ys(e);let a=s.querySelector(`.${n.split(" ").join(".")}`);return a||(a=ri("div",n.split(" ")),s.append(a)),a}function bw(r){let{swiper:e,extendParams:t,on:n}=r;t({flipEffect:{slideShadows:!0,limitRotation:!0}});const s=(u,h)=>{let f=e.isHorizontal()?u.querySelector(".swiper-slide-shadow-left"):u.querySelector(".swiper-slide-shadow-top"),c=e.isHorizontal()?u.querySelector(".swiper-slide-shadow-right"):u.querySelector(".swiper-slide-shadow-bottom");f||(f=Ga("flip",u,e.isHorizontal()?"left":"top")),c||(c=Ga("flip",u,e.isHorizontal()?"right":"bottom")),f&&(f.style.opacity=Math.max(-h,0)),c&&(c.style.opacity=Math.max(h,0))};Ka({effect:"flip",swiper:e,on:n,setTranslate:()=>{const{slides:u,rtlTranslate:h}=e,f=e.params.flipEffect;for(let c=0;c<u.length;c+=1){const d=u[c];let p=d.progress;e.params.flipEffect.limitRotation&&(p=Math.max(Math.min(d.progress,1),-1));const g=d.swiperSlideOffset;let _=-180*p,m=0,y=e.params.cssMode?-g-e.translate:-g,x=0;e.isHorizontal()?h&&(_=-_):(x=y,y=0,m=-_,_=0),e.browser&&e.browser.need3dFix&&(Math.abs(_)/90%2===1&&(_+=.001),Math.abs(m)/90%2===1&&(m+=.001)),d.style.zIndex=-Math.abs(Math.round(p))+u.length,f.slideShadows&&s(d,p);const b=`translate3d(${y}px, ${x}px, 0px) rotateX(${m}deg) rotateY(${_}deg)`,T=hl(f,d);T.style.transform=b}},setTransition:u=>{const h=e.slides.map(f=>Ys(f));h.forEach(f=>{f.style.transitionDuration=`${u}ms`,f.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(c=>{c.style.transitionDuration=`${u}ms`})}),tu({swiper:e,duration:u,transformElements:h})},recreateShadows:()=>{e.params.flipEffect,e.slides.forEach(u=>{let h=u.progress;e.params.flipEffect.limitRotation&&(h=Math.max(Math.min(u.progress,1),-1)),s(u,h)})},getEffectParams:()=>e.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function Sw(r){let{swiper:e,extendParams:t,on:n}=r;t({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),Ka({effect:"coverflow",swiper:e,on:n,setTranslate:()=>{const{width:o,height:l,slides:u,slidesSizesGrid:h}=e,f=e.params.coverflowEffect,c=e.isHorizontal(),d=e.translate,p=c?-d+o/2:-d+l/2,g=c?f.rotate:-f.rotate,v=f.depth;for(let _=0,m=u.length;_<m;_+=1){const y=u[_],x=h[_],b=y.swiperSlideOffset,T=(p-b-x/2)/x,E=typeof f.modifier=="function"?f.modifier(T):T*f.modifier;let M=c?g*E:0,A=c?0:g*E,S=-v*Math.abs(E),w=f.stretch;typeof w=="string"&&w.indexOf("%")!==-1&&(w=parseFloat(f.stretch)/100*x);let C=c?0:w*E,D=c?w*E:0,R=1-(1-f.scale)*Math.abs(E);Math.abs(D)<.001&&(D=0),Math.abs(C)<.001&&(C=0),Math.abs(S)<.001&&(S=0),Math.abs(M)<.001&&(M=0),Math.abs(A)<.001&&(A=0),Math.abs(R)<.001&&(R=0),e.browser&&e.browser.need3dFix&&(Math.abs(M)/90%2===1&&(M+=.001),Math.abs(A)/90%2===1&&(A+=.001));const F=`translate3d(${D}px,${C}px,${S}px)  rotateX(${A}deg) rotateY(${M}deg) scale(${R})`,k=hl(f,y);if(k.style.transform=F,y.style.zIndex=-Math.abs(Math.round(E))+1,f.slideShadows){let z=c?y.querySelector(".swiper-slide-shadow-left"):y.querySelector(".swiper-slide-shadow-top"),O=c?y.querySelector(".swiper-slide-shadow-right"):y.querySelector(".swiper-slide-shadow-bottom");z||(z=Ga("coverflow",y,c?"left":"top")),O||(O=Ga("coverflow",y,c?"right":"bottom")),z&&(z.style.opacity=E>0?E:0),O&&(O.style.opacity=-E>0?-E:0)}}},setTransition:o=>{e.slides.map(u=>Ys(u)).forEach(u=>{u.style.transitionDuration=`${o}ms`,u.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>{h.style.transitionDuration=`${o}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}function ww(r){let{swiper:e,extendParams:t,on:n}=r;t({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});const s=l=>typeof l=="string"?l:`${l}px`;Ka({effect:"creative",swiper:e,on:n,setTranslate:()=>{const{slides:l,wrapperEl:u,slidesSizesGrid:h}=e,f=e.params.creativeEffect,{progressMultiplier:c}=f,d=e.params.centeredSlides;if(d){const p=h[0]/2-e.params.slidesOffsetBefore||0;u.style.transform=`translateX(calc(50% - ${p}px))`}for(let p=0;p<l.length;p+=1){const g=l[p],v=g.progress,_=Math.min(Math.max(g.progress,-f.limitProgress),f.limitProgress);let m=_;d||(m=Math.min(Math.max(g.originalProgress,-f.limitProgress),f.limitProgress));const y=g.swiperSlideOffset,x=[e.params.cssMode?-y-e.translate:-y,0,0],b=[0,0,0];let T=!1;e.isHorizontal()||(x[1]=x[0],x[0]=0);let E={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};_<0?(E=f.next,T=!0):_>0&&(E=f.prev,T=!0),x.forEach((R,F)=>{x[F]=`calc(${R}px + (${s(E.translate[F])} * ${Math.abs(_*c)}))`}),b.forEach((R,F)=>{let k=E.rotate[F]*Math.abs(_*c);e.browser&&e.browser.need3dFix&&Math.abs(k)/90%2===1&&(k+=.001),b[F]=k}),g.style.zIndex=-Math.abs(Math.round(v))+l.length;const M=x.join(", "),A=`rotateX(${b[0]}deg) rotateY(${b[1]}deg) rotateZ(${b[2]}deg)`,S=m<0?`scale(${1+(1-E.scale)*m*c})`:`scale(${1-(1-E.scale)*m*c})`,w=m<0?1+(1-E.opacity)*m*c:1-(1-E.opacity)*m*c,C=`translate3d(${M}) ${A} ${S}`;if(T&&E.shadow||!T){let R=g.querySelector(".swiper-slide-shadow");if(!R&&E.shadow&&(R=Ga("creative",g)),R){const F=f.shadowPerProgress?_*(1/f.limitProgress):_;R.style.opacity=Math.min(Math.max(Math.abs(F),0),1)}}const D=hl(f,g);D.style.transform=C,D.style.opacity=w,E.origin&&(D.style.transformOrigin=E.origin)}},setTransition:l=>{const u=e.slides.map(h=>Ys(h));u.forEach(h=>{h.style.transitionDuration=`${l}ms`,h.querySelectorAll(".swiper-slide-shadow").forEach(f=>{f.style.transitionDuration=`${l}ms`})}),tu({swiper:e,duration:l,transformElements:u,allSlides:!0})},perspective:()=>e.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})}function Ew(r){let{swiper:e,extendParams:t,on:n}=r;t({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),Ka({effect:"cards",swiper:e,on:n,setTranslate:()=>{const{slides:o,activeIndex:l,rtlTranslate:u}=e,h=e.params.cardsEffect,{startTranslate:f,isTouched:c}=e.touchEventsData,d=u?-e.translate:e.translate;for(let p=0;p<o.length;p+=1){const g=o[p],v=g.progress,_=Math.min(Math.max(v,-4),4);let m=g.swiperSlideOffset;e.params.centeredSlides&&!e.params.cssMode&&(e.wrapperEl.style.transform=`translateX(${e.minTranslate()}px)`),e.params.centeredSlides&&e.params.cssMode&&(m-=o[0].swiperSlideOffset);let y=e.params.cssMode?-m-e.translate:-m,x=0;const b=-100*Math.abs(_);let T=1,E=-h.perSlideRotate*_,M=h.perSlideOffset-Math.abs(_)*.75;const A=e.virtual&&e.params.virtual.enabled?e.virtual.from+p:p,S=(A===l||A===l-1)&&_>0&&_<1&&(c||e.params.cssMode)&&d<f,w=(A===l||A===l+1)&&_<0&&_>-1&&(c||e.params.cssMode)&&d>f;if(S||w){const F=(1-Math.abs((Math.abs(_)-.5)/.5))**.5;E+=-28*_*F,T+=-.5*F,M+=96*F,x=`${-25*F*Math.abs(_)}%`}if(_<0?y=`calc(${y}px ${u?"-":"+"} (${M*Math.abs(_)}%))`:_>0?y=`calc(${y}px ${u?"-":"+"} (-${M*Math.abs(_)}%))`:y=`${y}px`,!e.isHorizontal()){const F=x;x=y,y=F}const C=_<0?`${1+(1-T)*_}`:`${1-(1-T)*_}`,D=`
        translate3d(${y}, ${x}, ${b}px)
        rotateZ(${h.rotate?u?-E:E:0}deg)
        scale(${C})
      `;if(h.slideShadows){let F=g.querySelector(".swiper-slide-shadow");F||(F=Ga("cards",g)),F&&(F.style.opacity=Math.min(Math.max((Math.abs(_)-.5)/.5,0),1))}g.style.zIndex=-Math.abs(Math.round(v))+o.length;const R=hl(h,g);R.style.transform=D}},setTransition:o=>{const l=e.slides.map(u=>Ys(u));l.forEach(u=>{u.style.transitionDuration=`${o}ms`,u.querySelectorAll(".swiper-slide-shadow").forEach(h=>{h.style.transitionDuration=`${o}ms`})}),tu({swiper:e,duration:o,transformElements:l})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})}const Tw=[ZS,JS,QS,ew,tw,nw,iw,rw,sw,aw,ow,lw,cw,uw,dw,hw,vw,yw,xw,bw,Sw,ww,Ew];Rn.use(Tw);class Mw{constructor(e){this.container=e,this.faqs=[...this.container.querySelectorAll(".sp-faq-content")],this.products=[...this.container.querySelectorAll(".merch-collection-item")],this.init(),console.log("product")}init(){this.initSwiper(),this.initFAQ(),this.addEventListeners()}initSwiper(){const e=new Rn(".product-thumb-wrapper",{freeMode:!0,watchSlidesProgress:!0});new Rn(".product-wrapper",{direction:"horizontal",mousewheel:!0,keyboard:{enabled:!0},thumbs:{swiper:e},breakpoints:{480:{direction:"horizontal",pagination:{el:".swiper-pagination"}}}})}initFAQ(){let e=we.timeline();this.faqs.map(t=>{t.addEventListener("click",n=>{let s=t.querySelector(".sp-faq-answer"),a=t.querySelector(".accordion-vertical");t.classList.contains("active")?(e.to(s,{height:0}),e.to(a,{scaleY:1},"<"),t.classList.remove("active")):(e.to(s,{height:"auto"}),e.to(a,{scaleY:0},"<"),t.classList.add("active"))})})}addEventListeners(){this.products.forEach(e=>{let t=we.timeline({paused:!0});t.to(e.querySelector(".merch-visual-item:nth-child(1)"),{opacity:0,duration:.3}),t.to(e.querySelector(".merch-visual-item:nth-child(2)"),{opacity:1,duration:.3},"<0.1"),e.addEventListener("mouseenter",()=>{t.play()}),e.addEventListener("mouseleave",()=>{t.reverse()})})}}class rs{constructor(e){this.header=e,this.nav=this.header.querySelector(".nav"),this.navItems=[...this.nav.querySelectorAll(".nav-item")],this.navMobileMenu=this.header.querySelector(".nav-mobile-menu"),this.navLinksWrapper=this.header.querySelector(".nav-links-wrapper"),this.navLinks=[...this.navLinksWrapper.querySelectorAll(".nav-link")],this.init()}init(){this.initSplitting(),this.hoverAnimation(),this.showNavMobile()}initSplitting(){const e=[...this.header.querySelectorAll(".nav-link-text")],t=Xh({target:e,by:"chars"});this.header.querySelectorAll(".word").forEach(s=>{let a=document.createElement("span");a.classList.add("char-wrap"),s.parentNode.insertBefore(a,s),a.appendChild(s)}),this.chars=t.map(s=>s.chars)}hoverAnimation(){this.navLinks.forEach(e=>{let t=e.querySelector(".nav-link-text:nth-child(1)"),n=e.querySelector(".nav-link-text:nth-child(2)"),s=we.timeline({paused:!0,defaults:{duration:.7,ease:"power2.out"}});s.fromTo(t.querySelectorAll(".char:nth-child(odd)"),{yPercent:100},{yPercent:0}),s.fromTo(n.querySelectorAll(".char:nth-child(odd)"),{yPercent:0},{yPercent:-100},0),s.fromTo(t.querySelectorAll(".char:nth-child(even)"),{yPercent:0},{yPercent:100},0),s.fromTo(n.querySelectorAll(".char:nth-child(even)"),{yPercent:-100},{yPercent:0},0),e.addEventListener("mouseenter",()=>{s.restart()})})}showNavMobile(){this.navOpen=!1,this.tlShowNavMobile=we.timeline({paused:!0}),we.matchMedia().add("(max-width: 479px)",()=>{this.tlShowNavMobile.set(this.navLinksWrapper,{display:"grid"}),this.tlShowNavMobile.from(this.navLinksWrapper,{clipPath:"inset(100%)",duration:.75}),this.tlShowNavMobile.to(this.nav.querySelector(".nav-dot.middle"),{opacity:1,duration:.35},"<"),this.tlShowNavMobile.to(this.navMobileMenu,{rotate:180,duration:.5},"<")}),this.navMobileMenu.addEventListener("click",()=>{this.navOpen?this.tlShowNavMobile.reverse():this.tlShowNavMobile.play(),this.navOpen=!this.navOpen})}}class so{constructor(e){this.footer=e.querySelector(".footer"),this.donorLink=this.footer.querySelector(".donor-link"),this.patronClose=this.footer.querySelector(".patron-close"),this.init()}init(){this.showDonorInfo()}showDonorInfo(){let e=we.timeline({paused:!0});e.to(".patron-container",{display:"block",duration:.5}).from(".patron-content",{clipPath:"inset(100%)",duration:.5},"<"),this.donorLink.addEventListener("click",()=>{e.play()}),this.patronClose.addEventListener("click",()=>{e.reverse()})}}/*!
 * paths 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Aw=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,Cw=/(?:(-)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,Dw=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/ig,Pw=/(^[#\.][a-z]|[a-y][a-z])/i,Rw=Math.PI/180,Il=Math.sin,Fl=Math.cos,zo=Math.abs,ao=Math.sqrt,cp=function(e){return typeof e=="string"},g0=function(e){return typeof e=="number"},up=1e5,vr=function(e){return Math.round(e*up)/up||0};function Lw(r){r=cp(r)&&Pw.test(r)&&document.querySelector(r)||r;var e=r.getAttribute?r:0,t;return e&&(r=r.getAttribute("d"))?(e._gsPath||(e._gsPath={}),t=e._gsPath[r],t&&!t._dirty?t:e._gsPath[r]=dr(r)):r?cp(r)?dr(r):g0(r[0])?[r]:r:console.warn("Expecting a <path> element or an SVG path data string")}function So(r){var e=0,t;for(r.reverse();e<r.length;e+=2)t=r[e],r[e]=r[e+1],r[e+1]=t;r.reversed=!r.reversed}var Iw=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","path"),s=[].slice.call(e.attributes),a=s.length,o;for(t=","+t+",";--a>-1;)o=s[a].nodeName.toLowerCase(),t.indexOf(","+o+",")<0&&n.setAttributeNS(null,o,s[a].nodeValue);return n},Fw={rect:"rx,ry,x,y,width,height",circle:"r,cx,cy",ellipse:"rx,ry,cx,cy",line:"x1,x2,y1,y2"},Ow=function(e,t){for(var n=t?t.split(","):[],s={},a=n.length;--a>-1;)s[n[a]]=+e.getAttribute(n[a])||0;return s};function _0(r,e){var t=r.tagName.toLowerCase(),n=.552284749831,s,a,o,l,u,h,f,c,d,p,g,v,_,m,y,x,b,T,E,M,A,S;return t==="path"||!r.getBBox?r:(h=Iw(r,"x,y,width,height,cx,cy,rx,ry,r,x1,x2,y1,y2,points"),S=Ow(r,Fw[t]),t==="rect"?(l=S.rx,u=S.ry||l,a=S.x,o=S.y,p=S.width-l*2,g=S.height-u*2,l||u?(v=a+l*(1-n),_=a+l,m=_+p,y=m+l*n,x=m+l,b=o+u*(1-n),T=o+u,E=T+g,M=E+u*n,A=E+u,s="M"+x+","+T+" V"+E+" C"+[x,M,y,A,m,A,m-(m-_)/3,A,_+(m-_)/3,A,_,A,v,A,a,M,a,E,a,E-(E-T)/3,a,T+(E-T)/3,a,T,a,b,v,o,_,o,_+(m-_)/3,o,m-(m-_)/3,o,m,o,y,o,x,b,x,T].join(",")+"z"):s="M"+(a+p)+","+o+" v"+g+" h"+-p+" v"+-g+" h"+p+"z"):t==="circle"||t==="ellipse"?(t==="circle"?(l=u=S.r,c=l*n):(l=S.rx,u=S.ry,c=u*n),a=S.cx,o=S.cy,f=l*n,s="M"+(a+l)+","+o+" C"+[a+l,o+c,a+f,o+u,a,o+u,a-f,o+u,a-l,o+c,a-l,o,a-l,o-c,a-f,o-u,a,o-u,a+f,o-u,a+l,o-c,a+l,o].join(",")+"z"):t==="line"?s="M"+S.x1+","+S.y1+" L"+S.x2+","+S.y2:(t==="polyline"||t==="polygon")&&(d=(r.getAttribute("points")+"").match(Cw)||[],a=d.shift(),o=d.shift(),s="M"+a+","+o+" L"+d.join(","),t==="polygon"&&(s+=","+a+","+o+"z")),h.setAttribute("d",ks(h._gsRawPath=dr(s))),e&&r.parentNode&&(r.parentNode.insertBefore(h,r),r.parentNode.removeChild(r)),h)}function Nw(r,e,t,n,s,a,o){for(var l=r.length,u,h,f,c,d;--l>-1;)for(u=r[l],h=u.length,f=0;f<h;f+=2)c=u[f],d=u[f+1],u[f]=c*e+d*n+a,u[f+1]=c*t+d*s+o;return r._dirty=1,r}function Uw(r,e,t,n,s,a,o,l,u){if(!(r===l&&e===u)){t=zo(t),n=zo(n);var h=s%360*Rw,f=Fl(h),c=Il(h),d=Math.PI,p=d*2,g=(r-l)/2,v=(e-u)/2,_=f*g+c*v,m=-c*g+f*v,y=_*_,x=m*m,b=y/(t*t)+x/(n*n);b>1&&(t=ao(b)*t,n=ao(b)*n);var T=t*t,E=n*n,M=(T*E-T*x-E*y)/(T*x+E*y);M<0&&(M=0);var A=(a===o?-1:1)*ao(M),S=A*(t*m/n),w=A*-(n*_/t),C=(r+l)/2,D=(e+u)/2,R=C+(f*S-c*w),F=D+(c*S+f*w),k=(_-S)/t,z=(m-w)/n,O=(-_-S)/t,I=(-m-w)/n,j=k*k+z*z,N=(z<0?-1:1)*Math.acos(k/ao(j)),q=(k*I-z*O<0?-1:1)*Math.acos((k*O+z*I)/ao(j*(O*O+I*I)));isNaN(q)&&(q=d),!o&&q>0?q-=p:o&&q<0&&(q+=p),N%=p,q%=p;var ne=Math.ceil(zo(q)/(p/4)),W=[],H=q/ne,G=4/3*Il(H/2)/(1+Fl(H/2)),ee=f*t,te=c*t,pe=c*-n,me=f*n,_e;for(_e=0;_e<ne;_e++)s=N+_e*H,_=Fl(s),m=Il(s),k=Fl(s+=H),z=Il(s),W.push(_-G*m,m+G*_,k+G*z,z-G*k,k,z);for(_e=0;_e<W.length;_e+=2)_=W[_e],m=W[_e+1],W[_e]=_*ee+m*pe+R,W[_e+1]=_*te+m*me+F;return W[_e-2]=l,W[_e-1]=u,W}}function dr(r){var e=(r+"").replace(Dw,function(S){var w=+S;return w<1e-4&&w>-1e-4?0:w}).match(Aw)||[],t=[],n=0,s=0,a=2/3,o=e.length,l=0,u="ERROR: malformed path: "+r,h,f,c,d,p,g,v,_,m,y,x,b,T,E,M,A=function(w,C,D,R){y=(D-w)/3,x=(R-C)/3,v.push(w+y,C+x,D-y,R-x,D,R)};if(!r||!isNaN(e[0])||isNaN(e[1]))return console.log(u),t;for(h=0;h<o;h++)if(T=p,isNaN(e[h])?(p=e[h].toUpperCase(),g=p!==e[h]):h--,c=+e[h+1],d=+e[h+2],g&&(c+=n,d+=s),h||(_=c,m=d),p==="M")v&&(v.length<8?t.length-=1:l+=v.length),n=_=c,s=m=d,v=[c,d],t.push(v),h+=2,p="L";else if(p==="C")v||(v=[0,0]),g||(n=s=0),v.push(c,d,n+e[h+3]*1,s+e[h+4]*1,n+=e[h+5]*1,s+=e[h+6]*1),h+=6;else if(p==="S")y=n,x=s,(T==="C"||T==="S")&&(y+=n-v[v.length-4],x+=s-v[v.length-3]),g||(n=s=0),v.push(y,x,c,d,n+=e[h+3]*1,s+=e[h+4]*1),h+=4;else if(p==="Q")y=n+(c-n)*a,x=s+(d-s)*a,g||(n=s=0),n+=e[h+3]*1,s+=e[h+4]*1,v.push(y,x,n+(c-n)*a,s+(d-s)*a,n,s),h+=4;else if(p==="T")y=n-v[v.length-4],x=s-v[v.length-3],v.push(n+y,s+x,c+(n+y*1.5-c)*a,d+(s+x*1.5-d)*a,n=c,s=d),h+=2;else if(p==="H")A(n,s,n=c,s),h+=1;else if(p==="V")A(n,s,n,s=c+(g?s-n:0)),h+=1;else if(p==="L"||p==="Z")p==="Z"&&(c=_,d=m,v.closed=!0),(p==="L"||zo(n-c)>.5||zo(s-d)>.5)&&(A(n,s,c,d),p==="L"&&(h+=2)),n=c,s=d;else if(p==="A"){if(E=e[h+4],M=e[h+5],y=e[h+6],x=e[h+7],f=7,E.length>1&&(E.length<3?(x=y,y=M,f--):(x=M,y=E.substr(2),f-=2),M=E.charAt(1),E=E.charAt(0)),b=Uw(n,s,+e[h+1],+e[h+2],+e[h+3],+E,+M,(g?n:0)+y*1,(g?s:0)+x*1),h+=f,b)for(f=0;f<b.length;f++)v.push(b[f]);n=v[v.length-2],s=v[v.length-1]}else console.log(u);return h=v.length,h<6?(t.pop(),h=0):v[0]===v[h-2]&&v[1]===v[h-1]&&(v.closed=!0),t.totalPoints=l+h,t}function ks(r){g0(r[0])&&(r=[r]);var e="",t=r.length,n,s,a,o;for(s=0;s<t;s++){for(o=r[s],e+="M"+vr(o[0])+","+vr(o[1])+" C",n=o.length,a=2;a<n;a++)e+=vr(o[a++])+","+vr(o[a++])+" "+vr(o[a++])+","+vr(o[a++])+" "+vr(o[a++])+","+vr(o[a])+" ";o.closed&&(e+="z")}return e}/*!
 * CustomEase 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var zn,v0,y0=function(){return zn||typeof window<"u"&&(zn=window.gsap)&&zn.registerPlugin&&zn},dp=function(){zn=y0(),zn?(zn.registerEase("_CE",Za.create),v0=1):console.warn("Please gsap.registerPlugin(CustomEase)")},kw=1e20,Ol=function(e){return~~(e*1e3+(e<0?-.5:.5))/1e3},Bw=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/gi,zw=/[cLlsSaAhHvVtTqQ]/g,Hw=function(e){var t=e.length,n=kw,s;for(s=1;s<t;s+=6)+e[s]<n&&(n=+e[s]);return n},Vw=function(e,t,n){!n&&n!==0&&(n=Math.max(+e[e.length-1],+e[1]));var s=+e[0]*-1,a=-n,o=e.length,l=1/(+e[o-2]+s),u=-t||(Math.abs(+e[o-1]-+e[1])<.01*(+e[o-2]-+e[0])?Hw(e)+a:+e[o-1]+a),h;for(u?u=1/u:u=-l,h=0;h<o;h+=2)e[h]=(+e[h]+s)*l,e[h+1]=(+e[h+1]+a)*u},Gw=function r(e,t,n,s,a,o,l,u,h,f,c){var d=(e+n)/2,p=(t+s)/2,g=(n+a)/2,v=(s+o)/2,_=(a+l)/2,m=(o+u)/2,y=(d+g)/2,x=(p+v)/2,b=(g+_)/2,T=(v+m)/2,E=(y+b)/2,M=(x+T)/2,A=l-e,S=u-t,w=Math.abs((n-l)*S-(s-u)*A),C=Math.abs((a-l)*S-(o-u)*A),D;return f||(f=[{x:e,y:t},{x:l,y:u}],c=1),f.splice(c||f.length-1,0,{x:E,y:M}),(w+C)*(w+C)>h*(A*A+S*S)&&(D=f.length,r(e,t,d,p,y,x,E,M,h,f,c),r(E,M,b,T,_,m,l,u,h,f,c+1+(f.length-D))),f},Za=function(){function r(t,n,s){v0||dp(),this.id=t,this.setData(n,s)}var e=r.prototype;return e.setData=function(n,s){s=s||{},n=n||"0,0,1,1";var a=n.match(Bw),o=1,l=[],u=[],h=s.precision||1,f=h<=1,c,d,p,g,v,_,m,y,x;if(this.data=n,(zw.test(n)||~n.indexOf("M")&&n.indexOf("C")<0)&&(a=dr(n)[0]),c=a.length,c===4)a.unshift(0,0),a.push(1,1),c=8;else if((c-2)%6)throw"Invalid CustomEase";for((+a[0]!=0||+a[c-2]!=1)&&Vw(a,s.height,s.originY),this.segment=a,g=2;g<c;g+=6)d={x:+a[g-2],y:+a[g-1]},p={x:+a[g+4],y:+a[g+5]},l.push(d,p),Gw(d.x,d.y,+a[g],+a[g+1],+a[g+2],+a[g+3],p.x,p.y,1/(h*2e5),l,l.length-1);for(c=l.length,g=0;g<c;g++)m=l[g],y=l[g-1]||m,(m.x>y.x||y.y!==m.y&&y.x===m.x||m===y)&&m.x<=1?(y.cx=m.x-y.x,y.cy=m.y-y.y,y.n=m,y.nx=m.x,f&&g>1&&Math.abs(y.cy/y.cx-l[g-2].cy/l[g-2].cx)>2&&(f=0),y.cx<o&&(y.cx?o=y.cx:(y.cx=.001,g===c-1&&(y.x-=.001,o=Math.min(o,.001),f=0)))):(l.splice(g--,1),c--);if(c=1/o+1|0,v=1/c,_=0,m=l[0],f){for(g=0;g<c;g++)x=g*v,m.nx<x&&(m=l[++_]),d=m.y+(x-m.x)/m.cx*m.cy,u[g]={x,cx:v,y:d,cy:0,nx:9},g&&(u[g-1].cy=d-u[g-1].y);u[c-1].cy=l[l.length-1].y-d}else{for(g=0;g<c;g++)m.nx<g*v&&(m=l[++_]),u[g]=m;_<l.length-1&&(u[g-1]=l[l.length-2])}return this.ease=function(b){var T=u[b*c|0]||u[c-1];return T.nx<b&&(T=T.n),T.y+(b-T.x)/T.cx*T.cy},this.ease.custom=this,this.id&&zn&&zn.registerEase(this.id,this.ease),this},e.getSVGData=function(n){return r.getSVGData(this,n)},r.create=function(n,s,a){return new r(n,s,a).ease},r.register=function(n){zn=n,dp()},r.get=function(n){return zn.parseEase(n)},r.getSVGData=function(n,s){s=s||{};var a=s.width||100,o=s.height||100,l=s.x||0,u=(s.y||0)+o,h=zn.utils.toArray(s.path)[0],f,c,d,p,g,v,_,m,y,x;if(s.invert&&(o=-o,u=0),typeof n=="string"&&(n=zn.parseEase(n)),n.custom&&(n=n.custom),n instanceof r)f=ks(Nw([n.segment],a,0,0,-o,l,u));else{for(f=[l,u],_=Math.max(5,(s.precision||1)*200),p=1/_,_+=2,m=5/_,y=Ol(l+p*a),x=Ol(u+n(p)*-o),c=(x-u)/(y-l),d=2;d<_;d++)g=Ol(l+d*p*a),v=Ol(u+n(d*p)*-o),(Math.abs((v-x)/(g-y)-c)>m||d===_-1)&&(f.push(y,x),c=(v-x)/(g-y)),y=g,x=v;f="M"+f.join(",")}return h&&h.setAttribute("d",f),f},r}();y0()&&zn.registerPlugin(Za);Za.version="3.12.5";/*!
 * MorphSVGPlugin 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Ai,ef,wo,x0,Eo,b0=function(){return Ai||typeof window<"u"&&(Ai=window.gsap)&&Ai.registerPlugin&&Ai},Bu=function(e){return typeof e=="function"},As=Math.atan2,hp=Math.cos,fp=Math.sin,lr=Math.sqrt,nu=Math.PI,pp=nu*2,Ww=nu*.3,$w=nu*.7,S0=1e20,il=/[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi,Xw=/(^[#\.][a-z]|[a-y][a-z])/i,qw=/[achlmqstvz]/i,kr=function(e){return console&&console.warn(e)},Yw=1,mp=function(e){var t=e.length,n=0,s=0,a;for(a=0;a<t;a++)n+=e[a++],s+=e[a];return[n/(t/2),s/(t/2)]},La=function(e){var t=e.length,n=e[0],s=n,a=e[1],o=a,l,u,h;for(h=6;h<t;h+=6)l=e[h],u=e[h+1],l>n?n=l:l<s&&(s=l),u>a?a=u:u<o&&(o=u);return e.centerX=(n+s)/2,e.centerY=(a+o)/2,e.size=(n-s)*(a-o)},Ho=function(e,t){t===void 0&&(t=3);for(var n=e.length,s=e[0][0],a=s,o=e[0][1],l=o,u=1/t,h,f,c,d,p,g,v,_,m,y,x,b,T,E,M,A;--n>-1;)for(p=e[n],h=p.length,d=6;d<h;d+=6)for(m=p[d],y=p[d+1],x=p[d+2]-m,E=p[d+3]-y,b=p[d+4]-m,M=p[d+5]-y,T=p[d+6]-m,A=p[d+7]-y,g=t;--g>-1;)v=u*g,_=1-v,f=(v*v*T+3*_*(v*b+_*x))*v+m,c=(v*v*A+3*_*(v*M+_*E))*v+y,f>s?s=f:f<a&&(a=f),c>o?o=c:c<l&&(l=c);return e.centerX=(s+a)/2,e.centerY=(o+l)/2,e.left=a,e.width=s-a,e.top=l,e.height=o-l,e.size=(s-a)*(o-l)},jw=function(e,t){return t.length-e.length},gp=function(e,t){var n=e.size||La(e),s=t.size||La(t);return Math.abs(s-n)<(n+s)/20?t.centerX-e.centerX||t.centerY-e.centerY:s-n},_p=function(e,t){var n=e.slice(0),s=e.length,a=s-2,o,l;for(t=t|0,o=0;o<s;o++)l=(o+t)%a,e[o++]=n[l],e[o]=n[l+1]},zu=function(e,t,n,s,a){var o=e.length,l=0,u=o-2,h,f,c,d;for(n*=6,f=0;f<o;f+=6)h=(f+n)%u,d=e[h]-(t[f]-s),c=e[h+1]-(t[f+1]-a),l+=lr(c*c+d*d);return l},Kw=function(e,t,n){var s=e.length,a=mp(e),o=mp(t),l=o[0]-a[0],u=o[1]-a[1],h=zu(e,t,0,l,u),f=0,c,d,p;for(p=6;p<s;p+=6)d=zu(e,t,p/6,l,u),d<h&&(h=d,f=p);if(n)for(c=e.slice(0),So(c),p=6;p<s;p+=6)d=zu(c,t,p/6,l,u),d<h&&(h=d,f=-p);return f/6},Zw=function(e,t,n){for(var s=e.length,a=S0,o=0,l=0,u,h,f,c,d,p;--s>-1;)for(u=e[s],p=u.length,d=0;d<p;d+=6)h=u[d]-t,f=u[d+1]-n,c=lr(h*h+f*f),c<a&&(a=c,o=u[d],l=u[d+1]);return[o,l]},Jw=function(e,t,n,s,a,o){var l=t.length,u=0,h=Math.min(e.size||La(e),t[n].size||La(t[n]))*s,f=S0,c=e.centerX+a,d=e.centerY+o,p,g,v,_,m;for(g=n;g<l&&(p=t[g].size||La(t[g]),!(p<h));g++)v=t[g].centerX-c,_=t[g].centerY-d,m=lr(v*v+_*_),m<f&&(u=g,f=m);return m=t[u],t.splice(u,1),m},Hu=function(e,t){var n=0,s=.999999,a=e.length,o=t/((a-2)/6),l,u,h,f,c,d,p,g,v,_,m,y,x,b;for(x=2;x<a;x+=6)for(n+=o;n>s;)l=e[x-2],u=e[x-1],h=e[x],f=e[x+1],c=e[x+2],d=e[x+3],p=e[x+4],g=e[x+5],b=1/((Math.floor(n)||1)+1),v=l+(h-l)*b,m=h+(c-h)*b,v+=(m-v)*b,m+=(c+(p-c)*b-m)*b,_=u+(f-u)*b,y=f+(d-f)*b,_+=(y-_)*b,y+=(d+(g-d)*b-y)*b,e.splice(x,4,l+(h-l)*b,u+(f-u)*b,v,_,v+(m-v)*b,_+(y-_)*b,m,y,c+(p-c)*b,d+(g-d)*b),x+=6,a+=6,n--;return e},rh=function(e,t,n,s,a){var o=t.length-e.length,l=o>0?t:e,u=o>0?e:t,h=0,f=s==="complexity"?jw:gp,c=s==="position"?0:typeof s=="number"?s:.8,d=u.length,p=typeof n=="object"&&n.push?n.slice(0):[n],g=p[0]==="reverse"||p[0]<0,v=n==="log",_,m,y,x,b,T,E;if(u[0]){if(l.length>1&&(e.sort(f),t.sort(f),T=l.size||Ho(l),T=u.size||Ho(u),T=l.centerX-u.centerX,E=l.centerY-u.centerY,f===gp))for(d=0;d<u.length;d++)l.splice(d,0,Jw(u[d],l,d,c,T,E));if(o)for(o<0&&(o=-o),l[0].length>u[0].length&&Hu(u[0],(l[0].length-u[0].length)/6|0),d=u.length;h<o;)x=l[d].size||La(l[d]),y=Zw(u,l[d].centerX,l[d].centerY),x=y[0],b=y[1],u[d++]=[x,b,x,b,x,b,x,b],u.totalPoints+=8,h++;for(d=0;d<e.length;d++)_=t[d],m=e[d],o=_.length-m.length,o<0?Hu(_,-o/6|0):o>0&&Hu(m,o/6|0),g&&a!==!1&&!m.reversed&&So(m),n=p[d]||p[d]===0?p[d]:"auto",n&&(m.closed||Math.abs(m[0]-m[m.length-2])<.5&&Math.abs(m[1]-m[m.length-1])<.5?n==="auto"||n==="log"?(p[d]=n=Kw(m,_,!d||a===!1),n<0&&(g=!0,So(m),n=-n),_p(m,n*6)):n!=="reverse"&&(d&&n<0&&So(m),_p(m,(n<0?-n:n)*6)):!g&&(n==="auto"&&Math.abs(_[0]-m[0])+Math.abs(_[1]-m[1])+Math.abs(_[_.length-2]-m[m.length-2])+Math.abs(_[_.length-1]-m[m.length-1])>Math.abs(_[0]-m[m.length-2])+Math.abs(_[1]-m[m.length-1])+Math.abs(_[_.length-2]-m[0])+Math.abs(_[_.length-1]-m[1])||n%2)?(So(m),p[d]=-1,g=!0):n==="auto"?p[d]=0:n==="reverse"&&(p[d]=-1),m.closed!==_.closed&&(m.closed=_.closed=!1));return v&&kr("shapeIndex:["+p.join(",")+"]"),e.shapeIndex=p,p}},vp=function(e,t,n,s,a){var o=dr(e[0]),l=dr(e[1]);rh(o,l,t||t===0?t:"auto",n,a)&&(e[0]=ks(o),e[1]=ks(l),(s==="log"||s===!0)&&kr('precompile:["'+e[0]+'","'+e[1]+'"]'))},Qw=function(e,t){if(!t)return e;var n=e.match(il)||[],s=n.length,a="",o,l,u;for(t==="reverse"?(l=s-1,o=-2):(l=((parseInt(t,10)||0)*2+1+s*100)%s,o=2),u=0;u<s;u+=2)a+=n[l-1]+","+n[l]+" ",l=(l+o)%s;return a},yp=function(e,t){var n=0,s=parseFloat(e[0]),a=parseFloat(e[1]),o=s+","+a+" ",l=.999999,u,h,f,c,d,p,g;for(f=e.length,u=t*.5/(f*.5-1),h=0;h<f-2;h+=2){if(n+=u,p=parseFloat(e[h+2]),g=parseFloat(e[h+3]),n>l)for(d=1/(Math.floor(n)+1),c=1;n>l;)o+=(s+(p-s)*d*c).toFixed(2)+","+(a+(g-a)*d*c).toFixed(2)+" ",n--,c++;o+=p+","+g+" ",s=p,a=g}return o},sh=function(e){var t=e[0].match(il)||[],n=e[1].match(il)||[],s=n.length-t.length;s>0?e[0]=yp(t,s):e[1]=yp(n,-s)},eE=function(e){return isNaN(e)?sh:function(t){sh(t),t[1]=Qw(t[1],parseInt(e,10))}},tE=function(e,t,n){var s=typeof e=="string",a,o;return(!s||Xw.test(e)||(e.match(il)||[]).length<3)&&(a=ef(e)[0],a?(o=(a.nodeName+"").toUpperCase(),t&&o!=="PATH"&&(a=_0(a,!1),o="PATH"),e=a.getAttribute(o==="PATH"?"d":"points")||"",a===n&&(e=a.getAttributeNS(null,"data-original")||e)):(kr("WARNING: invalid morph to: "+e),e=!1)),e},xp=function(e,t){for(var n=e.length,s=.2*(t||1),a,o,l,u,h,f,c,d,p,g,v,_;--n>-1;){for(o=e[n],v=o.isSmooth=o.isSmooth||[0,0,0,0],_=o.smoothData=o.smoothData||[0,0,0,0],v.length=4,d=o.length-2,c=6;c<d;c+=6)l=o[c]-o[c-2],u=o[c+1]-o[c-1],h=o[c+2]-o[c],f=o[c+3]-o[c+1],p=As(u,l),g=As(f,h),a=Math.abs(p-g)<s,a&&(_[c-2]=p,_[c+2]=g,_[c-1]=lr(l*l+u*u),_[c+3]=lr(h*h+f*f)),v.push(a,a,0,0,a,a);o[d]===o[0]&&o[d+1]===o[1]&&(l=o[0]-o[d-2],u=o[1]-o[d-1],h=o[2]-o[0],f=o[3]-o[1],p=As(u,l),g=As(f,h),Math.abs(p-g)<s&&(_[d-2]=p,_[2]=g,_[d-1]=lr(l*l+u*u),_[3]=lr(h*h+f*f),v[d-2]=v[d-1]=!0))}return e},bp=function(e){var t=e.trim().split(" "),n=~e.indexOf("left")?0:~e.indexOf("right")?100:isNaN(parseFloat(t[0]))?50:parseFloat(t[0]),s=~e.indexOf("top")?0:~e.indexOf("bottom")?100:isNaN(parseFloat(t[1]))?50:parseFloat(t[1]);return{x:n/100,y:s/100}},nE=function(e){return e!==e%nu?e+(e<0?pp:-pp):e},Sp="Use MorphSVGPlugin.convertToPath() to convert to a path before morphing.",iE=function(e,t,n,s){var a=this._origin,o=this._eOrigin,l=e[n]-a.x,u=e[n+1]-a.y,h=lr(l*l+u*u),f=As(u,l),c,d;return l=t[n]-o.x,u=t[n+1]-o.y,c=As(u,l)-f,d=nE(c),!s&&wo&&Math.abs(d+wo.ca)<Ww&&(s=wo),this._anchorPT=wo={_next:this._anchorPT,t:e,sa:f,ca:s&&d*s.ca<0&&Math.abs(d)>$w?c:d,sl:h,cl:lr(l*l+u*u)-h,i:n}},wp=function(e){Ai=b0(),Eo=Eo||Ai&&Ai.plugins.morphSVG,Ai&&Eo?(ef=Ai.utils.toArray,Eo.prototype._tweenRotation=iE,x0=1):e&&kr("Please gsap.registerPlugin(MorphSVGPlugin)")},Ea={version:"3.12.5",name:"morphSVG",rawVars:1,register:function(e,t){Ai=e,Eo=t,wp()},init:function(e,t,n,s,a){if(x0||wp(1),!t)return kr("invalid shape"),!1;Bu(t)&&(t=t.call(n,s,e,a));var o,l,u,h,f,c,d,p,g,v,_,m,y,x,b,T,E,M,A,S,w,C;if(typeof t=="string"||t.getBBox||t[0])t={shape:t};else if(typeof t=="object"){o={};for(l in t)o[l]=Bu(t[l])&&l!=="render"?t[l].call(n,s,e,a):t[l];t=o}var D=e.nodeType?window.getComputedStyle(e):{},R=D.fill+"",F=!(R==="none"||(R.match(il)||[])[3]==="0"||D.fillRule==="evenodd"),k=(t.origin||"50 50").split(",");if(o=(e.nodeName+"").toUpperCase(),f=o==="POLYLINE"||o==="POLYGON",o!=="PATH"&&!f&&!t.prop)return kr("Cannot morph a <"+o+"> element. "+Sp),!1;if(l=o==="PATH"?"d":"points",!t.prop&&!Bu(e.setAttribute))return!1;if(h=tE(t.shape||t.d||t.points||"",l==="d",e),f&&qw.test(h))return kr("A <"+o+"> cannot accept path data. "+Sp),!1;if(c=t.shapeIndex||t.shapeIndex===0?t.shapeIndex:"auto",d=t.map||Ea.defaultMap,this._prop=t.prop,this._render=t.render||Ea.defaultRender,this._apply="updateTarget"in t?t.updateTarget:Ea.defaultUpdateTarget,this._rnd=Math.pow(10,isNaN(t.precision)?2:+t.precision),this._tween=n,h){if(this._target=e,E=typeof t.precompile=="object",v=this._prop?e[this._prop]:e.getAttribute(l),!this._prop&&!e.getAttributeNS(null,"data-original")&&e.setAttributeNS(null,"data-original",v),l==="d"||this._prop){if(v=dr(E?t.precompile[0]:v),_=dr(E?t.precompile[1]:h),!E&&!rh(v,_,c,d,F))return!1;for((t.precompile==="log"||t.precompile===!0)&&kr('precompile:["'+ks(v)+'","'+ks(_)+'"]'),w=(t.type||Ea.defaultType)!=="linear",w&&(v=xp(v,t.smoothTolerance),_=xp(_,t.smoothTolerance),v.size||Ho(v),_.size||Ho(_),S=bp(k[0]),this._origin=v.origin={x:v.left+S.x*v.width,y:v.top+S.y*v.height},k[1]&&(S=bp(k[1])),this._eOrigin={x:_.left+S.x*_.width,y:_.top+S.y*_.height}),this._rawPath=e._gsRawPath=v,y=v.length;--y>-1;)for(b=v[y],T=_[y],p=b.isSmooth||[],g=T.isSmooth||[],x=b.length,wo=0,m=0;m<x;m+=2)(T[m]!==b[m]||T[m+1]!==b[m+1])&&(w?p[m]&&g[m]?(M=b.smoothData,A=T.smoothData,C=m+(m===x-4?7-x:5),this._controlPT={_next:this._controlPT,i:m,j:y,l1s:M[m+1],l1c:A[m+1]-M[m+1],l2s:M[C],l2c:A[C]-M[C]},u=this._tweenRotation(b,T,m+2),this._tweenRotation(b,T,m,u),this._tweenRotation(b,T,C-1,u),m+=4):this._tweenRotation(b,T,m):(u=this.add(b,m,b[m],T[m],0,0,0,0,0,1),u=this.add(b,m+1,b[m+1],T[m+1],0,0,0,0,0,1)||u))}else u=this.add(e,"setAttribute",e.getAttribute(l)+"",h+"",s,a,0,eE(c),l);w&&(this.add(this._origin,"x",this._origin.x,this._eOrigin.x,0,0,0,0,0,1),u=this.add(this._origin,"y",this._origin.y,this._eOrigin.y,0,0,0,0,0,1)),u&&(this._props.push("morphSVG"),u.end=h,u.endProp=l)}return Yw},render:function(e,t){for(var n=t._rawPath,s=t._controlPT,a=t._anchorPT,o=t._rnd,l=t._target,u=t._pt,h,f,c,d,p,g,v,_,m,y,x,b,T;u;)u.r(e,u.d),u=u._next;if(e===1&&t._apply)for(u=t._pt;u;)u.end&&(t._prop?l[t._prop]=u.end:l.setAttribute(u.endProp,u.end)),u=u._next;else if(n){for(;a;)g=a.sa+e*a.ca,p=a.sl+e*a.cl,a.t[a.i]=t._origin.x+hp(g)*p,a.t[a.i+1]=t._origin.y+fp(g)*p,a=a._next;for(c=e<.5?2*e*e:(4-2*e)*e-1;s;)v=s.i,d=n[s.j],T=v+(v===d.length-4?7-d.length:5),g=As(d[T]-d[v+1],d[T-1]-d[v]),x=fp(g),b=hp(g),m=d[v+2],y=d[v+3],p=s.l1s+c*s.l1c,d[v]=m-b*p,d[v+1]=y-x*p,p=s.l2s+c*s.l2c,d[T-1]=m+b*p,d[T]=y+x*p,s=s._next;if(l._gsRawPath=n,t._apply){for(h="",f=" ",_=0;_<n.length;_++)for(d=n[_],p=d.length,h+="M"+(d[0]*o|0)/o+f+(d[1]*o|0)/o+" C",v=2;v<p;v++)h+=(d[v]*o|0)/o+f;t._prop?l[t._prop]=h:l.setAttribute("d",h)}}t._render&&n&&t._render.call(t._tween,n,l)},kill:function(e){this._pt=this._rawPath=0},getRawPath:Lw,stringToRawPath:dr,rawPathToString:ks,normalizeStrings:function(e,t,n){var s=n.shapeIndex,a=n.map,o=[e,t];return vp(o,s,a),o},pathFilter:vp,pointsFilter:sh,getTotalSize:Ho,equalizeSegmentQuantity:rh,convertToPath:function(e,t){return ef(e).map(function(n){return _0(n,t!==!1)})},defaultType:"linear",defaultUpdateTarget:!0,defaultMap:"size"};b0()&&Ai.registerPlugin(Ea);var w0={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(r){(function(){var e=function(){this.init()};e.prototype={init:function(){var c=this||t;return c._counter=1e3,c._html5AudioPool=[],c.html5PoolSize=10,c._codecs={},c._howls=[],c._muted=!1,c._volume=1,c._canPlayEvent="canplaythrough",c._navigator=typeof window<"u"&&window.navigator?window.navigator:null,c.masterGain=null,c.noAudio=!1,c.usingWebAudio=!0,c.autoSuspend=!0,c.ctx=null,c.autoUnlock=!0,c._setup(),c},volume:function(c){var d=this||t;if(c=parseFloat(c),d.ctx||f(),typeof c<"u"&&c>=0&&c<=1){if(d._volume=c,d._muted)return d;d.usingWebAudio&&d.masterGain.gain.setValueAtTime(c,t.ctx.currentTime);for(var p=0;p<d._howls.length;p++)if(!d._howls[p]._webAudio)for(var g=d._howls[p]._getSoundIds(),v=0;v<g.length;v++){var _=d._howls[p]._soundById(g[v]);_&&_._node&&(_._node.volume=_._volume*c)}return d}return d._volume},mute:function(c){var d=this||t;d.ctx||f(),d._muted=c,d.usingWebAudio&&d.masterGain.gain.setValueAtTime(c?0:d._volume,t.ctx.currentTime);for(var p=0;p<d._howls.length;p++)if(!d._howls[p]._webAudio)for(var g=d._howls[p]._getSoundIds(),v=0;v<g.length;v++){var _=d._howls[p]._soundById(g[v]);_&&_._node&&(_._node.muted=c?!0:_._muted)}return d},stop:function(){for(var c=this||t,d=0;d<c._howls.length;d++)c._howls[d].stop();return c},unload:function(){for(var c=this||t,d=c._howls.length-1;d>=0;d--)c._howls[d].unload();return c.usingWebAudio&&c.ctx&&typeof c.ctx.close<"u"&&(c.ctx.close(),c.ctx=null,f()),c},codecs:function(c){return(this||t)._codecs[c.replace(/^x-/,"")]},_setup:function(){var c=this||t;if(c.state=c.ctx&&c.ctx.state||"suspended",c._autoSuspend(),!c.usingWebAudio)if(typeof Audio<"u")try{var d=new Audio;typeof d.oncanplaythrough>"u"&&(c._canPlayEvent="canplay")}catch{c.noAudio=!0}else c.noAudio=!0;try{var d=new Audio;d.muted&&(c.noAudio=!0)}catch{}return c.noAudio||c._setupCodecs(),c},_setupCodecs:function(){var c=this||t,d=null;try{d=typeof Audio<"u"?new Audio:null}catch{return c}if(!d||typeof d.canPlayType!="function")return c;var p=d.canPlayType("audio/mpeg;").replace(/^no$/,""),g=c._navigator?c._navigator.userAgent:"",v=g.match(/OPR\/(\d+)/g),_=v&&parseInt(v[0].split("/")[1],10)<33,m=g.indexOf("Safari")!==-1&&g.indexOf("Chrome")===-1,y=g.match(/Version\/(.*?) /),x=m&&y&&parseInt(y[1],10)<15;return c._codecs={mp3:!!(!_&&(p||d.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!p,opus:!!d.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(d.canPlayType('audio/wav; codecs="1"')||d.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!d.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!d.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(d.canPlayType("audio/x-m4a;")||d.canPlayType("audio/m4a;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(d.canPlayType("audio/x-m4b;")||d.canPlayType("audio/m4b;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(d.canPlayType("audio/x-mp4;")||d.canPlayType("audio/mp4;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!x&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!x&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!d.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(d.canPlayType("audio/x-flac;")||d.canPlayType("audio/flac;")).replace(/^no$/,"")},c},_unlockAudio:function(){var c=this||t;if(!(c._audioUnlocked||!c.ctx)){c._audioUnlocked=!1,c.autoUnlock=!1,!c._mobileUnloaded&&c.ctx.sampleRate!==44100&&(c._mobileUnloaded=!0,c.unload()),c._scratchBuffer=c.ctx.createBuffer(1,1,22050);var d=function(p){for(;c._html5AudioPool.length<c.html5PoolSize;)try{var g=new Audio;g._unlocked=!0,c._releaseHtml5Audio(g)}catch{c.noAudio=!0;break}for(var v=0;v<c._howls.length;v++)if(!c._howls[v]._webAudio)for(var _=c._howls[v]._getSoundIds(),m=0;m<_.length;m++){var y=c._howls[v]._soundById(_[m]);y&&y._node&&!y._node._unlocked&&(y._node._unlocked=!0,y._node.load())}c._autoResume();var x=c.ctx.createBufferSource();x.buffer=c._scratchBuffer,x.connect(c.ctx.destination),typeof x.start>"u"?x.noteOn(0):x.start(0),typeof c.ctx.resume=="function"&&c.ctx.resume(),x.onended=function(){x.disconnect(0),c._audioUnlocked=!0,document.removeEventListener("touchstart",d,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("click",d,!0),document.removeEventListener("keydown",d,!0);for(var b=0;b<c._howls.length;b++)c._howls[b]._emit("unlock")}};return document.addEventListener("touchstart",d,!0),document.addEventListener("touchend",d,!0),document.addEventListener("click",d,!0),document.addEventListener("keydown",d,!0),c}},_obtainHtml5Audio:function(){var c=this||t;if(c._html5AudioPool.length)return c._html5AudioPool.pop();var d=new Audio().play();return d&&typeof Promise<"u"&&(d instanceof Promise||typeof d.then=="function")&&d.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(c){var d=this||t;return c._unlocked&&d._html5AudioPool.push(c),d},_autoSuspend:function(){var c=this;if(!(!c.autoSuspend||!c.ctx||typeof c.ctx.suspend>"u"||!t.usingWebAudio)){for(var d=0;d<c._howls.length;d++)if(c._howls[d]._webAudio){for(var p=0;p<c._howls[d]._sounds.length;p++)if(!c._howls[d]._sounds[p]._paused)return c}return c._suspendTimer&&clearTimeout(c._suspendTimer),c._suspendTimer=setTimeout(function(){if(c.autoSuspend){c._suspendTimer=null,c.state="suspending";var g=function(){c.state="suspended",c._resumeAfterSuspend&&(delete c._resumeAfterSuspend,c._autoResume())};c.ctx.suspend().then(g,g)}},3e4),c}},_autoResume:function(){var c=this;if(!(!c.ctx||typeof c.ctx.resume>"u"||!t.usingWebAudio))return c.state==="running"&&c.ctx.state!=="interrupted"&&c._suspendTimer?(clearTimeout(c._suspendTimer),c._suspendTimer=null):c.state==="suspended"||c.state==="running"&&c.ctx.state==="interrupted"?(c.ctx.resume().then(function(){c.state="running";for(var d=0;d<c._howls.length;d++)c._howls[d]._emit("resume")}),c._suspendTimer&&(clearTimeout(c._suspendTimer),c._suspendTimer=null)):c.state==="suspending"&&(c._resumeAfterSuspend=!0),c}};var t=new e,n=function(c){var d=this;if(!c.src||c.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}d.init(c)};n.prototype={init:function(c){var d=this;return t.ctx||f(),d._autoplay=c.autoplay||!1,d._format=typeof c.format!="string"?c.format:[c.format],d._html5=c.html5||!1,d._muted=c.mute||!1,d._loop=c.loop||!1,d._pool=c.pool||5,d._preload=typeof c.preload=="boolean"||c.preload==="metadata"?c.preload:!0,d._rate=c.rate||1,d._sprite=c.sprite||{},d._src=typeof c.src!="string"?c.src:[c.src],d._volume=c.volume!==void 0?c.volume:1,d._xhr={method:c.xhr&&c.xhr.method?c.xhr.method:"GET",headers:c.xhr&&c.xhr.headers?c.xhr.headers:null,withCredentials:c.xhr&&c.xhr.withCredentials?c.xhr.withCredentials:!1},d._duration=0,d._state="unloaded",d._sounds=[],d._endTimers={},d._queue=[],d._playLock=!1,d._onend=c.onend?[{fn:c.onend}]:[],d._onfade=c.onfade?[{fn:c.onfade}]:[],d._onload=c.onload?[{fn:c.onload}]:[],d._onloaderror=c.onloaderror?[{fn:c.onloaderror}]:[],d._onplayerror=c.onplayerror?[{fn:c.onplayerror}]:[],d._onpause=c.onpause?[{fn:c.onpause}]:[],d._onplay=c.onplay?[{fn:c.onplay}]:[],d._onstop=c.onstop?[{fn:c.onstop}]:[],d._onmute=c.onmute?[{fn:c.onmute}]:[],d._onvolume=c.onvolume?[{fn:c.onvolume}]:[],d._onrate=c.onrate?[{fn:c.onrate}]:[],d._onseek=c.onseek?[{fn:c.onseek}]:[],d._onunlock=c.onunlock?[{fn:c.onunlock}]:[],d._onresume=[],d._webAudio=t.usingWebAudio&&!d._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(d),d._autoplay&&d._queue.push({event:"play",action:function(){d.play()}}),d._preload&&d._preload!=="none"&&d.load(),d},load:function(){var c=this,d=null;if(t.noAudio){c._emit("loaderror",null,"No audio support.");return}typeof c._src=="string"&&(c._src=[c._src]);for(var p=0;p<c._src.length;p++){var g,v;if(c._format&&c._format[p])g=c._format[p];else{if(v=c._src[p],typeof v!="string"){c._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}g=/^data:audio\/([^;,]+);/i.exec(v),g||(g=/\.([^.]+)$/.exec(v.split("?",1)[0])),g&&(g=g[1].toLowerCase())}if(g||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),g&&t.codecs(g)){d=c._src[p];break}}if(!d){c._emit("loaderror",null,"No codec support for selected audio sources.");return}return c._src=d,c._state="loading",window.location.protocol==="https:"&&d.slice(0,5)==="http:"&&(c._html5=!0,c._webAudio=!1),new s(c),c._webAudio&&o(c),c},play:function(c,d){var p=this,g=null;if(typeof c=="number")g=c,c=null;else{if(typeof c=="string"&&p._state==="loaded"&&!p._sprite[c])return null;if(typeof c>"u"&&(c="__default",!p._playLock)){for(var v=0,_=0;_<p._sounds.length;_++)p._sounds[_]._paused&&!p._sounds[_]._ended&&(v++,g=p._sounds[_]._id);v===1?c=null:g=null}}var m=g?p._soundById(g):p._inactiveSound();if(!m)return null;if(g&&!c&&(c=m._sprite||"__default"),p._state!=="loaded"){m._sprite=c,m._ended=!1;var y=m._id;return p._queue.push({event:"play",action:function(){p.play(y)}}),y}if(g&&!m._paused)return d||p._loadQueue("play"),m._id;p._webAudio&&t._autoResume();var x=Math.max(0,m._seek>0?m._seek:p._sprite[c][0]/1e3),b=Math.max(0,(p._sprite[c][0]+p._sprite[c][1])/1e3-x),T=b*1e3/Math.abs(m._rate),E=p._sprite[c][0]/1e3,M=(p._sprite[c][0]+p._sprite[c][1])/1e3;m._sprite=c,m._ended=!1;var A=function(){m._paused=!1,m._seek=x,m._start=E,m._stop=M,m._loop=!!(m._loop||p._sprite[c][2])};if(x>=M){p._ended(m);return}var S=m._node;if(p._webAudio){var w=function(){p._playLock=!1,A(),p._refreshBuffer(m);var F=m._muted||p._muted?0:m._volume;S.gain.setValueAtTime(F,t.ctx.currentTime),m._playStart=t.ctx.currentTime,typeof S.bufferSource.start>"u"?m._loop?S.bufferSource.noteGrainOn(0,x,86400):S.bufferSource.noteGrainOn(0,x,b):m._loop?S.bufferSource.start(0,x,86400):S.bufferSource.start(0,x,b),T!==1/0&&(p._endTimers[m._id]=setTimeout(p._ended.bind(p,m),T)),d||setTimeout(function(){p._emit("play",m._id),p._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?w():(p._playLock=!0,p.once("resume",w),p._clearTimer(m._id))}else{var C=function(){S.currentTime=x,S.muted=m._muted||p._muted||t._muted||S.muted,S.volume=m._volume*t.volume(),S.playbackRate=m._rate;try{var F=S.play();if(F&&typeof Promise<"u"&&(F instanceof Promise||typeof F.then=="function")?(p._playLock=!0,A(),F.then(function(){p._playLock=!1,S._unlocked=!0,d?p._loadQueue():p._emit("play",m._id)}).catch(function(){p._playLock=!1,p._emit("playerror",m._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),m._ended=!0,m._paused=!0})):d||(p._playLock=!1,A(),p._emit("play",m._id)),S.playbackRate=m._rate,S.paused){p._emit("playerror",m._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}c!=="__default"||m._loop?p._endTimers[m._id]=setTimeout(p._ended.bind(p,m),T):(p._endTimers[m._id]=function(){p._ended(m),S.removeEventListener("ended",p._endTimers[m._id],!1)},S.addEventListener("ended",p._endTimers[m._id],!1))}catch(k){p._emit("playerror",m._id,k)}};S.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(S.src=p._src,S.load());var D=window&&window.ejecta||!S.readyState&&t._navigator.isCocoonJS;if(S.readyState>=3||D)C();else{p._playLock=!0,p._state="loading";var R=function(){p._state="loaded",C(),S.removeEventListener(t._canPlayEvent,R,!1)};S.addEventListener(t._canPlayEvent,R,!1),p._clearTimer(m._id)}}return m._id},pause:function(c){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"pause",action:function(){d.pause(c)}}),d;for(var p=d._getSoundIds(c),g=0;g<p.length;g++){d._clearTimer(p[g]);var v=d._soundById(p[g]);if(v&&!v._paused&&(v._seek=d.seek(p[g]),v._rateSeek=0,v._paused=!0,d._stopFade(p[g]),v._node))if(d._webAudio){if(!v._node.bufferSource)continue;typeof v._node.bufferSource.stop>"u"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),d._cleanBuffer(v._node)}else(!isNaN(v._node.duration)||v._node.duration===1/0)&&v._node.pause();arguments[1]||d._emit("pause",v?v._id:null)}return d},stop:function(c,d){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"stop",action:function(){p.stop(c)}}),p;for(var g=p._getSoundIds(c),v=0;v<g.length;v++){p._clearTimer(g[v]);var _=p._soundById(g[v]);_&&(_._seek=_._start||0,_._rateSeek=0,_._paused=!0,_._ended=!0,p._stopFade(g[v]),_._node&&(p._webAudio?_._node.bufferSource&&(typeof _._node.bufferSource.stop>"u"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),p._cleanBuffer(_._node)):(!isNaN(_._node.duration)||_._node.duration===1/0)&&(_._node.currentTime=_._start||0,_._node.pause(),_._node.duration===1/0&&p._clearSound(_._node))),d||p._emit("stop",_._id))}return p},mute:function(c,d){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"mute",action:function(){p.mute(c,d)}}),p;if(typeof d>"u")if(typeof c=="boolean")p._muted=c;else return p._muted;for(var g=p._getSoundIds(d),v=0;v<g.length;v++){var _=p._soundById(g[v]);_&&(_._muted=c,_._interval&&p._stopFade(_._id),p._webAudio&&_._node?_._node.gain.setValueAtTime(c?0:_._volume,t.ctx.currentTime):_._node&&(_._node.muted=t._muted?!0:c),p._emit("mute",_._id))}return p},volume:function(){var c=this,d=arguments,p,g;if(d.length===0)return c._volume;if(d.length===1||d.length===2&&typeof d[1]>"u"){var v=c._getSoundIds(),_=v.indexOf(d[0]);_>=0?g=parseInt(d[0],10):p=parseFloat(d[0])}else d.length>=2&&(p=parseFloat(d[0]),g=parseInt(d[1],10));var m;if(typeof p<"u"&&p>=0&&p<=1){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"volume",action:function(){c.volume.apply(c,d)}}),c;typeof g>"u"&&(c._volume=p),g=c._getSoundIds(g);for(var y=0;y<g.length;y++)m=c._soundById(g[y]),m&&(m._volume=p,d[2]||c._stopFade(g[y]),c._webAudio&&m._node&&!m._muted?m._node.gain.setValueAtTime(p,t.ctx.currentTime):m._node&&!m._muted&&(m._node.volume=p*t.volume()),c._emit("volume",m._id))}else return m=g?c._soundById(g):c._sounds[0],m?m._volume:0;return c},fade:function(c,d,p,g){var v=this;if(v._state!=="loaded"||v._playLock)return v._queue.push({event:"fade",action:function(){v.fade(c,d,p,g)}}),v;c=Math.min(Math.max(0,parseFloat(c)),1),d=Math.min(Math.max(0,parseFloat(d)),1),p=parseFloat(p),v.volume(c,g);for(var _=v._getSoundIds(g),m=0;m<_.length;m++){var y=v._soundById(_[m]);if(y){if(g||v._stopFade(_[m]),v._webAudio&&!y._muted){var x=t.ctx.currentTime,b=x+p/1e3;y._volume=c,y._node.gain.setValueAtTime(c,x),y._node.gain.linearRampToValueAtTime(d,b)}v._startFadeInterval(y,c,d,p,_[m],typeof g>"u")}}return v},_startFadeInterval:function(c,d,p,g,v,_){var m=this,y=d,x=p-d,b=Math.abs(x/.01),T=Math.max(4,b>0?g/b:g),E=Date.now();c._fadeTo=p,c._interval=setInterval(function(){var M=(Date.now()-E)/g;E=Date.now(),y+=x*M,y=Math.round(y*100)/100,x<0?y=Math.max(p,y):y=Math.min(p,y),m._webAudio?c._volume=y:m.volume(y,c._id,!0),_&&(m._volume=y),(p<d&&y<=p||p>d&&y>=p)&&(clearInterval(c._interval),c._interval=null,c._fadeTo=null,m.volume(p,c._id),m._emit("fade",c._id))},T)},_stopFade:function(c){var d=this,p=d._soundById(c);return p&&p._interval&&(d._webAudio&&p._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(p._interval),p._interval=null,d.volume(p._fadeTo,c),p._fadeTo=null,d._emit("fade",c)),d},loop:function(){var c=this,d=arguments,p,g,v;if(d.length===0)return c._loop;if(d.length===1)if(typeof d[0]=="boolean")p=d[0],c._loop=p;else return v=c._soundById(parseInt(d[0],10)),v?v._loop:!1;else d.length===2&&(p=d[0],g=parseInt(d[1],10));for(var _=c._getSoundIds(g),m=0;m<_.length;m++)v=c._soundById(_[m]),v&&(v._loop=p,c._webAudio&&v._node&&v._node.bufferSource&&(v._node.bufferSource.loop=p,p&&(v._node.bufferSource.loopStart=v._start||0,v._node.bufferSource.loopEnd=v._stop,c.playing(_[m])&&(c.pause(_[m],!0),c.play(_[m],!0)))));return c},rate:function(){var c=this,d=arguments,p,g;if(d.length===0)g=c._sounds[0]._id;else if(d.length===1){var v=c._getSoundIds(),_=v.indexOf(d[0]);_>=0?g=parseInt(d[0],10):p=parseFloat(d[0])}else d.length===2&&(p=parseFloat(d[0]),g=parseInt(d[1],10));var m;if(typeof p=="number"){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"rate",action:function(){c.rate.apply(c,d)}}),c;typeof g>"u"&&(c._rate=p),g=c._getSoundIds(g);for(var y=0;y<g.length;y++)if(m=c._soundById(g[y]),m){c.playing(g[y])&&(m._rateSeek=c.seek(g[y]),m._playStart=c._webAudio?t.ctx.currentTime:m._playStart),m._rate=p,c._webAudio&&m._node&&m._node.bufferSource?m._node.bufferSource.playbackRate.setValueAtTime(p,t.ctx.currentTime):m._node&&(m._node.playbackRate=p);var x=c.seek(g[y]),b=(c._sprite[m._sprite][0]+c._sprite[m._sprite][1])/1e3-x,T=b*1e3/Math.abs(m._rate);(c._endTimers[g[y]]||!m._paused)&&(c._clearTimer(g[y]),c._endTimers[g[y]]=setTimeout(c._ended.bind(c,m),T)),c._emit("rate",m._id)}}else return m=c._soundById(g),m?m._rate:c._rate;return c},seek:function(){var c=this,d=arguments,p,g;if(d.length===0)c._sounds.length&&(g=c._sounds[0]._id);else if(d.length===1){var v=c._getSoundIds(),_=v.indexOf(d[0]);_>=0?g=parseInt(d[0],10):c._sounds.length&&(g=c._sounds[0]._id,p=parseFloat(d[0]))}else d.length===2&&(p=parseFloat(d[0]),g=parseInt(d[1],10));if(typeof g>"u")return 0;if(typeof p=="number"&&(c._state!=="loaded"||c._playLock))return c._queue.push({event:"seek",action:function(){c.seek.apply(c,d)}}),c;var m=c._soundById(g);if(m)if(typeof p=="number"&&p>=0){var y=c.playing(g);y&&c.pause(g,!0),m._seek=p,m._ended=!1,c._clearTimer(g),!c._webAudio&&m._node&&!isNaN(m._node.duration)&&(m._node.currentTime=p);var x=function(){y&&c.play(g,!0),c._emit("seek",g)};if(y&&!c._webAudio){var b=function(){c._playLock?setTimeout(b,0):x()};setTimeout(b,0)}else x()}else if(c._webAudio){var T=c.playing(g)?t.ctx.currentTime-m._playStart:0,E=m._rateSeek?m._rateSeek-m._seek:0;return m._seek+(E+T*Math.abs(m._rate))}else return m._node.currentTime;return c},playing:function(c){var d=this;if(typeof c=="number"){var p=d._soundById(c);return p?!p._paused:!1}for(var g=0;g<d._sounds.length;g++)if(!d._sounds[g]._paused)return!0;return!1},duration:function(c){var d=this,p=d._duration,g=d._soundById(c);return g&&(p=d._sprite[g._sprite][1]/1e3),p},state:function(){return this._state},unload:function(){for(var c=this,d=c._sounds,p=0;p<d.length;p++)d[p]._paused||c.stop(d[p]._id),c._webAudio||(c._clearSound(d[p]._node),d[p]._node.removeEventListener("error",d[p]._errorFn,!1),d[p]._node.removeEventListener(t._canPlayEvent,d[p]._loadFn,!1),d[p]._node.removeEventListener("ended",d[p]._endFn,!1),t._releaseHtml5Audio(d[p]._node)),delete d[p]._node,c._clearTimer(d[p]._id);var g=t._howls.indexOf(c);g>=0&&t._howls.splice(g,1);var v=!0;for(p=0;p<t._howls.length;p++)if(t._howls[p]._src===c._src||c._src.indexOf(t._howls[p]._src)>=0){v=!1;break}return a&&v&&delete a[c._src],t.noAudio=!1,c._state="unloaded",c._sounds=[],c=null,null},on:function(c,d,p,g){var v=this,_=v["_on"+c];return typeof d=="function"&&_.push(g?{id:p,fn:d,once:g}:{id:p,fn:d}),v},off:function(c,d,p){var g=this,v=g["_on"+c],_=0;if(typeof d=="number"&&(p=d,d=null),d||p)for(_=0;_<v.length;_++){var m=p===v[_].id;if(d===v[_].fn&&m||!d&&m){v.splice(_,1);break}}else if(c)g["_on"+c]=[];else{var y=Object.keys(g);for(_=0;_<y.length;_++)y[_].indexOf("_on")===0&&Array.isArray(g[y[_]])&&(g[y[_]]=[])}return g},once:function(c,d,p){var g=this;return g.on(c,d,p,1),g},_emit:function(c,d,p){for(var g=this,v=g["_on"+c],_=v.length-1;_>=0;_--)(!v[_].id||v[_].id===d||c==="load")&&(setTimeout((function(m){m.call(this,d,p)}).bind(g,v[_].fn),0),v[_].once&&g.off(c,v[_].fn,v[_].id));return g._loadQueue(c),g},_loadQueue:function(c){var d=this;if(d._queue.length>0){var p=d._queue[0];p.event===c&&(d._queue.shift(),d._loadQueue()),c||p.action()}return d},_ended:function(c){var d=this,p=c._sprite;if(!d._webAudio&&c._node&&!c._node.paused&&!c._node.ended&&c._node.currentTime<c._stop)return setTimeout(d._ended.bind(d,c),100),d;var g=!!(c._loop||d._sprite[p][2]);if(d._emit("end",c._id),!d._webAudio&&g&&d.stop(c._id,!0).play(c._id),d._webAudio&&g){d._emit("play",c._id),c._seek=c._start||0,c._rateSeek=0,c._playStart=t.ctx.currentTime;var v=(c._stop-c._start)*1e3/Math.abs(c._rate);d._endTimers[c._id]=setTimeout(d._ended.bind(d,c),v)}return d._webAudio&&!g&&(c._paused=!0,c._ended=!0,c._seek=c._start||0,c._rateSeek=0,d._clearTimer(c._id),d._cleanBuffer(c._node),t._autoSuspend()),!d._webAudio&&!g&&d.stop(c._id,!0),d},_clearTimer:function(c){var d=this;if(d._endTimers[c]){if(typeof d._endTimers[c]!="function")clearTimeout(d._endTimers[c]);else{var p=d._soundById(c);p&&p._node&&p._node.removeEventListener("ended",d._endTimers[c],!1)}delete d._endTimers[c]}return d},_soundById:function(c){for(var d=this,p=0;p<d._sounds.length;p++)if(c===d._sounds[p]._id)return d._sounds[p];return null},_inactiveSound:function(){var c=this;c._drain();for(var d=0;d<c._sounds.length;d++)if(c._sounds[d]._ended)return c._sounds[d].reset();return new s(c)},_drain:function(){var c=this,d=c._pool,p=0,g=0;if(!(c._sounds.length<d)){for(g=0;g<c._sounds.length;g++)c._sounds[g]._ended&&p++;for(g=c._sounds.length-1;g>=0;g--){if(p<=d)return;c._sounds[g]._ended&&(c._webAudio&&c._sounds[g]._node&&c._sounds[g]._node.disconnect(0),c._sounds.splice(g,1),p--)}}},_getSoundIds:function(c){var d=this;if(typeof c>"u"){for(var p=[],g=0;g<d._sounds.length;g++)p.push(d._sounds[g]._id);return p}else return[c]},_refreshBuffer:function(c){var d=this;return c._node.bufferSource=t.ctx.createBufferSource(),c._node.bufferSource.buffer=a[d._src],c._panner?c._node.bufferSource.connect(c._panner):c._node.bufferSource.connect(c._node),c._node.bufferSource.loop=c._loop,c._loop&&(c._node.bufferSource.loopStart=c._start||0,c._node.bufferSource.loopEnd=c._stop||0),c._node.bufferSource.playbackRate.setValueAtTime(c._rate,t.ctx.currentTime),d},_cleanBuffer:function(c){var d=this,p=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!c.bufferSource)return d;if(t._scratchBuffer&&c.bufferSource&&(c.bufferSource.onended=null,c.bufferSource.disconnect(0),p))try{c.bufferSource.buffer=t._scratchBuffer}catch{}return c.bufferSource=null,d},_clearSound:function(c){var d=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);d||(c.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(c){this._parent=c,this.init()};s.prototype={init:function(){var c=this,d=c._parent;return c._muted=d._muted,c._loop=d._loop,c._volume=d._volume,c._rate=d._rate,c._seek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++t._counter,d._sounds.push(c),c.create(),c},create:function(){var c=this,d=c._parent,p=t._muted||c._muted||c._parent._muted?0:c._volume;return d._webAudio?(c._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),c._node.gain.setValueAtTime(p,t.ctx.currentTime),c._node.paused=!0,c._node.connect(t.masterGain)):t.noAudio||(c._node=t._obtainHtml5Audio(),c._errorFn=c._errorListener.bind(c),c._node.addEventListener("error",c._errorFn,!1),c._loadFn=c._loadListener.bind(c),c._node.addEventListener(t._canPlayEvent,c._loadFn,!1),c._endFn=c._endListener.bind(c),c._node.addEventListener("ended",c._endFn,!1),c._node.src=d._src,c._node.preload=d._preload===!0?"auto":d._preload,c._node.volume=p*t.volume(),c._node.load()),c},reset:function(){var c=this,d=c._parent;return c._muted=d._muted,c._loop=d._loop,c._volume=d._volume,c._rate=d._rate,c._seek=0,c._rateSeek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++t._counter,c},_errorListener:function(){var c=this;c._parent._emit("loaderror",c._id,c._node.error?c._node.error.code:0),c._node.removeEventListener("error",c._errorFn,!1)},_loadListener:function(){var c=this,d=c._parent;d._duration=Math.ceil(c._node.duration*10)/10,Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue()),c._node.removeEventListener(t._canPlayEvent,c._loadFn,!1)},_endListener:function(){var c=this,d=c._parent;d._duration===1/0&&(d._duration=Math.ceil(c._node.duration*10)/10,d._sprite.__default[1]===1/0&&(d._sprite.__default[1]=d._duration*1e3),d._ended(c)),c._node.removeEventListener("ended",c._endFn,!1)}};var a={},o=function(c){var d=c._src;if(a[d]){c._duration=a[d].duration,h(c);return}if(/^data:[^;]+;base64,/.test(d)){for(var p=atob(d.split(",")[1]),g=new Uint8Array(p.length),v=0;v<p.length;++v)g[v]=p.charCodeAt(v);u(g.buffer,c)}else{var _=new XMLHttpRequest;_.open(c._xhr.method,d,!0),_.withCredentials=c._xhr.withCredentials,_.responseType="arraybuffer",c._xhr.headers&&Object.keys(c._xhr.headers).forEach(function(m){_.setRequestHeader(m,c._xhr.headers[m])}),_.onload=function(){var m=(_.status+"")[0];if(m!=="0"&&m!=="2"&&m!=="3"){c._emit("loaderror",null,"Failed loading audio file with status: "+_.status+".");return}u(_.response,c)},_.onerror=function(){c._webAudio&&(c._html5=!0,c._webAudio=!1,c._sounds=[],delete a[d],c.load())},l(_)}},l=function(c){try{c.send()}catch{c.onerror()}},u=function(c,d){var p=function(){d._emit("loaderror",null,"Decoding audio data failed.")},g=function(v){v&&d._sounds.length>0?(a[d._src]=v,h(d,v)):p()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(c).then(g).catch(p):t.ctx.decodeAudioData(c,g,p)},h=function(c,d){d&&!c._duration&&(c._duration=d.duration),Object.keys(c._sprite).length===0&&(c._sprite={__default:[0,c._duration*1e3]}),c._state!=="loaded"&&(c._state="loaded",c._emit("load"),c._loadQueue())},f=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var c=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),d=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),p=d?parseInt(d[1],10):null;if(c&&p&&p<9){var g=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!g&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};r.Howler=t,r.Howl=n,typeof ya<"u"?(ya.HowlerGlobal=e,ya.Howler=t,ya.Howl=n,ya.Sound=s):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=n,window.Sound=s)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var s=n._howls.length-1;s>=0;s--)n._howls[s].stereo(t);return n},HowlerGlobal.prototype.pos=function(t,n,s){var a=this;if(!a.ctx||!a.ctx.listener)return a;if(n=typeof n!="number"?a._pos[1]:n,s=typeof s!="number"?a._pos[2]:s,typeof t=="number")a._pos=[t,n,s],typeof a.ctx.listener.positionX<"u"?(a.ctx.listener.positionX.setTargetAtTime(a._pos[0],Howler.ctx.currentTime,.1),a.ctx.listener.positionY.setTargetAtTime(a._pos[1],Howler.ctx.currentTime,.1),a.ctx.listener.positionZ.setTargetAtTime(a._pos[2],Howler.ctx.currentTime,.1)):a.ctx.listener.setPosition(a._pos[0],a._pos[1],a._pos[2]);else return a._pos;return a},HowlerGlobal.prototype.orientation=function(t,n,s,a,o,l){var u=this;if(!u.ctx||!u.ctx.listener)return u;var h=u._orientation;if(n=typeof n!="number"?h[1]:n,s=typeof s!="number"?h[2]:s,a=typeof a!="number"?h[3]:a,o=typeof o!="number"?h[4]:o,l=typeof l!="number"?h[5]:l,typeof t=="number")u._orientation=[t,n,s,a,o,l],typeof u.ctx.listener.forwardX<"u"?(u.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),u.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),u.ctx.listener.forwardZ.setTargetAtTime(s,Howler.ctx.currentTime,.1),u.ctx.listener.upX.setTargetAtTime(a,Howler.ctx.currentTime,.1),u.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),u.ctx.listener.upZ.setTargetAtTime(l,Howler.ctx.currentTime,.1)):u.ctx.listener.setOrientation(t,n,s,a,o,l);else return h;return u},Howl.prototype.init=function(t){return function(n){var s=this;return s._orientation=n.orientation||[1,0,0],s._stereo=n.stereo||null,s._pos=n.pos||null,s._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},s._onstereo=n.onstereo?[{fn:n.onstereo}]:[],s._onpos=n.onpos?[{fn:n.onpos}]:[],s._onorientation=n.onorientation?[{fn:n.onorientation}]:[],t.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"stereo",action:function(){s.stereo(t,n)}}),s;var a=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof t=="number")s._stereo=t,s._pos=[t,0,0];else return s._stereo;for(var o=s._getSoundIds(n),l=0;l<o.length;l++){var u=s._soundById(o[l]);if(u)if(typeof t=="number")u._stereo=t,u._pos=[t,0,0],u._node&&(u._pannerAttr.panningModel="equalpower",(!u._panner||!u._panner.pan)&&e(u,a),a==="spatial"?typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):u._panner.setPosition(t,0,0):u._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),s._emit("stereo",u._id);else return u._stereo}return s},Howl.prototype.pos=function(t,n,s,a){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(t,n,s,a)}}),o;if(n=typeof n!="number"?0:n,s=typeof s!="number"?-.5:s,typeof a>"u")if(typeof t=="number")o._pos=[t,n,s];else return o._pos;for(var l=o._getSoundIds(a),u=0;u<l.length;u++){var h=o._soundById(l[u]);if(h)if(typeof t=="number")h._pos=[t,n,s],h._node&&((!h._panner||h._panner.pan)&&e(h,"spatial"),typeof h._panner.positionX<"u"?(h._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(s,Howler.ctx.currentTime)):h._panner.setPosition(t,n,s)),o._emit("pos",h._id);else return h._pos}return o},Howl.prototype.orientation=function(t,n,s,a){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(t,n,s,a)}}),o;if(n=typeof n!="number"?o._orientation[1]:n,s=typeof s!="number"?o._orientation[2]:s,typeof a>"u")if(typeof t=="number")o._orientation=[t,n,s];else return o._orientation;for(var l=o._getSoundIds(a),u=0;u<l.length;u++){var h=o._soundById(l[u]);if(h)if(typeof t=="number")h._orientation=[t,n,s],h._node&&(h._panner||(h._pos||(h._pos=o._pos||[0,0,-.5]),e(h,"spatial")),typeof h._panner.orientationX<"u"?(h._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),h._panner.orientationZ.setValueAtTime(s,Howler.ctx.currentTime)):h._panner.setOrientation(t,n,s)),o._emit("orientation",h._id);else return h._orientation}return o},Howl.prototype.pannerAttr=function(){var t=this,n=arguments,s,a,o;if(!t._webAudio)return t;if(n.length===0)return t._pannerAttr;if(n.length===1)if(typeof n[0]=="object")s=n[0],typeof a>"u"&&(s.pannerAttr||(s.pannerAttr={coneInnerAngle:s.coneInnerAngle,coneOuterAngle:s.coneOuterAngle,coneOuterGain:s.coneOuterGain,distanceModel:s.distanceModel,maxDistance:s.maxDistance,refDistance:s.refDistance,rolloffFactor:s.rolloffFactor,panningModel:s.panningModel}),t._pannerAttr={coneInnerAngle:typeof s.pannerAttr.coneInnerAngle<"u"?s.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof s.pannerAttr.coneOuterAngle<"u"?s.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof s.pannerAttr.coneOuterGain<"u"?s.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof s.pannerAttr.distanceModel<"u"?s.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof s.pannerAttr.maxDistance<"u"?s.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof s.pannerAttr.refDistance<"u"?s.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof s.pannerAttr.rolloffFactor<"u"?s.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof s.pannerAttr.panningModel<"u"?s.pannerAttr.panningModel:t._panningModel});else return o=t._soundById(parseInt(n[0],10)),o?o._pannerAttr:t._pannerAttr;else n.length===2&&(s=n[0],a=parseInt(n[1],10));for(var l=t._getSoundIds(a),u=0;u<l.length;u++)if(o=t._soundById(l[u]),o){var h=o._pannerAttr;h={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:h.coneOuterAngle,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:h.coneOuterGain,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:h.distanceModel,maxDistance:typeof s.maxDistance<"u"?s.maxDistance:h.maxDistance,refDistance:typeof s.refDistance<"u"?s.refDistance:h.refDistance,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:h.rolloffFactor,panningModel:typeof s.panningModel<"u"?s.panningModel:h.panningModel};var f=o._panner;f||(o._pos||(o._pos=t._pos||[0,0,-.5]),e(o,"spatial"),f=o._panner),f.coneInnerAngle=h.coneInnerAngle,f.coneOuterAngle=h.coneOuterAngle,f.coneOuterGain=h.coneOuterGain,f.distanceModel=h.distanceModel,f.maxDistance=h.maxDistance,f.refDistance=h.refDistance,f.rolloffFactor=h.rolloffFactor,f.panningModel=h.panningModel}return t},Sound.prototype.init=function(t){return function(){var n=this,s=n._parent;n._orientation=s._orientation,n._stereo=s._stereo,n._pos=s._pos,n._pannerAttr=s._pannerAttr,t.call(this),n._stereo?s.stereo(n._stereo):n._pos&&s.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var n=this,s=n._parent;return n._orientation=s._orientation,n._stereo=s._stereo,n._pos=s._pos,n._pannerAttr=s._pannerAttr,n._stereo?s.stereo(n._stereo):n._pos?s.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,s._refreshBuffer(n)),t.call(this)}}(Sound.prototype.reset);var e=function(t,n){n=n||"spatial",n==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()})(w0);we.registerPlugin(Za,Ea,ll);Za.create("cubic",".83,0,.17,1");const rE="M16.38 0C7.33868 0 0 7.33868 0 16.38C0 25.4214 7.33868 32.76 16.38 32.76C25.4214 32.76 32.76 25.4214 32.76 16.38C32.76 7.33868 25.4214 0 16.38 0ZM16.38 0.84C24.9669 0.84 31.92 7.79308 31.92 16.38C31.92 24.9669 24.9669 31.92 16.38 31.92C7.79308 31.92 0.84 24.9669 0.84 16.38C0.84 7.79308 7.79308 0.84 16.38 0.84ZM11.76 8.81998V23.94L24.36 16.38L18.06 12.6L11.76 8.81998Z",sE="M16.38 0.740021C7.33868 0.740021 0 8.0787 0 17.12C0 26.1614 7.33868 33.5 16.38 33.5C25.4214 33.5 32.76 26.1614 32.76 17.12C32.76 8.0787 25.4214 0.740021 16.38 0.740021ZM16.38 1.58002C24.9669 1.58002 31.92 8.5331 31.92 17.12C31.92 25.7069 24.9669 32.66 16.38 32.66C7.79308 32.66 0.84 25.7069 0.84 17.12C0.84 8.5331 7.79308 1.58002 16.38 1.58002ZM11.76 12.74V22.74H21V12.74H11.76Z";class aE{constructor(e){Un(this,"albumTracks",[]);Un(this,"tlAnimation");Un(this,"visibleCardsCount",8);this.container=e,this.colorThief=new _s,this.cards=[...this.container.querySelectorAll(".music-cc-item")],this.cardsCount=this.cards.length,this.workImages=[...this.container.querySelectorAll(".h-img")],this.isAnimating=!1,this.slider=e.querySelector(".music-cc-list"),this.init(),this.currentTrackIndex=0,this.currentCard=null,this.currentHowl=null,this.updateInterval=null,this.trackName=e.querySelector("#track-name")}init(){this.getColors(),this.initCards(),this.loadTracks(),this.addEventListeners()}getTextColor(e,t,n){return(e*299+t*587+n*114)/1e3>128?"black":"white"}getColors(){this.workImages.forEach(e=>{e.crossOrigin="Anonymous",new Promise(t=>{e.complete?t(this.colorThief.getColor(e)):e.addEventListener("load",()=>{t(this.colorThief.getColor(e))})}).then(t=>{const n=this.getTextColor(t[0],t[1],t[2]),s=e.closest(".music-cc-item");we.set(s,{backgroundColor:`rgb(${t[0]}, ${t[1]}, ${t[2]})`}),we.set(s,{color:n})})})}initCards(){let e=[...this.slider.querySelectorAll(".music-cc-item")];const t=e.length,n=this.visibleCardsCount;we.to(e,{y:s=>s>=t-n?30-(t-1-s)*5+"%":"-5%",z:s=>s>=t-n?70-(t-1-s)*10:0,opacity:s=>s>=t-n-4?1:0,duration:.7})}animateCards(e){if(this.isAnimating)return;this.isAnimating=!0;let t=[...this.slider.querySelectorAll(".music-cc-item")];const n=t.length,s=this.visibleCardsCount,a=we.timeline({onComplete:()=>{this.isAnimating=!1}});if(we.to(".player-info",{opacity:0,duration:.2}),e==="next"){let o=t.pop();a.to(o,{y:"185%",duration:.5,onComplete:()=>{this.slider.prepend(o),t=[o,...t],this.updateCardPositions(t,n,s)}})}else if(e==="prev"){let o=t.shift();a.set(o,{y:"150%",z:70,onComplete:()=>{this.slider.append(o),t=[...t,o],this.updateCardPositions(t,n,s)}})}}updateCardPositions(e,t,n){we.to(e,{y:s=>s>=t-n?30-(t-1-s)*5+"%":"-5%",z:s=>s>=t-n?70-(t-1-s)*10:0,opacity:s=>s>=t-n-4?1:0,duration:.75,ease:"cubic"})}addEventListeners(){const e=this.container.querySelector(".next-button"),t=this.container.querySelector(".prev-button");e.addEventListener("click",()=>{this.animateCards("next")}),t.addEventListener("click",()=>{this.animateCards("prev")}),this.cards.forEach(n=>{n.querySelector(".n-button").addEventListener("click",()=>{this.animateCardsToSamePosition()}),n.addEventListener("click",s=>{if(s.target.closest(".track-item")){const a=s.target.closest(".track-item"),l=Array.from(n.querySelectorAll(".track-item")).indexOf(a);this.playTrack(a.dataset.url,l,n),this.animateCardsToSamePosition()}else s.target.closest(".previous-icon")?this.playPreviousTrack():s.target.closest(".play-icon")?this.togglePlayPause(n):s.target.closest(".next-icon")&&this.playNextTrack()})})}animateCardsToSamePosition(){let e=[...this.slider.querySelectorAll(".music-cc-item")];this.tlAnimation=we.timeline(),this.tlAnimation.to(e,{y:0,z:0,duration:1,ease:"cubic"}),this.tlAnimation.to(".music-view",{opacity:0,display:"none",duration:.3},"<"),this.tlAnimation.to(".music-tracks",{height:"100%",duration:.5},">"),this.tlAnimation.to(".music-duration",{height:"100%",duration:.3},"<")}async loadTracks(){try{const e=await Promise.all(this.cards.map(t=>fetch(t.dataset.url,{method:"GET",headers:{"Content-Type":"application/json"}})));for(const t of e){if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);const n=await t.json();this.albumTracks.push(n.data)}this.addTracks()}catch(e){console.error("Error fetching track:",e)}}addTracks(){this.albumTracks.forEach((e,t)=>{e.forEach((n,s)=>{const a=String(s+1).padStart(2,"0"),o=n.optimized_audio.name,l=n.optimized_audio.cloudfront_url,u=document.createElement("div");u.classList.add("track-item"),u.dataset.url=l;const h=document.createElement("p");h.textContent=`${a}`,u.appendChild(h);const f=document.createElement("p");f.textContent=o,u.appendChild(f),this.cards[t].querySelector(".music-tracks").appendChild(u)})})}playTrack(e,t,n){this.currentHowl&&(this.currentHowl.stop(),clearInterval(this.updateInterval)),this.currentTrackIndex=t,this.currentCard=n;let s=n.querySelector(`.track-item:nth-of-type(${t+1}) p:nth-of-type(2)`).textContent;we.to(".player-info",{opacity:1,duration:.5}),we.to(this.trackName,{duration:1,scrambleText:{text:s,chars:"O",speed:1}}),this.currentHowl=new w0.Howl({src:[e],autoplay:!0,html5:!0,onplay:()=>{this.updateTrackInfo(n),this.animatePlayIcon(n,!0)},onend:()=>{this.playNextTrack(),this.animatePlayIcon(n,!1)}})}updateTrackInfo(e){const t=e.querySelector(".current-time"),n=e.querySelector(".duration-inner"),s=e.querySelector(".current-duration"),a=()=>{const o=this.currentHowl.seek(),l=this.currentHowl.duration();t.textContent=this.formatTime(o),s.textContent=this.formatTime(l);const u=o/l*100;we.to(n,{width:`${u}%`,duration:.1,ease:"linear"}),o>=l&&clearInterval(this.updateInterval)};clearInterval(this.updateInterval),this.updateInterval=setInterval(a,1e3),a()}formatTime(e){const t=Math.floor(e/60)||0,n=Math.floor(e%60)||0;return`${t<10?"0":""}${t}:${n<10?"0":""}${n}`}playPreviousTrack(){this.currentTrackIndex===0?this.currentTrackIndex=this.currentCard.querySelectorAll(".track-item").length-1:this.currentTrackIndex--;const e=this.currentCard.querySelectorAll(".track-item")[this.currentTrackIndex];this.playTrack(e.dataset.url,this.currentTrackIndex,this.currentCard)}togglePlayPause(e){if(this.currentHowl)this.currentHowl.playing()?(this.currentHowl.pause(),clearInterval(this.updateInterval),this.animatePlayIcon(e,!1),we.to(".player-info",{opacity:0,duration:.5})):(this.currentHowl.play(),this.updateTrackInfo(e),this.animatePlayIcon(e,!0));else{const t=e.querySelector(".track-item");if(t){this.animateCardsToSamePosition();const n=t.dataset.url;this.playTrack(n,0,e)}}}playNextTrack(){this.currentTrackIndex===this.currentCard.querySelectorAll(".track-item").length-1?this.currentTrackIndex=0:this.currentTrackIndex++;const e=this.currentCard.querySelectorAll(".track-item")[this.currentTrackIndex];this.playTrack(e.dataset.url,this.currentTrackIndex,this.currentCard)}animatePlayIcon(e,t){const n=e.querySelector(".play-icon path");t?we.to(n,{morphSVG:sE,duration:.5,ease:"cubic"}):we.to(n,{morphSVG:rE,duration:.5,ease:"cubic"})}}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const tf="165",oE=0,Ep=1,lE=2,E0=1,cE=2,er=3,jr=0,Xn=1,Ni=2,Gr=0,Ia=1,Tp=2,Mp=3,Ap=4,uE=5,vs=100,dE=101,hE=102,fE=103,pE=104,mE=200,gE=201,_E=202,vE=203,ah=204,oh=205,yE=206,xE=207,bE=208,SE=209,wE=210,EE=211,TE=212,ME=213,AE=214,CE=0,DE=1,PE=2,zc=3,RE=4,LE=5,IE=6,FE=7,T0=0,OE=1,NE=2,Wr=0,UE=1,kE=2,BE=3,zE=4,HE=5,VE=6,GE=7,M0=300,Wa=301,$a=302,lh=303,ch=304,iu=306,uh=1e3,Cs=1001,dh=1002,_i=1003,WE=1004,Nl=1005,ni=1006,Vu=1007,Ds=1008,Kr=1009,$E=1010,XE=1011,Hc=1012,A0=1013,Xa=1014,Br=1015,ru=1016,C0=1017,D0=1018,qa=1020,qE=35902,YE=1021,jE=1022,Ci=1023,KE=1024,ZE=1025,Fa=1026,Ya=1027,JE=1028,P0=1029,QE=1030,R0=1031,L0=1033,Gu=33776,Wu=33777,$u=33778,Xu=33779,Cp=35840,Dp=35841,Pp=35842,Rp=35843,Lp=36196,Ip=37492,Fp=37496,Op=37808,Np=37809,Up=37810,kp=37811,Bp=37812,zp=37813,Hp=37814,Vp=37815,Gp=37816,Wp=37817,$p=37818,Xp=37819,qp=37820,Yp=37821,qu=36492,jp=36494,Kp=36495,eT=36283,Zp=36284,Jp=36285,Qp=36286,tT=3200,nT=3201,iT=0,rT=1,Pr="",Ti="srgb",Qr="srgb-linear",nf="display-p3",su="display-p3-linear",Vc="linear",Rt="srgb",Gc="rec709",Wc="p3",Qs=7680,em=519,sT=512,aT=513,oT=514,I0=515,lT=516,cT=517,uT=518,dT=519,tm=35044,nm="300 es",cr=2e3,$c=2001;class Ja{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let a=0,o=s.length;a<o;a++)s[a].call(this,e);e.target=null}}}const vn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Yu=Math.PI/180,hh=180/Math.PI;function fl(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(vn[r&255]+vn[r>>8&255]+vn[r>>16&255]+vn[r>>24&255]+"-"+vn[e&255]+vn[e>>8&255]+"-"+vn[e>>16&15|64]+vn[e>>24&255]+"-"+vn[t&63|128]+vn[t>>8&255]+"-"+vn[t>>16&255]+vn[t>>24&255]+vn[n&255]+vn[n>>8&255]+vn[n>>16&255]+vn[n>>24&255]).toLowerCase()}function Hn(r,e,t){return Math.max(e,Math.min(t,r))}function hT(r,e){return(r%e+e)%e}function ju(r,e,t){return(1-t)*r+t*e}function oo(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function kn(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}class gt{constructor(e=0,t=0){gt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6],this.y=s[1]*t+s[4]*n+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Hn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),s=Math.sin(t),a=this.x-e.x,o=this.y-e.y;return this.x=a*n-o*s+e.x,this.y=a*s+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class nt{constructor(e,t,n,s,a,o,l,u,h){nt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,s,a,o,l,u,h)}set(e,t,n,s,a,o,l,u,h){const f=this.elements;return f[0]=e,f[1]=s,f[2]=l,f[3]=t,f[4]=a,f[5]=u,f[6]=n,f[7]=o,f[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,a=this.elements,o=n[0],l=n[3],u=n[6],h=n[1],f=n[4],c=n[7],d=n[2],p=n[5],g=n[8],v=s[0],_=s[3],m=s[6],y=s[1],x=s[4],b=s[7],T=s[2],E=s[5],M=s[8];return a[0]=o*v+l*y+u*T,a[3]=o*_+l*x+u*E,a[6]=o*m+l*b+u*M,a[1]=h*v+f*y+c*T,a[4]=h*_+f*x+c*E,a[7]=h*m+f*b+c*M,a[2]=d*v+p*y+g*T,a[5]=d*_+p*x+g*E,a[8]=d*m+p*b+g*M,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],u=e[6],h=e[7],f=e[8];return t*o*f-t*l*h-n*a*f+n*l*u+s*a*h-s*o*u}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],u=e[6],h=e[7],f=e[8],c=f*o-l*h,d=l*u-f*a,p=h*a-o*u,g=t*c+n*d+s*p;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=c*v,e[1]=(s*h-f*n)*v,e[2]=(l*n-s*o)*v,e[3]=d*v,e[4]=(f*t-s*u)*v,e[5]=(s*a-l*t)*v,e[6]=p*v,e[7]=(n*u-h*t)*v,e[8]=(o*t-n*a)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,s,a,o,l){const u=Math.cos(a),h=Math.sin(a);return this.set(n*u,n*h,-n*(u*o+h*l)+o+e,-s*h,s*u,-s*(-h*o+u*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(Ku.makeScale(e,t)),this}rotate(e){return this.premultiply(Ku.makeRotation(-e)),this}translate(e,t){return this.premultiply(Ku.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<9;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Ku=new nt;function F0(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}function rl(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function fT(){const r=rl("canvas");return r.style.display="block",r}const im={};function O0(r){r in im||(im[r]=!0,console.warn(r))}function pT(r,e,t){return new Promise(function(n,s){function a(){switch(r.clientWaitSync(e,r.SYNC_FLUSH_COMMANDS_BIT,0)){case r.WAIT_FAILED:s();break;case r.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:n()}}setTimeout(a,t)})}const rm=new nt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),sm=new nt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Ul={[Qr]:{transfer:Vc,primaries:Gc,toReference:r=>r,fromReference:r=>r},[Ti]:{transfer:Rt,primaries:Gc,toReference:r=>r.convertSRGBToLinear(),fromReference:r=>r.convertLinearToSRGB()},[su]:{transfer:Vc,primaries:Wc,toReference:r=>r.applyMatrix3(sm),fromReference:r=>r.applyMatrix3(rm)},[nf]:{transfer:Rt,primaries:Wc,toReference:r=>r.convertSRGBToLinear().applyMatrix3(sm),fromReference:r=>r.applyMatrix3(rm).convertLinearToSRGB()}},mT=new Set([Qr,su]),xt={enabled:!0,_workingColorSpace:Qr,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(r){if(!mT.has(r))throw new Error(`Unsupported working color space, "${r}".`);this._workingColorSpace=r},convert:function(r,e,t){if(this.enabled===!1||e===t||!e||!t)return r;const n=Ul[e].toReference,s=Ul[t].fromReference;return s(n(r))},fromWorkingColorSpace:function(r,e){return this.convert(r,this._workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this._workingColorSpace)},getPrimaries:function(r){return Ul[r].primaries},getTransfer:function(r){return r===Pr?Vc:Ul[r].transfer}};function Oa(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function Zu(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let ea;class gT{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ea===void 0&&(ea=rl("canvas")),ea.width=e.width,ea.height=e.height;const n=ea.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=ea}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=rl("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const s=n.getImageData(0,0,e.width,e.height),a=s.data;for(let o=0;o<a.length;o++)a[o]=Oa(a[o]/255)*255;return n.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Oa(t[n]/255)*255):t[n]=Oa(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let _T=0;class N0{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_T++}),this.uuid=fl(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(s!==null){let a;if(Array.isArray(s)){a=[];for(let o=0,l=s.length;o<l;o++)s[o].isDataTexture?a.push(Ju(s[o].image)):a.push(Ju(s[o]))}else a=Ju(s);n.url=a}return t||(e.images[this.uuid]=n),n}}function Ju(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?gT.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let vT=0;class Nn extends Ja{constructor(e=Nn.DEFAULT_IMAGE,t=Nn.DEFAULT_MAPPING,n=Cs,s=Cs,a=ni,o=Ds,l=Ci,u=Kr,h=Nn.DEFAULT_ANISOTROPY,f=Pr){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:vT++}),this.uuid=fl(),this.name="",this.source=new N0(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=s,this.magFilter=a,this.minFilter=o,this.anisotropy=h,this.format=l,this.internalFormat=null,this.type=u,this.offset=new gt(0,0),this.repeat=new gt(1,1),this.center=new gt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new nt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==M0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case uh:e.x=e.x-Math.floor(e.x);break;case Cs:e.x=e.x<0?0:1;break;case dh:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case uh:e.y=e.y-Math.floor(e.y);break;case Cs:e.y=e.y<0?0:1;break;case dh:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Nn.DEFAULT_IMAGE=null;Nn.DEFAULT_MAPPING=M0;Nn.DEFAULT_ANISOTROPY=1;class mn{constructor(e=0,t=0,n=0,s=1){mn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,s){return this.x=e,this.y=t,this.z=n,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,a=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*s+o[12]*a,this.y=o[1]*t+o[5]*n+o[9]*s+o[13]*a,this.z=o[2]*t+o[6]*n+o[10]*s+o[14]*a,this.w=o[3]*t+o[7]*n+o[11]*s+o[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,s,a;const u=e.elements,h=u[0],f=u[4],c=u[8],d=u[1],p=u[5],g=u[9],v=u[2],_=u[6],m=u[10];if(Math.abs(f-d)<.01&&Math.abs(c-v)<.01&&Math.abs(g-_)<.01){if(Math.abs(f+d)<.1&&Math.abs(c+v)<.1&&Math.abs(g+_)<.1&&Math.abs(h+p+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const x=(h+1)/2,b=(p+1)/2,T=(m+1)/2,E=(f+d)/4,M=(c+v)/4,A=(g+_)/4;return x>b&&x>T?x<.01?(n=0,s=.707106781,a=.707106781):(n=Math.sqrt(x),s=E/n,a=M/n):b>T?b<.01?(n=.707106781,s=0,a=.707106781):(s=Math.sqrt(b),n=E/s,a=A/s):T<.01?(n=.707106781,s=.707106781,a=0):(a=Math.sqrt(T),n=M/a,s=A/a),this.set(n,s,a,t),this}let y=Math.sqrt((_-g)*(_-g)+(c-v)*(c-v)+(d-f)*(d-f));return Math.abs(y)<.001&&(y=1),this.x=(_-g)/y,this.y=(c-v)/y,this.z=(d-f)/y,this.w=Math.acos((h+p+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class yT extends Ja{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new mn(0,0,e,t),this.scissorTest=!1,this.viewport=new mn(0,0,e,t);const s={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ni,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const a=new Nn(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);a.flipY=!1,a.generateMipmaps=n.generateMipmaps,a.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let l=0;l<o;l++)this.textures[l]=a.clone(),this.textures[l].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let s=0,a=this.textures.length;s<a;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,s=e.textures.length;n<s;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new N0(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Xs extends yT{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class U0 extends Nn{constructor(e=null,t=1,n=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=_i,this.minFilter=_i,this.wrapR=Cs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class xT extends Nn{constructor(e=null,t=1,n=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=_i,this.minFilter=_i,this.wrapR=Cs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class pl{constructor(e=0,t=0,n=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=s}static slerpFlat(e,t,n,s,a,o,l){let u=n[s+0],h=n[s+1],f=n[s+2],c=n[s+3];const d=a[o+0],p=a[o+1],g=a[o+2],v=a[o+3];if(l===0){e[t+0]=u,e[t+1]=h,e[t+2]=f,e[t+3]=c;return}if(l===1){e[t+0]=d,e[t+1]=p,e[t+2]=g,e[t+3]=v;return}if(c!==v||u!==d||h!==p||f!==g){let _=1-l;const m=u*d+h*p+f*g+c*v,y=m>=0?1:-1,x=1-m*m;if(x>Number.EPSILON){const T=Math.sqrt(x),E=Math.atan2(T,m*y);_=Math.sin(_*E)/T,l=Math.sin(l*E)/T}const b=l*y;if(u=u*_+d*b,h=h*_+p*b,f=f*_+g*b,c=c*_+v*b,_===1-l){const T=1/Math.sqrt(u*u+h*h+f*f+c*c);u*=T,h*=T,f*=T,c*=T}}e[t]=u,e[t+1]=h,e[t+2]=f,e[t+3]=c}static multiplyQuaternionsFlat(e,t,n,s,a,o){const l=n[s],u=n[s+1],h=n[s+2],f=n[s+3],c=a[o],d=a[o+1],p=a[o+2],g=a[o+3];return e[t]=l*g+f*c+u*p-h*d,e[t+1]=u*g+f*d+h*c-l*p,e[t+2]=h*g+f*p+l*d-u*c,e[t+3]=f*g-l*c-u*d-h*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,s){return this._x=e,this._y=t,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,s=e._y,a=e._z,o=e._order,l=Math.cos,u=Math.sin,h=l(n/2),f=l(s/2),c=l(a/2),d=u(n/2),p=u(s/2),g=u(a/2);switch(o){case"XYZ":this._x=d*f*c+h*p*g,this._y=h*p*c-d*f*g,this._z=h*f*g+d*p*c,this._w=h*f*c-d*p*g;break;case"YXZ":this._x=d*f*c+h*p*g,this._y=h*p*c-d*f*g,this._z=h*f*g-d*p*c,this._w=h*f*c+d*p*g;break;case"ZXY":this._x=d*f*c-h*p*g,this._y=h*p*c+d*f*g,this._z=h*f*g+d*p*c,this._w=h*f*c-d*p*g;break;case"ZYX":this._x=d*f*c-h*p*g,this._y=h*p*c+d*f*g,this._z=h*f*g-d*p*c,this._w=h*f*c+d*p*g;break;case"YZX":this._x=d*f*c+h*p*g,this._y=h*p*c+d*f*g,this._z=h*f*g-d*p*c,this._w=h*f*c-d*p*g;break;case"XZY":this._x=d*f*c-h*p*g,this._y=h*p*c-d*f*g,this._z=h*f*g+d*p*c,this._w=h*f*c+d*p*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,s=Math.sin(n);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],s=t[4],a=t[8],o=t[1],l=t[5],u=t[9],h=t[2],f=t[6],c=t[10],d=n+l+c;if(d>0){const p=.5/Math.sqrt(d+1);this._w=.25/p,this._x=(f-u)*p,this._y=(a-h)*p,this._z=(o-s)*p}else if(n>l&&n>c){const p=2*Math.sqrt(1+n-l-c);this._w=(f-u)/p,this._x=.25*p,this._y=(s+o)/p,this._z=(a+h)/p}else if(l>c){const p=2*Math.sqrt(1+l-n-c);this._w=(a-h)/p,this._x=(s+o)/p,this._y=.25*p,this._z=(u+f)/p}else{const p=2*Math.sqrt(1+c-n-l);this._w=(o-s)/p,this._x=(a+h)/p,this._y=(u+f)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Hn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const s=Math.min(1,t/n);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,s=e._y,a=e._z,o=e._w,l=t._x,u=t._y,h=t._z,f=t._w;return this._x=n*f+o*l+s*h-a*u,this._y=s*f+o*u+a*l-n*h,this._z=a*f+o*h+n*u-s*l,this._w=o*f-n*l-s*u-a*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,s=this._y,a=this._z,o=this._w;let l=o*e._w+n*e._x+s*e._y+a*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=n,this._y=s,this._z=a,this;const u=1-l*l;if(u<=Number.EPSILON){const p=1-t;return this._w=p*o+t*this._w,this._x=p*n+t*this._x,this._y=p*s+t*this._y,this._z=p*a+t*this._z,this.normalize(),this}const h=Math.sqrt(u),f=Math.atan2(h,l),c=Math.sin((1-t)*f)/h,d=Math.sin(t*f)/h;return this._w=o*c+this._w*d,this._x=n*c+this._x*d,this._y=s*c+this._y*d,this._z=a*c+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),s=Math.sqrt(1-n),a=Math.sqrt(n);return this.set(s*Math.sin(e),s*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ie{constructor(e=0,t=0,n=0){ie.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(am.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(am.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,s=this.z,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6]*s,this.y=a[1]*t+a[4]*n+a[7]*s,this.z=a[2]*t+a[5]*n+a[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,a=e.elements,o=1/(a[3]*t+a[7]*n+a[11]*s+a[15]);return this.x=(a[0]*t+a[4]*n+a[8]*s+a[12])*o,this.y=(a[1]*t+a[5]*n+a[9]*s+a[13])*o,this.z=(a[2]*t+a[6]*n+a[10]*s+a[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,s=this.z,a=e.x,o=e.y,l=e.z,u=e.w,h=2*(o*s-l*n),f=2*(l*t-a*s),c=2*(a*n-o*t);return this.x=t+u*h+o*c-l*f,this.y=n+u*f+l*h-a*c,this.z=s+u*c+a*f-o*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,s=this.z,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*s,this.y=a[1]*t+a[5]*n+a[9]*s,this.z=a[2]*t+a[6]*n+a[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,s=e.y,a=e.z,o=t.x,l=t.y,u=t.z;return this.x=s*u-a*l,this.y=a*o-n*u,this.z=n*l-s*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Qu.copy(this).projectOnVector(e),this.sub(Qu)}reflect(e){return this.sub(Qu.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Hn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,s=this.z-e.z;return t*t+n*n+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const s=Math.sin(t)*e;return this.x=s*Math.sin(n),this.y=Math.cos(t)*e,this.z=s*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Qu=new ie,am=new pl;class ml{constructor(e=new ie(1/0,1/0,1/0),t=new ie(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(xi.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(xi.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=xi.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const a=n.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let o=0,l=a.count;o<l;o++)e.isMesh===!0?e.getVertexPosition(o,xi):xi.fromBufferAttribute(a,o),xi.applyMatrix4(e.matrixWorld),this.expandByPoint(xi);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),kl.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),kl.copy(n.boundingBox)),kl.applyMatrix4(e.matrixWorld),this.union(kl)}const s=e.children;for(let a=0,o=s.length;a<o;a++)this.expandByObject(s[a],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,xi),xi.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(lo),Bl.subVectors(this.max,lo),ta.subVectors(e.a,lo),na.subVectors(e.b,lo),ia.subVectors(e.c,lo),yr.subVectors(na,ta),xr.subVectors(ia,na),ss.subVectors(ta,ia);let t=[0,-yr.z,yr.y,0,-xr.z,xr.y,0,-ss.z,ss.y,yr.z,0,-yr.x,xr.z,0,-xr.x,ss.z,0,-ss.x,-yr.y,yr.x,0,-xr.y,xr.x,0,-ss.y,ss.x,0];return!ed(t,ta,na,ia,Bl)||(t=[1,0,0,0,1,0,0,0,1],!ed(t,ta,na,ia,Bl))?!1:(zl.crossVectors(yr,xr),t=[zl.x,zl.y,zl.z],ed(t,ta,na,ia,Bl))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,xi).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(xi).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Yi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Yi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Yi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Yi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Yi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Yi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Yi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Yi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Yi),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Yi=[new ie,new ie,new ie,new ie,new ie,new ie,new ie,new ie],xi=new ie,kl=new ml,ta=new ie,na=new ie,ia=new ie,yr=new ie,xr=new ie,ss=new ie,lo=new ie,Bl=new ie,zl=new ie,as=new ie;function ed(r,e,t,n,s){for(let a=0,o=r.length-3;a<=o;a+=3){as.fromArray(r,a);const l=s.x*Math.abs(as.x)+s.y*Math.abs(as.y)+s.z*Math.abs(as.z),u=e.dot(as),h=t.dot(as),f=n.dot(as);if(Math.max(-Math.max(u,h,f),Math.min(u,h,f))>l)return!1}return!0}const bT=new ml,co=new ie,td=new ie;class rf{constructor(e=new ie,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):bT.setFromPoints(e).getCenter(n);let s=0;for(let a=0,o=e.length;a<o;a++)s=Math.max(s,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;co.subVectors(e,this.center);const t=co.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),s=(n-this.radius)*.5;this.center.addScaledVector(co,s/n),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(td.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(co.copy(e.center).add(td)),this.expandByPoint(co.copy(e.center).sub(td))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ji=new ie,nd=new ie,Hl=new ie,br=new ie,id=new ie,Vl=new ie,rd=new ie;class k0{constructor(e=new ie,t=new ie(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ji)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ji.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ji.copy(this.origin).addScaledVector(this.direction,t),ji.distanceToSquared(e))}distanceSqToSegment(e,t,n,s){nd.copy(e).add(t).multiplyScalar(.5),Hl.copy(t).sub(e).normalize(),br.copy(this.origin).sub(nd);const a=e.distanceTo(t)*.5,o=-this.direction.dot(Hl),l=br.dot(this.direction),u=-br.dot(Hl),h=br.lengthSq(),f=Math.abs(1-o*o);let c,d,p,g;if(f>0)if(c=o*u-l,d=o*l-u,g=a*f,c>=0)if(d>=-g)if(d<=g){const v=1/f;c*=v,d*=v,p=c*(c+o*d+2*l)+d*(o*c+d+2*u)+h}else d=a,c=Math.max(0,-(o*d+l)),p=-c*c+d*(d+2*u)+h;else d=-a,c=Math.max(0,-(o*d+l)),p=-c*c+d*(d+2*u)+h;else d<=-g?(c=Math.max(0,-(-o*a+l)),d=c>0?-a:Math.min(Math.max(-a,-u),a),p=-c*c+d*(d+2*u)+h):d<=g?(c=0,d=Math.min(Math.max(-a,-u),a),p=d*(d+2*u)+h):(c=Math.max(0,-(o*a+l)),d=c>0?a:Math.min(Math.max(-a,-u),a),p=-c*c+d*(d+2*u)+h);else d=o>0?-a:a,c=Math.max(0,-(o*d+l)),p=-c*c+d*(d+2*u)+h;return n&&n.copy(this.origin).addScaledVector(this.direction,c),s&&s.copy(nd).addScaledVector(Hl,d),p}intersectSphere(e,t){ji.subVectors(e.center,this.origin);const n=ji.dot(this.direction),s=ji.dot(ji)-n*n,a=e.radius*e.radius;if(s>a)return null;const o=Math.sqrt(a-s),l=n-o,u=n+o;return u<0?null:l<0?this.at(u,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,s,a,o,l,u;const h=1/this.direction.x,f=1/this.direction.y,c=1/this.direction.z,d=this.origin;return h>=0?(n=(e.min.x-d.x)*h,s=(e.max.x-d.x)*h):(n=(e.max.x-d.x)*h,s=(e.min.x-d.x)*h),f>=0?(a=(e.min.y-d.y)*f,o=(e.max.y-d.y)*f):(a=(e.max.y-d.y)*f,o=(e.min.y-d.y)*f),n>o||a>s||((a>n||isNaN(n))&&(n=a),(o<s||isNaN(s))&&(s=o),c>=0?(l=(e.min.z-d.z)*c,u=(e.max.z-d.z)*c):(l=(e.max.z-d.z)*c,u=(e.min.z-d.z)*c),n>u||l>s)||((l>n||n!==n)&&(n=l),(u<s||s!==s)&&(s=u),s<0)?null:this.at(n>=0?n:s,t)}intersectsBox(e){return this.intersectBox(e,ji)!==null}intersectTriangle(e,t,n,s,a){id.subVectors(t,e),Vl.subVectors(n,e),rd.crossVectors(id,Vl);let o=this.direction.dot(rd),l;if(o>0){if(s)return null;l=1}else if(o<0)l=-1,o=-o;else return null;br.subVectors(this.origin,e);const u=l*this.direction.dot(Vl.crossVectors(br,Vl));if(u<0)return null;const h=l*this.direction.dot(id.cross(br));if(h<0||u+h>o)return null;const f=-l*br.dot(rd);return f<0?null:this.at(f/o,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Zt{constructor(e,t,n,s,a,o,l,u,h,f,c,d,p,g,v,_){Zt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,s,a,o,l,u,h,f,c,d,p,g,v,_)}set(e,t,n,s,a,o,l,u,h,f,c,d,p,g,v,_){const m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=s,m[1]=a,m[5]=o,m[9]=l,m[13]=u,m[2]=h,m[6]=f,m[10]=c,m[14]=d,m[3]=p,m[7]=g,m[11]=v,m[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Zt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,s=1/ra.setFromMatrixColumn(e,0).length(),a=1/ra.setFromMatrixColumn(e,1).length(),o=1/ra.setFromMatrixColumn(e,2).length();return t[0]=n[0]*s,t[1]=n[1]*s,t[2]=n[2]*s,t[3]=0,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,s=e.y,a=e.z,o=Math.cos(n),l=Math.sin(n),u=Math.cos(s),h=Math.sin(s),f=Math.cos(a),c=Math.sin(a);if(e.order==="XYZ"){const d=o*f,p=o*c,g=l*f,v=l*c;t[0]=u*f,t[4]=-u*c,t[8]=h,t[1]=p+g*h,t[5]=d-v*h,t[9]=-l*u,t[2]=v-d*h,t[6]=g+p*h,t[10]=o*u}else if(e.order==="YXZ"){const d=u*f,p=u*c,g=h*f,v=h*c;t[0]=d+v*l,t[4]=g*l-p,t[8]=o*h,t[1]=o*c,t[5]=o*f,t[9]=-l,t[2]=p*l-g,t[6]=v+d*l,t[10]=o*u}else if(e.order==="ZXY"){const d=u*f,p=u*c,g=h*f,v=h*c;t[0]=d-v*l,t[4]=-o*c,t[8]=g+p*l,t[1]=p+g*l,t[5]=o*f,t[9]=v-d*l,t[2]=-o*h,t[6]=l,t[10]=o*u}else if(e.order==="ZYX"){const d=o*f,p=o*c,g=l*f,v=l*c;t[0]=u*f,t[4]=g*h-p,t[8]=d*h+v,t[1]=u*c,t[5]=v*h+d,t[9]=p*h-g,t[2]=-h,t[6]=l*u,t[10]=o*u}else if(e.order==="YZX"){const d=o*u,p=o*h,g=l*u,v=l*h;t[0]=u*f,t[4]=v-d*c,t[8]=g*c+p,t[1]=c,t[5]=o*f,t[9]=-l*f,t[2]=-h*f,t[6]=p*c+g,t[10]=d-v*c}else if(e.order==="XZY"){const d=o*u,p=o*h,g=l*u,v=l*h;t[0]=u*f,t[4]=-c,t[8]=h*f,t[1]=d*c+v,t[5]=o*f,t[9]=p*c-g,t[2]=g*c-p,t[6]=l*f,t[10]=v*c+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ST,e,wT)}lookAt(e,t,n){const s=this.elements;return Yn.subVectors(e,t),Yn.lengthSq()===0&&(Yn.z=1),Yn.normalize(),Sr.crossVectors(n,Yn),Sr.lengthSq()===0&&(Math.abs(n.z)===1?Yn.x+=1e-4:Yn.z+=1e-4,Yn.normalize(),Sr.crossVectors(n,Yn)),Sr.normalize(),Gl.crossVectors(Yn,Sr),s[0]=Sr.x,s[4]=Gl.x,s[8]=Yn.x,s[1]=Sr.y,s[5]=Gl.y,s[9]=Yn.y,s[2]=Sr.z,s[6]=Gl.z,s[10]=Yn.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,a=this.elements,o=n[0],l=n[4],u=n[8],h=n[12],f=n[1],c=n[5],d=n[9],p=n[13],g=n[2],v=n[6],_=n[10],m=n[14],y=n[3],x=n[7],b=n[11],T=n[15],E=s[0],M=s[4],A=s[8],S=s[12],w=s[1],C=s[5],D=s[9],R=s[13],F=s[2],k=s[6],z=s[10],O=s[14],I=s[3],j=s[7],N=s[11],q=s[15];return a[0]=o*E+l*w+u*F+h*I,a[4]=o*M+l*C+u*k+h*j,a[8]=o*A+l*D+u*z+h*N,a[12]=o*S+l*R+u*O+h*q,a[1]=f*E+c*w+d*F+p*I,a[5]=f*M+c*C+d*k+p*j,a[9]=f*A+c*D+d*z+p*N,a[13]=f*S+c*R+d*O+p*q,a[2]=g*E+v*w+_*F+m*I,a[6]=g*M+v*C+_*k+m*j,a[10]=g*A+v*D+_*z+m*N,a[14]=g*S+v*R+_*O+m*q,a[3]=y*E+x*w+b*F+T*I,a[7]=y*M+x*C+b*k+T*j,a[11]=y*A+x*D+b*z+T*N,a[15]=y*S+x*R+b*O+T*q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],s=e[8],a=e[12],o=e[1],l=e[5],u=e[9],h=e[13],f=e[2],c=e[6],d=e[10],p=e[14],g=e[3],v=e[7],_=e[11],m=e[15];return g*(+a*u*c-s*h*c-a*l*d+n*h*d+s*l*p-n*u*p)+v*(+t*u*p-t*h*d+a*o*d-s*o*p+s*h*f-a*u*f)+_*(+t*h*c-t*l*p-a*o*c+n*o*p+a*l*f-n*h*f)+m*(-s*l*f-t*u*c+t*l*d+s*o*c-n*o*d+n*u*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],u=e[6],h=e[7],f=e[8],c=e[9],d=e[10],p=e[11],g=e[12],v=e[13],_=e[14],m=e[15],y=c*_*h-v*d*h+v*u*p-l*_*p-c*u*m+l*d*m,x=g*d*h-f*_*h-g*u*p+o*_*p+f*u*m-o*d*m,b=f*v*h-g*c*h+g*l*p-o*v*p-f*l*m+o*c*m,T=g*c*u-f*v*u-g*l*d+o*v*d+f*l*_-o*c*_,E=t*y+n*x+s*b+a*T;if(E===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/E;return e[0]=y*M,e[1]=(v*d*a-c*_*a-v*s*p+n*_*p+c*s*m-n*d*m)*M,e[2]=(l*_*a-v*u*a+v*s*h-n*_*h-l*s*m+n*u*m)*M,e[3]=(c*u*a-l*d*a-c*s*h+n*d*h+l*s*p-n*u*p)*M,e[4]=x*M,e[5]=(f*_*a-g*d*a+g*s*p-t*_*p-f*s*m+t*d*m)*M,e[6]=(g*u*a-o*_*a-g*s*h+t*_*h+o*s*m-t*u*m)*M,e[7]=(o*d*a-f*u*a+f*s*h-t*d*h-o*s*p+t*u*p)*M,e[8]=b*M,e[9]=(g*c*a-f*v*a-g*n*p+t*v*p+f*n*m-t*c*m)*M,e[10]=(o*v*a-g*l*a+g*n*h-t*v*h-o*n*m+t*l*m)*M,e[11]=(f*l*a-o*c*a-f*n*h+t*c*h+o*n*p-t*l*p)*M,e[12]=T*M,e[13]=(f*v*s-g*c*s+g*n*d-t*v*d-f*n*_+t*c*_)*M,e[14]=(g*l*s-o*v*s-g*n*u+t*v*u+o*n*_-t*l*_)*M,e[15]=(o*c*s-f*l*s+f*n*u-t*c*u-o*n*d+t*l*d)*M,this}scale(e){const t=this.elements,n=e.x,s=e.y,a=e.z;return t[0]*=n,t[4]*=s,t[8]*=a,t[1]*=n,t[5]*=s,t[9]*=a,t[2]*=n,t[6]*=s,t[10]*=a,t[3]*=n,t[7]*=s,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,s))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),s=Math.sin(t),a=1-n,o=e.x,l=e.y,u=e.z,h=a*o,f=a*l;return this.set(h*o+n,h*l-s*u,h*u+s*l,0,h*l+s*u,f*l+n,f*u-s*o,0,h*u-s*l,f*u+s*o,a*u*u+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,s,a,o){return this.set(1,n,a,0,e,1,o,0,t,s,1,0,0,0,0,1),this}compose(e,t,n){const s=this.elements,a=t._x,o=t._y,l=t._z,u=t._w,h=a+a,f=o+o,c=l+l,d=a*h,p=a*f,g=a*c,v=o*f,_=o*c,m=l*c,y=u*h,x=u*f,b=u*c,T=n.x,E=n.y,M=n.z;return s[0]=(1-(v+m))*T,s[1]=(p+b)*T,s[2]=(g-x)*T,s[3]=0,s[4]=(p-b)*E,s[5]=(1-(d+m))*E,s[6]=(_+y)*E,s[7]=0,s[8]=(g+x)*M,s[9]=(_-y)*M,s[10]=(1-(d+v))*M,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,n){const s=this.elements;let a=ra.set(s[0],s[1],s[2]).length();const o=ra.set(s[4],s[5],s[6]).length(),l=ra.set(s[8],s[9],s[10]).length();this.determinant()<0&&(a=-a),e.x=s[12],e.y=s[13],e.z=s[14],bi.copy(this);const h=1/a,f=1/o,c=1/l;return bi.elements[0]*=h,bi.elements[1]*=h,bi.elements[2]*=h,bi.elements[4]*=f,bi.elements[5]*=f,bi.elements[6]*=f,bi.elements[8]*=c,bi.elements[9]*=c,bi.elements[10]*=c,t.setFromRotationMatrix(bi),n.x=a,n.y=o,n.z=l,this}makePerspective(e,t,n,s,a,o,l=cr){const u=this.elements,h=2*a/(t-e),f=2*a/(n-s),c=(t+e)/(t-e),d=(n+s)/(n-s);let p,g;if(l===cr)p=-(o+a)/(o-a),g=-2*o*a/(o-a);else if(l===$c)p=-o/(o-a),g=-o*a/(o-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return u[0]=h,u[4]=0,u[8]=c,u[12]=0,u[1]=0,u[5]=f,u[9]=d,u[13]=0,u[2]=0,u[6]=0,u[10]=p,u[14]=g,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,n,s,a,o,l=cr){const u=this.elements,h=1/(t-e),f=1/(n-s),c=1/(o-a),d=(t+e)*h,p=(n+s)*f;let g,v;if(l===cr)g=(o+a)*c,v=-2*c;else if(l===$c)g=a*c,v=-1*c;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return u[0]=2*h,u[4]=0,u[8]=0,u[12]=-d,u[1]=0,u[5]=2*f,u[9]=0,u[13]=-p,u[2]=0,u[6]=0,u[10]=v,u[14]=-g,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<16;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const ra=new ie,bi=new Zt,ST=new ie(0,0,0),wT=new ie(1,1,1),Sr=new ie,Gl=new ie,Yn=new ie,om=new Zt,lm=new pl;class gr{constructor(e=0,t=0,n=0,s=gr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,s=this._order){return this._x=e,this._y=t,this._z=n,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const s=e.elements,a=s[0],o=s[4],l=s[8],u=s[1],h=s[5],f=s[9],c=s[2],d=s[6],p=s[10];switch(t){case"XYZ":this._y=Math.asin(Hn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,p),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(d,h),this._z=0);break;case"YXZ":this._x=Math.asin(-Hn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(u,h)):(this._y=Math.atan2(-c,a),this._z=0);break;case"ZXY":this._x=Math.asin(Hn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-c,p),this._z=Math.atan2(-o,h)):(this._y=0,this._z=Math.atan2(u,a));break;case"ZYX":this._y=Math.asin(-Hn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-o,h));break;case"YZX":this._z=Math.asin(Hn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-f,h),this._y=Math.atan2(-c,a)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-Hn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,h),this._y=Math.atan2(l,a)):(this._x=Math.atan2(-f,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return om.makeRotationFromQuaternion(e),this.setFromRotationMatrix(om,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return lm.setFromEuler(this),this.setFromQuaternion(lm,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}gr.DEFAULT_ORDER="XYZ";class sf{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let ET=0;const cm=new ie,sa=new pl,Ki=new Zt,Wl=new ie,uo=new ie,TT=new ie,MT=new pl,um=new ie(1,0,0),dm=new ie(0,1,0),hm=new ie(0,0,1),fm={type:"added"},AT={type:"removed"},aa={type:"childadded",child:null},sd={type:"childremoved",child:null};class ai extends Ja{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ET++}),this.uuid=fl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ai.DEFAULT_UP.clone();const e=new ie,t=new gr,n=new pl,s=new ie(1,1,1);function a(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(a),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Zt},normalMatrix:{value:new nt}}),this.matrix=new Zt,this.matrixWorld=new Zt,this.matrixAutoUpdate=ai.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ai.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new sf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return sa.setFromAxisAngle(e,t),this.quaternion.multiply(sa),this}rotateOnWorldAxis(e,t){return sa.setFromAxisAngle(e,t),this.quaternion.premultiply(sa),this}rotateX(e){return this.rotateOnAxis(um,e)}rotateY(e){return this.rotateOnAxis(dm,e)}rotateZ(e){return this.rotateOnAxis(hm,e)}translateOnAxis(e,t){return cm.copy(e).applyQuaternion(this.quaternion),this.position.add(cm.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(um,e)}translateY(e){return this.translateOnAxis(dm,e)}translateZ(e){return this.translateOnAxis(hm,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ki.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Wl.copy(e):Wl.set(e,t,n);const s=this.parent;this.updateWorldMatrix(!0,!1),uo.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ki.lookAt(uo,Wl,this.up):Ki.lookAt(Wl,uo,this.up),this.quaternion.setFromRotationMatrix(Ki),s&&(Ki.extractRotation(s.matrixWorld),sa.setFromRotationMatrix(Ki),this.quaternion.premultiply(sa.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(fm),aa.child=e,this.dispatchEvent(aa),aa.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(AT),sd.child=e,this.dispatchEvent(sd),sd.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ki.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ki.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ki),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(fm),aa.child=e,this.dispatchEvent(aa),aa.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,s=this.children.length;n<s;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const s=this.children;for(let a=0,o=s.length;a<o;a++)s[a].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(uo,e,TT),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(uo,MT,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,s=t.length;n<s;n++){const a=t[n];(a.matrixWorldAutoUpdate===!0||e===!0)&&a.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const s=this.children;for(let a=0,o=s.length;a<o;a++){const l=s[a];l.matrixWorldAutoUpdate===!0&&l.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function a(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=a(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const u=l.shapes;if(Array.isArray(u))for(let h=0,f=u.length;h<f;h++){const c=u[h];a(e.shapes,c)}else a(e.shapes,u)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let u=0,h=this.material.length;u<h;u++)l.push(a(e.materials,this.material[u]));s.material=l}else s.material=a(e.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++){const u=this.animations[l];s.animations.push(a(e.animations,u))}}if(t){const l=o(e.geometries),u=o(e.materials),h=o(e.textures),f=o(e.images),c=o(e.shapes),d=o(e.skeletons),p=o(e.animations),g=o(e.nodes);l.length>0&&(n.geometries=l),u.length>0&&(n.materials=u),h.length>0&&(n.textures=h),f.length>0&&(n.images=f),c.length>0&&(n.shapes=c),d.length>0&&(n.skeletons=d),p.length>0&&(n.animations=p),g.length>0&&(n.nodes=g)}return n.object=s,n;function o(l){const u=[];for(const h in l){const f=l[h];delete f.metadata,u.push(f)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const s=e.children[n];this.add(s.clone())}return this}}ai.DEFAULT_UP=new ie(0,1,0);ai.DEFAULT_MATRIX_AUTO_UPDATE=!0;ai.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Si=new ie,Zi=new ie,ad=new ie,Ji=new ie,oa=new ie,la=new ie,pm=new ie,od=new ie,ld=new ie,cd=new ie;class Ui{constructor(e=new ie,t=new ie,n=new ie){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,s){s.subVectors(n,t),Si.subVectors(e,t),s.cross(Si);const a=s.lengthSq();return a>0?s.multiplyScalar(1/Math.sqrt(a)):s.set(0,0,0)}static getBarycoord(e,t,n,s,a){Si.subVectors(s,t),Zi.subVectors(n,t),ad.subVectors(e,t);const o=Si.dot(Si),l=Si.dot(Zi),u=Si.dot(ad),h=Zi.dot(Zi),f=Zi.dot(ad),c=o*h-l*l;if(c===0)return a.set(0,0,0),null;const d=1/c,p=(h*u-l*f)*d,g=(o*f-l*u)*d;return a.set(1-p-g,g,p)}static containsPoint(e,t,n,s){return this.getBarycoord(e,t,n,s,Ji)===null?!1:Ji.x>=0&&Ji.y>=0&&Ji.x+Ji.y<=1}static getInterpolation(e,t,n,s,a,o,l,u){return this.getBarycoord(e,t,n,s,Ji)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(a,Ji.x),u.addScaledVector(o,Ji.y),u.addScaledVector(l,Ji.z),u)}static isFrontFacing(e,t,n,s){return Si.subVectors(n,t),Zi.subVectors(e,t),Si.cross(Zi).dot(s)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,s){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,n,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Si.subVectors(this.c,this.b),Zi.subVectors(this.a,this.b),Si.cross(Zi).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ui.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ui.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,s,a){return Ui.getInterpolation(e,this.a,this.b,this.c,t,n,s,a)}containsPoint(e){return Ui.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ui.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,s=this.b,a=this.c;let o,l;oa.subVectors(s,n),la.subVectors(a,n),od.subVectors(e,n);const u=oa.dot(od),h=la.dot(od);if(u<=0&&h<=0)return t.copy(n);ld.subVectors(e,s);const f=oa.dot(ld),c=la.dot(ld);if(f>=0&&c<=f)return t.copy(s);const d=u*c-f*h;if(d<=0&&u>=0&&f<=0)return o=u/(u-f),t.copy(n).addScaledVector(oa,o);cd.subVectors(e,a);const p=oa.dot(cd),g=la.dot(cd);if(g>=0&&p<=g)return t.copy(a);const v=p*h-u*g;if(v<=0&&h>=0&&g<=0)return l=h/(h-g),t.copy(n).addScaledVector(la,l);const _=f*g-p*c;if(_<=0&&c-f>=0&&p-g>=0)return pm.subVectors(a,s),l=(c-f)/(c-f+(p-g)),t.copy(s).addScaledVector(pm,l);const m=1/(_+v+d);return o=v*m,l=d*m,t.copy(n).addScaledVector(oa,o).addScaledVector(la,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const B0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},wr={h:0,s:0,l:0},$l={h:0,s:0,l:0};function ud(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class Mt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ti){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,xt.toWorkingColorSpace(this,t),this}setRGB(e,t,n,s=xt.workingColorSpace){return this.r=e,this.g=t,this.b=n,xt.toWorkingColorSpace(this,s),this}setHSL(e,t,n,s=xt.workingColorSpace){if(e=hT(e,1),t=Hn(t,0,1),n=Hn(n,0,1),t===0)this.r=this.g=this.b=n;else{const a=n<=.5?n*(1+t):n+t-n*t,o=2*n-a;this.r=ud(o,a,e+1/3),this.g=ud(o,a,e),this.b=ud(o,a,e-1/3)}return xt.toWorkingColorSpace(this,s),this}setStyle(e,t=Ti){function n(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const o=s[1],l=s[2];switch(o){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=s[1],o=a.length;if(o===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(a,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ti){const n=B0[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Oa(e.r),this.g=Oa(e.g),this.b=Oa(e.b),this}copyLinearToSRGB(e){return this.r=Zu(e.r),this.g=Zu(e.g),this.b=Zu(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ti){return xt.fromWorkingColorSpace(yn.copy(this),e),Math.round(Hn(yn.r*255,0,255))*65536+Math.round(Hn(yn.g*255,0,255))*256+Math.round(Hn(yn.b*255,0,255))}getHexString(e=Ti){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=xt.workingColorSpace){xt.fromWorkingColorSpace(yn.copy(this),t);const n=yn.r,s=yn.g,a=yn.b,o=Math.max(n,s,a),l=Math.min(n,s,a);let u,h;const f=(l+o)/2;if(l===o)u=0,h=0;else{const c=o-l;switch(h=f<=.5?c/(o+l):c/(2-o-l),o){case n:u=(s-a)/c+(s<a?6:0);break;case s:u=(a-n)/c+2;break;case a:u=(n-s)/c+4;break}u/=6}return e.h=u,e.s=h,e.l=f,e}getRGB(e,t=xt.workingColorSpace){return xt.fromWorkingColorSpace(yn.copy(this),t),e.r=yn.r,e.g=yn.g,e.b=yn.b,e}getStyle(e=Ti){xt.fromWorkingColorSpace(yn.copy(this),e);const t=yn.r,n=yn.g,s=yn.b;return e!==Ti?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(s*255)})`}offsetHSL(e,t,n){return this.getHSL(wr),this.setHSL(wr.h+e,wr.s+t,wr.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(wr),e.getHSL($l);const n=ju(wr.h,$l.h,t),s=ju(wr.s,$l.s,t),a=ju(wr.l,$l.l,t);return this.setHSL(n,s,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,s=this.b,a=e.elements;return this.r=a[0]*t+a[3]*n+a[6]*s,this.g=a[1]*t+a[4]*n+a[7]*s,this.b=a[2]*t+a[5]*n+a[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const yn=new Mt;Mt.NAMES=B0;let CT=0;class au extends Ja{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:CT++}),this.uuid=fl(),this.name="",this.type="Material",this.blending=Ia,this.side=jr,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=ah,this.blendDst=oh,this.blendEquation=vs,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Mt(0,0,0),this.blendAlpha=0,this.depthFunc=zc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=em,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Qs,this.stencilZFail=Qs,this.stencilZPass=Qs,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(n):s&&s.isVector3&&n&&n.isVector3?s.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Ia&&(n.blending=this.blending),this.side!==jr&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==ah&&(n.blendSrc=this.blendSrc),this.blendDst!==oh&&(n.blendDst=this.blendDst),this.blendEquation!==vs&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==zc&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==em&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Qs&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Qs&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Qs&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function s(a){const o=[];for(const l in a){const u=a[l];delete u.metadata,o.push(u)}return o}if(t){const a=s(e.textures),o=s(e.images);a.length>0&&(n.textures=a),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const s=t.length;n=new Array(s);for(let a=0;a!==s;++a)n[a]=t[a].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class af extends au{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Mt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gr,this.combine=T0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Yt=new ie,Xl=new gt;class $i{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=tm,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Br,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return O0("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let s=0,a=this.itemSize;s<a;s++)this.array[e+s]=t.array[n+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Xl.fromBufferAttribute(this,t),Xl.applyMatrix3(e),this.setXY(t,Xl.x,Xl.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Yt.fromBufferAttribute(this,t),Yt.applyMatrix3(e),this.setXYZ(t,Yt.x,Yt.y,Yt.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Yt.fromBufferAttribute(this,t),Yt.applyMatrix4(e),this.setXYZ(t,Yt.x,Yt.y,Yt.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Yt.fromBufferAttribute(this,t),Yt.applyNormalMatrix(e),this.setXYZ(t,Yt.x,Yt.y,Yt.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Yt.fromBufferAttribute(this,t),Yt.transformDirection(e),this.setXYZ(t,Yt.x,Yt.y,Yt.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=oo(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=kn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=oo(t,this.array)),t}setX(e,t){return this.normalized&&(t=kn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=oo(t,this.array)),t}setY(e,t){return this.normalized&&(t=kn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=oo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=kn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=oo(t,this.array)),t}setW(e,t){return this.normalized&&(t=kn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=kn(t,this.array),n=kn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=kn(t,this.array),n=kn(n,this.array),s=kn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this}setXYZW(e,t,n,s,a){return e*=this.itemSize,this.normalized&&(t=kn(t,this.array),n=kn(n,this.array),s=kn(s,this.array),a=kn(a,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==tm&&(e.usage=this.usage),e}}class z0 extends $i{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class H0 extends $i{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Bs extends $i{constructor(e,t,n){super(new Float32Array(e),t,n)}}let DT=0;const ci=new Zt,dd=new ai,ca=new ie,jn=new ml,ho=new ml,an=new ie;class js extends Ja{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:DT++}),this.uuid=fl(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(F0(e)?H0:z0)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const a=new nt().getNormalMatrix(e);n.applyNormalMatrix(a),n.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ci.makeRotationFromQuaternion(e),this.applyMatrix4(ci),this}rotateX(e){return ci.makeRotationX(e),this.applyMatrix4(ci),this}rotateY(e){return ci.makeRotationY(e),this.applyMatrix4(ci),this}rotateZ(e){return ci.makeRotationZ(e),this.applyMatrix4(ci),this}translate(e,t,n){return ci.makeTranslation(e,t,n),this.applyMatrix4(ci),this}scale(e,t,n){return ci.makeScale(e,t,n),this.applyMatrix4(ci),this}lookAt(e){return dd.lookAt(e),dd.updateMatrix(),this.applyMatrix4(dd.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ca).negate(),this.translate(ca.x,ca.y,ca.z),this}setFromPoints(e){const t=[];for(let n=0,s=e.length;n<s;n++){const a=e[n];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new Bs(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ml);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ie(-1/0,-1/0,-1/0),new ie(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++){const a=t[n];jn.setFromBufferAttribute(a),this.morphTargetsRelative?(an.addVectors(this.boundingBox.min,jn.min),this.boundingBox.expandByPoint(an),an.addVectors(this.boundingBox.max,jn.max),this.boundingBox.expandByPoint(an)):(this.boundingBox.expandByPoint(jn.min),this.boundingBox.expandByPoint(jn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new rf);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ie,1/0);return}if(e){const n=this.boundingSphere.center;if(jn.setFromBufferAttribute(e),t)for(let a=0,o=t.length;a<o;a++){const l=t[a];ho.setFromBufferAttribute(l),this.morphTargetsRelative?(an.addVectors(jn.min,ho.min),jn.expandByPoint(an),an.addVectors(jn.max,ho.max),jn.expandByPoint(an)):(jn.expandByPoint(ho.min),jn.expandByPoint(ho.max))}jn.getCenter(n);let s=0;for(let a=0,o=e.count;a<o;a++)an.fromBufferAttribute(e,a),s=Math.max(s,n.distanceToSquared(an));if(t)for(let a=0,o=t.length;a<o;a++){const l=t[a],u=this.morphTargetsRelative;for(let h=0,f=l.count;h<f;h++)an.fromBufferAttribute(l,h),u&&(ca.fromBufferAttribute(e,h),an.add(ca)),s=Math.max(s,n.distanceToSquared(an))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,s=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new $i(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),l=[],u=[];for(let A=0;A<n.count;A++)l[A]=new ie,u[A]=new ie;const h=new ie,f=new ie,c=new ie,d=new gt,p=new gt,g=new gt,v=new ie,_=new ie;function m(A,S,w){h.fromBufferAttribute(n,A),f.fromBufferAttribute(n,S),c.fromBufferAttribute(n,w),d.fromBufferAttribute(a,A),p.fromBufferAttribute(a,S),g.fromBufferAttribute(a,w),f.sub(h),c.sub(h),p.sub(d),g.sub(d);const C=1/(p.x*g.y-g.x*p.y);isFinite(C)&&(v.copy(f).multiplyScalar(g.y).addScaledVector(c,-p.y).multiplyScalar(C),_.copy(c).multiplyScalar(p.x).addScaledVector(f,-g.x).multiplyScalar(C),l[A].add(v),l[S].add(v),l[w].add(v),u[A].add(_),u[S].add(_),u[w].add(_))}let y=this.groups;y.length===0&&(y=[{start:0,count:e.count}]);for(let A=0,S=y.length;A<S;++A){const w=y[A],C=w.start,D=w.count;for(let R=C,F=C+D;R<F;R+=3)m(e.getX(R+0),e.getX(R+1),e.getX(R+2))}const x=new ie,b=new ie,T=new ie,E=new ie;function M(A){T.fromBufferAttribute(s,A),E.copy(T);const S=l[A];x.copy(S),x.sub(T.multiplyScalar(T.dot(S))).normalize(),b.crossVectors(E,S);const C=b.dot(u[A])<0?-1:1;o.setXYZW(A,x.x,x.y,x.z,C)}for(let A=0,S=y.length;A<S;++A){const w=y[A],C=w.start,D=w.count;for(let R=C,F=C+D;R<F;R+=3)M(e.getX(R+0)),M(e.getX(R+1)),M(e.getX(R+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new $i(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let d=0,p=n.count;d<p;d++)n.setXYZ(d,0,0,0);const s=new ie,a=new ie,o=new ie,l=new ie,u=new ie,h=new ie,f=new ie,c=new ie;if(e)for(let d=0,p=e.count;d<p;d+=3){const g=e.getX(d+0),v=e.getX(d+1),_=e.getX(d+2);s.fromBufferAttribute(t,g),a.fromBufferAttribute(t,v),o.fromBufferAttribute(t,_),f.subVectors(o,a),c.subVectors(s,a),f.cross(c),l.fromBufferAttribute(n,g),u.fromBufferAttribute(n,v),h.fromBufferAttribute(n,_),l.add(f),u.add(f),h.add(f),n.setXYZ(g,l.x,l.y,l.z),n.setXYZ(v,u.x,u.y,u.z),n.setXYZ(_,h.x,h.y,h.z)}else for(let d=0,p=t.count;d<p;d+=3)s.fromBufferAttribute(t,d+0),a.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),f.subVectors(o,a),c.subVectors(s,a),f.cross(c),n.setXYZ(d+0,f.x,f.y,f.z),n.setXYZ(d+1,f.x,f.y,f.z),n.setXYZ(d+2,f.x,f.y,f.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)an.fromBufferAttribute(e,t),an.normalize(),e.setXYZ(t,an.x,an.y,an.z)}toNonIndexed(){function e(l,u){const h=l.array,f=l.itemSize,c=l.normalized,d=new h.constructor(u.length*f);let p=0,g=0;for(let v=0,_=u.length;v<_;v++){l.isInterleavedBufferAttribute?p=u[v]*l.data.stride+l.offset:p=u[v]*f;for(let m=0;m<f;m++)d[g++]=h[p++]}return new $i(d,f,c)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new js,n=this.index.array,s=this.attributes;for(const l in s){const u=s[l],h=e(u,n);t.setAttribute(l,h)}const a=this.morphAttributes;for(const l in a){const u=[],h=a[l];for(let f=0,c=h.length;f<c;f++){const d=h[f],p=e(d,n);u.push(p)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,u=o.length;l<u;l++){const h=o[l];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const h in u)u[h]!==void 0&&(e[h]=u[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const u in n){const h=n[u];e.data.attributes[u]=h.toJSON(e.data)}const s={};let a=!1;for(const u in this.morphAttributes){const h=this.morphAttributes[u],f=[];for(let c=0,d=h.length;c<d;c++){const p=h[c];f.push(p.toJSON(e.data))}f.length>0&&(s[u]=f,a=!0)}a&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const s=e.attributes;for(const h in s){const f=s[h];this.setAttribute(h,f.clone(t))}const a=e.morphAttributes;for(const h in a){const f=[],c=a[h];for(let d=0,p=c.length;d<p;d++)f.push(c[d].clone(t));this.morphAttributes[h]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let h=0,f=o.length;h<f;h++){const c=o[h];this.addGroup(c.start,c.count,c.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const mm=new Zt,os=new k0,ql=new rf,gm=new ie,ua=new ie,da=new ie,ha=new ie,hd=new ie,Yl=new ie,jl=new gt,Kl=new gt,Zl=new gt,_m=new ie,vm=new ie,ym=new ie,Jl=new ie,Ql=new ie;class zi extends ai{constructor(e=new js,t=new af){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=s.length;a<o;a++){const l=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}getVertexPosition(e,t){const n=this.geometry,s=n.attributes.position,a=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(s,e);const l=this.morphTargetInfluences;if(a&&l){Yl.set(0,0,0);for(let u=0,h=a.length;u<h;u++){const f=l[u],c=a[u];f!==0&&(hd.fromBufferAttribute(c,e),o?Yl.addScaledVector(hd,f):Yl.addScaledVector(hd.sub(t),f))}t.add(Yl)}return t}raycast(e,t){const n=this.geometry,s=this.material,a=this.matrixWorld;s!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),ql.copy(n.boundingSphere),ql.applyMatrix4(a),os.copy(e.ray).recast(e.near),!(ql.containsPoint(os.origin)===!1&&(os.intersectSphere(ql,gm)===null||os.origin.distanceToSquared(gm)>(e.far-e.near)**2))&&(mm.copy(a).invert(),os.copy(e.ray).applyMatrix4(mm),!(n.boundingBox!==null&&os.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,os)))}_computeIntersections(e,t,n){let s;const a=this.geometry,o=this.material,l=a.index,u=a.attributes.position,h=a.attributes.uv,f=a.attributes.uv1,c=a.attributes.normal,d=a.groups,p=a.drawRange;if(l!==null)if(Array.isArray(o))for(let g=0,v=d.length;g<v;g++){const _=d[g],m=o[_.materialIndex],y=Math.max(_.start,p.start),x=Math.min(l.count,Math.min(_.start+_.count,p.start+p.count));for(let b=y,T=x;b<T;b+=3){const E=l.getX(b),M=l.getX(b+1),A=l.getX(b+2);s=ec(this,m,e,n,h,f,c,E,M,A),s&&(s.faceIndex=Math.floor(b/3),s.face.materialIndex=_.materialIndex,t.push(s))}}else{const g=Math.max(0,p.start),v=Math.min(l.count,p.start+p.count);for(let _=g,m=v;_<m;_+=3){const y=l.getX(_),x=l.getX(_+1),b=l.getX(_+2);s=ec(this,o,e,n,h,f,c,y,x,b),s&&(s.faceIndex=Math.floor(_/3),t.push(s))}}else if(u!==void 0)if(Array.isArray(o))for(let g=0,v=d.length;g<v;g++){const _=d[g],m=o[_.materialIndex],y=Math.max(_.start,p.start),x=Math.min(u.count,Math.min(_.start+_.count,p.start+p.count));for(let b=y,T=x;b<T;b+=3){const E=b,M=b+1,A=b+2;s=ec(this,m,e,n,h,f,c,E,M,A),s&&(s.faceIndex=Math.floor(b/3),s.face.materialIndex=_.materialIndex,t.push(s))}}else{const g=Math.max(0,p.start),v=Math.min(u.count,p.start+p.count);for(let _=g,m=v;_<m;_+=3){const y=_,x=_+1,b=_+2;s=ec(this,o,e,n,h,f,c,y,x,b),s&&(s.faceIndex=Math.floor(_/3),t.push(s))}}}}function PT(r,e,t,n,s,a,o,l){let u;if(e.side===Xn?u=n.intersectTriangle(o,a,s,!0,l):u=n.intersectTriangle(s,a,o,e.side===jr,l),u===null)return null;Ql.copy(l),Ql.applyMatrix4(r.matrixWorld);const h=t.ray.origin.distanceTo(Ql);return h<t.near||h>t.far?null:{distance:h,point:Ql.clone(),object:r}}function ec(r,e,t,n,s,a,o,l,u,h){r.getVertexPosition(l,ua),r.getVertexPosition(u,da),r.getVertexPosition(h,ha);const f=PT(r,e,t,n,ua,da,ha,Jl);if(f){s&&(jl.fromBufferAttribute(s,l),Kl.fromBufferAttribute(s,u),Zl.fromBufferAttribute(s,h),f.uv=Ui.getInterpolation(Jl,ua,da,ha,jl,Kl,Zl,new gt)),a&&(jl.fromBufferAttribute(a,l),Kl.fromBufferAttribute(a,u),Zl.fromBufferAttribute(a,h),f.uv1=Ui.getInterpolation(Jl,ua,da,ha,jl,Kl,Zl,new gt)),o&&(_m.fromBufferAttribute(o,l),vm.fromBufferAttribute(o,u),ym.fromBufferAttribute(o,h),f.normal=Ui.getInterpolation(Jl,ua,da,ha,_m,vm,ym,new ie),f.normal.dot(n.direction)>0&&f.normal.multiplyScalar(-1));const c={a:l,b:u,c:h,normal:new ie,materialIndex:0};Ui.getNormal(ua,da,ha,c.normal),f.face=c}return f}class gl extends js{constructor(e=1,t=1,n=1,s=1,a=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:s,heightSegments:a,depthSegments:o};const l=this;s=Math.floor(s),a=Math.floor(a),o=Math.floor(o);const u=[],h=[],f=[],c=[];let d=0,p=0;g("z","y","x",-1,-1,n,t,e,o,a,0),g("z","y","x",1,-1,n,t,-e,o,a,1),g("x","z","y",1,1,e,n,t,s,o,2),g("x","z","y",1,-1,e,n,-t,s,o,3),g("x","y","z",1,-1,e,t,n,s,a,4),g("x","y","z",-1,-1,e,t,-n,s,a,5),this.setIndex(u),this.setAttribute("position",new Bs(h,3)),this.setAttribute("normal",new Bs(f,3)),this.setAttribute("uv",new Bs(c,2));function g(v,_,m,y,x,b,T,E,M,A,S){const w=b/M,C=T/A,D=b/2,R=T/2,F=E/2,k=M+1,z=A+1;let O=0,I=0;const j=new ie;for(let N=0;N<z;N++){const q=N*C-R;for(let ne=0;ne<k;ne++){const W=ne*w-D;j[v]=W*y,j[_]=q*x,j[m]=F,h.push(j.x,j.y,j.z),j[v]=0,j[_]=0,j[m]=E>0?1:-1,f.push(j.x,j.y,j.z),c.push(ne/M),c.push(1-N/A),O+=1}}for(let N=0;N<A;N++)for(let q=0;q<M;q++){const ne=d+q+k*N,W=d+q+k*(N+1),H=d+(q+1)+k*(N+1),G=d+(q+1)+k*N;u.push(ne,W,G),u.push(W,H,G),I+=6}l.addGroup(p,I,S),p+=I,d+=O}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ja(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const s=r[t][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=s.clone():Array.isArray(s)?e[t][n]=s.slice():e[t][n]=s}}return e}function An(r){const e={};for(let t=0;t<r.length;t++){const n=ja(r[t]);for(const s in n)e[s]=n[s]}return e}function RT(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function V0(r){const e=r.getRenderTarget();return e===null?r.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:xt.workingColorSpace}const LT={clone:ja,merge:An};var IT=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,FT=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Zr extends au{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=IT,this.fragmentShader=FT,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ja(e.uniforms),this.uniformsGroups=RT(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?t.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[s]={type:"m4",value:o.toArray()}:t.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const s in this.extensions)this.extensions[s]===!0&&(n[s]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class G0 extends ai{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Zt,this.projectionMatrix=new Zt,this.projectionMatrixInverse=new Zt,this.coordinateSystem=cr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Er=new ie,xm=new gt,bm=new gt;class fi extends G0{constructor(e=50,t=1,n=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=hh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Yu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return hh*2*Math.atan(Math.tan(Yu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Er.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Er.x,Er.y).multiplyScalar(-e/Er.z),Er.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Er.x,Er.y).multiplyScalar(-e/Er.z)}getViewSize(e,t){return this.getViewBounds(e,xm,bm),t.subVectors(bm,xm)}setViewOffset(e,t,n,s,a,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Yu*.5*this.fov)/this.zoom,n=2*t,s=this.aspect*n,a=-.5*s;const o=this.view;if(this.view!==null&&this.view.enabled){const u=o.fullWidth,h=o.fullHeight;a+=o.offsetX*s/u,t-=o.offsetY*n/h,s*=o.width/u,n*=o.height/h}const l=this.filmOffset;l!==0&&(a+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+s,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const fa=-90,pa=1;class OT extends ai{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new fi(fa,pa,e,t);s.layers=this.layers,this.add(s);const a=new fi(fa,pa,e,t);a.layers=this.layers,this.add(a);const o=new fi(fa,pa,e,t);o.layers=this.layers,this.add(o);const l=new fi(fa,pa,e,t);l.layers=this.layers,this.add(l);const u=new fi(fa,pa,e,t);u.layers=this.layers,this.add(u);const h=new fi(fa,pa,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,s,a,o,l,u]=t;for(const h of t)this.remove(h);if(e===cr)n.up.set(0,1,0),n.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===$c)n.up.set(0,-1,0),n.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,o,l,u,h,f]=this.children,c=e.getRenderTarget(),d=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const v=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,s),e.render(t,a),e.setRenderTarget(n,1,s),e.render(t,o),e.setRenderTarget(n,2,s),e.render(t,l),e.setRenderTarget(n,3,s),e.render(t,u),e.setRenderTarget(n,4,s),e.render(t,h),n.texture.generateMipmaps=v,e.setRenderTarget(n,5,s),e.render(t,f),e.setRenderTarget(c,d,p),e.xr.enabled=g,n.texture.needsPMREMUpdate=!0}}class W0 extends Nn{constructor(e,t,n,s,a,o,l,u,h,f){e=e!==void 0?e:[],t=t!==void 0?t:Wa,super(e,t,n,s,a,o,l,u,h,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class NT extends Xs{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},s=[n,n,n,n,n,n];this.texture=new W0(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ni}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new gl(5,5,5),a=new Zr({name:"CubemapFromEquirect",uniforms:ja(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Xn,blending:Gr});a.uniforms.tEquirect.value=t;const o=new zi(s,a),l=t.minFilter;return t.minFilter===Ds&&(t.minFilter=ni),new OT(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,s){const a=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,s);e.setRenderTarget(a)}}const fd=new ie,UT=new ie,kT=new nt;class ms{constructor(e=new ie(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,s){return this.normal.set(e,t,n),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const s=fd.subVectors(n,t).cross(UT.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(fd),s=this.normal.dot(n);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/s;return a<0||a>1?null:t.copy(e.start).addScaledVector(n,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||kT.getNormalMatrix(e),s=this.coplanarPoint(fd).applyMatrix4(e),a=this.normal.applyMatrix3(n).normalize();return this.constant=-s.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ls=new rf,tc=new ie;class $0{constructor(e=new ms,t=new ms,n=new ms,s=new ms,a=new ms,o=new ms){this.planes=[e,t,n,s,a,o]}set(e,t,n,s,a,o){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(n),l[3].copy(s),l[4].copy(a),l[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=cr){const n=this.planes,s=e.elements,a=s[0],o=s[1],l=s[2],u=s[3],h=s[4],f=s[5],c=s[6],d=s[7],p=s[8],g=s[9],v=s[10],_=s[11],m=s[12],y=s[13],x=s[14],b=s[15];if(n[0].setComponents(u-a,d-h,_-p,b-m).normalize(),n[1].setComponents(u+a,d+h,_+p,b+m).normalize(),n[2].setComponents(u+o,d+f,_+g,b+y).normalize(),n[3].setComponents(u-o,d-f,_-g,b-y).normalize(),n[4].setComponents(u-l,d-c,_-v,b-x).normalize(),t===cr)n[5].setComponents(u+l,d+c,_+v,b+x).normalize();else if(t===$c)n[5].setComponents(l,c,v,x).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ls.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),ls.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ls)}intersectsSprite(e){return ls.center.set(0,0,0),ls.radius=.7071067811865476,ls.applyMatrix4(e.matrixWorld),this.intersectsSphere(ls)}intersectsSphere(e){const t=this.planes,n=e.center,s=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(n)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const s=t[n];if(tc.x=s.normal.x>0?e.max.x:e.min.x,tc.y=s.normal.y>0?e.max.y:e.min.y,tc.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(tc)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function X0(){let r=null,e=!1,t=null,n=null;function s(a,o){t(a,o),n=r.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(s),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){r=a}}}function BT(r){const e=new WeakMap;function t(l,u){const h=l.array,f=l.usage,c=h.byteLength,d=r.createBuffer();r.bindBuffer(u,d),r.bufferData(u,h,f),l.onUploadCallback();let p;if(h instanceof Float32Array)p=r.FLOAT;else if(h instanceof Uint16Array)l.isFloat16BufferAttribute?p=r.HALF_FLOAT:p=r.UNSIGNED_SHORT;else if(h instanceof Int16Array)p=r.SHORT;else if(h instanceof Uint32Array)p=r.UNSIGNED_INT;else if(h instanceof Int32Array)p=r.INT;else if(h instanceof Int8Array)p=r.BYTE;else if(h instanceof Uint8Array)p=r.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)p=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:d,type:p,bytesPerElement:h.BYTES_PER_ELEMENT,version:l.version,size:c}}function n(l,u,h){const f=u.array,c=u._updateRange,d=u.updateRanges;if(r.bindBuffer(h,l),c.count===-1&&d.length===0&&r.bufferSubData(h,0,f),d.length!==0){for(let p=0,g=d.length;p<g;p++){const v=d[p];r.bufferSubData(h,v.start*f.BYTES_PER_ELEMENT,f,v.start,v.count)}u.clearUpdateRanges()}c.count!==-1&&(r.bufferSubData(h,c.offset*f.BYTES_PER_ELEMENT,f,c.offset,c.count),c.count=-1),u.onUploadCallback()}function s(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function a(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=e.get(l);u&&(r.deleteBuffer(u.buffer),e.delete(l))}function o(l,u){if(l.isGLBufferAttribute){const f=e.get(l);(!f||f.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}l.isInterleavedBufferAttribute&&(l=l.data);const h=e.get(l);if(h===void 0)e.set(l,t(l,u));else if(h.version<l.version){if(h.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(h.buffer,l,u),h.version=l.version}}return{get:s,remove:a,update:o}}class _l extends js{constructor(e=1,t=1,n=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:s};const a=e/2,o=t/2,l=Math.floor(n),u=Math.floor(s),h=l+1,f=u+1,c=e/l,d=t/u,p=[],g=[],v=[],_=[];for(let m=0;m<f;m++){const y=m*d-o;for(let x=0;x<h;x++){const b=x*c-a;g.push(b,-y,0),v.push(0,0,1),_.push(x/l),_.push(1-m/u)}}for(let m=0;m<u;m++)for(let y=0;y<l;y++){const x=y+h*m,b=y+h*(m+1),T=y+1+h*(m+1),E=y+1+h*m;p.push(x,b,E),p.push(b,T,E)}this.setIndex(p),this.setAttribute("position",new Bs(g,3)),this.setAttribute("normal",new Bs(v,3)),this.setAttribute("uv",new Bs(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _l(e.width,e.height,e.widthSegments,e.heightSegments)}}var zT=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,HT=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,VT=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,GT=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,WT=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,$T=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,XT=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,qT=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,YT=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,jT=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,KT=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,ZT=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,JT=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,QT=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,eM=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,tM=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,nM=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,iM=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,rM=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,sM=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,aM=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,oM=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,lM=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( batchId );
	vColor.xyz *= batchingColor.xyz;
#endif`,cM=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,uM=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,dM=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,hM=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,fM=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,pM=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,mM=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,gM="gl_FragColor = linearToOutputTexel( gl_FragColor );",_M=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,vM=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,yM=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,xM=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,bM=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,SM=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,wM=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,EM=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,TM=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,MM=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,AM=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,CM=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,DM=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,PM=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,RM=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,LM=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,IM=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,FM=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,OM=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,NM=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,UM=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,kM=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,BM=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,zM=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,HM=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,VM=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,GM=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,WM=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,$M=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,XM=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,qM=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,YM=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,jM=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,KM=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,ZM=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,JM=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,QM=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,e1=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,t1=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,n1=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,i1=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,r1=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,s1=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,a1=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,o1=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,l1=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,c1=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,u1=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,d1=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,h1=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,f1=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,p1=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,m1=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,g1=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,_1=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,v1=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,y1=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,x1=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,b1=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,S1=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,w1=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,E1=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,T1=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,M1=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,A1=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,C1=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,D1=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,P1=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,R1=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,L1=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,I1=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,F1=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,O1=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,N1=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,U1=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,k1=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const B1=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,z1=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,H1=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,V1=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,G1=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,W1=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,$1=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,X1=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,q1=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Y1=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,j1=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,K1=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Z1=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,J1=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Q1=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,eA=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tA=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nA=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iA=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,rA=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sA=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,aA=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,oA=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lA=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cA=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,uA=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dA=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hA=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fA=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,pA=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,mA=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gA=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,_A=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,vA=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,tt={alphahash_fragment:zT,alphahash_pars_fragment:HT,alphamap_fragment:VT,alphamap_pars_fragment:GT,alphatest_fragment:WT,alphatest_pars_fragment:$T,aomap_fragment:XT,aomap_pars_fragment:qT,batching_pars_vertex:YT,batching_vertex:jT,begin_vertex:KT,beginnormal_vertex:ZT,bsdfs:JT,iridescence_fragment:QT,bumpmap_pars_fragment:eM,clipping_planes_fragment:tM,clipping_planes_pars_fragment:nM,clipping_planes_pars_vertex:iM,clipping_planes_vertex:rM,color_fragment:sM,color_pars_fragment:aM,color_pars_vertex:oM,color_vertex:lM,common:cM,cube_uv_reflection_fragment:uM,defaultnormal_vertex:dM,displacementmap_pars_vertex:hM,displacementmap_vertex:fM,emissivemap_fragment:pM,emissivemap_pars_fragment:mM,colorspace_fragment:gM,colorspace_pars_fragment:_M,envmap_fragment:vM,envmap_common_pars_fragment:yM,envmap_pars_fragment:xM,envmap_pars_vertex:bM,envmap_physical_pars_fragment:LM,envmap_vertex:SM,fog_vertex:wM,fog_pars_vertex:EM,fog_fragment:TM,fog_pars_fragment:MM,gradientmap_pars_fragment:AM,lightmap_pars_fragment:CM,lights_lambert_fragment:DM,lights_lambert_pars_fragment:PM,lights_pars_begin:RM,lights_toon_fragment:IM,lights_toon_pars_fragment:FM,lights_phong_fragment:OM,lights_phong_pars_fragment:NM,lights_physical_fragment:UM,lights_physical_pars_fragment:kM,lights_fragment_begin:BM,lights_fragment_maps:zM,lights_fragment_end:HM,logdepthbuf_fragment:VM,logdepthbuf_pars_fragment:GM,logdepthbuf_pars_vertex:WM,logdepthbuf_vertex:$M,map_fragment:XM,map_pars_fragment:qM,map_particle_fragment:YM,map_particle_pars_fragment:jM,metalnessmap_fragment:KM,metalnessmap_pars_fragment:ZM,morphinstance_vertex:JM,morphcolor_vertex:QM,morphnormal_vertex:e1,morphtarget_pars_vertex:t1,morphtarget_vertex:n1,normal_fragment_begin:i1,normal_fragment_maps:r1,normal_pars_fragment:s1,normal_pars_vertex:a1,normal_vertex:o1,normalmap_pars_fragment:l1,clearcoat_normal_fragment_begin:c1,clearcoat_normal_fragment_maps:u1,clearcoat_pars_fragment:d1,iridescence_pars_fragment:h1,opaque_fragment:f1,packing:p1,premultiplied_alpha_fragment:m1,project_vertex:g1,dithering_fragment:_1,dithering_pars_fragment:v1,roughnessmap_fragment:y1,roughnessmap_pars_fragment:x1,shadowmap_pars_fragment:b1,shadowmap_pars_vertex:S1,shadowmap_vertex:w1,shadowmask_pars_fragment:E1,skinbase_vertex:T1,skinning_pars_vertex:M1,skinning_vertex:A1,skinnormal_vertex:C1,specularmap_fragment:D1,specularmap_pars_fragment:P1,tonemapping_fragment:R1,tonemapping_pars_fragment:L1,transmission_fragment:I1,transmission_pars_fragment:F1,uv_pars_fragment:O1,uv_pars_vertex:N1,uv_vertex:U1,worldpos_vertex:k1,background_vert:B1,background_frag:z1,backgroundCube_vert:H1,backgroundCube_frag:V1,cube_vert:G1,cube_frag:W1,depth_vert:$1,depth_frag:X1,distanceRGBA_vert:q1,distanceRGBA_frag:Y1,equirect_vert:j1,equirect_frag:K1,linedashed_vert:Z1,linedashed_frag:J1,meshbasic_vert:Q1,meshbasic_frag:eA,meshlambert_vert:tA,meshlambert_frag:nA,meshmatcap_vert:iA,meshmatcap_frag:rA,meshnormal_vert:sA,meshnormal_frag:aA,meshphong_vert:oA,meshphong_frag:lA,meshphysical_vert:cA,meshphysical_frag:uA,meshtoon_vert:dA,meshtoon_frag:hA,points_vert:fA,points_frag:pA,shadow_vert:mA,shadow_frag:gA,sprite_vert:_A,sprite_frag:vA},Se={common:{diffuse:{value:new Mt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new nt},alphaMap:{value:null},alphaMapTransform:{value:new nt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new nt}},envmap:{envMap:{value:null},envMapRotation:{value:new nt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new nt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new nt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new nt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new nt},normalScale:{value:new gt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new nt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new nt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new nt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new nt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Mt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Mt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new nt},alphaTest:{value:0},uvTransform:{value:new nt}},sprite:{diffuse:{value:new Mt(16777215)},opacity:{value:1},center:{value:new gt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new nt},alphaMap:{value:null},alphaMapTransform:{value:new nt},alphaTest:{value:0}}},Ii={basic:{uniforms:An([Se.common,Se.specularmap,Se.envmap,Se.aomap,Se.lightmap,Se.fog]),vertexShader:tt.meshbasic_vert,fragmentShader:tt.meshbasic_frag},lambert:{uniforms:An([Se.common,Se.specularmap,Se.envmap,Se.aomap,Se.lightmap,Se.emissivemap,Se.bumpmap,Se.normalmap,Se.displacementmap,Se.fog,Se.lights,{emissive:{value:new Mt(0)}}]),vertexShader:tt.meshlambert_vert,fragmentShader:tt.meshlambert_frag},phong:{uniforms:An([Se.common,Se.specularmap,Se.envmap,Se.aomap,Se.lightmap,Se.emissivemap,Se.bumpmap,Se.normalmap,Se.displacementmap,Se.fog,Se.lights,{emissive:{value:new Mt(0)},specular:{value:new Mt(1118481)},shininess:{value:30}}]),vertexShader:tt.meshphong_vert,fragmentShader:tt.meshphong_frag},standard:{uniforms:An([Se.common,Se.envmap,Se.aomap,Se.lightmap,Se.emissivemap,Se.bumpmap,Se.normalmap,Se.displacementmap,Se.roughnessmap,Se.metalnessmap,Se.fog,Se.lights,{emissive:{value:new Mt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:tt.meshphysical_vert,fragmentShader:tt.meshphysical_frag},toon:{uniforms:An([Se.common,Se.aomap,Se.lightmap,Se.emissivemap,Se.bumpmap,Se.normalmap,Se.displacementmap,Se.gradientmap,Se.fog,Se.lights,{emissive:{value:new Mt(0)}}]),vertexShader:tt.meshtoon_vert,fragmentShader:tt.meshtoon_frag},matcap:{uniforms:An([Se.common,Se.bumpmap,Se.normalmap,Se.displacementmap,Se.fog,{matcap:{value:null}}]),vertexShader:tt.meshmatcap_vert,fragmentShader:tt.meshmatcap_frag},points:{uniforms:An([Se.points,Se.fog]),vertexShader:tt.points_vert,fragmentShader:tt.points_frag},dashed:{uniforms:An([Se.common,Se.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:tt.linedashed_vert,fragmentShader:tt.linedashed_frag},depth:{uniforms:An([Se.common,Se.displacementmap]),vertexShader:tt.depth_vert,fragmentShader:tt.depth_frag},normal:{uniforms:An([Se.common,Se.bumpmap,Se.normalmap,Se.displacementmap,{opacity:{value:1}}]),vertexShader:tt.meshnormal_vert,fragmentShader:tt.meshnormal_frag},sprite:{uniforms:An([Se.sprite,Se.fog]),vertexShader:tt.sprite_vert,fragmentShader:tt.sprite_frag},background:{uniforms:{uvTransform:{value:new nt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:tt.background_vert,fragmentShader:tt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new nt}},vertexShader:tt.backgroundCube_vert,fragmentShader:tt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:tt.cube_vert,fragmentShader:tt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:tt.equirect_vert,fragmentShader:tt.equirect_frag},distanceRGBA:{uniforms:An([Se.common,Se.displacementmap,{referencePosition:{value:new ie},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:tt.distanceRGBA_vert,fragmentShader:tt.distanceRGBA_frag},shadow:{uniforms:An([Se.lights,Se.fog,{color:{value:new Mt(0)},opacity:{value:1}}]),vertexShader:tt.shadow_vert,fragmentShader:tt.shadow_frag}};Ii.physical={uniforms:An([Ii.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new nt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new nt},clearcoatNormalScale:{value:new gt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new nt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new nt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new nt},sheen:{value:0},sheenColor:{value:new Mt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new nt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new nt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new nt},transmissionSamplerSize:{value:new gt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new nt},attenuationDistance:{value:0},attenuationColor:{value:new Mt(0)},specularColor:{value:new Mt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new nt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new nt},anisotropyVector:{value:new gt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new nt}}]),vertexShader:tt.meshphysical_vert,fragmentShader:tt.meshphysical_frag};const nc={r:0,b:0,g:0},cs=new gr,yA=new Zt;function xA(r,e,t,n,s,a,o){const l=new Mt(0);let u=a===!0?0:1,h,f,c=null,d=0,p=null;function g(y){let x=y.isScene===!0?y.background:null;return x&&x.isTexture&&(x=(y.backgroundBlurriness>0?t:e).get(x)),x}function v(y){let x=!1;const b=g(y);b===null?m(l,u):b&&b.isColor&&(m(b,1),x=!0);const T=r.xr.getEnvironmentBlendMode();T==="additive"?n.buffers.color.setClear(0,0,0,1,o):T==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(r.autoClear||x)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil))}function _(y,x){const b=g(x);b&&(b.isCubeTexture||b.mapping===iu)?(f===void 0&&(f=new zi(new gl(1,1,1),new Zr({name:"BackgroundCubeMaterial",uniforms:ja(Ii.backgroundCube.uniforms),vertexShader:Ii.backgroundCube.vertexShader,fragmentShader:Ii.backgroundCube.fragmentShader,side:Xn,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(T,E,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(f)),cs.copy(x.backgroundRotation),cs.x*=-1,cs.y*=-1,cs.z*=-1,b.isCubeTexture&&b.isRenderTargetTexture===!1&&(cs.y*=-1,cs.z*=-1),f.material.uniforms.envMap.value=b,f.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(yA.makeRotationFromEuler(cs)),f.material.toneMapped=xt.getTransfer(b.colorSpace)!==Rt,(c!==b||d!==b.version||p!==r.toneMapping)&&(f.material.needsUpdate=!0,c=b,d=b.version,p=r.toneMapping),f.layers.enableAll(),y.unshift(f,f.geometry,f.material,0,0,null)):b&&b.isTexture&&(h===void 0&&(h=new zi(new _l(2,2),new Zr({name:"BackgroundMaterial",uniforms:ja(Ii.background.uniforms),vertexShader:Ii.background.vertexShader,fragmentShader:Ii.background.fragmentShader,side:jr,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(h)),h.material.uniforms.t2D.value=b,h.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,h.material.toneMapped=xt.getTransfer(b.colorSpace)!==Rt,b.matrixAutoUpdate===!0&&b.updateMatrix(),h.material.uniforms.uvTransform.value.copy(b.matrix),(c!==b||d!==b.version||p!==r.toneMapping)&&(h.material.needsUpdate=!0,c=b,d=b.version,p=r.toneMapping),h.layers.enableAll(),y.unshift(h,h.geometry,h.material,0,0,null))}function m(y,x){y.getRGB(nc,V0(r)),n.buffers.color.setClear(nc.r,nc.g,nc.b,x,o)}return{getClearColor:function(){return l},setClearColor:function(y,x=1){l.set(y),u=x,m(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(y){u=y,m(l,u)},render:v,addToRenderList:_}}function bA(r,e){const t=r.getParameter(r.MAX_VERTEX_ATTRIBS),n={},s=d(null);let a=s,o=!1;function l(w,C,D,R,F){let k=!1;const z=c(R,D,C);a!==z&&(a=z,h(a.object)),k=p(w,R,D,F),k&&g(w,R,D,F),F!==null&&e.update(F,r.ELEMENT_ARRAY_BUFFER),(k||o)&&(o=!1,b(w,C,D,R),F!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.get(F).buffer))}function u(){return r.createVertexArray()}function h(w){return r.bindVertexArray(w)}function f(w){return r.deleteVertexArray(w)}function c(w,C,D){const R=D.wireframe===!0;let F=n[w.id];F===void 0&&(F={},n[w.id]=F);let k=F[C.id];k===void 0&&(k={},F[C.id]=k);let z=k[R];return z===void 0&&(z=d(u()),k[R]=z),z}function d(w){const C=[],D=[],R=[];for(let F=0;F<t;F++)C[F]=0,D[F]=0,R[F]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:C,enabledAttributes:D,attributeDivisors:R,object:w,attributes:{},index:null}}function p(w,C,D,R){const F=a.attributes,k=C.attributes;let z=0;const O=D.getAttributes();for(const I in O)if(O[I].location>=0){const N=F[I];let q=k[I];if(q===void 0&&(I==="instanceMatrix"&&w.instanceMatrix&&(q=w.instanceMatrix),I==="instanceColor"&&w.instanceColor&&(q=w.instanceColor)),N===void 0||N.attribute!==q||q&&N.data!==q.data)return!0;z++}return a.attributesNum!==z||a.index!==R}function g(w,C,D,R){const F={},k=C.attributes;let z=0;const O=D.getAttributes();for(const I in O)if(O[I].location>=0){let N=k[I];N===void 0&&(I==="instanceMatrix"&&w.instanceMatrix&&(N=w.instanceMatrix),I==="instanceColor"&&w.instanceColor&&(N=w.instanceColor));const q={};q.attribute=N,N&&N.data&&(q.data=N.data),F[I]=q,z++}a.attributes=F,a.attributesNum=z,a.index=R}function v(){const w=a.newAttributes;for(let C=0,D=w.length;C<D;C++)w[C]=0}function _(w){m(w,0)}function m(w,C){const D=a.newAttributes,R=a.enabledAttributes,F=a.attributeDivisors;D[w]=1,R[w]===0&&(r.enableVertexAttribArray(w),R[w]=1),F[w]!==C&&(r.vertexAttribDivisor(w,C),F[w]=C)}function y(){const w=a.newAttributes,C=a.enabledAttributes;for(let D=0,R=C.length;D<R;D++)C[D]!==w[D]&&(r.disableVertexAttribArray(D),C[D]=0)}function x(w,C,D,R,F,k,z){z===!0?r.vertexAttribIPointer(w,C,D,F,k):r.vertexAttribPointer(w,C,D,R,F,k)}function b(w,C,D,R){v();const F=R.attributes,k=D.getAttributes(),z=C.defaultAttributeValues;for(const O in k){const I=k[O];if(I.location>=0){let j=F[O];if(j===void 0&&(O==="instanceMatrix"&&w.instanceMatrix&&(j=w.instanceMatrix),O==="instanceColor"&&w.instanceColor&&(j=w.instanceColor)),j!==void 0){const N=j.normalized,q=j.itemSize,ne=e.get(j);if(ne===void 0)continue;const W=ne.buffer,H=ne.type,G=ne.bytesPerElement,ee=H===r.INT||H===r.UNSIGNED_INT||j.gpuType===A0;if(j.isInterleavedBufferAttribute){const te=j.data,pe=te.stride,me=j.offset;if(te.isInstancedInterleavedBuffer){for(let _e=0;_e<I.locationSize;_e++)m(I.location+_e,te.meshPerAttribute);w.isInstancedMesh!==!0&&R._maxInstanceCount===void 0&&(R._maxInstanceCount=te.meshPerAttribute*te.count)}else for(let _e=0;_e<I.locationSize;_e++)_(I.location+_e);r.bindBuffer(r.ARRAY_BUFFER,W);for(let _e=0;_e<I.locationSize;_e++)x(I.location+_e,q/I.locationSize,H,N,pe*G,(me+q/I.locationSize*_e)*G,ee)}else{if(j.isInstancedBufferAttribute){for(let te=0;te<I.locationSize;te++)m(I.location+te,j.meshPerAttribute);w.isInstancedMesh!==!0&&R._maxInstanceCount===void 0&&(R._maxInstanceCount=j.meshPerAttribute*j.count)}else for(let te=0;te<I.locationSize;te++)_(I.location+te);r.bindBuffer(r.ARRAY_BUFFER,W);for(let te=0;te<I.locationSize;te++)x(I.location+te,q/I.locationSize,H,N,q*G,q/I.locationSize*te*G,ee)}}else if(z!==void 0){const N=z[O];if(N!==void 0)switch(N.length){case 2:r.vertexAttrib2fv(I.location,N);break;case 3:r.vertexAttrib3fv(I.location,N);break;case 4:r.vertexAttrib4fv(I.location,N);break;default:r.vertexAttrib1fv(I.location,N)}}}}y()}function T(){A();for(const w in n){const C=n[w];for(const D in C){const R=C[D];for(const F in R)f(R[F].object),delete R[F];delete C[D]}delete n[w]}}function E(w){if(n[w.id]===void 0)return;const C=n[w.id];for(const D in C){const R=C[D];for(const F in R)f(R[F].object),delete R[F];delete C[D]}delete n[w.id]}function M(w){for(const C in n){const D=n[C];if(D[w.id]===void 0)continue;const R=D[w.id];for(const F in R)f(R[F].object),delete R[F];delete D[w.id]}}function A(){S(),o=!0,a!==s&&(a=s,h(a.object))}function S(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:l,reset:A,resetDefaultState:S,dispose:T,releaseStatesOfGeometry:E,releaseStatesOfProgram:M,initAttributes:v,enableAttribute:_,disableUnusedAttributes:y}}function SA(r,e,t){let n;function s(h){n=h}function a(h,f){r.drawArrays(n,h,f),t.update(f,n,1)}function o(h,f,c){c!==0&&(r.drawArraysInstanced(n,h,f,c),t.update(f,n,c))}function l(h,f,c){if(c===0)return;const d=e.get("WEBGL_multi_draw");if(d===null)for(let p=0;p<c;p++)this.render(h[p],f[p]);else{d.multiDrawArraysWEBGL(n,h,0,f,0,c);let p=0;for(let g=0;g<c;g++)p+=f[g];t.update(p,n,1)}}function u(h,f,c,d){if(c===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let g=0;g<h.length;g++)o(h[g],f[g],d[g]);else{p.multiDrawArraysInstancedWEBGL(n,h,0,f,0,d,0,c);let g=0;for(let v=0;v<c;v++)g+=f[v];for(let v=0;v<d.length;v++)t.update(g,n,d[v])}}this.setMode=s,this.render=a,this.renderInstances=o,this.renderMultiDraw=l,this.renderMultiDrawInstances=u}function wA(r,e,t,n){let s;function a(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const E=e.get("EXT_texture_filter_anisotropic");s=r.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function o(E){return!(E!==Ci&&n.convert(E)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(E){const M=E===ru&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(E!==Kr&&n.convert(E)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_TYPE)&&E!==Br&&!M)}function u(E){if(E==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";E="mediump"}return E==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let h=t.precision!==void 0?t.precision:"highp";const f=u(h);f!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",f,"instead."),h=f);const c=t.logarithmicDepthBuffer===!0,d=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),p=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=r.getParameter(r.MAX_TEXTURE_SIZE),v=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),_=r.getParameter(r.MAX_VERTEX_ATTRIBS),m=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),y=r.getParameter(r.MAX_VARYING_VECTORS),x=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),b=p>0,T=r.getParameter(r.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:u,textureFormatReadable:o,textureTypeReadable:l,precision:h,logarithmicDepthBuffer:c,maxTextures:d,maxVertexTextures:p,maxTextureSize:g,maxCubemapSize:v,maxAttributes:_,maxVertexUniforms:m,maxVaryings:y,maxFragmentUniforms:x,vertexTextures:b,maxSamples:T}}function EA(r){const e=this;let t=null,n=0,s=!1,a=!1;const o=new ms,l=new nt,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(c,d){const p=c.length!==0||d||n!==0||s;return s=d,n=c.length,p},this.beginShadows=function(){a=!0,f(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(c,d){t=f(c,d,0)},this.setState=function(c,d,p){const g=c.clippingPlanes,v=c.clipIntersection,_=c.clipShadows,m=r.get(c);if(!s||g===null||g.length===0||a&&!_)a?f(null):h();else{const y=a?0:n,x=y*4;let b=m.clippingState||null;u.value=b,b=f(g,d,x,p);for(let T=0;T!==x;++T)b[T]=t[T];m.clippingState=b,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=y}};function h(){u.value!==t&&(u.value=t,u.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function f(c,d,p,g){const v=c!==null?c.length:0;let _=null;if(v!==0){if(_=u.value,g!==!0||_===null){const m=p+v*4,y=d.matrixWorldInverse;l.getNormalMatrix(y),(_===null||_.length<m)&&(_=new Float32Array(m));for(let x=0,b=p;x!==v;++x,b+=4)o.copy(c[x]).applyMatrix4(y,l),o.normal.toArray(_,b),_[b+3]=o.constant}u.value=_,u.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,_}}function TA(r){let e=new WeakMap;function t(o,l){return l===lh?o.mapping=Wa:l===ch&&(o.mapping=$a),o}function n(o){if(o&&o.isTexture){const l=o.mapping;if(l===lh||l===ch)if(e.has(o)){const u=e.get(o).texture;return t(u,o.mapping)}else{const u=o.image;if(u&&u.height>0){const h=new NT(u.height);return h.fromEquirectangularTexture(r,o),e.set(o,h),o.addEventListener("dispose",s),t(h.texture,o.mapping)}else return null}}return o}function s(o){const l=o.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function a(){e=new WeakMap}return{get:n,dispose:a}}class MA extends G0{constructor(e=-1,t=1,n=1,s=-1,a=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=s,this.near=a,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,s,a,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let a=n-e,o=n+e,l=s+t,u=s-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=h*this.view.offsetX,o=a+h*this.view.width,l-=f*this.view.offsetY,u=l-f*this.view.height}this.projectionMatrix.makeOrthographic(a,o,l,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Ta=4,Sm=[.125,.215,.35,.446,.526,.582],ys=20,pd=new MA,wm=new Mt;let md=null,gd=0,_d=0,vd=!1;const gs=(1+Math.sqrt(5))/2,ma=1/gs,Em=[new ie(-gs,ma,0),new ie(gs,ma,0),new ie(-ma,0,gs),new ie(ma,0,gs),new ie(0,gs,-ma),new ie(0,gs,ma),new ie(-1,1,-1),new ie(1,1,-1),new ie(-1,1,1),new ie(1,1,1)];class Tm{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,s=100){md=this._renderer.getRenderTarget(),gd=this._renderer.getActiveCubeFace(),_d=this._renderer.getActiveMipmapLevel(),vd=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,n,s,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Cm(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Am(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(md,gd,_d),this._renderer.xr.enabled=vd,e.scissorTest=!1,ic(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Wa||e.mapping===$a?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),md=this._renderer.getRenderTarget(),gd=this._renderer.getActiveCubeFace(),_d=this._renderer.getActiveMipmapLevel(),vd=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:ni,minFilter:ni,generateMipmaps:!1,type:ru,format:Ci,colorSpace:Qr,depthBuffer:!1},s=Mm(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Mm(e,t,n);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=AA(a)),this._blurMaterial=CA(a,e,t)}return s}_compileMaterial(e){const t=new zi(this._lodPlanes[0],e);this._renderer.compile(t,pd)}_sceneToCubeUV(e,t,n,s){const l=new fi(90,1,t,n),u=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],f=this._renderer,c=f.autoClear,d=f.toneMapping;f.getClearColor(wm),f.toneMapping=Wr,f.autoClear=!1;const p=new af({name:"PMREM.Background",side:Xn,depthWrite:!1,depthTest:!1}),g=new zi(new gl,p);let v=!1;const _=e.background;_?_.isColor&&(p.color.copy(_),e.background=null,v=!0):(p.color.copy(wm),v=!0);for(let m=0;m<6;m++){const y=m%3;y===0?(l.up.set(0,u[m],0),l.lookAt(h[m],0,0)):y===1?(l.up.set(0,0,u[m]),l.lookAt(0,h[m],0)):(l.up.set(0,u[m],0),l.lookAt(0,0,h[m]));const x=this._cubeSize;ic(s,y*x,m>2?x:0,x,x),f.setRenderTarget(s),v&&f.render(g,l),f.render(e,l)}g.geometry.dispose(),g.material.dispose(),f.toneMapping=d,f.autoClear=c,e.background=_}_textureToCubeUV(e,t){const n=this._renderer,s=e.mapping===Wa||e.mapping===$a;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=Cm()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Am());const a=s?this._cubemapMaterial:this._equirectMaterial,o=new zi(this._lodPlanes[0],a),l=a.uniforms;l.envMap.value=e;const u=this._cubeSize;ic(t,0,0,3*u,2*u),n.setRenderTarget(t),n.render(o,pd)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const s=this._lodPlanes.length;for(let a=1;a<s;a++){const o=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),l=Em[(s-a-1)%Em.length];this._blur(e,a-1,a,o,l)}t.autoClear=n}_blur(e,t,n,s,a){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,s,"latitudinal",a),this._halfBlur(o,e,n,n,s,"longitudinal",a)}_halfBlur(e,t,n,s,a,o,l){const u=this._renderer,h=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,c=new zi(this._lodPlanes[s],h),d=h.uniforms,p=this._sizeLods[n]-1,g=isFinite(a)?Math.PI/(2*p):2*Math.PI/(2*ys-1),v=a/g,_=isFinite(a)?1+Math.floor(f*v):ys;_>ys&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${ys}`);const m=[];let y=0;for(let M=0;M<ys;++M){const A=M/v,S=Math.exp(-A*A/2);m.push(S),M===0?y+=S:M<_&&(y+=2*S)}for(let M=0;M<m.length;M++)m[M]=m[M]/y;d.envMap.value=e.texture,d.samples.value=_,d.weights.value=m,d.latitudinal.value=o==="latitudinal",l&&(d.poleAxis.value=l);const{_lodMax:x}=this;d.dTheta.value=g,d.mipInt.value=x-n;const b=this._sizeLods[s],T=3*b*(s>x-Ta?s-x+Ta:0),E=4*(this._cubeSize-b);ic(t,T,E,3*b,2*b),u.setRenderTarget(t),u.render(c,pd)}}function AA(r){const e=[],t=[],n=[];let s=r;const a=r-Ta+1+Sm.length;for(let o=0;o<a;o++){const l=Math.pow(2,s);t.push(l);let u=1/l;o>r-Ta?u=Sm[o-r+Ta-1]:o===0&&(u=0),n.push(u);const h=1/(l-2),f=-h,c=1+h,d=[f,f,c,f,c,c,f,f,c,c,f,c],p=6,g=6,v=3,_=2,m=1,y=new Float32Array(v*g*p),x=new Float32Array(_*g*p),b=new Float32Array(m*g*p);for(let E=0;E<p;E++){const M=E%3*2/3-1,A=E>2?0:-1,S=[M,A,0,M+2/3,A,0,M+2/3,A+1,0,M,A,0,M+2/3,A+1,0,M,A+1,0];y.set(S,v*g*E),x.set(d,_*g*E);const w=[E,E,E,E,E,E];b.set(w,m*g*E)}const T=new js;T.setAttribute("position",new $i(y,v)),T.setAttribute("uv",new $i(x,_)),T.setAttribute("faceIndex",new $i(b,m)),e.push(T),s>Ta&&s--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function Mm(r,e,t){const n=new Xs(r,e,t);return n.texture.mapping=iu,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function ic(r,e,t,n,s){r.viewport.set(e,t,n,s),r.scissor.set(e,t,n,s)}function CA(r,e,t){const n=new Float32Array(ys),s=new ie(0,1,0);return new Zr({name:"SphericalGaussianBlur",defines:{n:ys,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:of(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Gr,depthTest:!1,depthWrite:!1})}function Am(){return new Zr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:of(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Gr,depthTest:!1,depthWrite:!1})}function Cm(){return new Zr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:of(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Gr,depthTest:!1,depthWrite:!1})}function of(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function DA(r){let e=new WeakMap,t=null;function n(l){if(l&&l.isTexture){const u=l.mapping,h=u===lh||u===ch,f=u===Wa||u===$a;if(h||f){let c=e.get(l);const d=c!==void 0?c.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==d)return t===null&&(t=new Tm(r)),c=h?t.fromEquirectangular(l,c):t.fromCubemap(l,c),c.texture.pmremVersion=l.pmremVersion,e.set(l,c),c.texture;if(c!==void 0)return c.texture;{const p=l.image;return h&&p&&p.height>0||f&&p&&s(p)?(t===null&&(t=new Tm(r)),c=h?t.fromEquirectangular(l):t.fromCubemap(l),c.texture.pmremVersion=l.pmremVersion,e.set(l,c),l.addEventListener("dispose",a),c.texture):null}}}return l}function s(l){let u=0;const h=6;for(let f=0;f<h;f++)l[f]!==void 0&&u++;return u===h}function a(l){const u=l.target;u.removeEventListener("dispose",a);const h=e.get(u);h!==void 0&&(e.delete(u),h.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function PA(r){const e={};function t(n){if(e[n]!==void 0)return e[n];let s;switch(n){case"WEBGL_depth_texture":s=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=r.getExtension(n)}return e[n]=s,s}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const s=t(n);return s===null&&O0("THREE.WebGLRenderer: "+n+" extension not supported."),s}}}function RA(r,e,t,n){const s={},a=new WeakMap;function o(c){const d=c.target;d.index!==null&&e.remove(d.index);for(const g in d.attributes)e.remove(d.attributes[g]);for(const g in d.morphAttributes){const v=d.morphAttributes[g];for(let _=0,m=v.length;_<m;_++)e.remove(v[_])}d.removeEventListener("dispose",o),delete s[d.id];const p=a.get(d);p&&(e.remove(p),a.delete(d)),n.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function l(c,d){return s[d.id]===!0||(d.addEventListener("dispose",o),s[d.id]=!0,t.memory.geometries++),d}function u(c){const d=c.attributes;for(const g in d)e.update(d[g],r.ARRAY_BUFFER);const p=c.morphAttributes;for(const g in p){const v=p[g];for(let _=0,m=v.length;_<m;_++)e.update(v[_],r.ARRAY_BUFFER)}}function h(c){const d=[],p=c.index,g=c.attributes.position;let v=0;if(p!==null){const y=p.array;v=p.version;for(let x=0,b=y.length;x<b;x+=3){const T=y[x+0],E=y[x+1],M=y[x+2];d.push(T,E,E,M,M,T)}}else if(g!==void 0){const y=g.array;v=g.version;for(let x=0,b=y.length/3-1;x<b;x+=3){const T=x+0,E=x+1,M=x+2;d.push(T,E,E,M,M,T)}}else return;const _=new(F0(d)?H0:z0)(d,1);_.version=v;const m=a.get(c);m&&e.remove(m),a.set(c,_)}function f(c){const d=a.get(c);if(d){const p=c.index;p!==null&&d.version<p.version&&h(c)}else h(c);return a.get(c)}return{get:l,update:u,getWireframeAttribute:f}}function LA(r,e,t){let n;function s(d){n=d}let a,o;function l(d){a=d.type,o=d.bytesPerElement}function u(d,p){r.drawElements(n,p,a,d*o),t.update(p,n,1)}function h(d,p,g){g!==0&&(r.drawElementsInstanced(n,p,a,d*o,g),t.update(p,n,g))}function f(d,p,g){if(g===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let _=0;_<g;_++)this.render(d[_]/o,p[_]);else{v.multiDrawElementsWEBGL(n,p,0,a,d,0,g);let _=0;for(let m=0;m<g;m++)_+=p[m];t.update(_,n,1)}}function c(d,p,g,v){if(g===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let m=0;m<d.length;m++)h(d[m]/o,p[m],v[m]);else{_.multiDrawElementsInstancedWEBGL(n,p,0,a,d,0,v,0,g);let m=0;for(let y=0;y<g;y++)m+=p[y];for(let y=0;y<v.length;y++)t.update(m,n,v[y])}}this.setMode=s,this.setIndex=l,this.render=u,this.renderInstances=h,this.renderMultiDraw=f,this.renderMultiDrawInstances=c}function IA(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(a,o,l){switch(t.calls++,o){case r.TRIANGLES:t.triangles+=l*(a/3);break;case r.LINES:t.lines+=l*(a/2);break;case r.LINE_STRIP:t.lines+=l*(a-1);break;case r.LINE_LOOP:t.lines+=l*a;break;case r.POINTS:t.points+=l*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:n}}function FA(r,e,t){const n=new WeakMap,s=new mn;function a(o,l,u){const h=o.morphTargetInfluences,f=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,c=f!==void 0?f.length:0;let d=n.get(l);if(d===void 0||d.count!==c){let w=function(){A.dispose(),n.delete(l),l.removeEventListener("dispose",w)};var p=w;d!==void 0&&d.texture.dispose();const g=l.morphAttributes.position!==void 0,v=l.morphAttributes.normal!==void 0,_=l.morphAttributes.color!==void 0,m=l.morphAttributes.position||[],y=l.morphAttributes.normal||[],x=l.morphAttributes.color||[];let b=0;g===!0&&(b=1),v===!0&&(b=2),_===!0&&(b=3);let T=l.attributes.position.count*b,E=1;T>e.maxTextureSize&&(E=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const M=new Float32Array(T*E*4*c),A=new U0(M,T,E,c);A.type=Br,A.needsUpdate=!0;const S=b*4;for(let C=0;C<c;C++){const D=m[C],R=y[C],F=x[C],k=T*E*4*C;for(let z=0;z<D.count;z++){const O=z*S;g===!0&&(s.fromBufferAttribute(D,z),M[k+O+0]=s.x,M[k+O+1]=s.y,M[k+O+2]=s.z,M[k+O+3]=0),v===!0&&(s.fromBufferAttribute(R,z),M[k+O+4]=s.x,M[k+O+5]=s.y,M[k+O+6]=s.z,M[k+O+7]=0),_===!0&&(s.fromBufferAttribute(F,z),M[k+O+8]=s.x,M[k+O+9]=s.y,M[k+O+10]=s.z,M[k+O+11]=F.itemSize===4?s.w:1)}}d={count:c,texture:A,size:new gt(T,E)},n.set(l,d),l.addEventListener("dispose",w)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)u.getUniforms().setValue(r,"morphTexture",o.morphTexture,t);else{let g=0;for(let _=0;_<h.length;_++)g+=h[_];const v=l.morphTargetsRelative?1:1-g;u.getUniforms().setValue(r,"morphTargetBaseInfluence",v),u.getUniforms().setValue(r,"morphTargetInfluences",h)}u.getUniforms().setValue(r,"morphTargetsTexture",d.texture,t),u.getUniforms().setValue(r,"morphTargetsTextureSize",d.size)}return{update:a}}function OA(r,e,t,n){let s=new WeakMap;function a(u){const h=n.render.frame,f=u.geometry,c=e.get(u,f);if(s.get(c)!==h&&(e.update(c),s.set(c,h)),u.isInstancedMesh&&(u.hasEventListener("dispose",l)===!1&&u.addEventListener("dispose",l),s.get(u)!==h&&(t.update(u.instanceMatrix,r.ARRAY_BUFFER),u.instanceColor!==null&&t.update(u.instanceColor,r.ARRAY_BUFFER),s.set(u,h))),u.isSkinnedMesh){const d=u.skeleton;s.get(d)!==h&&(d.update(),s.set(d,h))}return c}function o(){s=new WeakMap}function l(u){const h=u.target;h.removeEventListener("dispose",l),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:a,dispose:o}}class q0 extends Nn{constructor(e,t,n,s,a,o,l,u,h,f=Fa){if(f!==Fa&&f!==Ya)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&f===Fa&&(n=Xa),n===void 0&&f===Ya&&(n=qa),super(null,s,a,o,l,u,f,n,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=l!==void 0?l:_i,this.minFilter=u!==void 0?u:_i,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const Y0=new Nn,j0=new q0(1,1);j0.compareFunction=I0;const K0=new U0,Z0=new xT,J0=new W0,Dm=[],Pm=[],Rm=new Float32Array(16),Lm=new Float32Array(9),Im=new Float32Array(4);function Qa(r,e,t){const n=r[0];if(n<=0||n>0)return r;const s=e*t;let a=Dm[s];if(a===void 0&&(a=new Float32Array(s),Dm[s]=a),e!==0){n.toArray(a,0);for(let o=1,l=0;o!==e;++o)l+=t,r[o].toArray(a,l)}return a}function nn(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function rn(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function ou(r,e){let t=Pm[e];t===void 0&&(t=new Int32Array(e),Pm[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function NA(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function UA(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(nn(t,e))return;r.uniform2fv(this.addr,e),rn(t,e)}}function kA(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(nn(t,e))return;r.uniform3fv(this.addr,e),rn(t,e)}}function BA(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(nn(t,e))return;r.uniform4fv(this.addr,e),rn(t,e)}}function zA(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(nn(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),rn(t,e)}else{if(nn(t,n))return;Im.set(n),r.uniformMatrix2fv(this.addr,!1,Im),rn(t,n)}}function HA(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(nn(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),rn(t,e)}else{if(nn(t,n))return;Lm.set(n),r.uniformMatrix3fv(this.addr,!1,Lm),rn(t,n)}}function VA(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(nn(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),rn(t,e)}else{if(nn(t,n))return;Rm.set(n),r.uniformMatrix4fv(this.addr,!1,Rm),rn(t,n)}}function GA(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function WA(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(nn(t,e))return;r.uniform2iv(this.addr,e),rn(t,e)}}function $A(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(nn(t,e))return;r.uniform3iv(this.addr,e),rn(t,e)}}function XA(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(nn(t,e))return;r.uniform4iv(this.addr,e),rn(t,e)}}function qA(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function YA(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(nn(t,e))return;r.uniform2uiv(this.addr,e),rn(t,e)}}function jA(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(nn(t,e))return;r.uniform3uiv(this.addr,e),rn(t,e)}}function KA(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(nn(t,e))return;r.uniform4uiv(this.addr,e),rn(t,e)}}function ZA(r,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(r.uniform1i(this.addr,s),n[0]=s);const a=this.type===r.SAMPLER_2D_SHADOW?j0:Y0;t.setTexture2D(e||a,s)}function JA(r,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(r.uniform1i(this.addr,s),n[0]=s),t.setTexture3D(e||Z0,s)}function QA(r,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(r.uniform1i(this.addr,s),n[0]=s),t.setTextureCube(e||J0,s)}function eC(r,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(r.uniform1i(this.addr,s),n[0]=s),t.setTexture2DArray(e||K0,s)}function tC(r){switch(r){case 5126:return NA;case 35664:return UA;case 35665:return kA;case 35666:return BA;case 35674:return zA;case 35675:return HA;case 35676:return VA;case 5124:case 35670:return GA;case 35667:case 35671:return WA;case 35668:case 35672:return $A;case 35669:case 35673:return XA;case 5125:return qA;case 36294:return YA;case 36295:return jA;case 36296:return KA;case 35678:case 36198:case 36298:case 36306:case 35682:return ZA;case 35679:case 36299:case 36307:return JA;case 35680:case 36300:case 36308:case 36293:return QA;case 36289:case 36303:case 36311:case 36292:return eC}}function nC(r,e){r.uniform1fv(this.addr,e)}function iC(r,e){const t=Qa(e,this.size,2);r.uniform2fv(this.addr,t)}function rC(r,e){const t=Qa(e,this.size,3);r.uniform3fv(this.addr,t)}function sC(r,e){const t=Qa(e,this.size,4);r.uniform4fv(this.addr,t)}function aC(r,e){const t=Qa(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function oC(r,e){const t=Qa(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function lC(r,e){const t=Qa(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function cC(r,e){r.uniform1iv(this.addr,e)}function uC(r,e){r.uniform2iv(this.addr,e)}function dC(r,e){r.uniform3iv(this.addr,e)}function hC(r,e){r.uniform4iv(this.addr,e)}function fC(r,e){r.uniform1uiv(this.addr,e)}function pC(r,e){r.uniform2uiv(this.addr,e)}function mC(r,e){r.uniform3uiv(this.addr,e)}function gC(r,e){r.uniform4uiv(this.addr,e)}function _C(r,e,t){const n=this.cache,s=e.length,a=ou(t,s);nn(n,a)||(r.uniform1iv(this.addr,a),rn(n,a));for(let o=0;o!==s;++o)t.setTexture2D(e[o]||Y0,a[o])}function vC(r,e,t){const n=this.cache,s=e.length,a=ou(t,s);nn(n,a)||(r.uniform1iv(this.addr,a),rn(n,a));for(let o=0;o!==s;++o)t.setTexture3D(e[o]||Z0,a[o])}function yC(r,e,t){const n=this.cache,s=e.length,a=ou(t,s);nn(n,a)||(r.uniform1iv(this.addr,a),rn(n,a));for(let o=0;o!==s;++o)t.setTextureCube(e[o]||J0,a[o])}function xC(r,e,t){const n=this.cache,s=e.length,a=ou(t,s);nn(n,a)||(r.uniform1iv(this.addr,a),rn(n,a));for(let o=0;o!==s;++o)t.setTexture2DArray(e[o]||K0,a[o])}function bC(r){switch(r){case 5126:return nC;case 35664:return iC;case 35665:return rC;case 35666:return sC;case 35674:return aC;case 35675:return oC;case 35676:return lC;case 5124:case 35670:return cC;case 35667:case 35671:return uC;case 35668:case 35672:return dC;case 35669:case 35673:return hC;case 5125:return fC;case 36294:return pC;case 36295:return mC;case 36296:return gC;case 35678:case 36198:case 36298:case 36306:case 35682:return _C;case 35679:case 36299:case 36307:return vC;case 35680:case 36300:case 36308:case 36293:return yC;case 36289:case 36303:case 36311:case 36292:return xC}}class SC{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=tC(t.type)}}class wC{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=bC(t.type)}}class EC{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const s=this.seq;for(let a=0,o=s.length;a!==o;++a){const l=s[a];l.setValue(e,t[l.id],n)}}}const yd=/(\w+)(\])?(\[|\.)?/g;function Fm(r,e){r.seq.push(e),r.map[e.id]=e}function TC(r,e,t){const n=r.name,s=n.length;for(yd.lastIndex=0;;){const a=yd.exec(n),o=yd.lastIndex;let l=a[1];const u=a[2]==="]",h=a[3];if(u&&(l=l|0),h===void 0||h==="["&&o+2===s){Fm(t,h===void 0?new SC(l,r,e):new wC(l,r,e));break}else{let c=t.map[l];c===void 0&&(c=new EC(l),Fm(t,c)),t=c}}}class xc{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<n;++s){const a=e.getActiveUniform(t,s),o=e.getUniformLocation(t,a.name);TC(a,o,this)}}setValue(e,t,n,s){const a=this.map[t];a!==void 0&&a.setValue(e,n,s)}setOptional(e,t,n){const s=t[n];s!==void 0&&this.setValue(e,n,s)}static upload(e,t,n,s){for(let a=0,o=t.length;a!==o;++a){const l=t[a],u=n[l.id];u.needsUpdate!==!1&&l.setValue(e,u.value,s)}}static seqWithValue(e,t){const n=[];for(let s=0,a=e.length;s!==a;++s){const o=e[s];o.id in t&&n.push(o)}return n}}function Om(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}const MC=37297;let AC=0;function CC(r,e){const t=r.split(`
`),n=[],s=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let o=s;o<a;o++){const l=o+1;n.push(`${l===e?">":" "} ${l}: ${t[o]}`)}return n.join(`
`)}function DC(r){const e=xt.getPrimaries(xt.workingColorSpace),t=xt.getPrimaries(r);let n;switch(e===t?n="":e===Wc&&t===Gc?n="LinearDisplayP3ToLinearSRGB":e===Gc&&t===Wc&&(n="LinearSRGBToLinearDisplayP3"),r){case Qr:case su:return[n,"LinearTransferOETF"];case Ti:case nf:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",r),[n,"LinearTransferOETF"]}}function Nm(r,e,t){const n=r.getShaderParameter(e,r.COMPILE_STATUS),s=r.getShaderInfoLog(e).trim();if(n&&s==="")return"";const a=/ERROR: 0:(\d+)/.exec(s);if(a){const o=parseInt(a[1]);return t.toUpperCase()+`

`+s+`

`+CC(r.getShaderSource(e),o)}else return s}function PC(r,e){const t=DC(e);return`vec4 ${r}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function RC(r,e){let t;switch(e){case UE:t="Linear";break;case kE:t="Reinhard";break;case BE:t="OptimizedCineon";break;case zE:t="ACESFilmic";break;case VE:t="AgX";break;case GE:t="Neutral";break;case HE:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function LC(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(To).join(`
`)}function IC(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function FC(r,e){const t={},n=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const a=r.getActiveAttrib(e,s),o=a.name;let l=1;a.type===r.FLOAT_MAT2&&(l=2),a.type===r.FLOAT_MAT3&&(l=3),a.type===r.FLOAT_MAT4&&(l=4),t[o]={type:a.type,location:r.getAttribLocation(e,o),locationSize:l}}return t}function To(r){return r!==""}function Um(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function km(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const OC=/^[ \t]*#include +<([\w\d./]+)>/gm;function fh(r){return r.replace(OC,UC)}const NC=new Map;function UC(r,e){let t=tt[e];if(t===void 0){const n=NC.get(e);if(n!==void 0)t=tt[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return fh(t)}const kC=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Bm(r){return r.replace(kC,BC)}function BC(r,e,t,n){let s="";for(let a=parseInt(e);a<parseInt(t);a++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return s}function zm(r){let e=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	precision ${r.precision} sampler3D;
	precision ${r.precision} sampler2DArray;
	precision ${r.precision} sampler2DShadow;
	precision ${r.precision} samplerCubeShadow;
	precision ${r.precision} sampler2DArrayShadow;
	precision ${r.precision} isampler2D;
	precision ${r.precision} isampler3D;
	precision ${r.precision} isamplerCube;
	precision ${r.precision} isampler2DArray;
	precision ${r.precision} usampler2D;
	precision ${r.precision} usampler3D;
	precision ${r.precision} usamplerCube;
	precision ${r.precision} usampler2DArray;
	`;return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function zC(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===E0?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===cE?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===er&&(e="SHADOWMAP_TYPE_VSM"),e}function HC(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case Wa:case $a:e="ENVMAP_TYPE_CUBE";break;case iu:e="ENVMAP_TYPE_CUBE_UV";break}return e}function VC(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case $a:e="ENVMAP_MODE_REFRACTION";break}return e}function GC(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case T0:e="ENVMAP_BLENDING_MULTIPLY";break;case OE:e="ENVMAP_BLENDING_MIX";break;case NE:e="ENVMAP_BLENDING_ADD";break}return e}function WC(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function $C(r,e,t,n){const s=r.getContext(),a=t.defines;let o=t.vertexShader,l=t.fragmentShader;const u=zC(t),h=HC(t),f=VC(t),c=GC(t),d=WC(t),p=LC(t),g=IC(a),v=s.createProgram();let _,m,y=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(To).join(`
`),_.length>0&&(_+=`
`),m=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(To).join(`
`),m.length>0&&(m+=`
`)):(_=[zm(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(To).join(`
`),m=[zm(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+f:"",t.envMap?"#define "+c:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Wr?"#define TONE_MAPPING":"",t.toneMapping!==Wr?tt.tonemapping_pars_fragment:"",t.toneMapping!==Wr?RC("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",tt.colorspace_pars_fragment,PC("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(To).join(`
`)),o=fh(o),o=Um(o,t),o=km(o,t),l=fh(l),l=Um(l,t),l=km(l,t),o=Bm(o),l=Bm(l),t.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,_=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,m=["#define varying in",t.glslVersion===nm?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===nm?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const x=y+_+o,b=y+m+l,T=Om(s,s.VERTEX_SHADER,x),E=Om(s,s.FRAGMENT_SHADER,b);s.attachShader(v,T),s.attachShader(v,E),t.index0AttributeName!==void 0?s.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(v,0,"position"),s.linkProgram(v);function M(C){if(r.debug.checkShaderErrors){const D=s.getProgramInfoLog(v).trim(),R=s.getShaderInfoLog(T).trim(),F=s.getShaderInfoLog(E).trim();let k=!0,z=!0;if(s.getProgramParameter(v,s.LINK_STATUS)===!1)if(k=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(s,v,T,E);else{const O=Nm(s,T,"vertex"),I=Nm(s,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(v,s.VALIDATE_STATUS)+`

Material Name: `+C.name+`
Material Type: `+C.type+`

Program Info Log: `+D+`
`+O+`
`+I)}else D!==""?console.warn("THREE.WebGLProgram: Program Info Log:",D):(R===""||F==="")&&(z=!1);z&&(C.diagnostics={runnable:k,programLog:D,vertexShader:{log:R,prefix:_},fragmentShader:{log:F,prefix:m}})}s.deleteShader(T),s.deleteShader(E),A=new xc(s,v),S=FC(s,v)}let A;this.getUniforms=function(){return A===void 0&&M(this),A};let S;this.getAttributes=function(){return S===void 0&&M(this),S};let w=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return w===!1&&(w=s.getProgramParameter(v,MC)),w},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(v),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=AC++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=T,this.fragmentShader=E,this}let XC=0;class qC{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,s=this._getShaderStage(t),a=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(s)===!1&&(o.add(s),s.usedTimes++),o.has(a)===!1&&(o.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new YC(e),t.set(e,n)),n}}class YC{constructor(e){this.id=XC++,this.code=e,this.usedTimes=0}}function jC(r,e,t,n,s,a,o){const l=new sf,u=new qC,h=new Set,f=[],c=s.logarithmicDepthBuffer,d=s.vertexTextures;let p=s.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(S){return h.add(S),S===0?"uv":`uv${S}`}function _(S,w,C,D,R){const F=D.fog,k=R.geometry,z=S.isMeshStandardMaterial?D.environment:null,O=(S.isMeshStandardMaterial?t:e).get(S.envMap||z),I=O&&O.mapping===iu?O.image.height:null,j=g[S.type];S.precision!==null&&(p=s.getMaxPrecision(S.precision),p!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",p,"instead."));const N=k.morphAttributes.position||k.morphAttributes.normal||k.morphAttributes.color,q=N!==void 0?N.length:0;let ne=0;k.morphAttributes.position!==void 0&&(ne=1),k.morphAttributes.normal!==void 0&&(ne=2),k.morphAttributes.color!==void 0&&(ne=3);let W,H,G,ee;if(j){const ht=Ii[j];W=ht.vertexShader,H=ht.fragmentShader}else W=S.vertexShader,H=S.fragmentShader,u.update(S),G=u.getVertexShaderID(S),ee=u.getFragmentShaderID(S);const te=r.getRenderTarget(),pe=R.isInstancedMesh===!0,me=R.isBatchedMesh===!0,_e=!!S.map,V=!!S.matcap,ke=!!O,Ee=!!S.aoMap,Xe=!!S.lightMap,Ae=!!S.bumpMap,He=!!S.normalMap,K=!!S.displacementMap,Ne=!!S.emissiveMap,dt=!!S.metalnessMap,B=!!S.roughnessMap,P=S.anisotropy>0,Q=S.clearcoat>0,oe=S.dispersion>0,le=S.iridescence>0,ae=S.sheen>0,Fe=S.transmission>0,de=P&&!!S.anisotropyMap,ve=Q&&!!S.clearcoatMap,We=Q&&!!S.clearcoatNormalMap,he=Q&&!!S.clearcoatRoughnessMap,Le=le&&!!S.iridescenceMap,Be=le&&!!S.iridescenceThicknessMap,qe=ae&&!!S.sheenColorMap,ye=ae&&!!S.sheenRoughnessMap,Ze=!!S.specularMap,Qe=!!S.specularColorMap,_t=!!S.specularIntensityMap,$=Fe&&!!S.transmissionMap,ce=Fe&&!!S.thicknessMap,re=!!S.gradientMap,se=!!S.alphaMap,fe=S.alphaTest>0,ze=!!S.alphaHash,it=!!S.extensions;let bt=Wr;S.toneMapped&&(te===null||te.isXRRenderTarget===!0)&&(bt=r.toneMapping);const St={shaderID:j,shaderType:S.type,shaderName:S.name,vertexShader:W,fragmentShader:H,defines:S.defines,customVertexShaderID:G,customFragmentShaderID:ee,isRawShaderMaterial:S.isRawShaderMaterial===!0,glslVersion:S.glslVersion,precision:p,batching:me,batchingColor:me&&R._colorsTexture!==null,instancing:pe,instancingColor:pe&&R.instanceColor!==null,instancingMorph:pe&&R.morphTexture!==null,supportsVertexTextures:d,outputColorSpace:te===null?r.outputColorSpace:te.isXRRenderTarget===!0?te.texture.colorSpace:Qr,alphaToCoverage:!!S.alphaToCoverage,map:_e,matcap:V,envMap:ke,envMapMode:ke&&O.mapping,envMapCubeUVHeight:I,aoMap:Ee,lightMap:Xe,bumpMap:Ae,normalMap:He,displacementMap:d&&K,emissiveMap:Ne,normalMapObjectSpace:He&&S.normalMapType===rT,normalMapTangentSpace:He&&S.normalMapType===iT,metalnessMap:dt,roughnessMap:B,anisotropy:P,anisotropyMap:de,clearcoat:Q,clearcoatMap:ve,clearcoatNormalMap:We,clearcoatRoughnessMap:he,dispersion:oe,iridescence:le,iridescenceMap:Le,iridescenceThicknessMap:Be,sheen:ae,sheenColorMap:qe,sheenRoughnessMap:ye,specularMap:Ze,specularColorMap:Qe,specularIntensityMap:_t,transmission:Fe,transmissionMap:$,thicknessMap:ce,gradientMap:re,opaque:S.transparent===!1&&S.blending===Ia&&S.alphaToCoverage===!1,alphaMap:se,alphaTest:fe,alphaHash:ze,combine:S.combine,mapUv:_e&&v(S.map.channel),aoMapUv:Ee&&v(S.aoMap.channel),lightMapUv:Xe&&v(S.lightMap.channel),bumpMapUv:Ae&&v(S.bumpMap.channel),normalMapUv:He&&v(S.normalMap.channel),displacementMapUv:K&&v(S.displacementMap.channel),emissiveMapUv:Ne&&v(S.emissiveMap.channel),metalnessMapUv:dt&&v(S.metalnessMap.channel),roughnessMapUv:B&&v(S.roughnessMap.channel),anisotropyMapUv:de&&v(S.anisotropyMap.channel),clearcoatMapUv:ve&&v(S.clearcoatMap.channel),clearcoatNormalMapUv:We&&v(S.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:he&&v(S.clearcoatRoughnessMap.channel),iridescenceMapUv:Le&&v(S.iridescenceMap.channel),iridescenceThicknessMapUv:Be&&v(S.iridescenceThicknessMap.channel),sheenColorMapUv:qe&&v(S.sheenColorMap.channel),sheenRoughnessMapUv:ye&&v(S.sheenRoughnessMap.channel),specularMapUv:Ze&&v(S.specularMap.channel),specularColorMapUv:Qe&&v(S.specularColorMap.channel),specularIntensityMapUv:_t&&v(S.specularIntensityMap.channel),transmissionMapUv:$&&v(S.transmissionMap.channel),thicknessMapUv:ce&&v(S.thicknessMap.channel),alphaMapUv:se&&v(S.alphaMap.channel),vertexTangents:!!k.attributes.tangent&&(He||P),vertexColors:S.vertexColors,vertexAlphas:S.vertexColors===!0&&!!k.attributes.color&&k.attributes.color.itemSize===4,pointsUvs:R.isPoints===!0&&!!k.attributes.uv&&(_e||se),fog:!!F,useFog:S.fog===!0,fogExp2:!!F&&F.isFogExp2,flatShading:S.flatShading===!0,sizeAttenuation:S.sizeAttenuation===!0,logarithmicDepthBuffer:c,skinning:R.isSkinnedMesh===!0,morphTargets:k.morphAttributes.position!==void 0,morphNormals:k.morphAttributes.normal!==void 0,morphColors:k.morphAttributes.color!==void 0,morphTargetsCount:q,morphTextureStride:ne,numDirLights:w.directional.length,numPointLights:w.point.length,numSpotLights:w.spot.length,numSpotLightMaps:w.spotLightMap.length,numRectAreaLights:w.rectArea.length,numHemiLights:w.hemi.length,numDirLightShadows:w.directionalShadowMap.length,numPointLightShadows:w.pointShadowMap.length,numSpotLightShadows:w.spotShadowMap.length,numSpotLightShadowsWithMaps:w.numSpotLightShadowsWithMaps,numLightProbes:w.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:S.dithering,shadowMapEnabled:r.shadowMap.enabled&&C.length>0,shadowMapType:r.shadowMap.type,toneMapping:bt,decodeVideoTexture:_e&&S.map.isVideoTexture===!0&&xt.getTransfer(S.map.colorSpace)===Rt,premultipliedAlpha:S.premultipliedAlpha,doubleSided:S.side===Ni,flipSided:S.side===Xn,useDepthPacking:S.depthPacking>=0,depthPacking:S.depthPacking||0,index0AttributeName:S.index0AttributeName,extensionClipCullDistance:it&&S.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:it&&S.extensions.multiDraw===!0&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:S.customProgramCacheKey()};return St.vertexUv1s=h.has(1),St.vertexUv2s=h.has(2),St.vertexUv3s=h.has(3),h.clear(),St}function m(S){const w=[];if(S.shaderID?w.push(S.shaderID):(w.push(S.customVertexShaderID),w.push(S.customFragmentShaderID)),S.defines!==void 0)for(const C in S.defines)w.push(C),w.push(S.defines[C]);return S.isRawShaderMaterial===!1&&(y(w,S),x(w,S),w.push(r.outputColorSpace)),w.push(S.customProgramCacheKey),w.join()}function y(S,w){S.push(w.precision),S.push(w.outputColorSpace),S.push(w.envMapMode),S.push(w.envMapCubeUVHeight),S.push(w.mapUv),S.push(w.alphaMapUv),S.push(w.lightMapUv),S.push(w.aoMapUv),S.push(w.bumpMapUv),S.push(w.normalMapUv),S.push(w.displacementMapUv),S.push(w.emissiveMapUv),S.push(w.metalnessMapUv),S.push(w.roughnessMapUv),S.push(w.anisotropyMapUv),S.push(w.clearcoatMapUv),S.push(w.clearcoatNormalMapUv),S.push(w.clearcoatRoughnessMapUv),S.push(w.iridescenceMapUv),S.push(w.iridescenceThicknessMapUv),S.push(w.sheenColorMapUv),S.push(w.sheenRoughnessMapUv),S.push(w.specularMapUv),S.push(w.specularColorMapUv),S.push(w.specularIntensityMapUv),S.push(w.transmissionMapUv),S.push(w.thicknessMapUv),S.push(w.combine),S.push(w.fogExp2),S.push(w.sizeAttenuation),S.push(w.morphTargetsCount),S.push(w.morphAttributeCount),S.push(w.numDirLights),S.push(w.numPointLights),S.push(w.numSpotLights),S.push(w.numSpotLightMaps),S.push(w.numHemiLights),S.push(w.numRectAreaLights),S.push(w.numDirLightShadows),S.push(w.numPointLightShadows),S.push(w.numSpotLightShadows),S.push(w.numSpotLightShadowsWithMaps),S.push(w.numLightProbes),S.push(w.shadowMapType),S.push(w.toneMapping),S.push(w.numClippingPlanes),S.push(w.numClipIntersection),S.push(w.depthPacking)}function x(S,w){l.disableAll(),w.supportsVertexTextures&&l.enable(0),w.instancing&&l.enable(1),w.instancingColor&&l.enable(2),w.instancingMorph&&l.enable(3),w.matcap&&l.enable(4),w.envMap&&l.enable(5),w.normalMapObjectSpace&&l.enable(6),w.normalMapTangentSpace&&l.enable(7),w.clearcoat&&l.enable(8),w.iridescence&&l.enable(9),w.alphaTest&&l.enable(10),w.vertexColors&&l.enable(11),w.vertexAlphas&&l.enable(12),w.vertexUv1s&&l.enable(13),w.vertexUv2s&&l.enable(14),w.vertexUv3s&&l.enable(15),w.vertexTangents&&l.enable(16),w.anisotropy&&l.enable(17),w.alphaHash&&l.enable(18),w.batching&&l.enable(19),w.dispersion&&l.enable(20),w.batchingColor&&l.enable(21),S.push(l.mask),l.disableAll(),w.fog&&l.enable(0),w.useFog&&l.enable(1),w.flatShading&&l.enable(2),w.logarithmicDepthBuffer&&l.enable(3),w.skinning&&l.enable(4),w.morphTargets&&l.enable(5),w.morphNormals&&l.enable(6),w.morphColors&&l.enable(7),w.premultipliedAlpha&&l.enable(8),w.shadowMapEnabled&&l.enable(9),w.doubleSided&&l.enable(10),w.flipSided&&l.enable(11),w.useDepthPacking&&l.enable(12),w.dithering&&l.enable(13),w.transmission&&l.enable(14),w.sheen&&l.enable(15),w.opaque&&l.enable(16),w.pointsUvs&&l.enable(17),w.decodeVideoTexture&&l.enable(18),w.alphaToCoverage&&l.enable(19),S.push(l.mask)}function b(S){const w=g[S.type];let C;if(w){const D=Ii[w];C=LT.clone(D.uniforms)}else C=S.uniforms;return C}function T(S,w){let C;for(let D=0,R=f.length;D<R;D++){const F=f[D];if(F.cacheKey===w){C=F,++C.usedTimes;break}}return C===void 0&&(C=new $C(r,w,S,a),f.push(C)),C}function E(S){if(--S.usedTimes===0){const w=f.indexOf(S);f[w]=f[f.length-1],f.pop(),S.destroy()}}function M(S){u.remove(S)}function A(){u.dispose()}return{getParameters:_,getProgramCacheKey:m,getUniforms:b,acquireProgram:T,releaseProgram:E,releaseShaderCache:M,programs:f,dispose:A}}function KC(){let r=new WeakMap;function e(a){let o=r.get(a);return o===void 0&&(o={},r.set(a,o)),o}function t(a){r.delete(a)}function n(a,o,l){r.get(a)[o]=l}function s(){r=new WeakMap}return{get:e,remove:t,update:n,dispose:s}}function ZC(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function Hm(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function Vm(){const r=[];let e=0;const t=[],n=[],s=[];function a(){e=0,t.length=0,n.length=0,s.length=0}function o(c,d,p,g,v,_){let m=r[e];return m===void 0?(m={id:c.id,object:c,geometry:d,material:p,groupOrder:g,renderOrder:c.renderOrder,z:v,group:_},r[e]=m):(m.id=c.id,m.object=c,m.geometry=d,m.material=p,m.groupOrder=g,m.renderOrder=c.renderOrder,m.z=v,m.group=_),e++,m}function l(c,d,p,g,v,_){const m=o(c,d,p,g,v,_);p.transmission>0?n.push(m):p.transparent===!0?s.push(m):t.push(m)}function u(c,d,p,g,v,_){const m=o(c,d,p,g,v,_);p.transmission>0?n.unshift(m):p.transparent===!0?s.unshift(m):t.unshift(m)}function h(c,d){t.length>1&&t.sort(c||ZC),n.length>1&&n.sort(d||Hm),s.length>1&&s.sort(d||Hm)}function f(){for(let c=e,d=r.length;c<d;c++){const p=r[c];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:n,transparent:s,init:a,push:l,unshift:u,finish:f,sort:h}}function JC(){let r=new WeakMap;function e(n,s){const a=r.get(n);let o;return a===void 0?(o=new Vm,r.set(n,[o])):s>=a.length?(o=new Vm,a.push(o)):o=a[s],o}function t(){r=new WeakMap}return{get:e,dispose:t}}function QC(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ie,color:new Mt};break;case"SpotLight":t={position:new ie,direction:new ie,color:new Mt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ie,color:new Mt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ie,skyColor:new Mt,groundColor:new Mt};break;case"RectAreaLight":t={color:new Mt,position:new ie,halfWidth:new ie,halfHeight:new ie};break}return r[e.id]=t,t}}}function eD(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let tD=0;function nD(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function iD(r){const e=new QC,t=eD(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)n.probe.push(new ie);const s=new ie,a=new Zt,o=new Zt;function l(h){let f=0,c=0,d=0;for(let S=0;S<9;S++)n.probe[S].set(0,0,0);let p=0,g=0,v=0,_=0,m=0,y=0,x=0,b=0,T=0,E=0,M=0;h.sort(nD);for(let S=0,w=h.length;S<w;S++){const C=h[S],D=C.color,R=C.intensity,F=C.distance,k=C.shadow&&C.shadow.map?C.shadow.map.texture:null;if(C.isAmbientLight)f+=D.r*R,c+=D.g*R,d+=D.b*R;else if(C.isLightProbe){for(let z=0;z<9;z++)n.probe[z].addScaledVector(C.sh.coefficients[z],R);M++}else if(C.isDirectionalLight){const z=e.get(C);if(z.color.copy(C.color).multiplyScalar(C.intensity),C.castShadow){const O=C.shadow,I=t.get(C);I.shadowBias=O.bias,I.shadowNormalBias=O.normalBias,I.shadowRadius=O.radius,I.shadowMapSize=O.mapSize,n.directionalShadow[p]=I,n.directionalShadowMap[p]=k,n.directionalShadowMatrix[p]=C.shadow.matrix,y++}n.directional[p]=z,p++}else if(C.isSpotLight){const z=e.get(C);z.position.setFromMatrixPosition(C.matrixWorld),z.color.copy(D).multiplyScalar(R),z.distance=F,z.coneCos=Math.cos(C.angle),z.penumbraCos=Math.cos(C.angle*(1-C.penumbra)),z.decay=C.decay,n.spot[v]=z;const O=C.shadow;if(C.map&&(n.spotLightMap[T]=C.map,T++,O.updateMatrices(C),C.castShadow&&E++),n.spotLightMatrix[v]=O.matrix,C.castShadow){const I=t.get(C);I.shadowBias=O.bias,I.shadowNormalBias=O.normalBias,I.shadowRadius=O.radius,I.shadowMapSize=O.mapSize,n.spotShadow[v]=I,n.spotShadowMap[v]=k,b++}v++}else if(C.isRectAreaLight){const z=e.get(C);z.color.copy(D).multiplyScalar(R),z.halfWidth.set(C.width*.5,0,0),z.halfHeight.set(0,C.height*.5,0),n.rectArea[_]=z,_++}else if(C.isPointLight){const z=e.get(C);if(z.color.copy(C.color).multiplyScalar(C.intensity),z.distance=C.distance,z.decay=C.decay,C.castShadow){const O=C.shadow,I=t.get(C);I.shadowBias=O.bias,I.shadowNormalBias=O.normalBias,I.shadowRadius=O.radius,I.shadowMapSize=O.mapSize,I.shadowCameraNear=O.camera.near,I.shadowCameraFar=O.camera.far,n.pointShadow[g]=I,n.pointShadowMap[g]=k,n.pointShadowMatrix[g]=C.shadow.matrix,x++}n.point[g]=z,g++}else if(C.isHemisphereLight){const z=e.get(C);z.skyColor.copy(C.color).multiplyScalar(R),z.groundColor.copy(C.groundColor).multiplyScalar(R),n.hemi[m]=z,m++}}_>0&&(r.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Se.LTC_FLOAT_1,n.rectAreaLTC2=Se.LTC_FLOAT_2):(n.rectAreaLTC1=Se.LTC_HALF_1,n.rectAreaLTC2=Se.LTC_HALF_2)),n.ambient[0]=f,n.ambient[1]=c,n.ambient[2]=d;const A=n.hash;(A.directionalLength!==p||A.pointLength!==g||A.spotLength!==v||A.rectAreaLength!==_||A.hemiLength!==m||A.numDirectionalShadows!==y||A.numPointShadows!==x||A.numSpotShadows!==b||A.numSpotMaps!==T||A.numLightProbes!==M)&&(n.directional.length=p,n.spot.length=v,n.rectArea.length=_,n.point.length=g,n.hemi.length=m,n.directionalShadow.length=y,n.directionalShadowMap.length=y,n.pointShadow.length=x,n.pointShadowMap.length=x,n.spotShadow.length=b,n.spotShadowMap.length=b,n.directionalShadowMatrix.length=y,n.pointShadowMatrix.length=x,n.spotLightMatrix.length=b+T-E,n.spotLightMap.length=T,n.numSpotLightShadowsWithMaps=E,n.numLightProbes=M,A.directionalLength=p,A.pointLength=g,A.spotLength=v,A.rectAreaLength=_,A.hemiLength=m,A.numDirectionalShadows=y,A.numPointShadows=x,A.numSpotShadows=b,A.numSpotMaps=T,A.numLightProbes=M,n.version=tD++)}function u(h,f){let c=0,d=0,p=0,g=0,v=0;const _=f.matrixWorldInverse;for(let m=0,y=h.length;m<y;m++){const x=h[m];if(x.isDirectionalLight){const b=n.directional[c];b.direction.setFromMatrixPosition(x.matrixWorld),s.setFromMatrixPosition(x.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(_),c++}else if(x.isSpotLight){const b=n.spot[p];b.position.setFromMatrixPosition(x.matrixWorld),b.position.applyMatrix4(_),b.direction.setFromMatrixPosition(x.matrixWorld),s.setFromMatrixPosition(x.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(_),p++}else if(x.isRectAreaLight){const b=n.rectArea[g];b.position.setFromMatrixPosition(x.matrixWorld),b.position.applyMatrix4(_),o.identity(),a.copy(x.matrixWorld),a.premultiply(_),o.extractRotation(a),b.halfWidth.set(x.width*.5,0,0),b.halfHeight.set(0,x.height*.5,0),b.halfWidth.applyMatrix4(o),b.halfHeight.applyMatrix4(o),g++}else if(x.isPointLight){const b=n.point[d];b.position.setFromMatrixPosition(x.matrixWorld),b.position.applyMatrix4(_),d++}else if(x.isHemisphereLight){const b=n.hemi[v];b.direction.setFromMatrixPosition(x.matrixWorld),b.direction.transformDirection(_),v++}}}return{setup:l,setupView:u,state:n}}function Gm(r){const e=new iD(r),t=[],n=[];function s(f){h.camera=f,t.length=0,n.length=0}function a(f){t.push(f)}function o(f){n.push(f)}function l(){e.setup(t)}function u(f){e.setupView(t,f)}const h={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:h,setupLights:l,setupLightsView:u,pushLight:a,pushShadow:o}}function rD(r){let e=new WeakMap;function t(s,a=0){const o=e.get(s);let l;return o===void 0?(l=new Gm(r),e.set(s,[l])):a>=o.length?(l=new Gm(r),o.push(l)):l=o[a],l}function n(){e=new WeakMap}return{get:t,dispose:n}}class sD extends au{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=tT,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class aD extends au{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const oD=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,lD=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function cD(r,e,t){let n=new $0;const s=new gt,a=new gt,o=new mn,l=new sD({depthPacking:nT}),u=new aD,h={},f=t.maxTextureSize,c={[jr]:Xn,[Xn]:jr,[Ni]:Ni},d=new Zr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new gt},radius:{value:4}},vertexShader:oD,fragmentShader:lD}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const g=new js;g.setAttribute("position",new $i(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new zi(g,d),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=E0;let m=this.type;this.render=function(E,M,A){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||E.length===0)return;const S=r.getRenderTarget(),w=r.getActiveCubeFace(),C=r.getActiveMipmapLevel(),D=r.state;D.setBlending(Gr),D.buffers.color.setClear(1,1,1,1),D.buffers.depth.setTest(!0),D.setScissorTest(!1);const R=m!==er&&this.type===er,F=m===er&&this.type!==er;for(let k=0,z=E.length;k<z;k++){const O=E[k],I=O.shadow;if(I===void 0){console.warn("THREE.WebGLShadowMap:",O,"has no shadow.");continue}if(I.autoUpdate===!1&&I.needsUpdate===!1)continue;s.copy(I.mapSize);const j=I.getFrameExtents();if(s.multiply(j),a.copy(I.mapSize),(s.x>f||s.y>f)&&(s.x>f&&(a.x=Math.floor(f/j.x),s.x=a.x*j.x,I.mapSize.x=a.x),s.y>f&&(a.y=Math.floor(f/j.y),s.y=a.y*j.y,I.mapSize.y=a.y)),I.map===null||R===!0||F===!0){const q=this.type!==er?{minFilter:_i,magFilter:_i}:{};I.map!==null&&I.map.dispose(),I.map=new Xs(s.x,s.y,q),I.map.texture.name=O.name+".shadowMap",I.camera.updateProjectionMatrix()}r.setRenderTarget(I.map),r.clear();const N=I.getViewportCount();for(let q=0;q<N;q++){const ne=I.getViewport(q);o.set(a.x*ne.x,a.y*ne.y,a.x*ne.z,a.y*ne.w),D.viewport(o),I.updateMatrices(O,q),n=I.getFrustum(),b(M,A,I.camera,O,this.type)}I.isPointLightShadow!==!0&&this.type===er&&y(I,A),I.needsUpdate=!1}m=this.type,_.needsUpdate=!1,r.setRenderTarget(S,w,C)};function y(E,M){const A=e.update(v);d.defines.VSM_SAMPLES!==E.blurSamples&&(d.defines.VSM_SAMPLES=E.blurSamples,p.defines.VSM_SAMPLES=E.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),E.mapPass===null&&(E.mapPass=new Xs(s.x,s.y)),d.uniforms.shadow_pass.value=E.map.texture,d.uniforms.resolution.value=E.mapSize,d.uniforms.radius.value=E.radius,r.setRenderTarget(E.mapPass),r.clear(),r.renderBufferDirect(M,null,A,d,v,null),p.uniforms.shadow_pass.value=E.mapPass.texture,p.uniforms.resolution.value=E.mapSize,p.uniforms.radius.value=E.radius,r.setRenderTarget(E.map),r.clear(),r.renderBufferDirect(M,null,A,p,v,null)}function x(E,M,A,S){let w=null;const C=A.isPointLight===!0?E.customDistanceMaterial:E.customDepthMaterial;if(C!==void 0)w=C;else if(w=A.isPointLight===!0?u:l,r.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const D=w.uuid,R=M.uuid;let F=h[D];F===void 0&&(F={},h[D]=F);let k=F[R];k===void 0&&(k=w.clone(),F[R]=k,M.addEventListener("dispose",T)),w=k}if(w.visible=M.visible,w.wireframe=M.wireframe,S===er?w.side=M.shadowSide!==null?M.shadowSide:M.side:w.side=M.shadowSide!==null?M.shadowSide:c[M.side],w.alphaMap=M.alphaMap,w.alphaTest=M.alphaTest,w.map=M.map,w.clipShadows=M.clipShadows,w.clippingPlanes=M.clippingPlanes,w.clipIntersection=M.clipIntersection,w.displacementMap=M.displacementMap,w.displacementScale=M.displacementScale,w.displacementBias=M.displacementBias,w.wireframeLinewidth=M.wireframeLinewidth,w.linewidth=M.linewidth,A.isPointLight===!0&&w.isMeshDistanceMaterial===!0){const D=r.properties.get(w);D.light=A}return w}function b(E,M,A,S,w){if(E.visible===!1)return;if(E.layers.test(M.layers)&&(E.isMesh||E.isLine||E.isPoints)&&(E.castShadow||E.receiveShadow&&w===er)&&(!E.frustumCulled||n.intersectsObject(E))){E.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,E.matrixWorld);const R=e.update(E),F=E.material;if(Array.isArray(F)){const k=R.groups;for(let z=0,O=k.length;z<O;z++){const I=k[z],j=F[I.materialIndex];if(j&&j.visible){const N=x(E,j,S,w);E.onBeforeShadow(r,E,M,A,R,N,I),r.renderBufferDirect(A,null,R,N,E,I),E.onAfterShadow(r,E,M,A,R,N,I)}}}else if(F.visible){const k=x(E,F,S,w);E.onBeforeShadow(r,E,M,A,R,k,null),r.renderBufferDirect(A,null,R,k,E,null),E.onAfterShadow(r,E,M,A,R,k,null)}}const D=E.children;for(let R=0,F=D.length;R<F;R++)b(D[R],M,A,S,w)}function T(E){E.target.removeEventListener("dispose",T);for(const A in h){const S=h[A],w=E.target.uuid;w in S&&(S[w].dispose(),delete S[w])}}}function uD(r){function e(){let $=!1;const ce=new mn;let re=null;const se=new mn(0,0,0,0);return{setMask:function(fe){re!==fe&&!$&&(r.colorMask(fe,fe,fe,fe),re=fe)},setLocked:function(fe){$=fe},setClear:function(fe,ze,it,bt,St){St===!0&&(fe*=bt,ze*=bt,it*=bt),ce.set(fe,ze,it,bt),se.equals(ce)===!1&&(r.clearColor(fe,ze,it,bt),se.copy(ce))},reset:function(){$=!1,re=null,se.set(-1,0,0,0)}}}function t(){let $=!1,ce=null,re=null,se=null;return{setTest:function(fe){fe?ee(r.DEPTH_TEST):te(r.DEPTH_TEST)},setMask:function(fe){ce!==fe&&!$&&(r.depthMask(fe),ce=fe)},setFunc:function(fe){if(re!==fe){switch(fe){case CE:r.depthFunc(r.NEVER);break;case DE:r.depthFunc(r.ALWAYS);break;case PE:r.depthFunc(r.LESS);break;case zc:r.depthFunc(r.LEQUAL);break;case RE:r.depthFunc(r.EQUAL);break;case LE:r.depthFunc(r.GEQUAL);break;case IE:r.depthFunc(r.GREATER);break;case FE:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}re=fe}},setLocked:function(fe){$=fe},setClear:function(fe){se!==fe&&(r.clearDepth(fe),se=fe)},reset:function(){$=!1,ce=null,re=null,se=null}}}function n(){let $=!1,ce=null,re=null,se=null,fe=null,ze=null,it=null,bt=null,St=null;return{setTest:function(ht){$||(ht?ee(r.STENCIL_TEST):te(r.STENCIL_TEST))},setMask:function(ht){ce!==ht&&!$&&(r.stencilMask(ht),ce=ht)},setFunc:function(ht,Ge,Oe){(re!==ht||se!==Ge||fe!==Oe)&&(r.stencilFunc(ht,Ge,Oe),re=ht,se=Ge,fe=Oe)},setOp:function(ht,Ge,Oe){(ze!==ht||it!==Ge||bt!==Oe)&&(r.stencilOp(ht,Ge,Oe),ze=ht,it=Ge,bt=Oe)},setLocked:function(ht){$=ht},setClear:function(ht){St!==ht&&(r.clearStencil(ht),St=ht)},reset:function(){$=!1,ce=null,re=null,se=null,fe=null,ze=null,it=null,bt=null,St=null}}}const s=new e,a=new t,o=new n,l=new WeakMap,u=new WeakMap;let h={},f={},c=new WeakMap,d=[],p=null,g=!1,v=null,_=null,m=null,y=null,x=null,b=null,T=null,E=new Mt(0,0,0),M=0,A=!1,S=null,w=null,C=null,D=null,R=null;const F=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let k=!1,z=0;const O=r.getParameter(r.VERSION);O.indexOf("WebGL")!==-1?(z=parseFloat(/^WebGL (\d)/.exec(O)[1]),k=z>=1):O.indexOf("OpenGL ES")!==-1&&(z=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),k=z>=2);let I=null,j={};const N=r.getParameter(r.SCISSOR_BOX),q=r.getParameter(r.VIEWPORT),ne=new mn().fromArray(N),W=new mn().fromArray(q);function H($,ce,re,se){const fe=new Uint8Array(4),ze=r.createTexture();r.bindTexture($,ze),r.texParameteri($,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri($,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let it=0;it<re;it++)$===r.TEXTURE_3D||$===r.TEXTURE_2D_ARRAY?r.texImage3D(ce,0,r.RGBA,1,1,se,0,r.RGBA,r.UNSIGNED_BYTE,fe):r.texImage2D(ce+it,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,fe);return ze}const G={};G[r.TEXTURE_2D]=H(r.TEXTURE_2D,r.TEXTURE_2D,1),G[r.TEXTURE_CUBE_MAP]=H(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),G[r.TEXTURE_2D_ARRAY]=H(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),G[r.TEXTURE_3D]=H(r.TEXTURE_3D,r.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),o.setClear(0),ee(r.DEPTH_TEST),a.setFunc(zc),Ae(!1),He(Ep),ee(r.CULL_FACE),Ee(Gr);function ee($){h[$]!==!0&&(r.enable($),h[$]=!0)}function te($){h[$]!==!1&&(r.disable($),h[$]=!1)}function pe($,ce){return f[$]!==ce?(r.bindFramebuffer($,ce),f[$]=ce,$===r.DRAW_FRAMEBUFFER&&(f[r.FRAMEBUFFER]=ce),$===r.FRAMEBUFFER&&(f[r.DRAW_FRAMEBUFFER]=ce),!0):!1}function me($,ce){let re=d,se=!1;if($){re=c.get(ce),re===void 0&&(re=[],c.set(ce,re));const fe=$.textures;if(re.length!==fe.length||re[0]!==r.COLOR_ATTACHMENT0){for(let ze=0,it=fe.length;ze<it;ze++)re[ze]=r.COLOR_ATTACHMENT0+ze;re.length=fe.length,se=!0}}else re[0]!==r.BACK&&(re[0]=r.BACK,se=!0);se&&r.drawBuffers(re)}function _e($){return p!==$?(r.useProgram($),p=$,!0):!1}const V={[vs]:r.FUNC_ADD,[dE]:r.FUNC_SUBTRACT,[hE]:r.FUNC_REVERSE_SUBTRACT};V[fE]=r.MIN,V[pE]=r.MAX;const ke={[mE]:r.ZERO,[gE]:r.ONE,[_E]:r.SRC_COLOR,[ah]:r.SRC_ALPHA,[wE]:r.SRC_ALPHA_SATURATE,[bE]:r.DST_COLOR,[yE]:r.DST_ALPHA,[vE]:r.ONE_MINUS_SRC_COLOR,[oh]:r.ONE_MINUS_SRC_ALPHA,[SE]:r.ONE_MINUS_DST_COLOR,[xE]:r.ONE_MINUS_DST_ALPHA,[EE]:r.CONSTANT_COLOR,[TE]:r.ONE_MINUS_CONSTANT_COLOR,[ME]:r.CONSTANT_ALPHA,[AE]:r.ONE_MINUS_CONSTANT_ALPHA};function Ee($,ce,re,se,fe,ze,it,bt,St,ht){if($===Gr){g===!0&&(te(r.BLEND),g=!1);return}if(g===!1&&(ee(r.BLEND),g=!0),$!==uE){if($!==v||ht!==A){if((_!==vs||x!==vs)&&(r.blendEquation(r.FUNC_ADD),_=vs,x=vs),ht)switch($){case Ia:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case Tp:r.blendFunc(r.ONE,r.ONE);break;case Mp:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case Ap:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}else switch($){case Ia:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case Tp:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case Mp:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case Ap:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}m=null,y=null,b=null,T=null,E.set(0,0,0),M=0,v=$,A=ht}return}fe=fe||ce,ze=ze||re,it=it||se,(ce!==_||fe!==x)&&(r.blendEquationSeparate(V[ce],V[fe]),_=ce,x=fe),(re!==m||se!==y||ze!==b||it!==T)&&(r.blendFuncSeparate(ke[re],ke[se],ke[ze],ke[it]),m=re,y=se,b=ze,T=it),(bt.equals(E)===!1||St!==M)&&(r.blendColor(bt.r,bt.g,bt.b,St),E.copy(bt),M=St),v=$,A=!1}function Xe($,ce){$.side===Ni?te(r.CULL_FACE):ee(r.CULL_FACE);let re=$.side===Xn;ce&&(re=!re),Ae(re),$.blending===Ia&&$.transparent===!1?Ee(Gr):Ee($.blending,$.blendEquation,$.blendSrc,$.blendDst,$.blendEquationAlpha,$.blendSrcAlpha,$.blendDstAlpha,$.blendColor,$.blendAlpha,$.premultipliedAlpha),a.setFunc($.depthFunc),a.setTest($.depthTest),a.setMask($.depthWrite),s.setMask($.colorWrite);const se=$.stencilWrite;o.setTest(se),se&&(o.setMask($.stencilWriteMask),o.setFunc($.stencilFunc,$.stencilRef,$.stencilFuncMask),o.setOp($.stencilFail,$.stencilZFail,$.stencilZPass)),Ne($.polygonOffset,$.polygonOffsetFactor,$.polygonOffsetUnits),$.alphaToCoverage===!0?ee(r.SAMPLE_ALPHA_TO_COVERAGE):te(r.SAMPLE_ALPHA_TO_COVERAGE)}function Ae($){S!==$&&($?r.frontFace(r.CW):r.frontFace(r.CCW),S=$)}function He($){$!==oE?(ee(r.CULL_FACE),$!==w&&($===Ep?r.cullFace(r.BACK):$===lE?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):te(r.CULL_FACE),w=$}function K($){$!==C&&(k&&r.lineWidth($),C=$)}function Ne($,ce,re){$?(ee(r.POLYGON_OFFSET_FILL),(D!==ce||R!==re)&&(r.polygonOffset(ce,re),D=ce,R=re)):te(r.POLYGON_OFFSET_FILL)}function dt($){$?ee(r.SCISSOR_TEST):te(r.SCISSOR_TEST)}function B($){$===void 0&&($=r.TEXTURE0+F-1),I!==$&&(r.activeTexture($),I=$)}function P($,ce,re){re===void 0&&(I===null?re=r.TEXTURE0+F-1:re=I);let se=j[re];se===void 0&&(se={type:void 0,texture:void 0},j[re]=se),(se.type!==$||se.texture!==ce)&&(I!==re&&(r.activeTexture(re),I=re),r.bindTexture($,ce||G[$]),se.type=$,se.texture=ce)}function Q(){const $=j[I];$!==void 0&&$.type!==void 0&&(r.bindTexture($.type,null),$.type=void 0,$.texture=void 0)}function oe(){try{r.compressedTexImage2D.apply(r,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function le(){try{r.compressedTexImage3D.apply(r,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function ae(){try{r.texSubImage2D.apply(r,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Fe(){try{r.texSubImage3D.apply(r,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function de(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function ve(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function We(){try{r.texStorage2D.apply(r,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function he(){try{r.texStorage3D.apply(r,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Le(){try{r.texImage2D.apply(r,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Be(){try{r.texImage3D.apply(r,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function qe($){ne.equals($)===!1&&(r.scissor($.x,$.y,$.z,$.w),ne.copy($))}function ye($){W.equals($)===!1&&(r.viewport($.x,$.y,$.z,$.w),W.copy($))}function Ze($,ce){let re=u.get(ce);re===void 0&&(re=new WeakMap,u.set(ce,re));let se=re.get($);se===void 0&&(se=r.getUniformBlockIndex(ce,$.name),re.set($,se))}function Qe($,ce){const se=u.get(ce).get($);l.get(ce)!==se&&(r.uniformBlockBinding(ce,se,$.__bindingPointIndex),l.set(ce,se))}function _t(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),h={},I=null,j={},f={},c=new WeakMap,d=[],p=null,g=!1,v=null,_=null,m=null,y=null,x=null,b=null,T=null,E=new Mt(0,0,0),M=0,A=!1,S=null,w=null,C=null,D=null,R=null,ne.set(0,0,r.canvas.width,r.canvas.height),W.set(0,0,r.canvas.width,r.canvas.height),s.reset(),a.reset(),o.reset()}return{buffers:{color:s,depth:a,stencil:o},enable:ee,disable:te,bindFramebuffer:pe,drawBuffers:me,useProgram:_e,setBlending:Ee,setMaterial:Xe,setFlipSided:Ae,setCullFace:He,setLineWidth:K,setPolygonOffset:Ne,setScissorTest:dt,activeTexture:B,bindTexture:P,unbindTexture:Q,compressedTexImage2D:oe,compressedTexImage3D:le,texImage2D:Le,texImage3D:Be,updateUBOMapping:Ze,uniformBlockBinding:Qe,texStorage2D:We,texStorage3D:he,texSubImage2D:ae,texSubImage3D:Fe,compressedTexSubImage2D:de,compressedTexSubImage3D:ve,scissor:qe,viewport:ye,reset:_t}}function dD(r,e,t,n,s,a,o){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new gt,f=new WeakMap;let c;const d=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(B,P){return p?new OffscreenCanvas(B,P):rl("canvas")}function v(B,P,Q){let oe=1;const le=dt(B);if((le.width>Q||le.height>Q)&&(oe=Q/Math.max(le.width,le.height)),oe<1)if(typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&B instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&B instanceof ImageBitmap||typeof VideoFrame<"u"&&B instanceof VideoFrame){const ae=Math.floor(oe*le.width),Fe=Math.floor(oe*le.height);c===void 0&&(c=g(ae,Fe));const de=P?g(ae,Fe):c;return de.width=ae,de.height=Fe,de.getContext("2d").drawImage(B,0,0,ae,Fe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+le.width+"x"+le.height+") to ("+ae+"x"+Fe+")."),de}else return"data"in B&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+le.width+"x"+le.height+")."),B;return B}function _(B){return B.generateMipmaps&&B.minFilter!==_i&&B.minFilter!==ni}function m(B){r.generateMipmap(B)}function y(B,P,Q,oe,le=!1){if(B!==null){if(r[B]!==void 0)return r[B];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+B+"'")}let ae=P;if(P===r.RED&&(Q===r.FLOAT&&(ae=r.R32F),Q===r.HALF_FLOAT&&(ae=r.R16F),Q===r.UNSIGNED_BYTE&&(ae=r.R8)),P===r.RED_INTEGER&&(Q===r.UNSIGNED_BYTE&&(ae=r.R8UI),Q===r.UNSIGNED_SHORT&&(ae=r.R16UI),Q===r.UNSIGNED_INT&&(ae=r.R32UI),Q===r.BYTE&&(ae=r.R8I),Q===r.SHORT&&(ae=r.R16I),Q===r.INT&&(ae=r.R32I)),P===r.RG&&(Q===r.FLOAT&&(ae=r.RG32F),Q===r.HALF_FLOAT&&(ae=r.RG16F),Q===r.UNSIGNED_BYTE&&(ae=r.RG8)),P===r.RG_INTEGER&&(Q===r.UNSIGNED_BYTE&&(ae=r.RG8UI),Q===r.UNSIGNED_SHORT&&(ae=r.RG16UI),Q===r.UNSIGNED_INT&&(ae=r.RG32UI),Q===r.BYTE&&(ae=r.RG8I),Q===r.SHORT&&(ae=r.RG16I),Q===r.INT&&(ae=r.RG32I)),P===r.RGB&&Q===r.UNSIGNED_INT_5_9_9_9_REV&&(ae=r.RGB9_E5),P===r.RGBA){const Fe=le?Vc:xt.getTransfer(oe);Q===r.FLOAT&&(ae=r.RGBA32F),Q===r.HALF_FLOAT&&(ae=r.RGBA16F),Q===r.UNSIGNED_BYTE&&(ae=Fe===Rt?r.SRGB8_ALPHA8:r.RGBA8),Q===r.UNSIGNED_SHORT_4_4_4_4&&(ae=r.RGBA4),Q===r.UNSIGNED_SHORT_5_5_5_1&&(ae=r.RGB5_A1)}return(ae===r.R16F||ae===r.R32F||ae===r.RG16F||ae===r.RG32F||ae===r.RGBA16F||ae===r.RGBA32F)&&e.get("EXT_color_buffer_float"),ae}function x(B,P){let Q;return B?P===null||P===Xa||P===qa?Q=r.DEPTH24_STENCIL8:P===Br?Q=r.DEPTH32F_STENCIL8:P===Hc&&(Q=r.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):P===null||P===Xa||P===qa?Q=r.DEPTH_COMPONENT24:P===Br?Q=r.DEPTH_COMPONENT32F:P===Hc&&(Q=r.DEPTH_COMPONENT16),Q}function b(B,P){return _(B)===!0||B.isFramebufferTexture&&B.minFilter!==_i&&B.minFilter!==ni?Math.log2(Math.max(P.width,P.height))+1:B.mipmaps!==void 0&&B.mipmaps.length>0?B.mipmaps.length:B.isCompressedTexture&&Array.isArray(B.image)?P.mipmaps.length:1}function T(B){const P=B.target;P.removeEventListener("dispose",T),M(P),P.isVideoTexture&&f.delete(P)}function E(B){const P=B.target;P.removeEventListener("dispose",E),S(P)}function M(B){const P=n.get(B);if(P.__webglInit===void 0)return;const Q=B.source,oe=d.get(Q);if(oe){const le=oe[P.__cacheKey];le.usedTimes--,le.usedTimes===0&&A(B),Object.keys(oe).length===0&&d.delete(Q)}n.remove(B)}function A(B){const P=n.get(B);r.deleteTexture(P.__webglTexture);const Q=B.source,oe=d.get(Q);delete oe[P.__cacheKey],o.memory.textures--}function S(B){const P=n.get(B);if(B.depthTexture&&B.depthTexture.dispose(),B.isWebGLCubeRenderTarget)for(let oe=0;oe<6;oe++){if(Array.isArray(P.__webglFramebuffer[oe]))for(let le=0;le<P.__webglFramebuffer[oe].length;le++)r.deleteFramebuffer(P.__webglFramebuffer[oe][le]);else r.deleteFramebuffer(P.__webglFramebuffer[oe]);P.__webglDepthbuffer&&r.deleteRenderbuffer(P.__webglDepthbuffer[oe])}else{if(Array.isArray(P.__webglFramebuffer))for(let oe=0;oe<P.__webglFramebuffer.length;oe++)r.deleteFramebuffer(P.__webglFramebuffer[oe]);else r.deleteFramebuffer(P.__webglFramebuffer);if(P.__webglDepthbuffer&&r.deleteRenderbuffer(P.__webglDepthbuffer),P.__webglMultisampledFramebuffer&&r.deleteFramebuffer(P.__webglMultisampledFramebuffer),P.__webglColorRenderbuffer)for(let oe=0;oe<P.__webglColorRenderbuffer.length;oe++)P.__webglColorRenderbuffer[oe]&&r.deleteRenderbuffer(P.__webglColorRenderbuffer[oe]);P.__webglDepthRenderbuffer&&r.deleteRenderbuffer(P.__webglDepthRenderbuffer)}const Q=B.textures;for(let oe=0,le=Q.length;oe<le;oe++){const ae=n.get(Q[oe]);ae.__webglTexture&&(r.deleteTexture(ae.__webglTexture),o.memory.textures--),n.remove(Q[oe])}n.remove(B)}let w=0;function C(){w=0}function D(){const B=w;return B>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+B+" texture units while this GPU supports only "+s.maxTextures),w+=1,B}function R(B){const P=[];return P.push(B.wrapS),P.push(B.wrapT),P.push(B.wrapR||0),P.push(B.magFilter),P.push(B.minFilter),P.push(B.anisotropy),P.push(B.internalFormat),P.push(B.format),P.push(B.type),P.push(B.generateMipmaps),P.push(B.premultiplyAlpha),P.push(B.flipY),P.push(B.unpackAlignment),P.push(B.colorSpace),P.join()}function F(B,P){const Q=n.get(B);if(B.isVideoTexture&&K(B),B.isRenderTargetTexture===!1&&B.version>0&&Q.__version!==B.version){const oe=B.image;if(oe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(oe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{W(Q,B,P);return}}t.bindTexture(r.TEXTURE_2D,Q.__webglTexture,r.TEXTURE0+P)}function k(B,P){const Q=n.get(B);if(B.version>0&&Q.__version!==B.version){W(Q,B,P);return}t.bindTexture(r.TEXTURE_2D_ARRAY,Q.__webglTexture,r.TEXTURE0+P)}function z(B,P){const Q=n.get(B);if(B.version>0&&Q.__version!==B.version){W(Q,B,P);return}t.bindTexture(r.TEXTURE_3D,Q.__webglTexture,r.TEXTURE0+P)}function O(B,P){const Q=n.get(B);if(B.version>0&&Q.__version!==B.version){H(Q,B,P);return}t.bindTexture(r.TEXTURE_CUBE_MAP,Q.__webglTexture,r.TEXTURE0+P)}const I={[uh]:r.REPEAT,[Cs]:r.CLAMP_TO_EDGE,[dh]:r.MIRRORED_REPEAT},j={[_i]:r.NEAREST,[WE]:r.NEAREST_MIPMAP_NEAREST,[Nl]:r.NEAREST_MIPMAP_LINEAR,[ni]:r.LINEAR,[Vu]:r.LINEAR_MIPMAP_NEAREST,[Ds]:r.LINEAR_MIPMAP_LINEAR},N={[sT]:r.NEVER,[dT]:r.ALWAYS,[aT]:r.LESS,[I0]:r.LEQUAL,[oT]:r.EQUAL,[uT]:r.GEQUAL,[lT]:r.GREATER,[cT]:r.NOTEQUAL};function q(B,P){if(P.type===Br&&e.has("OES_texture_float_linear")===!1&&(P.magFilter===ni||P.magFilter===Vu||P.magFilter===Nl||P.magFilter===Ds||P.minFilter===ni||P.minFilter===Vu||P.minFilter===Nl||P.minFilter===Ds)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),r.texParameteri(B,r.TEXTURE_WRAP_S,I[P.wrapS]),r.texParameteri(B,r.TEXTURE_WRAP_T,I[P.wrapT]),(B===r.TEXTURE_3D||B===r.TEXTURE_2D_ARRAY)&&r.texParameteri(B,r.TEXTURE_WRAP_R,I[P.wrapR]),r.texParameteri(B,r.TEXTURE_MAG_FILTER,j[P.magFilter]),r.texParameteri(B,r.TEXTURE_MIN_FILTER,j[P.minFilter]),P.compareFunction&&(r.texParameteri(B,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(B,r.TEXTURE_COMPARE_FUNC,N[P.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(P.magFilter===_i||P.minFilter!==Nl&&P.minFilter!==Ds||P.type===Br&&e.has("OES_texture_float_linear")===!1)return;if(P.anisotropy>1||n.get(P).__currentAnisotropy){const Q=e.get("EXT_texture_filter_anisotropic");r.texParameterf(B,Q.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(P.anisotropy,s.getMaxAnisotropy())),n.get(P).__currentAnisotropy=P.anisotropy}}}function ne(B,P){let Q=!1;B.__webglInit===void 0&&(B.__webglInit=!0,P.addEventListener("dispose",T));const oe=P.source;let le=d.get(oe);le===void 0&&(le={},d.set(oe,le));const ae=R(P);if(ae!==B.__cacheKey){le[ae]===void 0&&(le[ae]={texture:r.createTexture(),usedTimes:0},o.memory.textures++,Q=!0),le[ae].usedTimes++;const Fe=le[B.__cacheKey];Fe!==void 0&&(le[B.__cacheKey].usedTimes--,Fe.usedTimes===0&&A(P)),B.__cacheKey=ae,B.__webglTexture=le[ae].texture}return Q}function W(B,P,Q){let oe=r.TEXTURE_2D;(P.isDataArrayTexture||P.isCompressedArrayTexture)&&(oe=r.TEXTURE_2D_ARRAY),P.isData3DTexture&&(oe=r.TEXTURE_3D);const le=ne(B,P),ae=P.source;t.bindTexture(oe,B.__webglTexture,r.TEXTURE0+Q);const Fe=n.get(ae);if(ae.version!==Fe.__version||le===!0){t.activeTexture(r.TEXTURE0+Q);const de=xt.getPrimaries(xt.workingColorSpace),ve=P.colorSpace===Pr?null:xt.getPrimaries(P.colorSpace),We=P.colorSpace===Pr||de===ve?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,P.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,P.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,P.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,We);let he=v(P.image,!1,s.maxTextureSize);he=Ne(P,he);const Le=a.convert(P.format,P.colorSpace),Be=a.convert(P.type);let qe=y(P.internalFormat,Le,Be,P.colorSpace,P.isVideoTexture);q(oe,P);let ye;const Ze=P.mipmaps,Qe=P.isVideoTexture!==!0,_t=Fe.__version===void 0||le===!0,$=ae.dataReady,ce=b(P,he);if(P.isDepthTexture)qe=x(P.format===Ya,P.type),_t&&(Qe?t.texStorage2D(r.TEXTURE_2D,1,qe,he.width,he.height):t.texImage2D(r.TEXTURE_2D,0,qe,he.width,he.height,0,Le,Be,null));else if(P.isDataTexture)if(Ze.length>0){Qe&&_t&&t.texStorage2D(r.TEXTURE_2D,ce,qe,Ze[0].width,Ze[0].height);for(let re=0,se=Ze.length;re<se;re++)ye=Ze[re],Qe?$&&t.texSubImage2D(r.TEXTURE_2D,re,0,0,ye.width,ye.height,Le,Be,ye.data):t.texImage2D(r.TEXTURE_2D,re,qe,ye.width,ye.height,0,Le,Be,ye.data);P.generateMipmaps=!1}else Qe?(_t&&t.texStorage2D(r.TEXTURE_2D,ce,qe,he.width,he.height),$&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,he.width,he.height,Le,Be,he.data)):t.texImage2D(r.TEXTURE_2D,0,qe,he.width,he.height,0,Le,Be,he.data);else if(P.isCompressedTexture)if(P.isCompressedArrayTexture){Qe&&_t&&t.texStorage3D(r.TEXTURE_2D_ARRAY,ce,qe,Ze[0].width,Ze[0].height,he.depth);for(let re=0,se=Ze.length;re<se;re++)if(ye=Ze[re],P.format!==Ci)if(Le!==null)if(Qe){if($)if(P.layerUpdates.size>0){for(const fe of P.layerUpdates){const ze=ye.width*ye.height;t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,re,0,0,fe,ye.width,ye.height,1,Le,ye.data.slice(ze*fe,ze*(fe+1)),0,0)}P.clearLayerUpdates()}else t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,re,0,0,0,ye.width,ye.height,he.depth,Le,ye.data,0,0)}else t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,re,qe,ye.width,ye.height,he.depth,0,ye.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Qe?$&&t.texSubImage3D(r.TEXTURE_2D_ARRAY,re,0,0,0,ye.width,ye.height,he.depth,Le,Be,ye.data):t.texImage3D(r.TEXTURE_2D_ARRAY,re,qe,ye.width,ye.height,he.depth,0,Le,Be,ye.data)}else{Qe&&_t&&t.texStorage2D(r.TEXTURE_2D,ce,qe,Ze[0].width,Ze[0].height);for(let re=0,se=Ze.length;re<se;re++)ye=Ze[re],P.format!==Ci?Le!==null?Qe?$&&t.compressedTexSubImage2D(r.TEXTURE_2D,re,0,0,ye.width,ye.height,Le,ye.data):t.compressedTexImage2D(r.TEXTURE_2D,re,qe,ye.width,ye.height,0,ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Qe?$&&t.texSubImage2D(r.TEXTURE_2D,re,0,0,ye.width,ye.height,Le,Be,ye.data):t.texImage2D(r.TEXTURE_2D,re,qe,ye.width,ye.height,0,Le,Be,ye.data)}else if(P.isDataArrayTexture)if(Qe){if(_t&&t.texStorage3D(r.TEXTURE_2D_ARRAY,ce,qe,he.width,he.height,he.depth),$)if(P.layerUpdates.size>0){let re;switch(Be){case r.UNSIGNED_BYTE:switch(Le){case r.ALPHA:re=1;break;case r.LUMINANCE:re=1;break;case r.LUMINANCE_ALPHA:re=2;break;case r.RGB:re=3;break;case r.RGBA:re=4;break;default:throw new Error(`Unknown texel size for format ${Le}.`)}break;case r.UNSIGNED_SHORT_4_4_4_4:case r.UNSIGNED_SHORT_5_5_5_1:case r.UNSIGNED_SHORT_5_6_5:re=1;break;default:throw new Error(`Unknown texel size for type ${Be}.`)}const se=he.width*he.height*re;for(const fe of P.layerUpdates)t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,fe,he.width,he.height,1,Le,Be,he.data.slice(se*fe,se*(fe+1)));P.clearLayerUpdates()}else t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,he.width,he.height,he.depth,Le,Be,he.data)}else t.texImage3D(r.TEXTURE_2D_ARRAY,0,qe,he.width,he.height,he.depth,0,Le,Be,he.data);else if(P.isData3DTexture)Qe?(_t&&t.texStorage3D(r.TEXTURE_3D,ce,qe,he.width,he.height,he.depth),$&&t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,he.width,he.height,he.depth,Le,Be,he.data)):t.texImage3D(r.TEXTURE_3D,0,qe,he.width,he.height,he.depth,0,Le,Be,he.data);else if(P.isFramebufferTexture){if(_t)if(Qe)t.texStorage2D(r.TEXTURE_2D,ce,qe,he.width,he.height);else{let re=he.width,se=he.height;for(let fe=0;fe<ce;fe++)t.texImage2D(r.TEXTURE_2D,fe,qe,re,se,0,Le,Be,null),re>>=1,se>>=1}}else if(Ze.length>0){if(Qe&&_t){const re=dt(Ze[0]);t.texStorage2D(r.TEXTURE_2D,ce,qe,re.width,re.height)}for(let re=0,se=Ze.length;re<se;re++)ye=Ze[re],Qe?$&&t.texSubImage2D(r.TEXTURE_2D,re,0,0,Le,Be,ye):t.texImage2D(r.TEXTURE_2D,re,qe,Le,Be,ye);P.generateMipmaps=!1}else if(Qe){if(_t){const re=dt(he);t.texStorage2D(r.TEXTURE_2D,ce,qe,re.width,re.height)}$&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,Le,Be,he)}else t.texImage2D(r.TEXTURE_2D,0,qe,Le,Be,he);_(P)&&m(oe),Fe.__version=ae.version,P.onUpdate&&P.onUpdate(P)}B.__version=P.version}function H(B,P,Q){if(P.image.length!==6)return;const oe=ne(B,P),le=P.source;t.bindTexture(r.TEXTURE_CUBE_MAP,B.__webglTexture,r.TEXTURE0+Q);const ae=n.get(le);if(le.version!==ae.__version||oe===!0){t.activeTexture(r.TEXTURE0+Q);const Fe=xt.getPrimaries(xt.workingColorSpace),de=P.colorSpace===Pr?null:xt.getPrimaries(P.colorSpace),ve=P.colorSpace===Pr||Fe===de?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,P.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,P.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,P.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,ve);const We=P.isCompressedTexture||P.image[0].isCompressedTexture,he=P.image[0]&&P.image[0].isDataTexture,Le=[];for(let se=0;se<6;se++)!We&&!he?Le[se]=v(P.image[se],!0,s.maxCubemapSize):Le[se]=he?P.image[se].image:P.image[se],Le[se]=Ne(P,Le[se]);const Be=Le[0],qe=a.convert(P.format,P.colorSpace),ye=a.convert(P.type),Ze=y(P.internalFormat,qe,ye,P.colorSpace),Qe=P.isVideoTexture!==!0,_t=ae.__version===void 0||oe===!0,$=le.dataReady;let ce=b(P,Be);q(r.TEXTURE_CUBE_MAP,P);let re;if(We){Qe&&_t&&t.texStorage2D(r.TEXTURE_CUBE_MAP,ce,Ze,Be.width,Be.height);for(let se=0;se<6;se++){re=Le[se].mipmaps;for(let fe=0;fe<re.length;fe++){const ze=re[fe];P.format!==Ci?qe!==null?Qe?$&&t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+se,fe,0,0,ze.width,ze.height,qe,ze.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+se,fe,Ze,ze.width,ze.height,0,ze.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Qe?$&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+se,fe,0,0,ze.width,ze.height,qe,ye,ze.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+se,fe,Ze,ze.width,ze.height,0,qe,ye,ze.data)}}}else{if(re=P.mipmaps,Qe&&_t){re.length>0&&ce++;const se=dt(Le[0]);t.texStorage2D(r.TEXTURE_CUBE_MAP,ce,Ze,se.width,se.height)}for(let se=0;se<6;se++)if(he){Qe?$&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+se,0,0,0,Le[se].width,Le[se].height,qe,ye,Le[se].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+se,0,Ze,Le[se].width,Le[se].height,0,qe,ye,Le[se].data);for(let fe=0;fe<re.length;fe++){const it=re[fe].image[se].image;Qe?$&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+se,fe+1,0,0,it.width,it.height,qe,ye,it.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+se,fe+1,Ze,it.width,it.height,0,qe,ye,it.data)}}else{Qe?$&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+se,0,0,0,qe,ye,Le[se]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+se,0,Ze,qe,ye,Le[se]);for(let fe=0;fe<re.length;fe++){const ze=re[fe];Qe?$&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+se,fe+1,0,0,qe,ye,ze.image[se]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+se,fe+1,Ze,qe,ye,ze.image[se])}}}_(P)&&m(r.TEXTURE_CUBE_MAP),ae.__version=le.version,P.onUpdate&&P.onUpdate(P)}B.__version=P.version}function G(B,P,Q,oe,le,ae){const Fe=a.convert(Q.format,Q.colorSpace),de=a.convert(Q.type),ve=y(Q.internalFormat,Fe,de,Q.colorSpace);if(!n.get(P).__hasExternalTextures){const he=Math.max(1,P.width>>ae),Le=Math.max(1,P.height>>ae);le===r.TEXTURE_3D||le===r.TEXTURE_2D_ARRAY?t.texImage3D(le,ae,ve,he,Le,P.depth,0,Fe,de,null):t.texImage2D(le,ae,ve,he,Le,0,Fe,de,null)}t.bindFramebuffer(r.FRAMEBUFFER,B),He(P)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,oe,le,n.get(Q).__webglTexture,0,Ae(P)):(le===r.TEXTURE_2D||le>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&le<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,oe,le,n.get(Q).__webglTexture,ae),t.bindFramebuffer(r.FRAMEBUFFER,null)}function ee(B,P,Q){if(r.bindRenderbuffer(r.RENDERBUFFER,B),P.depthBuffer){const oe=P.depthTexture,le=oe&&oe.isDepthTexture?oe.type:null,ae=x(P.stencilBuffer,le),Fe=P.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,de=Ae(P);He(P)?l.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,de,ae,P.width,P.height):Q?r.renderbufferStorageMultisample(r.RENDERBUFFER,de,ae,P.width,P.height):r.renderbufferStorage(r.RENDERBUFFER,ae,P.width,P.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,Fe,r.RENDERBUFFER,B)}else{const oe=P.textures;for(let le=0;le<oe.length;le++){const ae=oe[le],Fe=a.convert(ae.format,ae.colorSpace),de=a.convert(ae.type),ve=y(ae.internalFormat,Fe,de,ae.colorSpace),We=Ae(P);Q&&He(P)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,We,ve,P.width,P.height):He(P)?l.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,We,ve,P.width,P.height):r.renderbufferStorage(r.RENDERBUFFER,ve,P.width,P.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function te(B,P){if(P&&P.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(r.FRAMEBUFFER,B),!(P.depthTexture&&P.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(P.depthTexture).__webglTexture||P.depthTexture.image.width!==P.width||P.depthTexture.image.height!==P.height)&&(P.depthTexture.image.width=P.width,P.depthTexture.image.height=P.height,P.depthTexture.needsUpdate=!0),F(P.depthTexture,0);const oe=n.get(P.depthTexture).__webglTexture,le=Ae(P);if(P.depthTexture.format===Fa)He(P)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,oe,0,le):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,oe,0);else if(P.depthTexture.format===Ya)He(P)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,oe,0,le):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,oe,0);else throw new Error("Unknown depthTexture format")}function pe(B){const P=n.get(B),Q=B.isWebGLCubeRenderTarget===!0;if(B.depthTexture&&!P.__autoAllocateDepthBuffer){if(Q)throw new Error("target.depthTexture not supported in Cube render targets");te(P.__webglFramebuffer,B)}else if(Q){P.__webglDepthbuffer=[];for(let oe=0;oe<6;oe++)t.bindFramebuffer(r.FRAMEBUFFER,P.__webglFramebuffer[oe]),P.__webglDepthbuffer[oe]=r.createRenderbuffer(),ee(P.__webglDepthbuffer[oe],B,!1)}else t.bindFramebuffer(r.FRAMEBUFFER,P.__webglFramebuffer),P.__webglDepthbuffer=r.createRenderbuffer(),ee(P.__webglDepthbuffer,B,!1);t.bindFramebuffer(r.FRAMEBUFFER,null)}function me(B,P,Q){const oe=n.get(B);P!==void 0&&G(oe.__webglFramebuffer,B,B.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),Q!==void 0&&pe(B)}function _e(B){const P=B.texture,Q=n.get(B),oe=n.get(P);B.addEventListener("dispose",E);const le=B.textures,ae=B.isWebGLCubeRenderTarget===!0,Fe=le.length>1;if(Fe||(oe.__webglTexture===void 0&&(oe.__webglTexture=r.createTexture()),oe.__version=P.version,o.memory.textures++),ae){Q.__webglFramebuffer=[];for(let de=0;de<6;de++)if(P.mipmaps&&P.mipmaps.length>0){Q.__webglFramebuffer[de]=[];for(let ve=0;ve<P.mipmaps.length;ve++)Q.__webglFramebuffer[de][ve]=r.createFramebuffer()}else Q.__webglFramebuffer[de]=r.createFramebuffer()}else{if(P.mipmaps&&P.mipmaps.length>0){Q.__webglFramebuffer=[];for(let de=0;de<P.mipmaps.length;de++)Q.__webglFramebuffer[de]=r.createFramebuffer()}else Q.__webglFramebuffer=r.createFramebuffer();if(Fe)for(let de=0,ve=le.length;de<ve;de++){const We=n.get(le[de]);We.__webglTexture===void 0&&(We.__webglTexture=r.createTexture(),o.memory.textures++)}if(B.samples>0&&He(B)===!1){Q.__webglMultisampledFramebuffer=r.createFramebuffer(),Q.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,Q.__webglMultisampledFramebuffer);for(let de=0;de<le.length;de++){const ve=le[de];Q.__webglColorRenderbuffer[de]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,Q.__webglColorRenderbuffer[de]);const We=a.convert(ve.format,ve.colorSpace),he=a.convert(ve.type),Le=y(ve.internalFormat,We,he,ve.colorSpace,B.isXRRenderTarget===!0),Be=Ae(B);r.renderbufferStorageMultisample(r.RENDERBUFFER,Be,Le,B.width,B.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+de,r.RENDERBUFFER,Q.__webglColorRenderbuffer[de])}r.bindRenderbuffer(r.RENDERBUFFER,null),B.depthBuffer&&(Q.__webglDepthRenderbuffer=r.createRenderbuffer(),ee(Q.__webglDepthRenderbuffer,B,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(ae){t.bindTexture(r.TEXTURE_CUBE_MAP,oe.__webglTexture),q(r.TEXTURE_CUBE_MAP,P);for(let de=0;de<6;de++)if(P.mipmaps&&P.mipmaps.length>0)for(let ve=0;ve<P.mipmaps.length;ve++)G(Q.__webglFramebuffer[de][ve],B,P,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+de,ve);else G(Q.__webglFramebuffer[de],B,P,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+de,0);_(P)&&m(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Fe){for(let de=0,ve=le.length;de<ve;de++){const We=le[de],he=n.get(We);t.bindTexture(r.TEXTURE_2D,he.__webglTexture),q(r.TEXTURE_2D,We),G(Q.__webglFramebuffer,B,We,r.COLOR_ATTACHMENT0+de,r.TEXTURE_2D,0),_(We)&&m(r.TEXTURE_2D)}t.unbindTexture()}else{let de=r.TEXTURE_2D;if((B.isWebGL3DRenderTarget||B.isWebGLArrayRenderTarget)&&(de=B.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),t.bindTexture(de,oe.__webglTexture),q(de,P),P.mipmaps&&P.mipmaps.length>0)for(let ve=0;ve<P.mipmaps.length;ve++)G(Q.__webglFramebuffer[ve],B,P,r.COLOR_ATTACHMENT0,de,ve);else G(Q.__webglFramebuffer,B,P,r.COLOR_ATTACHMENT0,de,0);_(P)&&m(de),t.unbindTexture()}B.depthBuffer&&pe(B)}function V(B){const P=B.textures;for(let Q=0,oe=P.length;Q<oe;Q++){const le=P[Q];if(_(le)){const ae=B.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:r.TEXTURE_2D,Fe=n.get(le).__webglTexture;t.bindTexture(ae,Fe),m(ae),t.unbindTexture()}}}const ke=[],Ee=[];function Xe(B){if(B.samples>0){if(He(B)===!1){const P=B.textures,Q=B.width,oe=B.height;let le=r.COLOR_BUFFER_BIT;const ae=B.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Fe=n.get(B),de=P.length>1;if(de)for(let ve=0;ve<P.length;ve++)t.bindFramebuffer(r.FRAMEBUFFER,Fe.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+ve,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,Fe.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+ve,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,Fe.__webglMultisampledFramebuffer),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,Fe.__webglFramebuffer);for(let ve=0;ve<P.length;ve++){if(B.resolveDepthBuffer&&(B.depthBuffer&&(le|=r.DEPTH_BUFFER_BIT),B.stencilBuffer&&B.resolveStencilBuffer&&(le|=r.STENCIL_BUFFER_BIT)),de){r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,Fe.__webglColorRenderbuffer[ve]);const We=n.get(P[ve]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,We,0)}r.blitFramebuffer(0,0,Q,oe,0,0,Q,oe,le,r.NEAREST),u===!0&&(ke.length=0,Ee.length=0,ke.push(r.COLOR_ATTACHMENT0+ve),B.depthBuffer&&B.resolveDepthBuffer===!1&&(ke.push(ae),Ee.push(ae),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,Ee)),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,ke))}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),de)for(let ve=0;ve<P.length;ve++){t.bindFramebuffer(r.FRAMEBUFFER,Fe.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+ve,r.RENDERBUFFER,Fe.__webglColorRenderbuffer[ve]);const We=n.get(P[ve]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,Fe.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+ve,r.TEXTURE_2D,We,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,Fe.__webglMultisampledFramebuffer)}else if(B.depthBuffer&&B.resolveDepthBuffer===!1&&u){const P=B.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[P])}}}function Ae(B){return Math.min(s.maxSamples,B.samples)}function He(B){const P=n.get(B);return B.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&P.__useRenderToTexture!==!1}function K(B){const P=o.render.frame;f.get(B)!==P&&(f.set(B,P),B.update())}function Ne(B,P){const Q=B.colorSpace,oe=B.format,le=B.type;return B.isCompressedTexture===!0||B.isVideoTexture===!0||Q!==Qr&&Q!==Pr&&(xt.getTransfer(Q)===Rt?(oe!==Ci||le!==Kr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Q)),P}function dt(B){return typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement?(h.width=B.naturalWidth||B.width,h.height=B.naturalHeight||B.height):typeof VideoFrame<"u"&&B instanceof VideoFrame?(h.width=B.displayWidth,h.height=B.displayHeight):(h.width=B.width,h.height=B.height),h}this.allocateTextureUnit=D,this.resetTextureUnits=C,this.setTexture2D=F,this.setTexture2DArray=k,this.setTexture3D=z,this.setTextureCube=O,this.rebindTextures=me,this.setupRenderTarget=_e,this.updateRenderTargetMipmap=V,this.updateMultisampleRenderTarget=Xe,this.setupDepthRenderbuffer=pe,this.setupFrameBufferTexture=G,this.useMultisampledRTT=He}function hD(r,e){function t(n,s=Pr){let a;const o=xt.getTransfer(s);if(n===Kr)return r.UNSIGNED_BYTE;if(n===C0)return r.UNSIGNED_SHORT_4_4_4_4;if(n===D0)return r.UNSIGNED_SHORT_5_5_5_1;if(n===qE)return r.UNSIGNED_INT_5_9_9_9_REV;if(n===$E)return r.BYTE;if(n===XE)return r.SHORT;if(n===Hc)return r.UNSIGNED_SHORT;if(n===A0)return r.INT;if(n===Xa)return r.UNSIGNED_INT;if(n===Br)return r.FLOAT;if(n===ru)return r.HALF_FLOAT;if(n===YE)return r.ALPHA;if(n===jE)return r.RGB;if(n===Ci)return r.RGBA;if(n===KE)return r.LUMINANCE;if(n===ZE)return r.LUMINANCE_ALPHA;if(n===Fa)return r.DEPTH_COMPONENT;if(n===Ya)return r.DEPTH_STENCIL;if(n===JE)return r.RED;if(n===P0)return r.RED_INTEGER;if(n===QE)return r.RG;if(n===R0)return r.RG_INTEGER;if(n===L0)return r.RGBA_INTEGER;if(n===Gu||n===Wu||n===$u||n===Xu)if(o===Rt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(n===Gu)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Wu)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===$u)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Xu)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(n===Gu)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Wu)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===$u)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Xu)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===Cp||n===Dp||n===Pp||n===Rp)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(n===Cp)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Dp)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Pp)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Rp)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===Lp||n===Ip||n===Fp)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(n===Lp||n===Ip)return o===Rt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===Fp)return o===Rt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===Op||n===Np||n===Up||n===kp||n===Bp||n===zp||n===Hp||n===Vp||n===Gp||n===Wp||n===$p||n===Xp||n===qp||n===Yp)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(n===Op)return o===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Np)return o===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Up)return o===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===kp)return o===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Bp)return o===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===zp)return o===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Hp)return o===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Vp)return o===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Gp)return o===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Wp)return o===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===$p)return o===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Xp)return o===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===qp)return o===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Yp)return o===Rt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===qu||n===jp||n===Kp)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(n===qu)return o===Rt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===jp)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Kp)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===eT||n===Zp||n===Jp||n===Qp)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(n===qu)return a.COMPRESSED_RED_RGTC1_EXT;if(n===Zp)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Jp)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Qp)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===qa?r.UNSIGNED_INT_24_8:r[n]!==void 0?r[n]:null}return{convert:t}}class fD extends fi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class rc extends ai{constructor(){super(),this.isGroup=!0,this.type="Group"}}const pD={type:"move"};class xd{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new rc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new rc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ie,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ie),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new rc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ie,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ie),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let s=null,a=null,o=null;const l=this._targetRay,u=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){o=!0;for(const v of e.hand.values()){const _=t.getJointPose(v,n),m=this._getHandJoint(h,v);_!==null&&(m.matrix.fromArray(_.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=_.radius),m.visible=_!==null}const f=h.joints["index-finger-tip"],c=h.joints["thumb-tip"],d=f.position.distanceTo(c.position),p=.02,g=.005;h.inputState.pinching&&d>p+g?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&d<=p-g&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,n),a!==null&&(u.matrix.fromArray(a.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,a.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(a.linearVelocity)):u.hasLinearVelocity=!1,a.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(a.angularVelocity)):u.hasAngularVelocity=!1));l!==null&&(s=t.getPose(e.targetRaySpace,n),s===null&&a!==null&&(s=a),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(pD)))}return l!==null&&(l.visible=s!==null),u!==null&&(u.visible=a!==null),h!==null&&(h.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new rc;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}const mD=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,gD=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class _D{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const s=new Nn,a=e.properties.get(s);a.__webglTexture=t.texture,(t.depthNear!=n.depthNear||t.depthFar!=n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new Zr({vertexShader:mD,fragmentShader:gD,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new zi(new _l(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}}class vD extends Ja{constructor(e,t){super();const n=this;let s=null,a=1,o=null,l="local-floor",u=1,h=null,f=null,c=null,d=null,p=null,g=null;const v=new _D,_=t.getContextAttributes();let m=null,y=null;const x=[],b=[],T=new gt;let E=null;const M=new fi;M.layers.enable(1),M.viewport=new mn;const A=new fi;A.layers.enable(2),A.viewport=new mn;const S=[M,A],w=new fD;w.layers.enable(1),w.layers.enable(2);let C=null,D=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(H){let G=x[H];return G===void 0&&(G=new xd,x[H]=G),G.getTargetRaySpace()},this.getControllerGrip=function(H){let G=x[H];return G===void 0&&(G=new xd,x[H]=G),G.getGripSpace()},this.getHand=function(H){let G=x[H];return G===void 0&&(G=new xd,x[H]=G),G.getHandSpace()};function R(H){const G=b.indexOf(H.inputSource);if(G===-1)return;const ee=x[G];ee!==void 0&&(ee.update(H.inputSource,H.frame,h||o),ee.dispatchEvent({type:H.type,data:H.inputSource}))}function F(){s.removeEventListener("select",R),s.removeEventListener("selectstart",R),s.removeEventListener("selectend",R),s.removeEventListener("squeeze",R),s.removeEventListener("squeezestart",R),s.removeEventListener("squeezeend",R),s.removeEventListener("end",F),s.removeEventListener("inputsourceschange",k);for(let H=0;H<x.length;H++){const G=b[H];G!==null&&(b[H]=null,x[H].disconnect(G))}C=null,D=null,v.reset(),e.setRenderTarget(m),p=null,d=null,c=null,s=null,y=null,W.stop(),n.isPresenting=!1,e.setPixelRatio(E),e.setSize(T.width,T.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(H){a=H,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(H){l=H,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||o},this.setReferenceSpace=function(H){h=H},this.getBaseLayer=function(){return d!==null?d:p},this.getBinding=function(){return c},this.getFrame=function(){return g},this.getSession=function(){return s},this.setSession=async function(H){if(s=H,s!==null){if(m=e.getRenderTarget(),s.addEventListener("select",R),s.addEventListener("selectstart",R),s.addEventListener("selectend",R),s.addEventListener("squeeze",R),s.addEventListener("squeezestart",R),s.addEventListener("squeezeend",R),s.addEventListener("end",F),s.addEventListener("inputsourceschange",k),_.xrCompatible!==!0&&await t.makeXRCompatible(),E=e.getPixelRatio(),e.getSize(T),s.renderState.layers===void 0){const G={antialias:_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:a};p=new XRWebGLLayer(s,t,G),s.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),y=new Xs(p.framebufferWidth,p.framebufferHeight,{format:Ci,type:Kr,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil})}else{let G=null,ee=null,te=null;_.depth&&(te=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,G=_.stencil?Ya:Fa,ee=_.stencil?qa:Xa);const pe={colorFormat:t.RGBA8,depthFormat:te,scaleFactor:a};c=new XRWebGLBinding(s,t),d=c.createProjectionLayer(pe),s.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),y=new Xs(d.textureWidth,d.textureHeight,{format:Ci,type:Kr,depthTexture:new q0(d.textureWidth,d.textureHeight,ee,void 0,void 0,void 0,void 0,void 0,void 0,G),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0,resolveDepthBuffer:d.ignoreDepthValues===!1})}y.isXRRenderTarget=!0,this.setFoveation(u),h=null,o=await s.requestReferenceSpace(l),W.setContext(s),W.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode};function k(H){for(let G=0;G<H.removed.length;G++){const ee=H.removed[G],te=b.indexOf(ee);te>=0&&(b[te]=null,x[te].disconnect(ee))}for(let G=0;G<H.added.length;G++){const ee=H.added[G];let te=b.indexOf(ee);if(te===-1){for(let me=0;me<x.length;me++)if(me>=b.length){b.push(ee),te=me;break}else if(b[me]===null){b[me]=ee,te=me;break}if(te===-1)break}const pe=x[te];pe&&pe.connect(ee)}}const z=new ie,O=new ie;function I(H,G,ee){z.setFromMatrixPosition(G.matrixWorld),O.setFromMatrixPosition(ee.matrixWorld);const te=z.distanceTo(O),pe=G.projectionMatrix.elements,me=ee.projectionMatrix.elements,_e=pe[14]/(pe[10]-1),V=pe[14]/(pe[10]+1),ke=(pe[9]+1)/pe[5],Ee=(pe[9]-1)/pe[5],Xe=(pe[8]-1)/pe[0],Ae=(me[8]+1)/me[0],He=_e*Xe,K=_e*Ae,Ne=te/(-Xe+Ae),dt=Ne*-Xe;G.matrixWorld.decompose(H.position,H.quaternion,H.scale),H.translateX(dt),H.translateZ(Ne),H.matrixWorld.compose(H.position,H.quaternion,H.scale),H.matrixWorldInverse.copy(H.matrixWorld).invert();const B=_e+Ne,P=V+Ne,Q=He-dt,oe=K+(te-dt),le=ke*V/P*B,ae=Ee*V/P*B;H.projectionMatrix.makePerspective(Q,oe,le,ae,B,P),H.projectionMatrixInverse.copy(H.projectionMatrix).invert()}function j(H,G){G===null?H.matrixWorld.copy(H.matrix):H.matrixWorld.multiplyMatrices(G.matrixWorld,H.matrix),H.matrixWorldInverse.copy(H.matrixWorld).invert()}this.updateCamera=function(H){if(s===null)return;v.texture!==null&&(H.near=v.depthNear,H.far=v.depthFar),w.near=A.near=M.near=H.near,w.far=A.far=M.far=H.far,(C!==w.near||D!==w.far)&&(s.updateRenderState({depthNear:w.near,depthFar:w.far}),C=w.near,D=w.far,M.near=C,M.far=D,A.near=C,A.far=D,M.updateProjectionMatrix(),A.updateProjectionMatrix(),H.updateProjectionMatrix());const G=H.parent,ee=w.cameras;j(w,G);for(let te=0;te<ee.length;te++)j(ee[te],G);ee.length===2?I(w,M,A):w.projectionMatrix.copy(M.projectionMatrix),N(H,w,G)};function N(H,G,ee){ee===null?H.matrix.copy(G.matrixWorld):(H.matrix.copy(ee.matrixWorld),H.matrix.invert(),H.matrix.multiply(G.matrixWorld)),H.matrix.decompose(H.position,H.quaternion,H.scale),H.updateMatrixWorld(!0),H.projectionMatrix.copy(G.projectionMatrix),H.projectionMatrixInverse.copy(G.projectionMatrixInverse),H.isPerspectiveCamera&&(H.fov=hh*2*Math.atan(1/H.projectionMatrix.elements[5]),H.zoom=1)}this.getCamera=function(){return w},this.getFoveation=function(){if(!(d===null&&p===null))return u},this.setFoveation=function(H){u=H,d!==null&&(d.fixedFoveation=H),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=H)},this.hasDepthSensing=function(){return v.texture!==null},this.getDepthSensingMesh=function(){return v.getMesh(w)};let q=null;function ne(H,G){if(f=G.getViewerPose(h||o),g=G,f!==null){const ee=f.views;p!==null&&(e.setRenderTargetFramebuffer(y,p.framebuffer),e.setRenderTarget(y));let te=!1;ee.length!==w.cameras.length&&(w.cameras.length=0,te=!0);for(let me=0;me<ee.length;me++){const _e=ee[me];let V=null;if(p!==null)V=p.getViewport(_e);else{const Ee=c.getViewSubImage(d,_e);V=Ee.viewport,me===0&&(e.setRenderTargetTextures(y,Ee.colorTexture,d.ignoreDepthValues?void 0:Ee.depthStencilTexture),e.setRenderTarget(y))}let ke=S[me];ke===void 0&&(ke=new fi,ke.layers.enable(me),ke.viewport=new mn,S[me]=ke),ke.matrix.fromArray(_e.transform.matrix),ke.matrix.decompose(ke.position,ke.quaternion,ke.scale),ke.projectionMatrix.fromArray(_e.projectionMatrix),ke.projectionMatrixInverse.copy(ke.projectionMatrix).invert(),ke.viewport.set(V.x,V.y,V.width,V.height),me===0&&(w.matrix.copy(ke.matrix),w.matrix.decompose(w.position,w.quaternion,w.scale)),te===!0&&w.cameras.push(ke)}const pe=s.enabledFeatures;if(pe&&pe.includes("depth-sensing")){const me=c.getDepthInformation(ee[0]);me&&me.isValid&&me.texture&&v.init(e,me,s.renderState)}}for(let ee=0;ee<x.length;ee++){const te=b[ee],pe=x[ee];te!==null&&pe!==void 0&&pe.update(te,G,h||o)}q&&q(H,G),G.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:G}),g=null}const W=new X0;W.setAnimationLoop(ne),this.setAnimationLoop=function(H){q=H},this.dispose=function(){}}}const us=new gr,yD=new Zt;function xD(r,e){function t(_,m){_.matrixAutoUpdate===!0&&_.updateMatrix(),m.value.copy(_.matrix)}function n(_,m){m.color.getRGB(_.fogColor.value,V0(r)),m.isFog?(_.fogNear.value=m.near,_.fogFar.value=m.far):m.isFogExp2&&(_.fogDensity.value=m.density)}function s(_,m,y,x,b){m.isMeshBasicMaterial||m.isMeshLambertMaterial?a(_,m):m.isMeshToonMaterial?(a(_,m),c(_,m)):m.isMeshPhongMaterial?(a(_,m),f(_,m)):m.isMeshStandardMaterial?(a(_,m),d(_,m),m.isMeshPhysicalMaterial&&p(_,m,b)):m.isMeshMatcapMaterial?(a(_,m),g(_,m)):m.isMeshDepthMaterial?a(_,m):m.isMeshDistanceMaterial?(a(_,m),v(_,m)):m.isMeshNormalMaterial?a(_,m):m.isLineBasicMaterial?(o(_,m),m.isLineDashedMaterial&&l(_,m)):m.isPointsMaterial?u(_,m,y,x):m.isSpriteMaterial?h(_,m):m.isShadowMaterial?(_.color.value.copy(m.color),_.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function a(_,m){_.opacity.value=m.opacity,m.color&&_.diffuse.value.copy(m.color),m.emissive&&_.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(_.map.value=m.map,t(m.map,_.mapTransform)),m.alphaMap&&(_.alphaMap.value=m.alphaMap,t(m.alphaMap,_.alphaMapTransform)),m.bumpMap&&(_.bumpMap.value=m.bumpMap,t(m.bumpMap,_.bumpMapTransform),_.bumpScale.value=m.bumpScale,m.side===Xn&&(_.bumpScale.value*=-1)),m.normalMap&&(_.normalMap.value=m.normalMap,t(m.normalMap,_.normalMapTransform),_.normalScale.value.copy(m.normalScale),m.side===Xn&&_.normalScale.value.negate()),m.displacementMap&&(_.displacementMap.value=m.displacementMap,t(m.displacementMap,_.displacementMapTransform),_.displacementScale.value=m.displacementScale,_.displacementBias.value=m.displacementBias),m.emissiveMap&&(_.emissiveMap.value=m.emissiveMap,t(m.emissiveMap,_.emissiveMapTransform)),m.specularMap&&(_.specularMap.value=m.specularMap,t(m.specularMap,_.specularMapTransform)),m.alphaTest>0&&(_.alphaTest.value=m.alphaTest);const y=e.get(m),x=y.envMap,b=y.envMapRotation;x&&(_.envMap.value=x,us.copy(b),us.x*=-1,us.y*=-1,us.z*=-1,x.isCubeTexture&&x.isRenderTargetTexture===!1&&(us.y*=-1,us.z*=-1),_.envMapRotation.value.setFromMatrix4(yD.makeRotationFromEuler(us)),_.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=m.reflectivity,_.ior.value=m.ior,_.refractionRatio.value=m.refractionRatio),m.lightMap&&(_.lightMap.value=m.lightMap,_.lightMapIntensity.value=m.lightMapIntensity,t(m.lightMap,_.lightMapTransform)),m.aoMap&&(_.aoMap.value=m.aoMap,_.aoMapIntensity.value=m.aoMapIntensity,t(m.aoMap,_.aoMapTransform))}function o(_,m){_.diffuse.value.copy(m.color),_.opacity.value=m.opacity,m.map&&(_.map.value=m.map,t(m.map,_.mapTransform))}function l(_,m){_.dashSize.value=m.dashSize,_.totalSize.value=m.dashSize+m.gapSize,_.scale.value=m.scale}function u(_,m,y,x){_.diffuse.value.copy(m.color),_.opacity.value=m.opacity,_.size.value=m.size*y,_.scale.value=x*.5,m.map&&(_.map.value=m.map,t(m.map,_.uvTransform)),m.alphaMap&&(_.alphaMap.value=m.alphaMap,t(m.alphaMap,_.alphaMapTransform)),m.alphaTest>0&&(_.alphaTest.value=m.alphaTest)}function h(_,m){_.diffuse.value.copy(m.color),_.opacity.value=m.opacity,_.rotation.value=m.rotation,m.map&&(_.map.value=m.map,t(m.map,_.mapTransform)),m.alphaMap&&(_.alphaMap.value=m.alphaMap,t(m.alphaMap,_.alphaMapTransform)),m.alphaTest>0&&(_.alphaTest.value=m.alphaTest)}function f(_,m){_.specular.value.copy(m.specular),_.shininess.value=Math.max(m.shininess,1e-4)}function c(_,m){m.gradientMap&&(_.gradientMap.value=m.gradientMap)}function d(_,m){_.metalness.value=m.metalness,m.metalnessMap&&(_.metalnessMap.value=m.metalnessMap,t(m.metalnessMap,_.metalnessMapTransform)),_.roughness.value=m.roughness,m.roughnessMap&&(_.roughnessMap.value=m.roughnessMap,t(m.roughnessMap,_.roughnessMapTransform)),m.envMap&&(_.envMapIntensity.value=m.envMapIntensity)}function p(_,m,y){_.ior.value=m.ior,m.sheen>0&&(_.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),_.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(_.sheenColorMap.value=m.sheenColorMap,t(m.sheenColorMap,_.sheenColorMapTransform)),m.sheenRoughnessMap&&(_.sheenRoughnessMap.value=m.sheenRoughnessMap,t(m.sheenRoughnessMap,_.sheenRoughnessMapTransform))),m.clearcoat>0&&(_.clearcoat.value=m.clearcoat,_.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(_.clearcoatMap.value=m.clearcoatMap,t(m.clearcoatMap,_.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,t(m.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(_.clearcoatNormalMap.value=m.clearcoatNormalMap,t(m.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===Xn&&_.clearcoatNormalScale.value.negate())),m.dispersion>0&&(_.dispersion.value=m.dispersion),m.iridescence>0&&(_.iridescence.value=m.iridescence,_.iridescenceIOR.value=m.iridescenceIOR,_.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(_.iridescenceMap.value=m.iridescenceMap,t(m.iridescenceMap,_.iridescenceMapTransform)),m.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=m.iridescenceThicknessMap,t(m.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),m.transmission>0&&(_.transmission.value=m.transmission,_.transmissionSamplerMap.value=y.texture,_.transmissionSamplerSize.value.set(y.width,y.height),m.transmissionMap&&(_.transmissionMap.value=m.transmissionMap,t(m.transmissionMap,_.transmissionMapTransform)),_.thickness.value=m.thickness,m.thicknessMap&&(_.thicknessMap.value=m.thicknessMap,t(m.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=m.attenuationDistance,_.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(_.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(_.anisotropyMap.value=m.anisotropyMap,t(m.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=m.specularIntensity,_.specularColor.value.copy(m.specularColor),m.specularColorMap&&(_.specularColorMap.value=m.specularColorMap,t(m.specularColorMap,_.specularColorMapTransform)),m.specularIntensityMap&&(_.specularIntensityMap.value=m.specularIntensityMap,t(m.specularIntensityMap,_.specularIntensityMapTransform))}function g(_,m){m.matcap&&(_.matcap.value=m.matcap)}function v(_,m){const y=e.get(m).light;_.referencePosition.value.setFromMatrixPosition(y.matrixWorld),_.nearDistance.value=y.shadow.camera.near,_.farDistance.value=y.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:s}}function bD(r,e,t,n){let s={},a={},o=[];const l=r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS);function u(y,x){const b=x.program;n.uniformBlockBinding(y,b)}function h(y,x){let b=s[y.id];b===void 0&&(g(y),b=f(y),s[y.id]=b,y.addEventListener("dispose",_));const T=x.program;n.updateUBOMapping(y,T);const E=e.render.frame;a[y.id]!==E&&(d(y),a[y.id]=E)}function f(y){const x=c();y.__bindingPointIndex=x;const b=r.createBuffer(),T=y.__size,E=y.usage;return r.bindBuffer(r.UNIFORM_BUFFER,b),r.bufferData(r.UNIFORM_BUFFER,T,E),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,x,b),b}function c(){for(let y=0;y<l;y++)if(o.indexOf(y)===-1)return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(y){const x=s[y.id],b=y.uniforms,T=y.__cache;r.bindBuffer(r.UNIFORM_BUFFER,x);for(let E=0,M=b.length;E<M;E++){const A=Array.isArray(b[E])?b[E]:[b[E]];for(let S=0,w=A.length;S<w;S++){const C=A[S];if(p(C,E,S,T)===!0){const D=C.__offset,R=Array.isArray(C.value)?C.value:[C.value];let F=0;for(let k=0;k<R.length;k++){const z=R[k],O=v(z);typeof z=="number"||typeof z=="boolean"?(C.__data[0]=z,r.bufferSubData(r.UNIFORM_BUFFER,D+F,C.__data)):z.isMatrix3?(C.__data[0]=z.elements[0],C.__data[1]=z.elements[1],C.__data[2]=z.elements[2],C.__data[3]=0,C.__data[4]=z.elements[3],C.__data[5]=z.elements[4],C.__data[6]=z.elements[5],C.__data[7]=0,C.__data[8]=z.elements[6],C.__data[9]=z.elements[7],C.__data[10]=z.elements[8],C.__data[11]=0):(z.toArray(C.__data,F),F+=O.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,D,C.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function p(y,x,b,T){const E=y.value,M=x+"_"+b;if(T[M]===void 0)return typeof E=="number"||typeof E=="boolean"?T[M]=E:T[M]=E.clone(),!0;{const A=T[M];if(typeof E=="number"||typeof E=="boolean"){if(A!==E)return T[M]=E,!0}else if(A.equals(E)===!1)return A.copy(E),!0}return!1}function g(y){const x=y.uniforms;let b=0;const T=16;for(let M=0,A=x.length;M<A;M++){const S=Array.isArray(x[M])?x[M]:[x[M]];for(let w=0,C=S.length;w<C;w++){const D=S[w],R=Array.isArray(D.value)?D.value:[D.value];for(let F=0,k=R.length;F<k;F++){const z=R[F],O=v(z),I=b%T;I!==0&&T-I<O.boundary&&(b+=T-I),D.__data=new Float32Array(O.storage/Float32Array.BYTES_PER_ELEMENT),D.__offset=b,b+=O.storage}}}const E=b%T;return E>0&&(b+=T-E),y.__size=b,y.__cache={},this}function v(y){const x={boundary:0,storage:0};return typeof y=="number"||typeof y=="boolean"?(x.boundary=4,x.storage=4):y.isVector2?(x.boundary=8,x.storage=8):y.isVector3||y.isColor?(x.boundary=16,x.storage=12):y.isVector4?(x.boundary=16,x.storage=16):y.isMatrix3?(x.boundary=48,x.storage=48):y.isMatrix4?(x.boundary=64,x.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),x}function _(y){const x=y.target;x.removeEventListener("dispose",_);const b=o.indexOf(x.__bindingPointIndex);o.splice(b,1),r.deleteBuffer(s[x.id]),delete s[x.id],delete a[x.id]}function m(){for(const y in s)r.deleteBuffer(s[y]);o=[],s={},a={}}return{bind:u,update:h,dispose:m}}class SD{constructor(e={}){const{canvas:t=fT(),context:n=null,depth:s=!0,stencil:a=!1,alpha:o=!1,antialias:l=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:h=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:c=!1}=e;this.isWebGLRenderer=!0;let d;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");d=n.getContextAttributes().alpha}else d=o;const p=new Uint32Array(4),g=new Int32Array(4);let v=null,_=null;const m=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ti,this.toneMapping=Wr,this.toneMappingExposure=1;const x=this;let b=!1,T=0,E=0,M=null,A=-1,S=null;const w=new mn,C=new mn;let D=null;const R=new Mt(0);let F=0,k=t.width,z=t.height,O=1,I=null,j=null;const N=new mn(0,0,k,z),q=new mn(0,0,k,z);let ne=!1;const W=new $0;let H=!1,G=!1;const ee=new Zt,te=new ie,pe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let me=!1;function _e(){return M===null?O:1}let V=n;function ke(L,X){return t.getContext(L,X)}try{const L={alpha:!0,depth:s,stencil:a,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:h,powerPreference:f,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${tf}`),t.addEventListener("webglcontextlost",ce,!1),t.addEventListener("webglcontextrestored",re,!1),t.addEventListener("webglcontextcreationerror",se,!1),V===null){const X="webgl2";if(V=ke(X,L),V===null)throw ke(X)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(L){throw console.error("THREE.WebGLRenderer: "+L.message),L}let Ee,Xe,Ae,He,K,Ne,dt,B,P,Q,oe,le,ae,Fe,de,ve,We,he,Le,Be,qe,ye,Ze,Qe;function _t(){Ee=new PA(V),Ee.init(),ye=new hD(V,Ee),Xe=new wA(V,Ee,e,ye),Ae=new uD(V),He=new IA(V),K=new KC,Ne=new dD(V,Ee,Ae,K,Xe,ye,He),dt=new TA(x),B=new DA(x),P=new BT(V),Ze=new bA(V,P),Q=new RA(V,P,He,Ze),oe=new OA(V,Q,P,He),Le=new FA(V,Xe,Ne),ve=new EA(K),le=new jC(x,dt,B,Ee,Xe,Ze,ve),ae=new xD(x,K),Fe=new JC,de=new rD(Ee),he=new xA(x,dt,B,Ae,oe,d,u),We=new cD(x,oe,Xe),Qe=new bD(V,He,Xe,Ae),Be=new SA(V,Ee,He),qe=new LA(V,Ee,He),He.programs=le.programs,x.capabilities=Xe,x.extensions=Ee,x.properties=K,x.renderLists=Fe,x.shadowMap=We,x.state=Ae,x.info=He}_t();const $=new vD(x,V);this.xr=$,this.getContext=function(){return V},this.getContextAttributes=function(){return V.getContextAttributes()},this.forceContextLoss=function(){const L=Ee.get("WEBGL_lose_context");L&&L.loseContext()},this.forceContextRestore=function(){const L=Ee.get("WEBGL_lose_context");L&&L.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(L){L!==void 0&&(O=L,this.setSize(k,z,!1))},this.getSize=function(L){return L.set(k,z)},this.setSize=function(L,X,Z=!0){if($.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}k=L,z=X,t.width=Math.floor(L*O),t.height=Math.floor(X*O),Z===!0&&(t.style.width=L+"px",t.style.height=X+"px"),this.setViewport(0,0,L,X)},this.getDrawingBufferSize=function(L){return L.set(k*O,z*O).floor()},this.setDrawingBufferSize=function(L,X,Z){k=L,z=X,O=Z,t.width=Math.floor(L*Z),t.height=Math.floor(X*Z),this.setViewport(0,0,L,X)},this.getCurrentViewport=function(L){return L.copy(w)},this.getViewport=function(L){return L.copy(N)},this.setViewport=function(L,X,Z,J){L.isVector4?N.set(L.x,L.y,L.z,L.w):N.set(L,X,Z,J),Ae.viewport(w.copy(N).multiplyScalar(O).round())},this.getScissor=function(L){return L.copy(q)},this.setScissor=function(L,X,Z,J){L.isVector4?q.set(L.x,L.y,L.z,L.w):q.set(L,X,Z,J),Ae.scissor(C.copy(q).multiplyScalar(O).round())},this.getScissorTest=function(){return ne},this.setScissorTest=function(L){Ae.setScissorTest(ne=L)},this.setOpaqueSort=function(L){I=L},this.setTransparentSort=function(L){j=L},this.getClearColor=function(L){return L.copy(he.getClearColor())},this.setClearColor=function(){he.setClearColor.apply(he,arguments)},this.getClearAlpha=function(){return he.getClearAlpha()},this.setClearAlpha=function(){he.setClearAlpha.apply(he,arguments)},this.clear=function(L=!0,X=!0,Z=!0){let J=0;if(L){let Y=!1;if(M!==null){const ue=M.texture.format;Y=ue===L0||ue===R0||ue===P0}if(Y){const ue=M.texture.type,ge=ue===Kr||ue===Xa||ue===Hc||ue===qa||ue===C0||ue===D0,Me=he.getClearColor(),Re=he.getClearAlpha(),Pe=Me.r,Ce=Me.g,Ie=Me.b;ge?(p[0]=Pe,p[1]=Ce,p[2]=Ie,p[3]=Re,V.clearBufferuiv(V.COLOR,0,p)):(g[0]=Pe,g[1]=Ce,g[2]=Ie,g[3]=Re,V.clearBufferiv(V.COLOR,0,g))}else J|=V.COLOR_BUFFER_BIT}X&&(J|=V.DEPTH_BUFFER_BIT),Z&&(J|=V.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),V.clear(J)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ce,!1),t.removeEventListener("webglcontextrestored",re,!1),t.removeEventListener("webglcontextcreationerror",se,!1),Fe.dispose(),de.dispose(),K.dispose(),dt.dispose(),B.dispose(),oe.dispose(),Ze.dispose(),Qe.dispose(),le.dispose(),$.dispose(),$.removeEventListener("sessionstart",Ge),$.removeEventListener("sessionend",Oe),rt.stop()};function ce(L){L.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function re(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const L=He.autoReset,X=We.enabled,Z=We.autoUpdate,J=We.needsUpdate,Y=We.type;_t(),He.autoReset=L,We.enabled=X,We.autoUpdate=Z,We.needsUpdate=J,We.type=Y}function se(L){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",L.statusMessage)}function fe(L){const X=L.target;X.removeEventListener("dispose",fe),ze(X)}function ze(L){it(L),K.remove(L)}function it(L){const X=K.get(L).programs;X!==void 0&&(X.forEach(function(Z){le.releaseProgram(Z)}),L.isShaderMaterial&&le.releaseShaderCache(L))}this.renderBufferDirect=function(L,X,Z,J,Y,ue){X===null&&(X=pe);const ge=Y.isMesh&&Y.matrixWorld.determinant()<0,Me=Ft(L,X,Z,J,Y);Ae.setMaterial(J,ge);let Re=Z.index,Pe=1;if(J.wireframe===!0){if(Re=Q.getWireframeAttribute(Z),Re===void 0)return;Pe=2}const Ce=Z.drawRange,Ie=Z.attributes.position;let ft=Ce.start*Pe,Pt=(Ce.start+Ce.count)*Pe;ue!==null&&(ft=Math.max(ft,ue.start*Pe),Pt=Math.min(Pt,(ue.start+ue.count)*Pe)),Re!==null?(ft=Math.max(ft,0),Pt=Math.min(Pt,Re.count)):Ie!=null&&(ft=Math.max(ft,0),Pt=Math.min(Pt,Ie.count));const wt=Pt-ft;if(wt<0||wt===1/0)return;Ze.setup(Y,J,Me,Z,Re);let Ot,lt=Be;if(Re!==null&&(Ot=P.get(Re),lt=qe,lt.setIndex(Ot)),Y.isMesh)J.wireframe===!0?(Ae.setLineWidth(J.wireframeLinewidth*_e()),lt.setMode(V.LINES)):lt.setMode(V.TRIANGLES);else if(Y.isLine){let Ue=J.linewidth;Ue===void 0&&(Ue=1),Ae.setLineWidth(Ue*_e()),Y.isLineSegments?lt.setMode(V.LINES):Y.isLineLoop?lt.setMode(V.LINE_LOOP):lt.setMode(V.LINE_STRIP)}else Y.isPoints?lt.setMode(V.POINTS):Y.isSprite&&lt.setMode(V.TRIANGLES);if(Y.isBatchedMesh)Y._multiDrawInstances!==null?lt.renderMultiDrawInstances(Y._multiDrawStarts,Y._multiDrawCounts,Y._multiDrawCount,Y._multiDrawInstances):lt.renderMultiDraw(Y._multiDrawStarts,Y._multiDrawCounts,Y._multiDrawCount);else if(Y.isInstancedMesh)lt.renderInstances(ft,wt,Y.count);else if(Z.isInstancedBufferGeometry){const Ue=Z._maxInstanceCount!==void 0?Z._maxInstanceCount:1/0,Gt=Math.min(Z.instanceCount,Ue);lt.renderInstances(ft,wt,Gt)}else lt.render(ft,wt)};function bt(L,X,Z){L.transparent===!0&&L.side===Ni&&L.forceSinglePass===!1?(L.side=Xn,L.needsUpdate=!0,et(L,X,Z),L.side=jr,L.needsUpdate=!0,et(L,X,Z),L.side=Ni):et(L,X,Z)}this.compile=function(L,X,Z=null){Z===null&&(Z=L),_=de.get(Z),_.init(X),y.push(_),Z.traverseVisible(function(Y){Y.isLight&&Y.layers.test(X.layers)&&(_.pushLight(Y),Y.castShadow&&_.pushShadow(Y))}),L!==Z&&L.traverseVisible(function(Y){Y.isLight&&Y.layers.test(X.layers)&&(_.pushLight(Y),Y.castShadow&&_.pushShadow(Y))}),_.setupLights();const J=new Set;return L.traverse(function(Y){const ue=Y.material;if(ue)if(Array.isArray(ue))for(let ge=0;ge<ue.length;ge++){const Me=ue[ge];bt(Me,Z,Y),J.add(Me)}else bt(ue,Z,Y),J.add(ue)}),y.pop(),_=null,J},this.compileAsync=function(L,X,Z=null){const J=this.compile(L,X,Z);return new Promise(Y=>{function ue(){if(J.forEach(function(ge){K.get(ge).currentProgram.isReady()&&J.delete(ge)}),J.size===0){Y(L);return}setTimeout(ue,10)}Ee.get("KHR_parallel_shader_compile")!==null?ue():setTimeout(ue,10)})};let St=null;function ht(L){St&&St(L)}function Ge(){rt.stop()}function Oe(){rt.start()}const rt=new X0;rt.setAnimationLoop(ht),typeof self<"u"&&rt.setContext(self),this.setAnimationLoop=function(L){St=L,$.setAnimationLoop(L),L===null?rt.stop():rt.start()},$.addEventListener("sessionstart",Ge),$.addEventListener("sessionend",Oe),this.render=function(L,X){if(X!==void 0&&X.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(b===!0)return;if(L.matrixWorldAutoUpdate===!0&&L.updateMatrixWorld(),X.parent===null&&X.matrixWorldAutoUpdate===!0&&X.updateMatrixWorld(),$.enabled===!0&&$.isPresenting===!0&&($.cameraAutoUpdate===!0&&$.updateCamera(X),X=$.getCamera()),L.isScene===!0&&L.onBeforeRender(x,L,X,M),_=de.get(L,y.length),_.init(X),y.push(_),ee.multiplyMatrices(X.projectionMatrix,X.matrixWorldInverse),W.setFromProjectionMatrix(ee),G=this.localClippingEnabled,H=ve.init(this.clippingPlanes,G),v=Fe.get(L,m.length),v.init(),m.push(v),$.enabled===!0&&$.isPresenting===!0){const ue=x.xr.getDepthSensingMesh();ue!==null&&xe(ue,X,-1/0,x.sortObjects)}xe(L,X,0,x.sortObjects),v.finish(),x.sortObjects===!0&&v.sort(I,j),me=$.enabled===!1||$.isPresenting===!1||$.hasDepthSensing()===!1,me&&he.addToRenderList(v,L),this.info.render.frame++,H===!0&&ve.beginShadows();const Z=_.state.shadowsArray;We.render(Z,L,X),H===!0&&ve.endShadows(),this.info.autoReset===!0&&this.info.reset();const J=v.opaque,Y=v.transmissive;if(_.setupLights(),X.isArrayCamera){const ue=X.cameras;if(Y.length>0)for(let ge=0,Me=ue.length;ge<Me;ge++){const Re=ue[ge];Ve(J,Y,L,Re)}me&&he.render(L);for(let ge=0,Me=ue.length;ge<Me;ge++){const Re=ue[ge];Je(v,L,Re,Re.viewport)}}else Y.length>0&&Ve(J,Y,L,X),me&&he.render(L),Je(v,L,X);M!==null&&(Ne.updateMultisampleRenderTarget(M),Ne.updateRenderTargetMipmap(M)),L.isScene===!0&&L.onAfterRender(x,L,X),Ze.resetDefaultState(),A=-1,S=null,y.pop(),y.length>0?(_=y[y.length-1],H===!0&&ve.setGlobalState(x.clippingPlanes,_.state.camera)):_=null,m.pop(),m.length>0?v=m[m.length-1]:v=null};function xe(L,X,Z,J){if(L.visible===!1)return;if(L.layers.test(X.layers)){if(L.isGroup)Z=L.renderOrder;else if(L.isLOD)L.autoUpdate===!0&&L.update(X);else if(L.isLight)_.pushLight(L),L.castShadow&&_.pushShadow(L);else if(L.isSprite){if(!L.frustumCulled||W.intersectsSprite(L)){J&&te.setFromMatrixPosition(L.matrixWorld).applyMatrix4(ee);const ge=oe.update(L),Me=L.material;Me.visible&&v.push(L,ge,Me,Z,te.z,null)}}else if((L.isMesh||L.isLine||L.isPoints)&&(!L.frustumCulled||W.intersectsObject(L))){const ge=oe.update(L),Me=L.material;if(J&&(L.boundingSphere!==void 0?(L.boundingSphere===null&&L.computeBoundingSphere(),te.copy(L.boundingSphere.center)):(ge.boundingSphere===null&&ge.computeBoundingSphere(),te.copy(ge.boundingSphere.center)),te.applyMatrix4(L.matrixWorld).applyMatrix4(ee)),Array.isArray(Me)){const Re=ge.groups;for(let Pe=0,Ce=Re.length;Pe<Ce;Pe++){const Ie=Re[Pe],ft=Me[Ie.materialIndex];ft&&ft.visible&&v.push(L,ge,ft,Z,te.z,Ie)}}else Me.visible&&v.push(L,ge,Me,Z,te.z,null)}}const ue=L.children;for(let ge=0,Me=ue.length;ge<Me;ge++)xe(ue[ge],X,Z,J)}function Je(L,X,Z,J){const Y=L.opaque,ue=L.transmissive,ge=L.transparent;_.setupLightsView(Z),H===!0&&ve.setGlobalState(x.clippingPlanes,Z),J&&Ae.viewport(w.copy(J)),Y.length>0&&je(Y,X,Z),ue.length>0&&je(ue,X,Z),ge.length>0&&je(ge,X,Z),Ae.buffers.depth.setTest(!0),Ae.buffers.depth.setMask(!0),Ae.buffers.color.setMask(!0),Ae.setPolygonOffset(!1)}function Ve(L,X,Z,J){if((Z.isScene===!0?Z.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[J.id]===void 0&&(_.state.transmissionRenderTarget[J.id]=new Xs(1,1,{generateMipmaps:!0,type:Ee.has("EXT_color_buffer_half_float")||Ee.has("EXT_color_buffer_float")?ru:Kr,minFilter:Ds,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:xt.workingColorSpace}));const ue=_.state.transmissionRenderTarget[J.id],ge=J.viewport||w;ue.setSize(ge.z,ge.w);const Me=x.getRenderTarget();x.setRenderTarget(ue),x.getClearColor(R),F=x.getClearAlpha(),F<1&&x.setClearColor(16777215,.5),me?he.render(Z):x.clear();const Re=x.toneMapping;x.toneMapping=Wr;const Pe=J.viewport;if(J.viewport!==void 0&&(J.viewport=void 0),_.setupLightsView(J),H===!0&&ve.setGlobalState(x.clippingPlanes,J),je(L,Z,J),Ne.updateMultisampleRenderTarget(ue),Ne.updateRenderTargetMipmap(ue),Ee.has("WEBGL_multisampled_render_to_texture")===!1){let Ce=!1;for(let Ie=0,ft=X.length;Ie<ft;Ie++){const Pt=X[Ie],wt=Pt.object,Ot=Pt.geometry,lt=Pt.material,Ue=Pt.group;if(lt.side===Ni&&wt.layers.test(J.layers)){const Gt=lt.side;lt.side=Xn,lt.needsUpdate=!0,Vt(wt,Z,J,Ot,lt,Ue),lt.side=Gt,lt.needsUpdate=!0,Ce=!0}}Ce===!0&&(Ne.updateMultisampleRenderTarget(ue),Ne.updateRenderTargetMipmap(ue))}x.setRenderTarget(Me),x.setClearColor(R,F),Pe!==void 0&&(J.viewport=Pe),x.toneMapping=Re}function je(L,X,Z){const J=X.isScene===!0?X.overrideMaterial:null;for(let Y=0,ue=L.length;Y<ue;Y++){const ge=L[Y],Me=ge.object,Re=ge.geometry,Pe=J===null?ge.material:J,Ce=ge.group;Me.layers.test(Z.layers)&&Vt(Me,X,Z,Re,Pe,Ce)}}function Vt(L,X,Z,J,Y,ue){L.onBeforeRender(x,X,Z,J,Y,ue),L.modelViewMatrix.multiplyMatrices(Z.matrixWorldInverse,L.matrixWorld),L.normalMatrix.getNormalMatrix(L.modelViewMatrix),Y.onBeforeRender(x,X,Z,J,L,ue),Y.transparent===!0&&Y.side===Ni&&Y.forceSinglePass===!1?(Y.side=Xn,Y.needsUpdate=!0,x.renderBufferDirect(Z,X,J,Y,L,ue),Y.side=jr,Y.needsUpdate=!0,x.renderBufferDirect(Z,X,J,Y,L,ue),Y.side=Ni):x.renderBufferDirect(Z,X,J,Y,L,ue),L.onAfterRender(x,X,Z,J,Y,ue)}function et(L,X,Z){X.isScene!==!0&&(X=pe);const J=K.get(L),Y=_.state.lights,ue=_.state.shadowsArray,ge=Y.state.version,Me=le.getParameters(L,Y.state,ue,X,Z),Re=le.getProgramCacheKey(Me);let Pe=J.programs;J.environment=L.isMeshStandardMaterial?X.environment:null,J.fog=X.fog,J.envMap=(L.isMeshStandardMaterial?B:dt).get(L.envMap||J.environment),J.envMapRotation=J.environment!==null&&L.envMap===null?X.environmentRotation:L.envMapRotation,Pe===void 0&&(L.addEventListener("dispose",fe),Pe=new Map,J.programs=Pe);let Ce=Pe.get(Re);if(Ce!==void 0){if(J.currentProgram===Ce&&J.lightsStateVersion===ge)return Jt(L,Me),Ce}else Me.uniforms=le.getUniforms(L),L.onBuild(Z,Me,x),L.onBeforeCompile(Me,x),Ce=le.acquireProgram(Me,Re),Pe.set(Re,Ce),J.uniforms=Me.uniforms;const Ie=J.uniforms;return(!L.isShaderMaterial&&!L.isRawShaderMaterial||L.clipping===!0)&&(Ie.clippingPlanes=ve.uniform),Jt(L,Me),J.needsLights=yt(L),J.lightsStateVersion=ge,J.needsLights&&(Ie.ambientLightColor.value=Y.state.ambient,Ie.lightProbe.value=Y.state.probe,Ie.directionalLights.value=Y.state.directional,Ie.directionalLightShadows.value=Y.state.directionalShadow,Ie.spotLights.value=Y.state.spot,Ie.spotLightShadows.value=Y.state.spotShadow,Ie.rectAreaLights.value=Y.state.rectArea,Ie.ltc_1.value=Y.state.rectAreaLTC1,Ie.ltc_2.value=Y.state.rectAreaLTC2,Ie.pointLights.value=Y.state.point,Ie.pointLightShadows.value=Y.state.pointShadow,Ie.hemisphereLights.value=Y.state.hemi,Ie.directionalShadowMap.value=Y.state.directionalShadowMap,Ie.directionalShadowMatrix.value=Y.state.directionalShadowMatrix,Ie.spotShadowMap.value=Y.state.spotShadowMap,Ie.spotLightMatrix.value=Y.state.spotLightMatrix,Ie.spotLightMap.value=Y.state.spotLightMap,Ie.pointShadowMap.value=Y.state.pointShadowMap,Ie.pointShadowMatrix.value=Y.state.pointShadowMatrix),J.currentProgram=Ce,J.uniformsList=null,Ce}function It(L){if(L.uniformsList===null){const X=L.currentProgram.getUniforms();L.uniformsList=xc.seqWithValue(X.seq,L.uniforms)}return L.uniformsList}function Jt(L,X){const Z=K.get(L);Z.outputColorSpace=X.outputColorSpace,Z.batching=X.batching,Z.batchingColor=X.batchingColor,Z.instancing=X.instancing,Z.instancingColor=X.instancingColor,Z.instancingMorph=X.instancingMorph,Z.skinning=X.skinning,Z.morphTargets=X.morphTargets,Z.morphNormals=X.morphNormals,Z.morphColors=X.morphColors,Z.morphTargetsCount=X.morphTargetsCount,Z.numClippingPlanes=X.numClippingPlanes,Z.numIntersection=X.numClipIntersection,Z.vertexAlphas=X.vertexAlphas,Z.vertexTangents=X.vertexTangents,Z.toneMapping=X.toneMapping}function Ft(L,X,Z,J,Y){X.isScene!==!0&&(X=pe),Ne.resetTextureUnits();const ue=X.fog,ge=J.isMeshStandardMaterial?X.environment:null,Me=M===null?x.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:Qr,Re=(J.isMeshStandardMaterial?B:dt).get(J.envMap||ge),Pe=J.vertexColors===!0&&!!Z.attributes.color&&Z.attributes.color.itemSize===4,Ce=!!Z.attributes.tangent&&(!!J.normalMap||J.anisotropy>0),Ie=!!Z.morphAttributes.position,ft=!!Z.morphAttributes.normal,Pt=!!Z.morphAttributes.color;let wt=Wr;J.toneMapped&&(M===null||M.isXRRenderTarget===!0)&&(wt=x.toneMapping);const Ot=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,lt=Ot!==void 0?Ot.length:0,Ue=K.get(J),Gt=_.state.lights;if(H===!0&&(G===!0||L!==S)){const li=L===S&&J.id===A;ve.setState(J,L,li)}let Et=!1;J.version===Ue.__version?(Ue.needsLights&&Ue.lightsStateVersion!==Gt.state.version||Ue.outputColorSpace!==Me||Y.isBatchedMesh&&Ue.batching===!1||!Y.isBatchedMesh&&Ue.batching===!0||Y.isBatchedMesh&&Ue.batchingColor===!0&&Y.colorTexture===null||Y.isBatchedMesh&&Ue.batchingColor===!1&&Y.colorTexture!==null||Y.isInstancedMesh&&Ue.instancing===!1||!Y.isInstancedMesh&&Ue.instancing===!0||Y.isSkinnedMesh&&Ue.skinning===!1||!Y.isSkinnedMesh&&Ue.skinning===!0||Y.isInstancedMesh&&Ue.instancingColor===!0&&Y.instanceColor===null||Y.isInstancedMesh&&Ue.instancingColor===!1&&Y.instanceColor!==null||Y.isInstancedMesh&&Ue.instancingMorph===!0&&Y.morphTexture===null||Y.isInstancedMesh&&Ue.instancingMorph===!1&&Y.morphTexture!==null||Ue.envMap!==Re||J.fog===!0&&Ue.fog!==ue||Ue.numClippingPlanes!==void 0&&(Ue.numClippingPlanes!==ve.numPlanes||Ue.numIntersection!==ve.numIntersection)||Ue.vertexAlphas!==Pe||Ue.vertexTangents!==Ce||Ue.morphTargets!==Ie||Ue.morphNormals!==ft||Ue.morphColors!==Pt||Ue.toneMapping!==wt||Ue.morphTargetsCount!==lt)&&(Et=!0):(Et=!0,Ue.__version=J.version);let qi=Ue.currentProgram;Et===!0&&(qi=et(J,X,Y));let yl=!1,es=!1,lu=!1;const sn=qi.getUniforms(),_r=Ue.uniforms;if(Ae.useProgram(qi.program)&&(yl=!0,es=!0,lu=!0),J.id!==A&&(A=J.id,es=!0),yl||S!==L){sn.setValue(V,"projectionMatrix",L.projectionMatrix),sn.setValue(V,"viewMatrix",L.matrixWorldInverse);const li=sn.map.cameraPosition;li!==void 0&&li.setValue(V,te.setFromMatrixPosition(L.matrixWorld)),Xe.logarithmicDepthBuffer&&sn.setValue(V,"logDepthBufFC",2/(Math.log(L.far+1)/Math.LN2)),(J.isMeshPhongMaterial||J.isMeshToonMaterial||J.isMeshLambertMaterial||J.isMeshBasicMaterial||J.isMeshStandardMaterial||J.isShaderMaterial)&&sn.setValue(V,"isOrthographic",L.isOrthographicCamera===!0),S!==L&&(S=L,es=!0,lu=!0)}if(Y.isSkinnedMesh){sn.setOptional(V,Y,"bindMatrix"),sn.setOptional(V,Y,"bindMatrixInverse");const li=Y.skeleton;li&&(li.boneTexture===null&&li.computeBoneTexture(),sn.setValue(V,"boneTexture",li.boneTexture,Ne))}Y.isBatchedMesh&&(sn.setOptional(V,Y,"batchingTexture"),sn.setValue(V,"batchingTexture",Y._matricesTexture,Ne),sn.setOptional(V,Y,"batchingColorTexture"),Y._colorsTexture!==null&&sn.setValue(V,"batchingColorTexture",Y._colorsTexture,Ne));const cu=Z.morphAttributes;if((cu.position!==void 0||cu.normal!==void 0||cu.color!==void 0)&&Le.update(Y,Z,qi),(es||Ue.receiveShadow!==Y.receiveShadow)&&(Ue.receiveShadow=Y.receiveShadow,sn.setValue(V,"receiveShadow",Y.receiveShadow)),J.isMeshGouraudMaterial&&J.envMap!==null&&(_r.envMap.value=Re,_r.flipEnvMap.value=Re.isCubeTexture&&Re.isRenderTargetTexture===!1?-1:1),J.isMeshStandardMaterial&&J.envMap===null&&X.environment!==null&&(_r.envMapIntensity.value=X.environmentIntensity),es&&(sn.setValue(V,"toneMappingExposure",x.toneMappingExposure),Ue.needsLights&&Ct(_r,lu),ue&&J.fog===!0&&ae.refreshFogUniforms(_r,ue),ae.refreshMaterialUniforms(_r,J,O,z,_.state.transmissionRenderTarget[L.id]),xc.upload(V,It(Ue),_r,Ne)),J.isShaderMaterial&&J.uniformsNeedUpdate===!0&&(xc.upload(V,It(Ue),_r,Ne),J.uniformsNeedUpdate=!1),J.isSpriteMaterial&&sn.setValue(V,"center",Y.center),sn.setValue(V,"modelViewMatrix",Y.modelViewMatrix),sn.setValue(V,"normalMatrix",Y.normalMatrix),sn.setValue(V,"modelMatrix",Y.matrixWorld),J.isShaderMaterial||J.isRawShaderMaterial){const li=J.uniformsGroups;for(let uu=0,cv=li.length;uu<cv;uu++){const cf=li[uu];Qe.update(cf,qi),Qe.bind(cf,qi)}}return qi}function Ct(L,X){L.ambientLightColor.needsUpdate=X,L.lightProbe.needsUpdate=X,L.directionalLights.needsUpdate=X,L.directionalLightShadows.needsUpdate=X,L.pointLights.needsUpdate=X,L.pointLightShadows.needsUpdate=X,L.spotLights.needsUpdate=X,L.spotLightShadows.needsUpdate=X,L.rectAreaLights.needsUpdate=X,L.hemisphereLights.needsUpdate=X}function yt(L){return L.isMeshLambertMaterial||L.isMeshToonMaterial||L.isMeshPhongMaterial||L.isMeshStandardMaterial||L.isShadowMaterial||L.isShaderMaterial&&L.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(L,X,Z){K.get(L.texture).__webglTexture=X,K.get(L.depthTexture).__webglTexture=Z;const J=K.get(L);J.__hasExternalTextures=!0,J.__autoAllocateDepthBuffer=Z===void 0,J.__autoAllocateDepthBuffer||Ee.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),J.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(L,X){const Z=K.get(L);Z.__webglFramebuffer=X,Z.__useDefaultFramebuffer=X===void 0},this.setRenderTarget=function(L,X=0,Z=0){M=L,T=X,E=Z;let J=!0,Y=null,ue=!1,ge=!1;if(L){const Re=K.get(L);Re.__useDefaultFramebuffer!==void 0?(Ae.bindFramebuffer(V.FRAMEBUFFER,null),J=!1):Re.__webglFramebuffer===void 0?Ne.setupRenderTarget(L):Re.__hasExternalTextures&&Ne.rebindTextures(L,K.get(L.texture).__webglTexture,K.get(L.depthTexture).__webglTexture);const Pe=L.texture;(Pe.isData3DTexture||Pe.isDataArrayTexture||Pe.isCompressedArrayTexture)&&(ge=!0);const Ce=K.get(L).__webglFramebuffer;L.isWebGLCubeRenderTarget?(Array.isArray(Ce[X])?Y=Ce[X][Z]:Y=Ce[X],ue=!0):L.samples>0&&Ne.useMultisampledRTT(L)===!1?Y=K.get(L).__webglMultisampledFramebuffer:Array.isArray(Ce)?Y=Ce[Z]:Y=Ce,w.copy(L.viewport),C.copy(L.scissor),D=L.scissorTest}else w.copy(N).multiplyScalar(O).floor(),C.copy(q).multiplyScalar(O).floor(),D=ne;if(Ae.bindFramebuffer(V.FRAMEBUFFER,Y)&&J&&Ae.drawBuffers(L,Y),Ae.viewport(w),Ae.scissor(C),Ae.setScissorTest(D),ue){const Re=K.get(L.texture);V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_CUBE_MAP_POSITIVE_X+X,Re.__webglTexture,Z)}else if(ge){const Re=K.get(L.texture),Pe=X||0;V.framebufferTextureLayer(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,Re.__webglTexture,Z||0,Pe)}A=-1},this.readRenderTargetPixels=function(L,X,Z,J,Y,ue,ge){if(!(L&&L.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Me=K.get(L).__webglFramebuffer;if(L.isWebGLCubeRenderTarget&&ge!==void 0&&(Me=Me[ge]),Me){Ae.bindFramebuffer(V.FRAMEBUFFER,Me);try{const Re=L.texture,Pe=Re.format,Ce=Re.type;if(!Xe.textureFormatReadable(Pe)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Xe.textureTypeReadable(Ce)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}X>=0&&X<=L.width-J&&Z>=0&&Z<=L.height-Y&&V.readPixels(X,Z,J,Y,ye.convert(Pe),ye.convert(Ce),ue)}finally{const Re=M!==null?K.get(M).__webglFramebuffer:null;Ae.bindFramebuffer(V.FRAMEBUFFER,Re)}}},this.readRenderTargetPixelsAsync=async function(L,X,Z,J,Y,ue,ge){if(!(L&&L.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Me=K.get(L).__webglFramebuffer;if(L.isWebGLCubeRenderTarget&&ge!==void 0&&(Me=Me[ge]),Me){Ae.bindFramebuffer(V.FRAMEBUFFER,Me);try{const Re=L.texture,Pe=Re.format,Ce=Re.type;if(!Xe.textureFormatReadable(Pe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Xe.textureTypeReadable(Ce))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(X>=0&&X<=L.width-J&&Z>=0&&Z<=L.height-Y){const Ie=V.createBuffer();V.bindBuffer(V.PIXEL_PACK_BUFFER,Ie),V.bufferData(V.PIXEL_PACK_BUFFER,ue.byteLength,V.STREAM_READ),V.readPixels(X,Z,J,Y,ye.convert(Pe),ye.convert(Ce),0),V.flush();const ft=V.fenceSync(V.SYNC_GPU_COMMANDS_COMPLETE,0);await pT(V,ft,4);try{V.bindBuffer(V.PIXEL_PACK_BUFFER,Ie),V.getBufferSubData(V.PIXEL_PACK_BUFFER,0,ue)}finally{V.deleteBuffer(Ie),V.deleteSync(ft)}return ue}}finally{const Re=M!==null?K.get(M).__webglFramebuffer:null;Ae.bindFramebuffer(V.FRAMEBUFFER,Re)}}},this.copyFramebufferToTexture=function(L,X=null,Z=0){L.isTexture!==!0&&(console.warn("WebGLRenderer: copyFramebufferToTexture function signature has changed."),X=arguments[0]||null,L=arguments[1]);const J=Math.pow(2,-Z),Y=Math.floor(L.image.width*J),ue=Math.floor(L.image.height*J),ge=X!==null?X.x:0,Me=X!==null?X.y:0;Ne.setTexture2D(L,0),V.copyTexSubImage2D(V.TEXTURE_2D,Z,0,0,ge,Me,Y,ue),Ae.unbindTexture()},this.copyTextureToTexture=function(L,X,Z=null,J=null,Y=0){L.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture function signature has changed."),J=arguments[0]||null,L=arguments[1],X=arguments[2],Y=arguments[3]||0,Z=null);let ue,ge,Me,Re,Pe,Ce;Z!==null?(ue=Z.max.x-Z.min.x,ge=Z.max.y-Z.min.y,Me=Z.min.x,Re=Z.min.y):(ue=L.image.width,ge=L.image.height,Me=0,Re=0),J!==null?(Pe=J.x,Ce=J.y):(Pe=0,Ce=0);const Ie=ye.convert(X.format),ft=ye.convert(X.type);Ne.setTexture2D(X,0),V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,X.flipY),V.pixelStorei(V.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),V.pixelStorei(V.UNPACK_ALIGNMENT,X.unpackAlignment);const Pt=V.getParameter(V.UNPACK_ROW_LENGTH),wt=V.getParameter(V.UNPACK_IMAGE_HEIGHT),Ot=V.getParameter(V.UNPACK_SKIP_PIXELS),lt=V.getParameter(V.UNPACK_SKIP_ROWS),Ue=V.getParameter(V.UNPACK_SKIP_IMAGES),Gt=L.isCompressedTexture?L.mipmaps[Y]:L.image;V.pixelStorei(V.UNPACK_ROW_LENGTH,Gt.width),V.pixelStorei(V.UNPACK_IMAGE_HEIGHT,Gt.height),V.pixelStorei(V.UNPACK_SKIP_PIXELS,Me),V.pixelStorei(V.UNPACK_SKIP_ROWS,Re),L.isDataTexture?V.texSubImage2D(V.TEXTURE_2D,Y,Pe,Ce,ue,ge,Ie,ft,Gt.data):L.isCompressedTexture?V.compressedTexSubImage2D(V.TEXTURE_2D,Y,Pe,Ce,Gt.width,Gt.height,Ie,Gt.data):V.texSubImage2D(V.TEXTURE_2D,Y,Pe,Ce,Ie,ft,Gt),V.pixelStorei(V.UNPACK_ROW_LENGTH,Pt),V.pixelStorei(V.UNPACK_IMAGE_HEIGHT,wt),V.pixelStorei(V.UNPACK_SKIP_PIXELS,Ot),V.pixelStorei(V.UNPACK_SKIP_ROWS,lt),V.pixelStorei(V.UNPACK_SKIP_IMAGES,Ue),Y===0&&X.generateMipmaps&&V.generateMipmap(V.TEXTURE_2D),Ae.unbindTexture()},this.copyTextureToTexture3D=function(L,X,Z=null,J=null,Y=0){L.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Z=arguments[0]||null,J=arguments[1]||null,L=arguments[2],X=arguments[3],Y=arguments[4]||0);let ue,ge,Me,Re,Pe,Ce,Ie,ft,Pt;const wt=L.isCompressedTexture?L.mipmaps[Y]:L.image;Z!==null?(ue=Z.max.x-Z.min.x,ge=Z.max.y-Z.min.y,Me=Z.max.z-Z.min.z,Re=Z.min.x,Pe=Z.min.y,Ce=Z.min.z):(ue=wt.width,ge=wt.height,Me=wt.depth,Re=0,Pe=0,Ce=0),J!==null?(Ie=J.x,ft=J.y,Pt=J.z):(Ie=0,ft=0,Pt=0);const Ot=ye.convert(X.format),lt=ye.convert(X.type);let Ue;if(X.isData3DTexture)Ne.setTexture3D(X,0),Ue=V.TEXTURE_3D;else if(X.isDataArrayTexture||X.isCompressedArrayTexture)Ne.setTexture2DArray(X,0),Ue=V.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,X.flipY),V.pixelStorei(V.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),V.pixelStorei(V.UNPACK_ALIGNMENT,X.unpackAlignment);const Gt=V.getParameter(V.UNPACK_ROW_LENGTH),Et=V.getParameter(V.UNPACK_IMAGE_HEIGHT),qi=V.getParameter(V.UNPACK_SKIP_PIXELS),yl=V.getParameter(V.UNPACK_SKIP_ROWS),es=V.getParameter(V.UNPACK_SKIP_IMAGES);V.pixelStorei(V.UNPACK_ROW_LENGTH,wt.width),V.pixelStorei(V.UNPACK_IMAGE_HEIGHT,wt.height),V.pixelStorei(V.UNPACK_SKIP_PIXELS,Re),V.pixelStorei(V.UNPACK_SKIP_ROWS,Pe),V.pixelStorei(V.UNPACK_SKIP_IMAGES,Ce),L.isDataTexture||L.isData3DTexture?V.texSubImage3D(Ue,Y,Ie,ft,Pt,ue,ge,Me,Ot,lt,wt.data):X.isCompressedArrayTexture?V.compressedTexSubImage3D(Ue,Y,Ie,ft,Pt,ue,ge,Me,Ot,wt.data):V.texSubImage3D(Ue,Y,Ie,ft,Pt,ue,ge,Me,Ot,lt,wt),V.pixelStorei(V.UNPACK_ROW_LENGTH,Gt),V.pixelStorei(V.UNPACK_IMAGE_HEIGHT,Et),V.pixelStorei(V.UNPACK_SKIP_PIXELS,qi),V.pixelStorei(V.UNPACK_SKIP_ROWS,yl),V.pixelStorei(V.UNPACK_SKIP_IMAGES,es),Y===0&&X.generateMipmaps&&V.generateMipmap(Ue),Ae.unbindTexture()},this.initRenderTarget=function(L){K.get(L).__webglFramebuffer===void 0&&Ne.setupRenderTarget(L)},this.initTexture=function(L){L.isCubeTexture?Ne.setTextureCube(L,0):L.isData3DTexture?Ne.setTexture3D(L,0):L.isDataArrayTexture||L.isCompressedArrayTexture?Ne.setTexture2DArray(L,0):Ne.setTexture2D(L,0),Ae.unbindTexture()},this.resetState=function(){T=0,E=0,M=null,Ae.reset(),Ze.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return cr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===nf?"display-p3":"srgb",t.unpackColorSpace=xt.workingColorSpace===su?"display-p3":"srgb"}}class wD extends ai{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new gr,this.environmentIntensity=1,this.environmentRotation=new gr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}const Wm={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class ED{constructor(e,t,n){const s=this;let a=!1,o=0,l=0,u;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(f){l++,a===!1&&s.onStart!==void 0&&s.onStart(f,o,l),a=!0},this.itemEnd=function(f){o++,s.onProgress!==void 0&&s.onProgress(f,o,l),o===l&&(a=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(f){s.onError!==void 0&&s.onError(f)},this.resolveURL=function(f){return u?u(f):f},this.setURLModifier=function(f){return u=f,this},this.addHandler=function(f,c){return h.push(f,c),this},this.removeHandler=function(f){const c=h.indexOf(f);return c!==-1&&h.splice(c,2),this},this.getHandler=function(f){for(let c=0,d=h.length;c<d;c+=2){const p=h[c],g=h[c+1];if(p.global&&(p.lastIndex=0),p.test(f))return g}return null}}}const TD=new ED;class lf{constructor(e){this.manager=e!==void 0?e:TD,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(s,a){n.load(e,s,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}lf.DEFAULT_MATERIAL_NAME="__DEFAULT";class MD extends lf{constructor(e){super(e)}load(e,t,n,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,o=Wm.get(e);if(o!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o;const l=rl("img");function u(){f(),Wm.add(e,this),t&&t(this),a.manager.itemEnd(e)}function h(c){f(),s&&s(c),a.manager.itemError(e),a.manager.itemEnd(e)}function f(){l.removeEventListener("load",u,!1),l.removeEventListener("error",h,!1)}return l.addEventListener("load",u,!1),l.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),a.manager.itemStart(e),l.src=e,l}}class AD extends lf{constructor(e){super(e)}load(e,t,n,s){const a=new Nn,o=new MD(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){a.image=l,a.needsUpdate=!0,t!==void 0&&t(a)},n,s),a}}const $m=new Zt;class CD{constructor(e,t,n=0,s=1/0){this.ray=new k0(e,t),this.near=n,this.far=s,this.camera=null,this.layers=new sf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return $m.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4($m),this}intersectObject(e,t=!0,n=[]){return ph(e,this,n,t),n.sort(Xm),n}intersectObjects(e,t=!0,n=[]){for(let s=0,a=e.length;s<a;s++)ph(e[s],this,n,t);return n.sort(Xm),n}}function Xm(r,e){return r.distance-e.distance}function ph(r,e,t,n){let s=!0;if(r.layers.test(e.layers)&&r.raycast(e,t)===!1&&(s=!1),s===!0&&n===!0){const a=r.children;for(let o=0,l=a.length;o<l;o++)ph(a[o],e,t,!0)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:tf}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=tf);function Q0(r,e,t){return Math.max(r,Math.min(e,t))}class DD{advance(e){var n;if(!this.isRunning)return;let t=!1;if(this.duration&&this.easing){this.currentTime+=e;const s=Q0(0,this.currentTime/this.duration,1);t=s>=1;const a=t?1:this.easing(s);this.value=this.from+(this.to-this.from)*a}else this.lerp?(this.value=function(a,o,l,u){return function(f,c,d){return(1-d)*f+d*c}(a,o,1-Math.exp(-l*u))}(this.value,this.to,60*this.lerp,e),Math.round(this.value)===this.to&&(this.value=this.to,t=!0)):(this.value=this.to,t=!0);t&&this.stop(),(n=this.onUpdate)==null||n.call(this,this.value,t)}stop(){this.isRunning=!1}fromTo(e,t,{lerp:n,duration:s,easing:a,onStart:o,onUpdate:l}){this.from=this.value=e,this.to=t,this.lerp=n,this.duration=s,this.easing=a,this.currentTime=0,this.isRunning=!0,o==null||o(),this.onUpdate=l}}class PD{constructor({wrapper:e,content:t,autoResize:n=!0,debounce:s=250}={}){Un(this,"resize",()=>{this.onWrapperResize(),this.onContentResize()});Un(this,"onWrapperResize",()=>{this.wrapper===window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)});Un(this,"onContentResize",()=>{this.wrapper===window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)});this.wrapper=e,this.content=t,n&&(this.debouncedResize=function(o,l){let u;return function(){let h=arguments,f=this;clearTimeout(u),u=setTimeout(function(){o.apply(f,h)},l)}}(this.resize,s),this.wrapper===window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){var e,t;(e=this.wrapperResizeObserver)==null||e.disconnect(),(t=this.contentResizeObserver)==null||t.disconnect(),window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}class ev{constructor(){this.events={}}emit(e,...t){let n=this.events[e]||[];for(let s=0,a=n.length;s<a;s++)n[s](...t)}on(e,t){var n;return(n=this.events[e])!=null&&n.push(t)||(this.events[e]=[t]),()=>{var s;this.events[e]=(s=this.events[e])==null?void 0:s.filter(a=>t!==a)}}off(e,t){var n;this.events[e]=(n=this.events[e])==null?void 0:n.filter(s=>t!==s)}destroy(){this.events={}}}const qm=100/6;class RD{constructor(e,{wheelMultiplier:t=1,touchMultiplier:n=1}){Un(this,"onTouchStart",e=>{const{clientX:t,clientY:n}=e.targetTouches?e.targetTouches[0]:e;this.touchStart.x=t,this.touchStart.y=n,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:e})});Un(this,"onTouchMove",e=>{const{clientX:t,clientY:n}=e.targetTouches?e.targetTouches[0]:e,s=-(t-this.touchStart.x)*this.touchMultiplier,a=-(n-this.touchStart.y)*this.touchMultiplier;this.touchStart.x=t,this.touchStart.y=n,this.lastDelta={x:s,y:a},this.emitter.emit("scroll",{deltaX:s,deltaY:a,event:e})});Un(this,"onTouchEnd",e=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:e})});Un(this,"onWheel",e=>{let{deltaX:t,deltaY:n,deltaMode:s}=e;t*=s===1?qm:s===2?this.windowWidth:1,n*=s===1?qm:s===2?this.windowHeight:1,t*=this.wheelMultiplier,n*=this.wheelMultiplier,this.emitter.emit("scroll",{deltaX:t,deltaY:n,event:e})});Un(this,"onWindowResize",()=>{this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight});this.element=e,this.wheelMultiplier=t,this.touchMultiplier=n,this.touchStart={x:null,y:null},this.emitter=new ev,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})}on(e,t){return this.emitter.on(e,t)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.removeEventListener("touchend",this.onTouchEnd,{passive:!1})}}class LD{constructor({wrapper:e=window,content:t=document.documentElement,wheelEventsTarget:n=e,eventsTarget:s=n,smoothWheel:a=!0,syncTouch:o=!1,syncTouchLerp:l=.075,touchInertiaMultiplier:u=35,duration:h,easing:f=b=>Math.min(1,1.001-Math.pow(2,-10*b)),lerp:c=.1,infinite:d=!1,orientation:p="vertical",gestureOrientation:g="vertical",touchMultiplier:v=1,wheelMultiplier:_=1,autoResize:m=!0,prevent:y=!1,__experimental__naiveDimensions:x=!1}={}){this.__isScrolling=!1,this.__isStopped=!1,this.__isLocked=!1,this.direction=0,this.onPointerDown=b=>{b.button===1&&this.reset()},this.onVirtualScroll=({deltaX:b,deltaY:T,event:E})=>{if(E.ctrlKey)return;const M=E.type.includes("touch"),A=E.type.includes("wheel");if(this.isTouching=E.type==="touchstart"||E.type==="touchmove",this.options.syncTouch&&M&&E.type==="touchstart"&&!this.isStopped&&!this.isLocked)return void this.reset();const S=b===0&&T===0,w=this.options.gestureOrientation==="vertical"&&T===0||this.options.gestureOrientation==="horizontal"&&b===0;if(S||w)return;let C=E.composedPath();C=C.slice(0,C.indexOf(this.rootElement));const D=this.options.prevent;if(C.find(z=>{var O,I,j,N,q;return z instanceof Element&&((typeof D=="function"?D==null?void 0:D(z):D)||((O=z.hasAttribute)===null||O===void 0?void 0:O.call(z,"data-lenis-prevent"))||M&&((I=z.hasAttribute)===null||I===void 0?void 0:I.call(z,"data-lenis-prevent-touch"))||A&&((j=z.hasAttribute)===null||j===void 0?void 0:j.call(z,"data-lenis-prevent-wheel"))||((N=z.classList)===null||N===void 0?void 0:N.contains("lenis"))&&!(!((q=z.classList)===null||q===void 0)&&q.contains("lenis-stopped")))}))return;if(this.isStopped||this.isLocked)return void E.preventDefault();if(!(this.options.syncTouch&&M||this.options.smoothWheel&&A))return this.isScrolling="native",void this.animate.stop();E.preventDefault();let R=T;this.options.gestureOrientation==="both"?R=Math.abs(T)>Math.abs(b)?T:b:this.options.gestureOrientation==="horizontal"&&(R=b);const F=M&&this.options.syncTouch,k=M&&E.type==="touchend"&&Math.abs(R)>5;k&&(R=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+R,Object.assign({programmatic:!1},F?{lerp:k?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}))},this.onNativeScroll=()=>{if(clearTimeout(this.__resetVelocityTimeout),delete this.__resetVelocityTimeout,this.__preventNextNativeScrollEvent)delete this.__preventNextNativeScrollEvent;else if(this.isScrolling===!1||this.isScrolling==="native"){const b=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity,this.velocity=this.animatedScroll-b,this.direction=Math.sign(this.animatedScroll-b),this.isScrolling="native",this.emit(),this.velocity!==0&&(this.__resetVelocityTimeout=setTimeout(()=>{this.lastVelocity=this.velocity,this.velocity=0,this.isScrolling=!1,this.emit()},400))}},window.lenisVersion="1.1.4",e&&e!==document.documentElement&&e!==document.body||(e=window),this.options={wrapper:e,content:t,wheelEventsTarget:n,eventsTarget:s,smoothWheel:a,syncTouch:o,syncTouchLerp:l,touchInertiaMultiplier:u,duration:h,easing:f,lerp:c,infinite:d,gestureOrientation:g,orientation:p,touchMultiplier:v,wheelMultiplier:_,autoResize:m,prevent:y,__experimental__naiveDimensions:x},this.animate=new DD,this.emitter=new ev,this.dimensions=new PD({wrapper:e,content:t,autoResize:m}),this.updateClassName(),this.userData={},this.time=0,this.velocity=this.lastVelocity=0,this.isLocked=!1,this.isStopped=!1,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.addEventListener("pointerdown",this.onPointerDown,!1),this.virtualScroll=new RD(s,{touchMultiplier:v,wheelMultiplier:_}),this.virtualScroll.on("scroll",this.onVirtualScroll)}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.removeEventListener("pointerdown",this.onPointerDown,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.cleanUpClassName()}on(e,t){return this.emitter.on(e,t)}off(e,t){return this.emitter.off(e,t)}setScroll(e){this.isHorizontal?this.rootElement.scrollLeft=e:this.rootElement.scrollTop=e}resize(){this.dimensions.resize()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity=0,this.animate.stop()}start(){this.isStopped&&(this.isStopped=!1,this.reset())}stop(){this.isStopped||(this.isStopped=!0,this.animate.stop(),this.reset())}raf(e){const t=e-(this.time||e);this.time=e,this.animate.advance(.001*t)}scrollTo(e,{offset:t=0,immediate:n=!1,lock:s=!1,duration:a=this.options.duration,easing:o=this.options.easing,lerp:l=this.options.lerp,onStart:u,onComplete:h,force:f=!1,programmatic:c=!0,userData:d={}}={}){if(!this.isStopped&&!this.isLocked||f){if(typeof e=="string"&&["top","left","start"].includes(e))e=0;else if(typeof e=="string"&&["bottom","right","end"].includes(e))e=this.limit;else{let p;if(typeof e=="string"?p=document.querySelector(e):e instanceof HTMLElement&&(e!=null&&e.nodeType)&&(p=e),p){if(this.options.wrapper!==window){const v=this.rootElement.getBoundingClientRect();t-=this.isHorizontal?v.left:v.top}const g=p.getBoundingClientRect();e=(this.isHorizontal?g.left:g.top)+this.animatedScroll}}if(typeof e=="number"&&(e+=t,e=Math.round(e),this.options.infinite?c&&(this.targetScroll=this.animatedScroll=this.scroll):e=Q0(0,e,this.limit),e!==this.targetScroll)){if(this.userData=d,n)return this.animatedScroll=this.targetScroll=e,this.setScroll(this.scroll),this.reset(),this.preventNextNativeScrollEvent(),this.emit(),h==null||h(this),void(this.userData={});c||(this.targetScroll=e),this.animate.fromTo(this.animatedScroll,e,{duration:a,easing:o,lerp:l,onStart:()=>{s&&(this.isLocked=!0),this.isScrolling="smooth",u==null||u(this)},onUpdate:(p,g)=>{this.isScrolling="smooth",this.lastVelocity=this.velocity,this.velocity=p-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=p,this.setScroll(this.scroll),c&&(this.targetScroll=p),g||this.emit(),g&&(this.reset(),this.emit(),h==null||h(this),this.userData={},this.preventNextNativeScrollEvent())}})}}}preventNextNativeScrollEvent(){this.__preventNextNativeScrollEvent=!0,requestAnimationFrame(()=>{delete this.__preventNextNativeScrollEvent})}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}get scroll(){return this.options.infinite?function(t,n){return(t%n+n)%n}(this.animatedScroll,this.limit):this.animatedScroll}get progress(){return this.limit===0?1:this.scroll/this.limit}get isScrolling(){return this.__isScrolling}set isScrolling(e){this.__isScrolling!==e&&(this.__isScrolling=e,this.updateClassName())}get isStopped(){return this.__isStopped}set isStopped(e){this.__isStopped!==e&&(this.__isStopped=e,this.updateClassName())}get isLocked(){return this.__isLocked}set isLocked(e){this.__isLocked!==e&&(this.__isLocked=e,this.updateClassName())}get isSmooth(){return this.isScrolling==="smooth"}get className(){let e="lenis";return this.isStopped&&(e+=" lenis-stopped"),this.isLocked&&(e+=" lenis-locked"),this.isScrolling&&(e+=" lenis-scrolling"),this.isScrolling==="smooth"&&(e+=" lenis-smooth"),e}updateClassName(){this.cleanUpClassName(),this.rootElement.className=`${this.rootElement.className} ${this.className}`.trim()}cleanUpClassName(){this.rootElement.className=this.rootElement.className.replace(/lenis(-\w+)?/g,"").trim()}}/*!
 * ScrollToPlugin 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var On,tv,hr,Hi,$r,nv,iv,sc,rv=function(){return typeof window<"u"},sv=function(){return On||rv()&&(On=window.gsap)&&On.registerPlugin&&On},av=function(e){return typeof e=="string"},Ym=function(e){return typeof e=="function"},sl=function(e,t){var n=t==="x"?"Width":"Height",s="scroll"+n,a="client"+n;return e===hr||e===Hi||e===$r?Math.max(Hi[s],$r[s])-(hr["inner"+n]||Hi[a]||$r[a]):e[s]-e["offset"+n]},al=function(e,t){var n="scroll"+(t==="x"?"Left":"Top");return e===hr&&(e.pageXOffset!=null?n="page"+t.toUpperCase()+"Offset":e=Hi[n]!=null?Hi:$r),function(){return e[n]}},ID=function(e,t,n,s){if(Ym(e)&&(e=e(t,n,s)),typeof e!="object")return av(e)&&e!=="max"&&e.charAt(1)!=="="?{x:e,y:e}:{y:e};if(e.nodeType)return{y:e,x:e};var a={},o;for(o in e)a[o]=o!=="onAutoKill"&&Ym(e[o])?e[o](t,n,s):e[o];return a},ov=function(e,t){if(e=nv(e)[0],!e||!e.getBoundingClientRect)return console.warn("scrollTo target doesn't exist. Using 0")||{x:0,y:0};var n=e.getBoundingClientRect(),s=!t||t===hr||t===$r,a=s?{top:Hi.clientTop-(hr.pageYOffset||Hi.scrollTop||$r.scrollTop||0),left:Hi.clientLeft-(hr.pageXOffset||Hi.scrollLeft||$r.scrollLeft||0)}:t.getBoundingClientRect(),o={x:n.left-a.left,y:n.top-a.top};return!s&&t&&(o.x+=al(t,"x")(),o.y+=al(t,"y")()),o},jm=function(e,t,n,s,a){return!isNaN(e)&&typeof e!="object"?parseFloat(e)-a:av(e)&&e.charAt(1)==="="?parseFloat(e.substr(2))*(e.charAt(0)==="-"?-1:1)+s-a:e==="max"?sl(t,n)-a:Math.min(sl(t,n),ov(e,t)[n]-a)},Km=function(){On=sv(),rv()&&On&&typeof document<"u"&&document.body&&(hr=window,$r=document.body,Hi=document.documentElement,nv=On.utils.toArray,On.config({autoKillThreshold:7}),iv=On.config(),tv=1)},vl={version:"3.12.5",name:"scrollTo",rawVars:1,register:function(e){On=e,Km()},init:function(e,t,n,s,a){tv||Km();var o=this,l=On.getProperty(e,"scrollSnapType");o.isWin=e===hr,o.target=e,o.tween=n,t=ID(t,s,e,a),o.vars=t,o.autoKill=!!t.autoKill,o.getX=al(e,"x"),o.getY=al(e,"y"),o.x=o.xPrev=o.getX(),o.y=o.yPrev=o.getY(),sc||(sc=On.core.globals().ScrollTrigger),On.getProperty(e,"scrollBehavior")==="smooth"&&On.set(e,{scrollBehavior:"auto"}),l&&l!=="none"&&(o.snap=1,o.snapInline=e.style.scrollSnapType,e.style.scrollSnapType="none"),t.x!=null?(o.add(o,"x",o.x,jm(t.x,e,"x",o.x,t.offsetX||0),s,a),o._props.push("scrollTo_x")):o.skipX=1,t.y!=null?(o.add(o,"y",o.y,jm(t.y,e,"y",o.y,t.offsetY||0),s,a),o._props.push("scrollTo_y")):o.skipY=1},render:function(e,t){for(var n=t._pt,s=t.target,a=t.tween,o=t.autoKill,l=t.xPrev,u=t.yPrev,h=t.isWin,f=t.snap,c=t.snapInline,d,p,g,v,_;n;)n.r(e,n.d),n=n._next;d=h||!t.skipX?t.getX():l,p=h||!t.skipY?t.getY():u,g=p-u,v=d-l,_=iv.autoKillThreshold,t.x<0&&(t.x=0),t.y<0&&(t.y=0),o&&(!t.skipX&&(v>_||v<-_)&&d<sl(s,"x")&&(t.skipX=1),!t.skipY&&(g>_||g<-_)&&p<sl(s,"y")&&(t.skipY=1),t.skipX&&t.skipY&&(a.kill(),t.vars.onAutoKill&&t.vars.onAutoKill.apply(a,t.vars.onAutoKillParams||[]))),h?hr.scrollTo(t.skipX?d:t.x,t.skipY?p:t.y):(t.skipY||(s.scrollTop=t.y),t.skipX||(s.scrollLeft=t.x)),f&&(e===1||e===0)&&(p=s.scrollTop,d=s.scrollLeft,c?s.style.scrollSnapType=c:s.style.removeProperty("scroll-snap-type"),s.scrollTop=p+1,s.scrollLeft=d+1,s.scrollTop=p,s.scrollLeft=d),t.xPrev=t.x,t.yPrev=t.y,sc&&sc.update()},kill:function(e){var t=e==="scrollTo",n=this._props.indexOf(e);return(t||e==="scrollTo_x")&&(this.skipX=1),(t||e==="scrollTo_y")&&(this.skipY=1),n>-1&&this._props.splice(n,1),!this._props.length}};vl.max=sl;vl.getOffset=ov;vl.buildGetter=al;sv()&&On.registerPlugin(vl);we.registerPlugin(vl);we.registerPlugin($e);Za.create("cubic",".83,0,.17,1");class FD{constructor(e,t){this.container=e,this.lenis=t,this.timeBody=e.closest("body"),this.canvasContainer=e.querySelector(".canvas-container"),this.scene=new wD,this.camera=new fi(75,window.innerWidth/window.innerHeight,.1,1e3),this.renderer=new SD({antialias:!0,alpha:!0}),this.buttons=e.querySelectorAll(".t-button"),this.imagePlanes=[],this.totalHeight=30,this.radius=14,this.timeDetails=this.createTimeDetails(),this.imageUrls=this.createImageUrls(),this.spacing=this.imageUrls.length*(2.4/this.imageUrls.length),this.futureButton=this.container.querySelector("#futureBtn"),this.presentButton=this.container.querySelector("#presentBtn"),this.pastButton=this.container.querySelector("#pastBtn"),this.init()}createTimeDetails(){const e=this.container.querySelectorAll(".time-item");return Array.from(e).map(t=>({name:t.getAttribute("data-name"),date:new Date(t.getAttribute("data-date")),url:t.querySelector(".time-images-item img").src}))}createImageUrls(){const e=new Date,t=e.getFullYear(),n=this.timeDetails.filter(l=>l.date>e),s=this.timeDetails.filter(l=>l.date.getFullYear()===t),a=this.timeDetails.filter(l=>l.date<e&&l.date.getFullYear()<t),o="https://uploads-ssl.webflow.com/6634c23145c0a86a4c0bda23/66980aae24b1079be6088598_nothing%20(1).webp";return this.futureURL="https://uploads-ssl.webflow.com/6634c23145c0a86a4c0bda23/66980aae8571e1b46c07a916_future%20(1).webp",this.presentURL="https://uploads-ssl.webflow.com/6634c23145c0a86a4c0bda23/66980aae4f652f0ccf9f5ea6_present%20(1).webp",this.pastURL="https://uploads-ssl.webflow.com/6634c23145c0a86a4c0bda23/66980aae618cde95e2e61b63_past%20(1).webp",[this.futureURL,...n.length>0?n.map(l=>l.url):[o],this.presentURL,...s.length>0?s.map(l=>l.url):[o],this.pastURL,...a.map(l=>l.url)]}init(){we.fromTo(this.canvasContainer,{opacity:0},{opacity:1,duration:1,ease:"expo.in"}),this.setupRenderer(),this.createImagePlanes(),this.setupCamera(),this.setupResizeListener(),this.setupButtonListeners(),this.initSwiper(),this.setupRaycaster(),we.to(this.buttons,{opacity:1,duration:1.25,ease:"expo.in"}),we.fromTo(".sm-dot",{opacity:0,yPercent:50},{opacity:1,yPercent:0,duration:1,stagger:{amount:1,from:"center"},ease:"expo.in",delay:.5}),this.animate()}setupRenderer(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor(16777215,0),this.canvasContainer.appendChild(this.renderer.domElement)}createImagePlanes(){const e=new AD,t=s=>new Promise(a=>{e.load(s,o=>{o.colorSpace=Ti,o.minFilter=ni,o.magFilter=ni,o.format=Ci,a(o)})}),n=(s,a,o)=>{const l=s.image.width/s.image.height,u=2.5,h=u*l,f=o===this.futureURL||o===this.presentURL||o===this.pastURL,c=new af({map:s,side:Ni,transparent:f}),d=new _l(h,u),p=new zi(d,c),g=a*this.spacing;p.position.set(this.radius*Math.sin(g/this.totalHeight*Math.PI*2),g,this.radius*Math.cos(g/this.totalHeight*Math.PI*2)),p.rotation.y=Math.PI/90,this.scene.add(p),this.imagePlanes.push(p)};Promise.all(this.imageUrls.map(t)).then(s=>{s.forEach((a,o)=>{n(a,o,this.imageUrls[o])}),this.setupInitialPositions(),this.animateInitialPositions()})}getYearFromUrl(e){const t=this.timeDetails[e];return t?t.date.getFullYear():null}setupCamera(){this.camera.position.set(0,0,20)}setupInitialPositions(){this.imagePlanes.forEach((e,t)=>{const n=t*this.spacing+this.totalHeight;e.position.set(this.radius*Math.sin(n/this.totalHeight*Math.PI*2),n,this.radius*Math.cos(n/this.totalHeight*Math.PI*2)),e.material.opacity=0})}animateInitialPositions(){const t=we.timeline({onComplete:()=>{this.setupScrollAnimation()}});t.to({},{duration:2.5,onUpdate:()=>{const s=(1-t.progress())*this.totalHeight*2;this.imagePlanes.forEach((a,o)=>{const l=o*this.spacing-s,u=this.radius*Math.sin(l/this.totalHeight*Math.PI*2),h=this.radius*Math.cos(l/this.totalHeight*Math.PI*2);we.to(a.position,{y:l,x:u,z:h});const f=(l+this.totalHeight/2)/this.totalHeight;we.to(a.material,{opacity:Math.max(0,Math.min(1,1-Math.abs(f-.5)*2))})}),this.renderer.render(this.scene,this.camera)},ease:"expo.inOut"})}setupScrollAnimation(){const e=this.imageUrls.length*10;let t=null;const n=new Date;document.querySelector(".time-year").textContent=`${n.getFullYear()}`,we.to(".time-year",{duration:.5,opacity:1,ease:"expo.in"}),we.to(this.imagePlanes,{duration:1,scrollTrigger:{trigger:this.timeBody,start:"top top",end:`+=${e}%`,scrub:!0,pin:!0},onUpdate:()=>{const s=window.scrollY/window.innerHeight*this.totalHeight,a=Math.round(s/this.spacing);if(a>=0&&a<this.imagePlanes.length){const l=this.imagePlanes[a].material.map.image.src,u=this.getYearFromUrl(a);u&&u!==t?(document.querySelector(".time-year").textContent=u,t=u):!u&&["future","present","past"].some(h=>l.includes(h))&&(t=null)}this.imagePlanes.forEach((o,l)=>{const u=l*this.spacing-s;o.position.y=u,o.position.x=this.radius*Math.sin(u/this.totalHeight*Math.PI*2),o.position.z=this.radius*Math.cos(u/this.totalHeight*Math.PI*2);const h=(u+this.totalHeight/2)/this.totalHeight;o.material.opacity=Math.max(0,Math.min(1,1-Math.abs(h-.5)*2))}),this.renderer.render(this.scene,this.camera)}})}setupResizeListener(){window.addEventListener("resize",this.onWindowResize.bind(this),!1)}onWindowResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}setupButtonListeners(){this.futureButton.addEventListener("click",()=>this.scrollToImage(0)),this.presentButton.addEventListener("click",()=>this.scrollToImage(this.imageUrls.indexOf(this.presentURL))),this.pastButton.addEventListener("click",()=>this.scrollToImage(this.imageUrls.indexOf(this.pastURL)));let e=we.timeline({paused:!0});e.to(".time-item",{opacity:0,duration:1,zIndex:1,ease:"expo.out"}).to(".time-main-wrapper",{clipPath:"polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%)",duration:1,ease:"expo.in"},"<"),document.querySelector(".time-back-btn").addEventListener("click",()=>{e.restart(),this.lenis.start()})}scrollToImage(e){const n=e*this.spacing*window.innerHeight/this.totalHeight,s=window.scrollY;we.fromTo(window,{scrollTo:{y:s}},{duration:2,scrollTo:{y:n},ease:"power2"})}animate(){requestAnimationFrame(this.animate.bind(this)),this.renderer.render(this.scene,this.camera)}initSwiper(){new Rn(".swiper",{slidesPerView:"auto",spaceBetween:24,loop:!0,centeredSlides:!0})}setupRaycaster(){this.raycaster=new CD,this.mouse=new gt,this.canvasContainer.addEventListener("mousemove",this.onMouseMove.bind(this),!1),this.canvasContainer.addEventListener("click",this.onClick.bind(this),!1)}onMouseMove(e){const t=this.canvasContainer.getBoundingClientRect();this.mouse.x=(e.clientX-t.left)/t.width*2-1,this.mouse.y=-((e.clientY-t.top)/t.height)*2+1,this.checkIntersection()}onClick(e){const t=this.canvasContainer.getBoundingClientRect();this.mouse.x=(e.clientX-t.left)/t.width*2-1,this.mouse.y=-((e.clientY-t.top)/t.height)*2+1,this.checkIntersection(!0)}checkIntersection(e=!1){this.raycaster.setFromCamera(this.mouse,this.camera);const t=this.raycaster.intersectObjects(this.imagePlanes);let n=!1;if(t.length>0){t.sort((s,a)=>s.distance-a.distance);for(let s of t){const a=s.object;if(a.material.opacity>.1){const o=this.getNameFromPlane(a);e?(we.timeline().to(`[data-name='${CSS.escape(o)}']`,{opacity:1,zIndex:3,duration:.5,ease:"expo.out"}).to(".time-main-wrapper",{clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",duration:1,ease:"expo.out"},"<"),this.lenis.stop()):o!=="Future"&&o!=="Present"&&o!=="Past"&&o!=="Unknown"&&(we.to(this.container,{cursor:"pointer",duration:.1}),n=!0);break}}}n||we.to(this.container,{cursor:"default",duration:.1})}getNameFromPlane(e){const t=this.imagePlanes.indexOf(e);return this.getNameFromUrl(t)}getNameFromUrl(e){if(e<0||e>=this.imageUrls.length)return"Unknown";const t=this.imageUrls[e];if(t.includes(this.futureURL))return"Future";if(t.includes(this.presentURL))return"Present";if(t.includes(this.pastURL))return"Past";const n=this.timeDetails.find(s=>s.url===t);return n?n.name:"Unknown"}}const mh=new LD({smooth:!0}),lv=r=>{mh.raf(r),requestAnimationFrame(lv)};requestAnimationFrame(lv);we.config({nullTargetWarn:!1});function OD(r){const t=new DOMParser().parseFromString(r.next.html,"text/html"),n=t.querySelector("html").getAttribute("data-wf-page"),s=t.querySelector("html").getAttribute("data-wf-site");document.querySelector("html").setAttribute("data-wf-page",n),window.Webflow&&(window.Webflow.destroy(),window.Webflow.ready(),window.Webflow.require("commerce").init({siteId:s}),window.Webflow.require("ix2").init())}let Zm=!0;qc.hooks.beforeLeave(r=>{});qc.hooks.enter(r=>{we.set([r.next.container,r.current.container],{position:"fixed",top:0,left:0,width:"100%",height:"100vh"})});qc.hooks.after(r=>{we.set(r.next.container,{position:"relative",height:"auto"}),OD(r),$e.refresh()});qc.init({preventRunning:!0,views:[{namespace:"home",afterEnter(r){Zm&&!sessionStorage.getItem("firstLoad")?(new Mx(r.next.container),Zm=!1):new k_(r.next.container),new rs(r.next.container),new so(r.next.container)}},{namespace:"music",afterEnter(r){new aE(r.next.container),new rs(r.next.container)}},{namespace:"time",afterEnter(r){new FD(r.next.container,mh),new rs(r.next.container)}},{namespace:"about",afterEnter(r){new Ib(r.next.container),new so(r.next.container),new rs(r.next.container)}},{namespace:"shop",afterEnter(r){new Fb(r.next.container),new rs(r.next.container),new so(r.next.container)}},{namespace:"product",afterEnter(r){new Mw(r.next.container),new rs(r.next.container),new so(r.next.container)}},{namespace:"connect",afterEnter(r){new rs(r.next.container),new so(r.next.container)}},{namespace:"404",beforeEnter(){}}],transitions:[{sync:!0,beforeLeave(){mh.start(),we.getTweensOf("*").forEach(r=>{r.revert(),r.kill()}),$e.clearScrollMemory(),$e.getAll().forEach(r=>r.kill()),$e.refresh()},enter(r){const e=r.current.container,t=r.next.container;let n="40%",s=we.timeline({defaults:{ease:"expo.inOut",onComplete:()=>{$e.refresh()}}});return s.set(t,{clipPath:`inset(${n})`,xPercent:120}).set([e.querySelector(".section-transition"),t.querySelector(".section-transition")],{scale:1,duration:.3}).to(e,{clipPath:`inset(${n})`,duration:1}).to(e.querySelector(".section-transition-bg"),{clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",duration:.75},"<").to(e,{xPercent:-120,duration:1}).set(t.querySelector(".section-transition-bg"),{clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)"},"<").to(t,{xPercent:0,duration:1},"<").to(t,{clipPath:"inset(0%)",duration:1}).to(t.querySelector(".section-transition-bg"),{clipPath:"polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%)",ease:"power2.inOut",duration:1.1},"<").to([t.querySelector(".section-transition")],{opacity:0,display:"hidden",duration:1},">").set([t.querySelector(".section-transition")],{opacity:1,scale:0}).set(t,{overflow:"auto",height:"auto",clearProps:"all"}),s}}]});
